(this["webpackJsonpsimsage-admin"]=this["webpackJsonpsimsage-admin"]||[]).push([[0],{128:function(e,t,s){},129:function(e,t,s){},130:function(e,t,s){},131:function(e,t,s){},213:function(e,t,s){},227:function(e,t,s){},228:function(e,t,s){},229:function(e,t,s){},244:function(e,t,s){},245:function(e,t,s){},246:function(e,t,s){},247:function(e,t,s){},248:function(e,t,s){},249:function(e,t,s){},25:function(e,t,s){},250:function(e,t,s){},251:function(e,t,s){},252:function(e,t,s){},253:function(e,t,s){},254:function(e,t,s){},255:function(e,t,s){},256:function(e,t,s){},257:function(e,t,s){},258:function(e,t,s){},259:function(e,t,s){},260:function(e,t,s){},261:function(e,t,s){},406:function(e,t,s){},407:function(e,t,s){},408:function(e,t,s){},409:function(e,t,s){},410:function(e,t,s){},465:function(e,t,s){},469:function(e,t,s){"use strict";s.r(t);var a=s(2),n=s.n(a),r=s(38),i=s.n(r),o=s(14),c=s(183),l=s(18),d=s(1),u=s(13),p=s(177),h=s(178),m=s(179),b=s(9),j=s(4),g=s(5),f=s(40),v=s.n(f);function _(){return{selected_tab:"organisations",notification_list:[],show_notifications:!1,operator_wait_timeout_in_ms:1e4,notification_list_display_size:50,selected_organisation_id:"",selected_organisation:"",organisation_filter:"",organisation_list:[],selected_knowledgebase:null,selected_knowledgebase_id:"",knowledge_base_list:[],edge_device_list:[],selected_edge_device:null,selected_edge_device_id:"",edge_device_command_list:[],inventorize_list:[],inventorize_busy:!1,user_list:[],user_filter:"",crawler_list:[],theme:window.ENV.theme,busy:!1,uploading:!1,session:null,user:null,license:null,document_list:[],document_previous:null,document_filter:"",prev_document_filter:"",document_page:0,document_page_size:5,num_documents:0,document_nav_list:["null"],mind_item_list:[],mind_item_previous:null,mind_item_filter:"",mind_item_page:0,mind_item_page_size:5,num_mind_items:0,prev_mind_item_filter:"",mind_item_nav_list:["null"],bot_query:"",mind_result_list:[],bot_query_page_size:10,bot_query_threshold:.01,synonym_list:[],synonym_prev_id:null,synonym_filter:"",synonym_page:0,synonym_page_size:5,num_synonyms:0,prev_synonym_filter:"",synonym_nav_list:["null"],semantic_list:[],semantic_prev_id:null,semantic_filter:"",semantic_page:0,semantic_page_size:5,num_semantics:0,prev_semantic_filter:"",semantic_nav_list:["null"],synset_filter:"",synset_list:[],synset_page:0,synset_page_size:10,synset_total_size:0,report_date:N.toIsoDate((new Date).getUTCDate()),report_num_items:20,access_frequency:{labels:[]},general_statistics:[],query_word_frequency:[],file_type_statistics:[],operators:[N.createOperator()],num_active_connections:0,operator_connected:!1,html5_notifications:"",group_list:[],group_filter:"",prev_group_filter:"",group_count:0,group_page:0,group_page_size:5,log_list:[],log_date:N.toIsoDateTime(new Date),log_hours:2,log_type:"All",log_service:"All",log_refresh:0,domain_list:[],semantic_display_category_list:[],defined_semantic_list:[],error_title:"Error",error:""}}function y(){try{var e=localStorage.getItem("https://simsage.ai/state");return null===e||window.location.href.endsWith("/#/")?{appReducer:_()}:JSON.parse(e)}catch(t){return{appReducer:_()}}}function x(e){try{var t=JSON.stringify(e);localStorage.setItem("https://simsage.ai/state",t)}catch(s){}}var O=function(){function e(){Object(j.a)(this,e)}return Object(g.a)(e,null,[{key:"http_post",value:function(t,s,a,n){var r=window.ENV.api_base;console.log("POST "+r+t),v.a.post(r+t,s,e.getHeaders()).then((function(e){a&&a(e)})).catch((function(t){n&&(void 0===t.response?n("Servers not responding or cannot contact Servers"):n(e.get_error(t)))}))}},{key:"http_put",value:function(t,s,a,n){var r=window.ENV.api_base;console.log("PUT "+r+t),v.a.put(r+t,s,e.getHeaders()).then((function(e){a&&a(e)})).catch((function(t){n&&(void 0===t.response?n("Servers not responding or cannot contact Servers"):n(e.get_error(t)))}))}},{key:"http_get",value:function(t,s,a){var n=window.ENV.api_base;return"/stats/stats/os"!==t&&console.log("GET "+n+t),v.a.get(n+t,e.getHeaders()).then((function(e){s&&s(e)})).catch((function(t){a&&(void 0===t.response?a("Servers not responding or cannot contact Servers"):a(e.get_error(t)))}))}},{key:"http_delete",value:function(t,s,a){var n=window.ENV.api_base;console.log("DELETE "+n+t),v.a.delete(n+t,e.getHeaders()).then((function(e){s&&s(e)})).catch((function(t){a&&(void 0===t||void 0===t.response?a("Servers not responding or cannot contact Servers"):a(e.get_error(t)))}))}},{key:"download_backup",value:function(t,s){e.http_put("/auth/ott/"+encodeURIComponent(t),{},(function(a){var n=window.ENV.api_base+"/backup/backup/"+encodeURIComponent(t)+"/"+encodeURIComponent(s);e.download_new_window_post(n,a.data)}))}},{key:"download_mind_dump",value:function(t,s){e.http_put("/auth/ott/"+encodeURIComponent(t),{},(function(a){var n=window.ENV.api_base+"/backup/mind-dump/"+encodeURIComponent(t)+"/"+encodeURIComponent(s);e.download_new_window_post(n,a.data)}))}},{key:"download_inventorize_dump",value:function(t,s,a){e.http_put("/auth/ott/"+encodeURIComponent(t),{},(function(n){var r=window.ENV.api_base+"/document/parquet/"+encodeURIComponent(t)+"/"+encodeURIComponent(s)+"/"+encodeURIComponent(a);e.download_new_window_post(r,n.data)}))}},{key:"download_inventorize_dump_spreadhseet",value:function(t,s,a){e.http_put("/auth/ott/"+encodeURIComponent(t),{},(function(n){var r=window.ENV.api_base+"/document/spreadsheet/"+encodeURIComponent(t)+"/"+encodeURIComponent(s)+"/"+encodeURIComponent(a);e.download_new_window_post(r,n.data)}))}},{key:"download_query_log",value:function(t,s,a,n){e.http_put("/auth/ott/"+encodeURIComponent(t),{},(function(r){var i=window.ENV.api_base+"/stats/query-logs/"+encodeURIComponent(t)+"/"+encodeURIComponent(s)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(n);e.download_new_window_post(i,r.data)}))}},{key:"download_export_archive",value:function(t,s,a){e.http_put("/auth/ott/"+encodeURIComponent(t),{},(function(n){var r=window.ENV.api_base+"/crawler/wp-archive/download/"+encodeURIComponent(t)+"/"+encodeURIComponent(s)+"/"+encodeURIComponent(a);e.download_new_window_post(r,n.data)}))}},{key:"toUrl",value:function(e){return window.ENV.api_base+e}},{key:"download_new_window_post",value:function(e,t){var s=document.createElement("form");s.style="display: none;",s.target="_blank",s.method="POST",s.action=e+"?ott="+encodeURIComponent(t);var a=document.createElement("input");a.type="text",a.name="name",a.value="value",s.appendChild(a),document.body.appendChild(s),s.submit()}},{key:"get_error",value:function(e){if("string"===typeof e&&0===e.indexOf("{")){var t=JSON.parse(e);return t&&t.response&&t.response.data&&t.response.data.error?t.response.data.error:e}return e&&e.response&&e.response.data&&e.response.data.error?e.response.data.error:e}},{key:"getISODate",value:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}},{key:"getSession",value:function(){var e=y();return e&&e.appReducer&&e.appReducer.session&&e.appReducer.session.id?e.appReducer.session:null}},{key:"getHeaders",value:function(){var t=e.getSession();return t&&t.id?{headers:{"API-Version":window.ENV.api_version,"Content-Type":"application/json","Session-Id":t.id}}:{headers:{"API-Version":window.ENV.api_version,"Content-Type":"application/json"}}}}]),e}(),k=O,w=function(){function e(){Object(j.a)(this,e)}return Object(g.a)(e,null,[{key:"defined",value:function(e){return null!==e&&void 0!==e}},{key:"createGuid",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"createOperator",value:function(){return{id:e.createGuid(),conversation_list:[],operator_ready:!1,question_id:"",question:"",answer_id:"",answer:"",client_id:"",client_kb_id:"",client_kb_name:"",is_typing:!1,typing_time:0,current_question:"",prev_answer:""}}},{key:"formatSizeUnits",value:function(e){return e>=1073741824?e=(e/1073741824).toFixed(2)+" GB":e>=1048576?e=(e/1048576).toFixed(2)+" MB":e>=1024?e=(e/1024).toFixed(2)+" KB":e>1?e+=" bytes":1===e?e+=" byte":e="0 bytes",e}},{key:"unixTimeConvert",value:function(t){if(t>1e3){var s=new Date(t),a=s.getUTCFullYear(),n=s.getUTCMonth()+1,r=s.getUTCDate(),i=s.getUTCHours(),o=s.getUTCMinutes(),c=s.getUTCSeconds();return a+"/"+e.pad2(n)+"/"+e.pad2(r)+" "+e.pad2(i)+":"+e.pad2(o)+":"+e.pad2(c)}return""}},{key:"getSystemTime",value:function(){return(new Date).getTime()}},{key:"toIsoDate",value:function(t){t&&t.getFullYear||(t=new Date);var s=t.getFullYear(),a=t.getMonth()+1,n=t.getDate();return s+"-"+e.pad2(a)+"-"+e.pad2(n)+"T00:00:00.000"}},{key:"toIsoDateTime",value:function(t){t&&t.getFullYear||(t=new Date);var s=t.getFullYear(),a=t.getMonth()+1,n=t.getDate(),r=t.getHours()+0;return r<0&&(r+=24),r>=24&&(r-=24),s+"-"+e.pad2(a)+"-"+e.pad2(n)+"T"+e.pad2(r)+":00:00.000"}},{key:"pad2",value:function(e){return(""+e).padStart(2,"0")}},{key:"setupTimer",value:function(){return!0}},{key:"merge_notifications",value:function(e,t){var s={},a=[];if(e){var n,r=Object(b.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;s[i.id]=!0,a.push(i)}}catch(d){r.e(d)}finally{r.f()}}if(t){var o,c=Object(b.a)(t);try{for(c.s();!(o=c.n()).done;){var l=o.value;s.hasOwnProperty(l.id)||(s[l.id]=!0,a.push(l))}}catch(d){c.e(d)}finally{c.f()}}return a}},{key:"getThemeColour",value:function(e){return"light"===e?"#2a2a2e":"#e0e0e0"}},{key:"getThemeBackground",value:function(e){return"light"===e?"#ffffff":"#2a2a2e"}},{key:"passwordResetRequest",value:function(e,t,s){e&&e.length>0?O.http_post("/auth/reset-password-request",{email:e},(function(e){t(e.data.session,e.data.user)}),(function(e){s(e)})):s("you must provide your SimSage email address")}},{key:"resetPassword",value:function(e,t,s,a,n){if(e&&e.length>0&&t.length>0){var r={email:e,password:t,resetId:s};O.http_post("/auth/reset-password",r,(function(e){a(e.data.session,e.data.user)}),(function(e){n(e)}))}else n("please complete and check all fields")}},{key:"getUser",value:function(){var e=localStorage.getItem("user");return e&&e.startsWith("{")?JSON.parse(e):null}},{key:"uploadDocument",value:function(e,t,s){O.http_put("/document/upload",e,(function(e){t(e.data)}),(function(e){s(e)}))}},{key:"testCrawler",value:function(e,t,s,a,n){O.http_get("/crawler/crawler/test/"+encodeURIComponent(e)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(s),(function(e){e.data&&e.data.errorStr&&e.data.errorStr.length>0?n(e.data.errorStr):a(e.data)}),(function(e){n(e)}))}},{key:"semanticSearch",value:function(e,t,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,r=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;O.http_put("/semantic/search",{organisationId:e,kbId:t,botQuery:s,superSearch:s,numResults:a,scoreThreshold:n},(function(e){r(e.data)}),(function(e){i(e)}))}},{key:"writeToClipboard",value:function(e){return!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText)&&(navigator.clipboard.writeText(e),!0)}},{key:"getPrettyRole",value:function(e){return"admin"===e?"System Administrator":"operator"===e?"Knowledgebase Operator":"dms"===e?"DMS User":"manager"===e?"Organisational Manager":e}}]),e}(),N=w,S="sign in",C="sign out",R="set theme",I="set user list",E="update user",D="set user filter",T="get organisation list",P="select organisation",U="update organisation",A="set organisation filter",L="reset selected kb",z="get knowledge bases",F="selected knowledge base",M="select edge device",q="get inventorize list",W="get inventorize busy",Y="uploading program",B="uploading program finished",V="uploading wp archive",J="uploading wp archive finished",G="get crawlers",H="get domains",K="get documents paginated",Q="set document filter",Z="set document page",X="set document page size",$="reset document pagination",ee="set mind items paginated",te="set mind item page size",se="set mind item page",ae="reset mind item pagination",ne="set mind item filter",re="set bot query list",ie="set bot query string",oe="set synonyms paginated",ce="set synonym page size",le="set synonym page",de="reset synonym pagination",ue="set synonym filter",pe="set semantics paginated",he="set semantic page size",me="set semantic page",be="reset semantic pagination",je="set semantic filter",ge="set semantic display list",fe="set synset filter",ve="set synset list",_e="set synset page",ye="set synset page size",xe="reset synset pagination",Oe="get license",ke="busy",we="error",Ne="close error",Se="select tab",Ce="hide notifications",Re="show notifications",Ie="set notification list",Ee="set report date",De="set report graphs",Te="process operator message",Pe="set operator connected",Ue="add conversation",Ae="mark conversation used",Le="operator ready",ze="set operator answer",Fe="set operator question",Me="operator clear user",qe="clear previous answer",We="add operator",Ye="remove operator",Be="stop client typing",Ve="get html5 notifications",Je="set log list",Ge="set log date",He="set log hours",Ke="set log type",Qe="set log service",Ze="set log refresh",Xe="get edge devices",$e="get edge device commands",et="set groups paginated",tt="set group page size",st="set group page",at="set group filter",nt="active connections";function rt(e){e&&(e.conversation_list=[],e.client_id="",e.client_kb_id="",e.client_kb_name="",e.question_id="",e.question="",e.answer_id="",e.answer="",e.prev_answer="",e.current_question="",e.is_typing=!1,e.typing_time=0)}var it=function(e,t){if(e=e||_(),window.ENV.debug&&console.debug("applicationReducer:"+t.type),t.type===we&&console.log("ERROR: ("+JSON.stringify(t)+")"),t.type===C)return e=_();switch(t.type){default:break;case we:return t&&t.error&&t.error.length>0&&t.error.indexOf("invalid session id")>=0?(window.location="/#/",Object(d.a)(Object(d.a)({},e),{},{session:null,user:null,error_title:"",error:"",busy:!1,uploading:!1})):Object(d.a)(Object(d.a)({},e),{},{error_title:t.title,error:t.error,busy:!1,uploading:!1});case L:return Object(d.a)(Object(d.a)({},e),{},{selected_organisation_id:"",selected_organisation:null,selected_knowledgebase_id:"",selected_knowledgebase:null});case Ne:return Object(d.a)(Object(d.a)({},e),{},{error_title:"",error:"",busy:!1});case ke:return Object(d.a)(Object(d.a)({},e),{},{busy:t.busy});case R:return Object(d.a)(Object(d.a)({},e),{},{theme:t.theme});case S:var s="operator";if(t.user&&t.user.roles){var a,n=Object(b.a)(t.user.roles);try{for(n.s();!(a=n.n()).done;){var r=a.value;"admin"!==r.role&&"manager"!==r.role||(s="organisations")}}catch(ks){n.e(ks)}finally{n.f()}}var i="";if(t.user&&t.user.roles){var o,c=Object(b.a)(t.user.roles);try{for(c.s();!(o=c.n()).done;){var l=o.value;l&&l.organisationId&&""===i&&(i=l.organisationId)}}catch(ks){c.e(ks)}finally{c.f()}}return Object(d.a)(Object(d.a)({},e),{},{session:t.session,user:t.user,selected_tab:s,selected_organisation_id:i,selected_organisation:"",busy:!1});case Oe:return Object(d.a)(Object(d.a)({},e),{},{license:t.license,busy:!1});case T:return Object(d.a)(Object(d.a)({},e),{},{organisation_list:t.organisation_list,busy:!1});case A:return Object(d.a)(Object(d.a)({},e),{},{organisation_filter:t.filter});case z:return Object(d.a)(Object(d.a)({},e),{},{knowledge_base_list:t.knowledge_base_list,busy:!1});case q:return Object(d.a)(Object(d.a)({},e),{},{inventorize_list:t.inventorize_list,busy:!1});case W:return Object(d.a)(Object(d.a)({},e),{},{inventorize_busy:t.busy,busy:!1});case P:return Object(d.a)(Object(d.a)({},e),{},{selected_organisation_id:t.id,selected_organisation:t.name,selected_knowledgebase_id:"",selected_knowledgebase:"",selected_edge_device_id:"",selected_edge_device:"",busy:!1});case U:var u,p=[],h=t.organisation,m=!1,j=Object(b.a)(e.organisation_list);try{for(j.s();!(u=j.n()).done;){var g=u.value;g.id===h.id?(p.push(h),m=!0):p.push(g)}}catch(ks){j.e(ks)}finally{j.f()}return m||p.push(h),Object(d.a)(Object(d.a)({},e),{},{organisation_list:p,busy:!1});case F:return Object(d.a)(Object(d.a)({},e),{},{selected_knowledgebase_id:t.id,selected_knowledgebase:t.name,busy:!1});case M:return Object(d.a)(Object(d.a)({},e),{},{selected_edge_device_id:t.id,selected_edge_device:t.name,busy:!1});case C:return Object(d.a)(Object(d.a)({},e),{},{session:null,user:null,busy:!1});case Se:return Object(d.a)(Object(d.a)({},e),{},{selected_tab:t.selected_tab,log_refresh:0,busy:!1});case Ce:return Object(d.a)(Object(d.a)({},e),{},{show_notifications:!1});case Re:return Object(d.a)(Object(d.a)({},e),{},{show_notifications:!0});case Ie:return Object(d.a)(Object(d.a)({},e),{},{notification_list:t.notification_list});case I:return Object(d.a)(Object(d.a)({},e),{},{user_list:t.user_list,busy:!1});case D:return Object(d.a)(Object(d.a)({},e),{},{user_filter:t.filter});case E:return Object(d.a)(Object(d.a)({},e),{},{user:t.user,busy:!1});case G:return Object(d.a)(Object(d.a)({},e),{},{crawler_list:t.crawler_list,busy:!1});case H:return Object(d.a)(Object(d.a)({},e),{},{domain_list:t.domain_list,busy:!1});case Y:return Object(d.a)(Object(d.a)({},e),{},{uploading:!0});case B:return Object(d.a)(Object(d.a)({},e),{},{uploading:!1,busy:!1});case V:return Object(d.a)(Object(d.a)({},e),{},{uploading:!0});case J:return Object(d.a)(Object(d.a)({},e),{},{uploading:!1,busy:!1});case K:return Object(d.a)(Object(d.a)({},e),{},{document_list:t.document_list,num_documents:t.num_documents,prev_document_filter:t.document_filter,busy:!1});case Q:return Object(d.a)(Object(d.a)({},e),{},{document_page:0,document_filter:t.filter});case Z:var f=e.document_nav_list;return t.page>=f.length&&f.push(t.prev_url),Object(d.a)(Object(d.a)({},e),{},{document_page:t.page,document_previous:t.prev_url,document_nav_list:f,busy:!1});case X:return Object(d.a)(Object(d.a)({},e),{},{document_page:0,document_previous:null,document_nav_list:["null"],document_page_size:t.page_size});case $:return Object(d.a)(Object(d.a)({},e),{},{document_page:0,document_previous:null,document_nav_list:["null"],busy:!1});case"mind find":return Object(d.a)(Object(d.a)({},e),{},{mind_item_list:t.mind_item_list,busy:!1});case ee:return Object(d.a)(Object(d.a)({},e),{},{mind_item_list:t.data.memoryList,num_mind_items:t.data.numMemories,prev_mind_item_filter:t.data.filter,busy:!1});case ne:return Object(d.a)(Object(d.a)({},e),{},{mind_item_page:0,mind_item_filter:t.filter});case se:var v=e.mind_item_nav_list;return t.page>=v.length&&v.push(t.prev_id),Object(d.a)(Object(d.a)({},e),{},{mind_item_page:t.page,mind_item_previous:t.prev_id,mind_item_nav_list:v,busy:!1});case te:return Object(d.a)(Object(d.a)({},e),{},{mind_item_page:0,mind_item_previous:null,mind_item_nav_list:["null"],mind_item_page_size:t.page_size});case ae:return Object(d.a)(Object(d.a)({},e),{},{mind_item_page:0,mind_item_previous:null,mind_item_nav_list:["null"],busy:!1});case re:return Object(d.a)(Object(d.a)({},e),{},{mind_result_list:t.mind_result_list,busy:!1});case ie:return Object(d.a)(Object(d.a)({},e),{},{bot_query:t.bot_query});case oe:return Object(d.a)(Object(d.a)({},e),{},{synonym_list:t.data.synonymList,num_synonyms:t.data.numSynonyms,prev_synonym_filter:t.data.filter,busy:!1});case le:var y=e.synonym_nav_list;return t.page>=y.length&&y.push(t.prev_id),Object(d.a)(Object(d.a)({},e),{},{synonym_page:t.page,synonym_prev_id:t.prev_id,synonym_nav_list:y,busy:!1});case ce:return Object(d.a)(Object(d.a)({},e),{},{synonym_page:0,synonym_prev_id:null,synonym_nav_list:["null"],synonym_page_size:t.page_size});case de:return Object(d.a)(Object(d.a)({},e),{},{synonym_page:0,synonym_prev_id:null,synonym_nav_list:["null"],busy:!1});case ue:return Object(d.a)(Object(d.a)({},e),{},{synonym_page:0,synonym_filter:t.synonym_filter});case pe:return Object(d.a)(Object(d.a)({},e),{},{semantic_list:t.data.semanticList,num_semantics:t.data.numSemantics,prev_semantic_filter:t.data.filter,busy:!1});case me:var x=e.semantic_nav_list;return t.page>=x.length&&x.push(t.prev_word),Object(d.a)(Object(d.a)({},e),{},{semantic_page:t.page,semantic_prev_word:t.prev_word,semantic_nav_list:x,busy:!1});case he:return Object(d.a)(Object(d.a)({},e),{},{semantic_page:0,semantic_prev_id:null,semantic_nav_list:["null"],semantic_page_size:t.page_size});case be:return Object(d.a)(Object(d.a)({},e),{},{semantic_page:0,semantic_prev_id:null,semantic_nav_list:["null"],busy:!1});case ge:return Object(d.a)(Object(d.a)({},e),{},{semantic_display_category_list:t.semantic_display_category_list,defined_semantic_list:t.defined_semantic_list,busy:!1});case je:return Object(d.a)(Object(d.a)({},e),{},{semantic_page:0,semantic_filter:t.semantic_filter});case ve:return Object(d.a)(Object(d.a)({},e),{},{synset_list:t.synset_list,synset_total_size:t.total_size,busy:!1});case fe:return Object(d.a)(Object(d.a)({},e),{},{synset_page:0,synset_filter:t.synset_filter});case _e:return Object(d.a)(Object(d.a)({},e),{},{synset_page:t.page,busy:!1});case ye:return Object(d.a)(Object(d.a)({},e),{},{synset_page:0,synset_page_size:t.page_size});case xe:return Object(d.a)(Object(d.a)({},e),{},{synset_page:0,busy:!1});case Ee:return Object(d.a)(Object(d.a)({},e),{},{report_date:N.toIsoDate(t.report_date)});case De:return Object(d.a)(Object(d.a)({},e),{},{access_frequency:t.access_frequency,general_statistics:t.general_statistics,query_word_frequency:t.query_word_frequency,file_type_statistics:t.file_type_statistics,busy:!1});case ze:var O,k=[],w=Object(b.a)(e.operators);try{for(w.s();!(O=w.n()).done;){var it=O.value;it.id===t.operatorId&&(it.answer_id=t.id,it.answer=t.answer),k.push(it)}}catch(ks){w.e(ks)}finally{w.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:k});case Fe:var ot,ct=[],lt=Object(b.a)(e.operators);try{for(lt.s();!(ot=lt.n()).done;){var dt=ot.value;dt.id===t.operatorId&&(dt.question_id=t.id,dt.question=t.question),ct.push(dt)}}catch(ks){lt.e(ks)}finally{lt.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:ct});case Le:if(t.ready){var ut,pt=[],ht=Object(b.a)(e.operators);try{for(ht.s();!(ut=ht.n()).done;){var mt=ut.value;mt.id===t.operatorId&&(mt.operator_ready=!0),pt.push(mt)}}catch(ks){ht.e(ks)}finally{ht.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:pt})}var bt,jt=[],gt=Object(b.a)(e.operators);try{for(gt.s();!(bt=gt.n()).done;){var ft=bt.value;if(ft.id===t.operatorId){var vt=N.createOperator();vt.id=t.operatorId,jt.push(vt)}else jt.push(ft)}}catch(ks){gt.e(ks)}finally{gt.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:jt});case Me:var _t,yt=[],xt=Object(b.a)(e.operators);try{for(xt.s();!(_t=xt.n()).done;){var Ot=_t.value;if(Ot.id===t.operatorId){var kt=N.createOperator();kt.id=t.operatorId,kt.operator_ready=Ot.operator_ready,yt.push(kt)}else yt.push(Ot)}}catch(ks){xt.e(ks)}finally{xt.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:yt});case We:var wt=JSON.parse(JSON.stringify(e.operators));return wt.push(N.createOperator()),Object(d.a)(Object(d.a)({},e),{},{operators:wt});case Ye:var Nt,St=[],Ct=Object(b.a)(e.operators);try{for(Ct.s();!(Nt=Ct.n()).done;){var Rt=Nt.value;Rt.id!==t.id&&St.push(Rt)}}catch(ks){Ct.e(ks)}finally{Ct.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:St});case Be:var It,Et=t.operator_id,Dt=[],Tt=Object(b.a)(e.operators);try{for(Tt.s();!(It=Tt.n()).done;){var Pt=It.value;Pt.id===Et&&(Pt.is_typing=!1,Pt.typing_time=0),Dt.push(Pt)}}catch(ks){Tt.e(ks)}finally{Tt.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:Dt});case Te:var Ut=t.message;if(Ut.messageType,"error"===Ut.messageType&&Ut.error.length>0)return Object(d.a)(Object(d.a)({},e),{},{error_title:"error",error:Ut.error,busy:!1,uploading:!1});if("disconnect"===Ut.messageType){var At,Lt=[],zt=Object(b.a)(e.operators);try{for(zt.s();!(At=zt.n()).done;){var Ft=At.value;Ft.id===Ut.operatorId&&rt(Ft),Lt.push(Ft)}}catch(ks){zt.e(ks)}finally{zt.f()}return Ut.disconnectedByClient?Object(d.a)(Object(d.a)({},e),{},{operators:Lt,error_title:"Disconnected",error:"the client has terminated this conversation."}):Object(d.a)(Object(d.a)({},e),{},{operators:Lt})}if("teaching success"===Ut.messageType)return Object(d.a)({},e);if(Ut.messageType===nt)return Object(d.a)(Object(d.a)({},e),{},{num_active_connections:Ut.connectionCount});if("typing"===Ut.messageType){var Mt,qt=[],Wt=Object(b.a)(e.operators);try{for(Wt.s();!(Mt=Wt.n()).done;){var Yt=Mt.value;Yt.id===Ut.toId&&(Yt.is_typing=Ut.fromIsTyping,Yt.typing_time=N.getSystemTime()+2e3),qt.push(Yt)}}catch(ks){Wt.e(ks)}finally{Wt.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:qt})}if("message"===Ut.messageType){if(!Ut.kbId||0===Ut.kbId.length)return Object(d.a)(Object(d.a)({},e),{},{error_title:"error",error:"message does not include a valid knowledge-base id.",busy:!1,uploading:!1});if(!Ut.assignedOperatorId||0===Ut.assignedOperatorId.length)return Object(d.a)(Object(d.a)({},e),{},{error_title:"error",error:"message does not include a valid assigned-operator-id.",busy:!1,uploading:!1});var Bt,Vt=null,Jt=Object(b.a)(e.operators);try{for(Jt.s();!(Bt=Jt.n()).done;){var Gt=Bt.value;if(Gt.id===Ut.assignedOperatorId){Vt=Gt;break}}}catch(ks){Jt.e(ks)}finally{Jt.f()}if(null!=Vt){var Ht=[];if(0===Vt.conversation_list.length&&Ut.conversationList&&Ut.conversationList.length>0){var Kt=(Ht=[]).length+1;for(var Qt in Ut.conversationList)if(Ut.conversationList.hasOwnProperty(Qt)){var Zt=Ut.conversationList[Qt],Xt="user"!==Zt.origin;Ht.push({id:Kt,primary:Zt.conversationText,created:Zt.created,secondary:Xt?"You":"user",used:!1,is_simsage:Xt}),Kt+=1}}else Ut.text&&Ut.text.length>0?(Ht=JSON.parse(JSON.stringify(Vt.conversation_list))).push({id:Ht.length+1,primary:Ut.text,secondary:"user",used:!1,is_simsage:!1}):Ht=Vt.conversation_list;if(Ut.text&&Ut.text.length>0&&window.Notification&&"granted"===window.Notification.permission){var $t={body:'A new question just came in.  Click here to open the operator window.  "'+Ut.text+'"'};new Notification("the Operator needs your Attention",$t).onclick=function(){window.focus()}}Ut.previousAnswer&&Ut.previousAnswer.length>0&&(Vt.prev_answer=Ut.previousAnswer),Ut.clientId.length>5&&(Vt.client_id=Ut.clientId,Vt.client_kb_id=Ut.kbId),Ut.kbName&&Ut.kbName.length>0&&(Vt.client_kb_name=Ut.kbName),Vt.conversation_list=Ht,Vt.is_typing=!1,Vt.typing_time=0;var es,ts=[],ss=Object(b.a)(e.operators);try{for(ss.s();!(es=ss.n()).done;){var as=es.value;as.id!==Ut.organisationId?ts.push(as):ts.push(Vt)}}catch(ks){ss.e(ks)}finally{ss.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:ts})}console.log("organisation id not found:"+Ut.organisationId)}return Object(d.a)({},e);case Pe:var ns,rs=[],is=Object(b.a)(e.operators);try{for(is.s();!(ns=is.n()).done;){var os=ns.value;os.operator_ready=!1,rt(os),rs.push(os)}}catch(ks){is.e(ks)}finally{is.f()}return Object(d.a)(Object(d.a)({},e),{},{operator_connected:t.connected,num_active_connections:0,operators:rs});case qe:var cs,ls=[],ds=Object(b.a)(e.operators);try{for(ds.s();!(cs=ds.n()).done;){var us=cs.value;us.id===t.operatorId&&(us.current_question="",us.prev_answer=""),ls.push(us)}}catch(ks){ds.e(ks)}finally{ds.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:ls});case Ue:var ps,hs=[],ms=Object(b.a)(e.operators);try{for(ms.s();!(ps=ms.n()).done;){var bs=ps.value;bs.id===t.operatorId&&bs.conversation_list.push(t.item),hs.push(bs)}}catch(ks){ms.e(ks)}finally{ms.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:hs});case Ae:var js,gs=[],fs=Object(b.a)(e.operators);try{for(fs.s();!(js=fs.n()).done;){var vs=js.value;if(vs.id===t.operatorId){var _s,ys=vs.conversation_list,xs=Object(b.a)(ys);try{for(xs.s();!(_s=xs.n()).done;){var Os=_s.value;Os.id===t.id&&(Os.used=!0)}}catch(ks){xs.e(ks)}finally{xs.f()}vs.conversation_list=ys}gs.push(vs)}}catch(ks){fs.e(ks)}finally{fs.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:gs});case Ve:return Object(d.a)(Object(d.a)({},e),{},{html5_notifications:t.status});case Je:return Object(d.a)(Object(d.a)({},e),{},{log_list:t.log_list,busy:!1});case Ge:return Object(d.a)(Object(d.a)({},e),{},{log_date:N.toIsoDateTime(t.log_date)});case He:return Object(d.a)(Object(d.a)({},e),{},{log_hours:t.log_hours});case Ke:return Object(d.a)(Object(d.a)({},e),{},{log_type:t.log_type});case Qe:return Object(d.a)(Object(d.a)({},e),{},{log_service:t.log_service});case Ze:return Object(d.a)(Object(d.a)({},e),{},{log_refresh:t.log_refresh});case Xe:return Object(d.a)(Object(d.a)({},e),{},{edge_device_list:t.edge_device_list,busy:!1});case $e:return Object(d.a)(Object(d.a)({},e),{},{edge_device_command_list:t.edge_device_command_list,busy:!1});case et:return Object(d.a)(Object(d.a)({},e),{},{group_list:t.group_list,group_count:t.num_groups,busy:!1});case st:return Object(d.a)(Object(d.a)({},e),{},{group_page:t.page,busy:!1});case tt:return Object(d.a)(Object(d.a)({},e),{},{group_page:0,group_page_size:t.page_size,busy:!1});case at:return Object(d.a)(Object(d.a)({},e),{},{group_page:0,group_filter:t.group_filter})}return e},ot=Object(h.createLogger)({predicate:function(e,t){return window.ENV.debug}});var ct=s(8),lt=s(7),dt=s(3),ut=s.n(dt),pt=s(11),ht=function(){function e(){Object(j.a)(this,e)}return Object(g.a)(e,null,[{key:"setupDoughnut",value:function(e,t){return{labels:e,datasets:[{data:t,backgroundColor:["#36A2EB","#FF6384","#56CE56"],hoverBackgroundColor:["#36A2EB","#FF6384","#56CE56"]}]}}},{key:"setupMap",value:function(e,t){if(e){var s=[],a=[100,1e4,1e5,-1],n=new Set;for(var r in a){var i=a[r],o=[],c=[];for(var l in e)if(e.hasOwnProperty(l)){var d=e[l];(-1===d||d<i)&&!n.has(l)&&(n.add(l),o.push(l),c.push(d.toFixed(2)))}o.length>0&&s.push({id:r,labels:o,title:t,datasets:[{label:t,fill:!1,lineTension:.1,backgroundColor:"rgba(98,194,214,1)",borderColor:"rgba(98,194,214,1)",pointBackgroundColor:"#fff",pointBorderColor:"rgba(98,194,214,1)",pointHoverBackgroundColor:"rgba(98,194,214,1)",pointHoverBorderColor:"rgba(220,220,220,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderWidth:1,pointHoverRadius:5,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:c}]})}return s}return[]}},{key:"setupList",value:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e&&e.length){for(var a=[],n=[],r={},i=0,o=0;o<=30;o++)r[o+1]=e[o],e[o]>0&&(i+=1);if(0===i)return{labels:[]};for(var c=1;c<=31;c++)a.push(""+c),r.hasOwnProperty(c)&&r[c]>0?n.push(r[c]/s):n.push(0);return{labels:a,datasets:[{label:t,fill:!1,lineTension:.4,backgroundColor:"rgba(154,202,147,1)",borderColor:"rgba(154,202,147,1)",pointBackgroundColor:"#fff",pointBorderColor:"rgba(154,202,147,1)",pointHoverBackgroundColor:"rgba(154,202,147,1)",pointHoverBorderColor:"rgba(220,220,220,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderWidth:1,pointHoverRadius:5,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:n}]}}return{labels:[]}}},{key:"setupCpuList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e&&e.length){var a=[],n=[],r=[],i=0;e.length>t&&(i=e.length-t);for(var o=i;o<i+t;o++)a.push(""),o<e.length?(n.push(e[o].idle/s),r.push((e[o].user+e[o].system)/s)):(n.push(0),r.push(0));return{labels:a,datasets:[{label:"busy",fill:!0,lineTension:.1,backgroundColor:"rgba(192, 75,120,0.7)",borderColor:"rgba(192, 75,120,1)",pointBackgroundColor:"#fff",pointBorderColor:"rgba(192, 75, 120,1)",pointHoverBackgroundColor:"rgba(192, 75,120,1)",pointHoverBorderColor:"rgba(220,220,220,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderWidth:1,pointHoverRadius:5,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:r},{label:"idle",fill:!0,lineTension:.1,backgroundColor:"rgba(75,192,120,0.4)",borderColor:"rgba(75,192,120,1)",pointBackgroundColor:"#fff",pointBorderColor:"rgba(75, 192,120,1)",pointHoverBackgroundColor:"rgba(75,192,120,1)",pointHoverBorderColor:"rgba(220,220,220,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderWidth:1,pointHoverRadius:5,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:0,data:n}]}}return{labels:[]}}},{key:"getGraphOptions",value:function(e){return{responsive:!0,legend:{position:"bottom"},hover:{mode:"label"},scales:{xAxes:[{display:!0,scaleLabel:{display:!1,labelString:""}}],yAxes:[{display:!0,ticks:{beginAtZero:!0,steps:10,stepValue:5}}]},title:{display:!0,text:e}}}},{key:"getDoughnutOptions",value:function(e){return{responsive:!0,legend:{position:"bottom"},hover:{mode:"label"},title:{display:!0,text:e}}}},{key:"processList",value:function(e,t,s){if(t&&t.labels&&t.datasets&&1===t.datasets.length&&t.datasets[0].data){e.push(["",""]),e.push([s,""]);for(var a=0;a<t.labels.length;a++)e.push([""+t.labels[a],""+t.datasets[0].data[a]])}}},{key:"processSet",value:function(t,s,a){var n,r=Object(b.a)(s);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.processList(t,i,a)}}catch(o){r.e(o)}finally{r.f()}}}]),e}(),mt=ht,bt=!1;function jt(e,t,s,a,n){return gt.apply(this,arguments)}function gt(){return(gt=Object(pt.a)(ut.a.mark((function e(t,s,a,n,r){var i;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:ke,busy:!0}),i=a,a&&""!==a.trim()||(i="null"),e.next=5,O.http_get("/auth/user/organisations/"+encodeURIComponent(i),(function(e){var t=e.data;r({type:T,organisation_list:t}),n&&t&&t.length>0&&0===s.length&&(r({type:P,name:t[0].name,id:t[0].id}),ft(t[0].id,r))}),(function(e){r({type:we,title:"Error",error:e})}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(e,t){return vt.apply(this,arguments)}function vt(){return(vt=Object(pt.a)(ut.a.mark((function e(t,s){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:ke,busy:!0}),e.next=3,O.http_get("/knowledgebase/"+encodeURIComponent(t),(function(e){s({type:z,knowledge_base_list:e.data})}),(function(e){s({type:we,title:"Error",error:e})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _t(e,t,s){return yt.apply(this,arguments)}function yt(){return(yt=Object(pt.a)(ut.a.mark((function e(t,s,a){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&s.length>0)){e.next=4;break}return a({type:ke,busy:!0}),e.next=4,O.http_get("/document/parquets/"+encodeURIComponent(t)+"/"+encodeURIComponent(s)+"/0/5",(function(e){a({type:q,inventorize_list:e.data})}),(function(e){a({type:we,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(e,t,s){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(pt.a)(ut.a.mark((function e(t,s,a){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:ke,busy:!0}),s&&""!==s.trim()||(s="null"),e.next=4,O.http_get("/auth/users/"+encodeURIComponent(t)+"/"+encodeURIComponent(s),(function(e){a({type:I,user_list:e.data})}),(function(e){a({type:we,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kt(e,t,s){return wt.apply(this,arguments)}function wt(){return(wt=Object(pt.a)(ut.a.mark((function e(t,s,a){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&s.length>0)){e.next=4;break}return a({type:ke,busy:!0}),e.next=4,O.http_get("/crawler/crawlers/"+encodeURIComponent(t)+"/"+encodeURIComponent(s),(function(e){a({type:G,crawler_list:e.data})}),(function(e){a({type:we,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nt(e,t,s,a,n,r){return St.apply(this,arguments)}function St(){return(St=Object(pt.a)(ut.a.mark((function e(t,s,a,n,r,i){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&s.length>0)){e.next=4;break}return i({type:ke,busy:!0}),e.next=4,O.http_put("/knowledgebase/domains",{organisationId:t,kbId:s,page:a,pageSize:n,filter:r},(function(e){i({type:H,domain_list:e.data})}),(function(e){i({type:we,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(e,t,s,a,n,r){return Rt.apply(this,arguments)}function Rt(){return(Rt=Object(pt.a)(ut.a.mark((function e(t,s,a,n,r,i){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&s.length>0)){e.next=4;break}return i({type:ke,busy:!0}),e.next=4,O.http_post("/document/documents",{organisationId:t,kbId:s,prevUrl:a||"null",pageSize:n,filter:r},(function(e){var t=e.data.documentList,s=e.data.numDocuments;i({type:K,document_list:t,num_documents:s,document_filter:r})}),(function(e){i({type:we,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function It(e,t,s,a,n,r){return Et.apply(this,arguments)}function Et(){return(Et=Object(pt.a)(ut.a.mark((function e(t,s,a,n,r,i){var o;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&s.length>0)){e.next=5;break}return i({type:ke,busy:!0}),o={organisationId:t,kbId:s,prevId:a||"null",filter:n,pageSize:r},e.next=5,O.http_put("/mind/memories",o,(function(e){i({type:ee,data:e.data})}),(function(e){i({type:we,title:"Error",error:e})}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(e,t,s,a,n,r){return Tt.apply(this,arguments)}function Tt(){return(Tt=Object(pt.a)(ut.a.mark((function e(t,s,a,n,r,i){var o;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&s.length>0)){e.next=5;break}return i({type:ke,busy:!0}),o={organisationId:t,kbId:s,prevId:a||"",filter:n,pageSize:r},e.next=5,O.http_put("/language/synonyms",o,(function(e){i({type:oe,data:e.data})}),(function(e){i({type:we,title:"Error",error:e})}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pt(e,t,s,a,n,r){return Ut.apply(this,arguments)}function Ut(){return(Ut=Object(pt.a)(ut.a.mark((function e(t,s,a,n,r,i){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&s.length>0)){e.next=4;break}return i({type:ke,busy:!0}),e.next=4,O.http_put("/language/semantics",{organisationId:t,kbId:s,prevWord:a||"",filter:n,pageSize:r},(function(e){i({type:pe,data:e.data})}),(function(e){i({type:we,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function At(e,t,s){return Lt.apply(this,arguments)}function Lt(){return(Lt=Object(pt.a)(ut.a.mark((function e(t,s,a){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&s.length>0)){e.next=6;break}return a({type:ke,busy:!0}),e.next=4,O.http_get("/language/semantic-display-categories/"+encodeURIComponent(t)+"/"+encodeURIComponent(s),(function(e){a({type:ge,semantic_display_category_list:e.data.semanticDisplayCategoryList,defined_semantic_list:e.data.semanticList})}),(function(e){a({type:we,title:"Error",error:e})}));case 4:e.next=7;break;case 6:a({type:ge,semantic_display_category_list:[],defined_semantic_list:[]});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zt(e,t,s,a,n,r){return Ft.apply(this,arguments)}function Ft(){return(Ft=Object(pt.a)(ut.a.mark((function e(t,s,a,n,r,i){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&s.length>0)){e.next=4;break}return i({type:ke,busy:!0}),e.next=4,O.http_put("/language/find-syn-sets",{organisationId:t,kbId:s,page:a,pageSize:n,filter:r},(function(e){i({type:ve,synset_list:e.data.list,total_size:e.data.totalSize})}),(function(e){i({type:we,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mt(e,t,s,a,n,r){return qt.apply(this,arguments)}function qt(){return(qt=Object(pt.a)(ut.a.mark((function e(t,s,a,n,r,i){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&s.length>0)){e.next=6;break}return i({type:ke,busy:!0}),e.next=4,O.http_get("/stats/stats/"+encodeURIComponent(t)+"/"+encodeURIComponent(s)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(n)+"/"+encodeURIComponent(r),(function(e){var t=e.data,s=mt.setupList(t.accessFrequency,"access"),a=mt.setupMap(t.generalStatistics,"system"),n=mt.setupMap(t.queryWordFrequency,"queries (top "+r+")"),o=mt.setupMap(t.fileTypeStatistics,"file types");i({type:De,access_frequency:s,general_statistics:a,query_word_frequency:n,file_type_statistics:o})}),(function(e){i({type:we,title:"Error",error:e})}));case 4:e.next=7;break;case 6:i({type:De,access_frequency:mt.setupList([]),general_statistics:mt.setupMap([]),query_word_frequency:mt.setupMap([]),file_type_statistics:mt.setupMap([])});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wt(e,t,s,a,n,r,i){return Yt.apply(this,arguments)}function Yt(){return(Yt=Object(pt.a)(ut.a.mark((function e(t,s,a,n,r,i,o){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s&&a&&n&&r&&i)){e.next=4;break}return o({type:ke,busy:!0}),e.next=4,O.http_get("/stats/system-logs/"+encodeURIComponent(t)+"/"+encodeURIComponent(s)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(n)+"/"+encodeURIComponent(r)+"/"+encodeURIComponent(i),(function(e){var t=e.data;o({type:Je,log_list:t.logList})}),(function(e){o({type:we,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bt(e){return Vt.apply(this,arguments)}function Vt(){return(Vt=Object(pt.a)(ut.a.mark((function e(t){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.Notification&&"granted"!==window.Notification.permission&&window.Notification.requestPermission&&window.Notification.requestPermission((function(e){Notification.permission!==e&&(Notification.permission=e),t({type:Ve,status:e})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jt(e,t){return Gt.apply(this,arguments)}function Gt(){return(Gt=Object(pt.a)(ut.a.mark((function e(t,s){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:ke,busy:!0}),e.next=3,O.http_get("/edge/"+encodeURIComponent(t),(function(e){s({type:Xe,edge_device_list:e.data})}),(function(e){s({type:we,title:"Error",error:e})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ht(e,t,s){return Kt.apply(this,arguments)}function Kt(){return(Kt=Object(pt.a)(ut.a.mark((function e(t,s,a){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:ke,busy:!0}),e.next=3,O.http_get("/edge/command/"+encodeURIComponent(t)+"/"+encodeURIComponent(s),(function(e){a({type:$e,edge_device_command_list:e.data})}),(function(e){a({type:we,title:"Error",error:e})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qt(e,t){return Zt.apply(this,arguments)}function Zt(){return(Zt=Object(pt.a)(ut.a.mark((function e(t,s){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=4;break}return s({type:ke,busy:!0}),e.next=4,O.http_get("/auth/groups/"+encodeURIComponent(t),(function(e){s({type:et,group_list:e.data.groupList})}),(function(e){s({type:we,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xt(e,t,s){return $t.apply(this,arguments)}function $t(){return($t=Object(pt.a)(ut.a.mark((function e(t,s,a){var n,r,i,o,c,l,d,u,p,h,m,b,j,g,f,v,_,y,x,O,k,w,N,S,C,R,I,E,D,T,P,U,A,z;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_organisation,i=a().appReducer.selected_knowledgebase_id,"operator"===t||n&&0!==n.length&&r&&0!==r.length||s({type:L}),o=a().appReducer.user_list,c=a().appReducer.group_list,"users"!==t||""===n){e.next=15;break}return l=a().appReducer.user_filter,e.next=10,xt(n,l,s);case 10:if(c&&0!==c.length){e.next=13;break}return e.next=13,Qt(n,s);case 13:e.next=154;break;case 15:if("groups"!==t||""===n){e.next=24;break}if(o&&0!==o.length){e.next=20;break}return d=a().appReducer.user_filter,e.next=20,xt(n,d,s);case 20:return e.next=22,Qt(n,s);case 22:e.next=154;break;case 24:if("organisations"!==t){e.next=32;break}return u=a().appReducer.selected_organisation,p=a().appReducer.selected_organisation_id,h=a().appReducer.organisation_filter,e.next=30,jt(u,p,h,!0,s);case 30:e.next=154;break;case 32:if("edge devices"!==t||""===n){e.next=37;break}return e.next=35,Jt(n,s);case 35:e.next=154;break;case 37:if("edge commands"!==t||""===n){e.next=44;break}if(!(m=a().appReducer.selected_edge_device_id)||""===m){e.next=42;break}return e.next=42,Ht(n,m,s);case 42:e.next=154;break;case 44:if("knowledge bases"!==t){e.next=51;break}if(""===(b=a().appReducer.selected_organisation_id)){e.next=49;break}return e.next=49,ft(b,s);case 49:e.next=154;break;case 51:if("document sources"!==t||""===n||""===i){e.next=63;break}if(o&&0!==o.length){e.next=56;break}return j=a().appReducer.user_filter,e.next=56,xt(n,j,s);case 56:if(c&&0!==c.length){e.next=59;break}return e.next=59,Qt(n,s);case 59:return e.next=61,kt(n,i,s);case 61:e.next=154;break;case 63:if("documents"!==t||""===n||""===i){e.next=73;break}return s({type:$}),s({type:ke,busy:!0}),g=a().appReducer.document_filter,"null",f=a().appReducer.document_page_size,e.next=71,Ct(n,i,"null",f,g,s);case 71:e.next=154;break;case 73:if("syn-sets"!==t||""===n||""===i){e.next=82;break}return v=a().appReducer.synset_page,_=a().appReducer.synset_page_size,y=a().appReducer.synset_filter,e.next=79,zt(n,i,v,_,y,s);case 79:s({type:xe}),e.next=154;break;case 82:if("inventory"!==t||""===n||""===i){e.next=87;break}return e.next=85,_t(n,i,s);case 85:e.next=154;break;case 87:if("reports"!==t||""===n||""===i){e.next=96;break}return x=a().appReducer.report_num_items,O=new Date(a().appReducer.report_date),k=O.getFullYear(),w=O.getMonth()+1,e.next=94,Mt(n,i,k,w,x,s);case 94:e.next=154;break;case 96:if("logs"!==t||""===n){e.next=107;break}return N=new Date(a().appReducer.log_date),S=N.getFullYear(),C=N.getMonth()+1,R=N.getDate(),I=N.getHours(),E=a().appReducer.log_hours,e.next=105,Wt(n,S,C,R,I,E,s);case 105:e.next=154;break;case 107:if("mind"!==t){e.next=120;break}if(s({type:ae}),s({type:ke,busy:!0}),D=a().appReducer.mind_item_filter,T=a().appReducer.mind_item_page_size,!n||!i){e.next=117;break}return e.next=115,It(n,i,null,D,T,s);case 115:e.next=118;break;case 117:s({type:ee,data:{mindItemList:[],numMindItems:0,filter:""}});case 118:e.next=154;break;case 120:if("synonyms"!==t){e.next=133;break}if(s({type:de}),s({type:ke,busy:!0}),P=a().appReducer.synonym_filter,U=a().appReducer.synonym_page_size,!n||!i){e.next=130;break}return e.next=128,Dt(n,i,"",P,U,s);case 128:e.next=131;break;case 130:s({type:oe,data:{synonymList:[],numSynonyms:0,filter:""}});case 131:e.next=154;break;case 133:if("semantics"!==t){e.next=146;break}if(s({type:be}),s({type:ke,busy:!0}),A=a().appReducer.semantic_filter,z=a().appReducer.semantic_page_size,!n||!i){e.next=143;break}return e.next=141,Pt(n,i,"",A,z,s);case 141:e.next=144;break;case 143:s({type:pe,data:{semanticList:[],numSemantics:0,filter:""}});case 144:e.next=154;break;case 146:if("active directory"!==t){e.next=154;break}if(s({type:ke,busy:!0}),!n||!i){e.next=153;break}return e.next=151,Nt(n,i,0,10,"",s);case 151:e.next=154;break;case 153:s({type:H,domain_list:[]});case 154:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var es={signIn:function(e,t,s){return function(){var a=Object(pt.a)(ut.a.mark((function a(n,r){return ut.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e&&e.length>0&&t&&t.length>0)){a.next=6;break}return n({type:ke,busy:!0}),a.next=4,O.http_post("/auth/sign-in",{email:e,password:t},(function(e){n({type:S,session:e.data.session,user:e.data.user}),s&&s()}),(function(e){n({type:we,title:"Error",error:e})}));case 4:a.next=7;break;case 6:n({type:we,title:"Error",error:"please complete and check all fields"});case 7:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},signOut:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:es.setLogRefresh(0),t({type:C});case 2:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},notBusy:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:ke,busy:!1});case 1:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},setTheme:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:R,theme:e});case 1:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},passwordResetRequest:function(e){return{type:"password reset request"}},resetPassword:function(e,t,s){return{type:"reset password",email:e,newPassword:t,reset_id:s}},getStats:function(e,t,s){return{type:"get stats",year:e,month:t,top:s}},getOSMessages:function(){return{type:"get os messages"}},restoreSystem:function(e){return{type:"restore system",data:e}},getLicense:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ke,busy:!0}),e.next=3,O.http_get("/auth/license",(function(e){t({type:Oe,license:e.data})}),(function(e){t({type:we,title:"Error",error:e})}));case 3:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},installLicense:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),t.next=3,O.http_post("/auth/license",{license:e},(function(e){s({type:Oe,license:e.data})}),(function(e){s({type:we,title:"Error",error:e})}));case 3:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},setError:function(e,t){return{type:we,title:e,error:t}},closeError:function(){return{type:Ne}},selectTab:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:Se,selected_tab:e}),t.next=3,Xt(e,s,a);case 3:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},setupManager:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:Se,selected_tab:"knowledge bases"}),e.next=3,jt("","","",!0,t);case 3:return e.next=5,Xt("knowledge bases",t,s);case 5:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},hideNotifications:function(){return{type:Ce}},showNotifications:function(){return{type:Re}},getNotifications:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){var a;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bt){e.next=5;break}return bt=!0,a=s().appReducer.notification_list,e.next=5,O.http_get("/stats/stats/os",(function(e){var s=N.merge_notifications(a,e.data.notificationList);s.length!==a.length&&t({type:Ie,notification_list:s}),bt=!1}),(function(e){console.log("error getting os-messages:"+e),bt=!1}));case 5:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},getOrganisationList:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){var a,n,r;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ke,busy:!0}),a=s().appReducer.selected_organisation,n=s().appReducer.selected_organisation_id,r=s().appReducer.organisation_filter,e.next=6,jt(a,n,r,!0,t);case 6:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},selectOrganisation:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e&&e.id&&e.id.length>0)){t.next=10;break}return s({type:ke,busy:!0}),s({type:P,name:e.name,id:e.id}),t.next=5,ft(e.id,s);case 5:return n=a().appReducer.selected_tab,t.next=8,Xt(n,s,a);case 8:t.next=11;break;case 10:s({type:P,name:"",id:""});case 11:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},setOrganisationFilter:function(e){return{type:A,filter:e}},updateOrganisation:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),t.next=3,O.http_put("/auth/organisation",e,(function(e){s({type:U,organisation:e.data})}),(function(e){s({type:we,title:"Error",error:e})}));case 3:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},deleteOrganisation:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),n=a().appReducer.selected_organisation,r=a().appReducer.selected_organisation_id,i=a().appReducer.organisation_filter,t.next=6,O.http_delete("/auth/organisation/"+encodeURIComponent(e),(function(t){jt(n,r,i,!1,s),r===e&&(s({type:P,name:"",id:""}),s({type:z,knowledge_base_list:[]}))}),(function(e){s({type:we,title:"Error",error:e})}));case 6:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},selectEdgeDevice:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e&&e.id&&e.id.length>0)){t.next=8;break}return s({type:ke,busy:!0}),n=a().appReducer.selected_tab,s({type:M,name:e.name,id:e.id}),t.next=6,Xt(n,s,a);case 6:t.next=9;break;case 8:s({type:M,name:"",id:""});case 9:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},selectKnowledgeBase:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e&&e.id&&e.id.length>0)){t.next=8;break}return s({type:ke,busy:!0}),n=a().appReducer.selected_tab,s({type:F,name:e.name,id:e.id}),t.next=6,Xt(n,s,a);case 6:t.next=9;break;case 8:s({type:F,name:"",id:""});case 9:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},getKnowledgeBases:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft(s().appReducer.selected_organisation_id,t);case 2:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},optimizeIndexes:function(e,t){return function(){var s=Object(pt.a)(ut.a.mark((function s(a,n){var r;return ut.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a({type:ke,busy:!0}),r={organisationId:e,kbId:t},s.next=4,O.http_put("/language/optimize-indexes",r,(function(e){a({type:ke,busy:!1})}),(function(e){a({type:we,title:"Error",error:e})}));case 4:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}()},removeOptimizedIndexes:function(e,t){return function(){var s=Object(pt.a)(ut.a.mark((function s(a,n){return ut.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a({type:ke,busy:!0}),s.next=3,O.http_delete("/language/optimize-indexes/"+encodeURIComponent(e)+"/"+encodeURIComponent(t),(function(e){a({type:ke,busy:!1})}),(function(e){a({type:we,title:"Error",error:e})}));case 3:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}()},removeAllIndexes:function(e,t){return function(){var s=Object(pt.a)(ut.a.mark((function s(a,n){return ut.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a({type:ke,busy:!0}),s.next=3,O.http_delete("/language/indexes/"+encodeURIComponent(e)+"/"+encodeURIComponent(t),(function(e){a({type:ke,busy:!1})}),(function(e){a({type:we,title:"Error",error:e})}));case 3:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}()},deleteKnowledgeBase:function(e,t){return function(){var s=Object(pt.a)(ut.a.mark((function s(a,n){return ut.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a({type:ke,busy:!0}),s.next=3,O.http_delete("/knowledgebase/"+encodeURIComponent(e)+"/"+encodeURIComponent(t),(function(t){ft(e,a),a({type:F,name:"",id:""})}),(function(e){a({type:we,title:"Error",error:e})}));case 3:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}()},updateKnowledgeBase:function(e,t,s,a,n,r,i,o,c,l,d,u,p){return function(){var h=Object(pt.a)(ut.a.mark((function h(m,b){var j;return ut.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return m({type:ke,busy:!0}),j={kbId:t,organisationId:e,name:s,email:a,securityId:n,maxQueriesPerDay:i,enabled:r,analyticsWindowInMonths:o,operatorEnabled:c,capacityWarnings:l,created:d,indexOptimizationSchedule:u,dmsIndexSchedule:p},h.next=4,O.http_put("/knowledgebase/",j,(function(t){ft(e,m)}),(function(e){m({type:we,title:"Error",error:e})}));case 4:case"end":return h.stop()}}),h)})));return function(e,t){return h.apply(this,arguments)}}()},createInventory:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){var a,n;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ke,busy:!0}),a=s().appReducer.selected_organisation_id,n=s().appReducer.selected_knowledgebase_id,e.next=5,O.http_post("/document/inventorize",{kbId:n,organisationId:a},(function(e){_t(a,n,t)}),(function(e){t({type:we,title:"Error",error:e})}));case 5:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},getInventoryList:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){var a,n;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s().appReducer.selected_organisation_id,n=s().appReducer.selected_knowledgebase_id,e.next=4,_t(a,n,t);case 4:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},deleteInventoryItem:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,!(n.length>0&&r.length>0)){t.next=7;break}return s({type:ke,busy:!0}),i="/document/parquet/"+encodeURIComponent(n)+"/"+encodeURIComponent(r)+"/"+encodeURIComponent(e),t.next=7,O.http_delete(i,(function(e){_t(n,r,s)}),(function(e){s({type:we,title:"Error",error:e})}));case 7:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},getInventoryBusy:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){var a,n;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s().appReducer.selected_organisation_id,n=s().appReducer.selected_knowledgebase_id,!(a.length>0&&n.length>0)){e.next=6;break}return t({type:ke,busy:!0}),e.next=6,O.http_get("/document/inventorize/"+encodeURIComponent(a),(function(e){t({type:W,busy:e.data})}),(function(e){t({type:we,title:"Error",error:e})}));case 6:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},forceInventoryBusy:function(){return function(e,t){e({type:W,busy:!0})}},getUsers:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a().appReducer.user_filter,t.next=3,xt(e,n,s);case 3:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},updateUser:function(e,t,s,a,n,r,i,o,c){return function(){var l=Object(pt.a)(ut.a.mark((function l(d,u){var p,h,m,j,g,f,v,_,y,x;return ut.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:d({type:ke,busy:!0}),p=u().appReducer.user_filter,h=u().appReducer.user,m=[],j=Object(b.a)(i);try{for(j.s();!(g=j.n()).done;)f=g.value,m.push({userId:t,organisationId:e,role:f})}catch(k){j.e(k)}finally{j.f()}v=[],_=Object(b.a)(o);try{for(_.s();!(y=_.n()).done;)x=y.value,v.push({userId:t,organisationId:e,kbId:x.kbId})}catch(k){_.e(k)}finally{_.f()}return l.next=11,O.http_put("/auth/user/"+encodeURIComponent(e),{id:t,password:r,firstName:s,surname:a,email:n,roles:m,operatorKBList:v,groupList:c},(function(t){var s=t.data,a=!1,n=!1;if(s&&h&&s.id===h.id){var r,i=Object(b.a)(h.roles);try{for(i.s();!(r=i.n()).done;){var o=r.value;o&&"operator"===o.role&&(a=!0)}}catch(k){i.e(k)}finally{i.f()}var c,l=Object(b.a)(s.roles);try{for(l.s();!(c=l.n()).done;){var u=c.value;u&&"operator"===u.role&&(n=!0)}}catch(k){l.e(k)}finally{l.f()}!a&&n&&Bt(d),d({type:E,user:s})}xt(e,p,d)}),(function(e){d({type:we,title:"Error",error:e})}));case 11:case"end":return l.stop()}}),l)})));return function(e,t){return l.apply(this,arguments)}}()},deleteUser:function(e,t){return function(){var s=Object(pt.a)(ut.a.mark((function s(a,n){var r;return ut.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a({type:ke,busy:!0}),r=n().appReducer.user_filter,s.next=4,O.http_delete("/auth/organisation/user/"+encodeURIComponent(t)+"/"+encodeURIComponent(e),(function(t){xt(e,r,a)}),(function(e){a({type:we,title:"Error",error:e})}));case 4:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}()},setUserFilter:function(e){return{type:D,filter:e}},uploadProgram:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),s({type:Y}),t.next=4,O.http_put("/knowledgebase/upload",e,(function(e){s({type:B})}),(function(e){s({type:we,title:"Error",error:e})}));case 4:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},wpUploadArchive:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i,o,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s({type:ke,busy:!0}),s({type:V}),n=a().appReducer.knowledge_base_list,r="",!n){t.next=23;break}i=Object(b.a)(n),t.prev=6,i.s();case 8:if((o=i.n()).done){t.next=15;break}if((c=o.value).kbId!==e.kbId){t.next=13;break}return r=c.securityId,t.abrupt("break",15);case 13:t.next=8;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(6),i.e(t.t0);case 20:return t.prev=20,i.f(),t.finish(20);case 23:return e.sid=r,t.next=26,O.http_post("/crawler/admin/upload/archive",e,(function(e){s({type:J})}),(function(e){s({type:we,title:"Error",error:e})}));case 26:case"end":return t.stop()}}),t,null,[[6,17,20,23]])})));return function(e,s){return t.apply(this,arguments)}}()},getCrawlers:function(e,t){return function(){var s=Object(pt.a)(ut.a.mark((function s(a,n){return ut.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,kt(e,t,a);case 2:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}()},updateCrawler:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,t.next=5,O.http_post("/crawler/crawler",e,(function(e){kt(n,r,s)}),(function(e){s({type:we,title:"Error",error:e})}));case 5:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},deleteCrawler:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,t.next=5,O.http_delete("/crawler/crawler/"+encodeURIComponent(n)+"/"+encodeURIComponent(r)+"/"+encodeURIComponent(e),(function(e){kt(n,r,s)}),(function(e){s({type:we,title:"Error",error:e})}));case 5:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},getDomains:function(e,t){return function(){var s=Object(pt.a)(ut.a.mark((function s(a,n){return ut.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Nt(e,t,0,10,"",a);case 2:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}()},updateDomain:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,t.next=5,O.http_put("/knowledgebase/domain",e,(function(e){Nt(n,r,0,10,"",s)}),(function(e){s({type:we,title:"Error",error:e})}));case 5:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},testDomain:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),t.next=3,O.http_put("/knowledgebase/domain/test",e,(function(e){s({type:we,title:"Success",error:"Connected Successfully"})}),(function(e){s({type:we,title:"Error",error:e})}));case 3:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},deleteDomain:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,t.next=5,O.http_delete("/knowledgebase/domain/"+encodeURIComponent(n)+"/"+encodeURIComponent(r)+"/"+encodeURIComponent(e),(function(e){Nt(n,r,0,10,"",s)}),(function(e){s({type:we,title:"Error",error:e})}));case 5:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},getDocuments:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){var a,n,r,i,o,c;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:ke,busy:!0}),a=s().appReducer.selected_organisation_id,n=s().appReducer.selected_knowledgebase_id,r=s().appReducer.document_filter,i=s().appReducer.prev_document_filter,o=s().appReducer.document_page_size,c=s().appReducer.document_previous,i!==r&&(t({type:$}),c=null),!a||!n){e.next=11;break}return e.next=11,Ct(a,n,c,o,r,t);case 11:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},setDocumentFilter:function(e){return{type:Q,filter:e}},deleteDocument:function(e,t){return function(){var s=Object(pt.a)(ut.a.mark((function s(a,n){var r,i,o,c,l,d,u;return ut.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(a({type:ke,busy:!0}),r=n().appReducer.selected_organisation_id,i=n().appReducer.selected_knowledgebase_id,o=n().appReducer.document_filter,c=n().appReducer.prev_document_filter,l=n().appReducer.document_page_size,d=n().appReducer.document_previous,!(r&&i&&e)){s.next=12;break}return c!==o&&(a({type:$}),d=null),u="/document/document/"+encodeURIComponent(r)+"/"+encodeURIComponent(i)+"/"+btoa(unescape(encodeURIComponent(e)))+"/"+encodeURIComponent(t),s.next=12,O.http_delete(u,(function(e){Ct(r,i,d,l,o,a)}),(function(e){a({type:we,title:"Error",error:e})}));case 12:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}()},setDocumentPage:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i,o,c,l,d,u,p;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.document_filter,o=a().appReducer.document_page_size,c=a().appReducer.document_page,l=a().appReducer.document_nav_list,d=a().appReducer.document_list,!(e!==c&&e>=0)){t.next=22;break}if(!(e>c)){t.next=17;break}if(!(d.length>0)){t.next=15;break}return u=d[d.length-1].url,s({type:Z,page:e,prev_url:u}),t.next=15,Ct(n,r,u,o,i,s);case 15:t.next=22;break;case 17:if(!(e<l.length)){t.next=22;break}return p=l[e],s({type:Z,page:e,prev_url:p}),t.next=22,Ct(n,r,p,o,i,s);case 22:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},setDocumentPageSize:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),s({type:X,page_size:e}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.document_filter,t.next=7,Ct(n,r,null,e,i,s);case 7:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},reprocessDocument:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a().appReducer.document_filter,r=a().appReducer.document_previous,i=a().appReducer.document_page_size,s({type:ke,busy:!0}),t.next=6,O.http_post("/document/reprocess",{organisationId:e.organisationId,kbId:e.kbId,url:e.url},(function(t){Ct(e.organisationId,e.kbId,r,i,n,s)}),(function(e){s({type:we,title:"Error",error:e})}));case 6:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},getMindItems:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){var a,n,r,i,o,c;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:ke,busy:!0}),a=s().appReducer.selected_organisation_id,n=s().appReducer.selected_knowledgebase_id,r=s().appReducer.mind_item_filter,i=s().appReducer.prev_mind_item_filter,o=s().appReducer.mind_item_page_size,c=s().appReducer.mind_item_previous,i!==r&&(t({type:$}),c=null),!a||!n){e.next=11;break}return e.next=11,It(a,n,c,r,o,t);case 11:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},setMindItemPage:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i,o,c,l,d,u,p;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.mind_item_filter,o=a().appReducer.mind_item_page_size,c=a().appReducer.mind_item_page,l=a().appReducer.mind_item_nav_list,d=a().appReducer.mind_item_list,!(e!==c&&e>=0)){t.next=22;break}if(!(e>c)){t.next=17;break}if(!(d.length>0)){t.next=15;break}return u=d[d.length-1].id,s({type:se,page:e,prev_id:u}),t.next=15,It(n,r,u,i,o,s);case 15:t.next=22;break;case 17:if(!(e<l.length)){t.next=22;break}return p=l[e],s({type:se,page:e,prev_id:p}),t.next=22,It(n,r,p,i,o,s);case 22:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},setMindItemPageSize:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),s({type:te,page_size:e}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.mind_item_filter,t.next=7,It(n,r,null,i,e,s);case 7:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},setMindItemFilter:function(e){return{type:ne,filter:e}},deleteMemory:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i,o,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.mind_item_filter,o=a().appReducer.mind_item_page_size,c=a().appReducer.mind_item_previous,t.next=8,O.http_delete("/mind/memory/"+encodeURIComponent(n)+"/"+encodeURIComponent(r)+"/"+encodeURIComponent(e),(function(e){It(n,r,c,i,o,s)}),(function(e){s({type:we,title:"Error",error:e})}));case 8:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},deleteAllMemories:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){var a,n,r,i,o;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ke,busy:!0}),a=s().appReducer.selected_organisation_id,n=s().appReducer.selected_knowledgebase_id,r=s().appReducer.mind_item_filter,i=s().appReducer.mind_item_page_size,o=s().appReducer.mind_item_previous,e.next=8,O.http_delete("/mind/delete-all/"+encodeURIComponent(a)+"/"+encodeURIComponent(n),(function(e){It(a,n,o,r,i,t)}),(function(e){t({type:we,title:"Error",error:e})}));case 8:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},saveMemory:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i,o,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.mind_item_filter,o=a().appReducer.mind_item_page_size,c=a().appReducer.mind_item_previous,t.next=8,O.http_put("/mind/memory/"+encodeURIComponent(n)+"/"+encodeURIComponent(r),e,(function(e){It(n,r,c,i,o,s)}),(function(e){s({type:we,title:"Error",error:e})}));case 8:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},mindQuery:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){var a,n,r,i,o;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:ke,busy:!0}),a=s().appReducer.selected_organisation_id,n=s().appReducer.selected_knowledgebase_id,r=s().appReducer.bot_query_page_size,!((i=s().appReducer.bot_query).length>0)){e.next=11;break}return o={organisationId:a,kbList:[{kbId:n,sid:""}],query:i,numResults:r,scoreThreshold:.01},e.next=9,O.http_put("/mind/query",o,(function(e){t({type:re,mind_result_list:e.data})}),(function(e){t({type:we,title:"Error",error:e})}));case 9:e.next=12;break;case 11:t({type:re,mind_result_list:[]});case 12:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},setBotQueryString:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:ie,bot_query:e});case 1:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},getSynonyms:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){var a,n,r,i,o,c;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:ke,busy:!0}),a=s().appReducer.selected_organisation_id,n=s().appReducer.selected_knowledgebase_id,r=s().appReducer.synonym_filter,i=s().appReducer.prev_synonym_filter,o=s().appReducer.synonym_page_size,c=s().appReducer.synonym_prev_id,i!==r&&(t({type:de}),c=null),!a||!n){e.next=11;break}return e.next=11,Dt(a,n,c,r,o,t);case 11:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},setSynonymPage:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i,o,c,l,d,u,p;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.synonym_filter,o=a().appReducer.synonym_page_size,c=a().appReducer.synonym_page,l=a().appReducer.synonym_nav_list,d=a().appReducer.synonym_list,!(e!==c&&e>=0)){t.next=22;break}if(!(e>c)){t.next=17;break}if(!(d.length>0)){t.next=15;break}return u=d[d.length-1].id,s({type:le,page:e,prev_id:u}),t.next=15,Dt(n,r,u,i,o,s);case 15:t.next=22;break;case 17:if(!(e<l.length)){t.next=22;break}return p=l[e],s({type:le,page:e,prev_id:p}),t.next=22,Dt(n,r,p,i,o,s);case 22:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},setSynonymPageSize:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),s({type:ce,page_size:e}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.synonym_filter,t.next=7,Dt(n,r,null,i,e,s);case 7:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},deleteSynonym:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i,o,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.synonym_prev_id,o=a().appReducer.synonym_filter,c=a().appReducer.synonym_page_size,t.next=8,O.http_delete("/language/delete-synonym/"+encodeURIComponent(n)+"/"+encodeURIComponent(r)+"/"+encodeURIComponent(e),(function(e){Dt(n,r,i,o,c,s)}),(function(e){s({type:we,title:"Error",error:e})}));case 8:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},saveSynonym:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i,o,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.synonym_prev_id,o=a().appReducer.synonym_filter,c=a().appReducer.synonym_page_size,O.http_put("/language/save-synonym/"+encodeURIComponent(n)+"/"+encodeURIComponent(r),e,(function(e){Dt(n,r,i,o,c,s)}),(function(e){s({type:we,title:"Error",error:e})}));case 7:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},setSynonymFilter:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:ue,synonym_filter:e});case 1:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},getSemantics:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){var a,n,r,i,o,c;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:ke,busy:!0}),a=s().appReducer.selected_organisation_id,n=s().appReducer.selected_knowledgebase_id,r=s().appReducer.semantic_filter,i=s().appReducer.prev_semantic_filter,o=s().appReducer.semantic_page_size,c=s().appReducer.semantic_prev_word,i!==r&&(t({type:be}),c=null),!a||!n){e.next=11;break}return e.next=11,Pt(a,n,c,r,o,t);case 11:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},setSemanticPage:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i,o,c,l,d,u,p;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.semantic_filter,o=a().appReducer.semantic_page_size,c=a().appReducer.semantic_page,l=a().appReducer.semantic_nav_list,d=a().appReducer.semantic_list,!(e!==c&&e>=0)){t.next=22;break}if(!(e>c)){t.next=17;break}if(!(d.length>0)){t.next=15;break}return u=d[d.length-1].word,s({type:me,page:e,prev_word:u}),t.next=15,Pt(n,r,u,i,o,s);case 15:t.next=22;break;case 17:if(!(e<l.length)){t.next=22;break}return p=l[e],s({type:me,page:e,prev_word:p}),t.next=22,Pt(n,r,p,i,o,s);case 22:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},setSemanticPageSize:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),s({type:he,page_size:e}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.semantic_filter,t.next=7,Pt(n,r,null,i,e,s);case 7:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},deleteSemantic:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i,o,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.semantic_filter,o=a().appReducer.semantic_prev_word,c=a().appReducer.semantic_page_size,t.next=8,O.http_delete("/language/delete-semantic/"+encodeURIComponent(n)+"/"+encodeURIComponent(r)+"/"+encodeURIComponent(e),(function(e){Pt(n,r,o,i,c,s)}),(function(e){s({type:we,title:"Error",error:e})}));case 8:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},findSemantics:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){var a,n,r,i,o;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s().appReducer.selected_organisation_id,n=s().appReducer.selected_knowledgebase_id,r=s().appReducer.semantic_filter,i=s().appReducer.semantic_page_size,o=s().appReducer.semantic_prev_word,e.next=7,Pt(a,n,o,r,i,t);case 7:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},saveSemantic:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i,o;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.semantic_filter,o=a().appReducer.semantic_page_size,"",O.http_put("/language/save-semantic/"+encodeURIComponent(n)+"/"+encodeURIComponent(r),e,(function(e){Pt(n,r,"",i,o,s)}),(function(e){s({type:we,title:"Error",error:e})}));case 7:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},setSemanticFilter:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:je,semantic_filter:e});case 1:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},getSemanticDisplayCategories:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){var a,n;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s().appReducer.selected_organisation_id,n=s().appReducer.selected_knowledgebase_id,e.next=4,At(a,n,t);case 4:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},saveSemanticDisplayCategory:function(e,t,s){return function(){var a=Object(pt.a)(ut.a.mark((function a(n,r){var i,o;return ut.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=r().appReducer.selected_organisation_id,o=r().appReducer.selected_knowledgebase_id,a.next=4,O.http_put("/language/semantic-display-category/",{organisationId:i,kbId:o,prevDisplayName:e,displayName:t,semanticList:s},(function(e){At(i,o,n)}),(function(e){n({type:we,title:"Error",error:e})}));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},deleteSemanticDisplayCategory:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,t.next=4,O.http_delete("/language/semantic-display-category/"+encodeURIComponent(n)+"/"+encodeURIComponent(r)+"/"+encodeURIComponent(e),(function(e){At(n,r,s)}),(function(e){s({type:we,title:"Error",error:e})}));case 4:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},deleteSynSet:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i,o,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.synset_page,o=a().appReducer.synset_page_size,c=a().appReducer.synset_filter,t.next=8,O.http_delete("/language/delete-syn-set/"+encodeURIComponent(n)+"/"+encodeURIComponent(r)+"/"+encodeURIComponent(e),(function(e){zt(n,r,i,o,c,s)}),(function(e){s({type:we,title:"Error",error:e})}));case 8:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},findSynSets:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){var a,n,r,i,o;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s().appReducer.selected_organisation_id,n=s().appReducer.selected_knowledgebase_id,r=s().appReducer.synset_page,i=s().appReducer.synset_page_size,o=s().appReducer.synset_filter,e.next=7,zt(a,n,r,i,o,t);case 7:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},saveSynSet:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i,o,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.synset_page,o=a().appReducer.synset_page_size,c=a().appReducer.synset_filter,O.http_put("/language/save-syn-set/"+encodeURIComponent(n)+"/"+encodeURIComponent(r),e,(function(e){zt(n,r,i,o,c,s)}),(function(e){s({type:we,title:"Error",error:e})}));case 7:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},setSynSetFilter:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:fe,synset_filter:e});case 1:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},setSynSetPage:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i,o;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.synset_page_size,o=a().appReducer.synset_filter,s({type:_e,page:e}),t.next=8,zt(n,r,e,i,o,s);case 8:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},setSynSetPageSize:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r,i,o;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),s({type:ye,page_size:e}),n=a().appReducer.selected_organisation_id,r=a().appReducer.selected_knowledgebase_id,i=a().appReducer.synset_page,o=a().appReducer.synset_filter,t.next=8,zt(n,r,i,e,o,s);case 8:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},setReportDate:function(e){return{type:Ee,report_date:e}},getReports:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){var a,n,r,i,o,c;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s().appReducer.selected_organisation_id,n=s().appReducer.selected_knowledgebase_id,r=s().appReducer.report_num_items,i=new Date(s().appReducer.report_date),o=i.getFullYear(),c=i.getMonth()+1,e.next=8,Mt(a,n,o,c,r,t);case 8:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},processOperatorMessage:function(e){return{type:Te,message:e}},setOperatorConnected:function(e){return{type:Pe,connected:e}},addConversation:function(e,t){return{type:Ue,operatorId:e,item:t}},markConversationItemUsed:function(e,t){return{type:Ae,operatorId:e,id:t}},operatorReady:function(e,t){return{type:Le,operatorId:e,ready:t}},setOperatorAnswer:function(e,t,s){return{type:ze,operatorId:e,id:t,answer:s}},setOperatorQuestion:function(e,t,s){return{type:Fe,operatorId:e,id:t,question:s}},clearPreviousAnswer:function(e){return{type:qe,operatorId:e}},clearUser:function(e){return{type:Me,operatorId:e}},addOperator:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s().appReducer.operators.length<5&&t({type:We});case 2:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},removeOperator:function(e){return{type:Ye,id:e}},stopClientTyping:function(e){return{type:Be,operator_id:e}},sendOperatorMessage:function(e,t){return function(){var s=Object(pt.a)(ut.a.mark((function s(a,n){return ut.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,O.http_post(e,t,(function(e){}),(function(e){a({type:we,title:"Error",error:e})}));case 2:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}()},getLogs:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){var a,n,r,i,o,c,l;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s().appReducer.selected_organisation_id,n=new Date(s().appReducer.log_date),r=n.getFullYear(),i=n.getMonth()+1,o=n.getDate(),c=n.getHours(),l=s().appReducer.log_hours,e.next=9,Wt(a,r,i,o,c,l,t);case 9:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},setLogDate:function(e){return{type:Ge,log_date:e}},setLogHours:function(e){return{type:He,log_hours:e}},setLogType:function(e){return{type:Ke,log_type:e}},setLogService:function(e){return{type:Qe,log_service:e}},setLogRefresh:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:Ze,log_refresh:e});case 1:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},restartService:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n,r;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a().appReducer.session,r=a().appReducer.selected_organisation_id,t.next=4,O.http_get("/stats/restart-service/"+encodeURIComponent(n.id)+"/"+encodeURIComponent(r)+"/"+encodeURIComponent(e),(function(e){}),(function(e){s({type:we,title:"Error",error:e})}));case 4:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},getEdgeDevices:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt(s().appReducer.selected_organisation_id,t);case 2:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},deleteEdgeDevice:function(e,t){return function(){var s=Object(pt.a)(ut.a.mark((function s(a,n){return ut.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a({type:ke,busy:!0}),s.next=3,O.http_delete("/edge/"+encodeURIComponent(e)+"/"+encodeURIComponent(t),(function(t){Jt(e,a)}),(function(e){a({type:we,title:"Error",error:e})}));case 3:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}()},updateEdgeDevice:function(e,t,s,a){return function(){var n=Object(pt.a)(ut.a.mark((function n(r,i){var o;return ut.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:ke,busy:!0}),o={edgeId:t,organisationId:e,name:s,created:a},n.next=4,O.http_put("/edge/",o,(function(t){Jt(e,r)}),(function(e){r({type:we,title:"Error",error:e})}));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},updateEdgeDeviceCommand:function(e,t,s,a,n){return function(){var r=Object(pt.a)(ut.a.mark((function r(i,o){var c;return ut.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i({type:ke,busy:!0}),c={edgeId:t,organisationId:e,command:s,parameters:a,created:n,executed:0,result:""},r.next=4,O.http_put("/edge/command",c,(function(s){Ht(e,t,i)}),(function(e){i({type:we,title:"Error",error:e})}));case 4:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},deleteEdgeDeviceCommand:function(e,t,s){return function(){var a=Object(pt.a)(ut.a.mark((function a(n,r){return ut.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:ke,busy:!0}),a.next=3,O.http_delete("/edge/command/"+encodeURIComponent(e)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(s),(function(s){Ht(e,t,n)}),(function(e){n({type:we,title:"Error",error:e})}));case 3:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},getHtml5Notifications:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bt(t);case 2:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},restore:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,t.next=4,O.http_put("/backup/restore",{organisationId:n,data:e},(function(e){s({type:ke,busy:!1})}),(function(e){s({type:we,title:"Error",error:e})}));case 4:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},getGroups:function(){return function(){var e=Object(pt.a)(ut.a.mark((function e(t,s){var a;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:ke,busy:!0}),!(a=s().appReducer.selected_organisation_id)){e.next=5;break}return e.next=5,Qt(a,t);case 5:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}()},setGroupPage:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:ke,busy:!0}),s({type:st,page:e});case 2:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},setGroupPageSize:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:ke,busy:!0}),s({type:tt,page_size:e});case 2:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},deleteGroup:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){var n;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:ke,busy:!0}),n=a().appReducer.selected_organisation_id,t.next=4,O.http_delete("/auth/group/"+encodeURIComponent(n)+"/"+encodeURIComponent(e),(function(e){Qt(n,s)}),(function(e){s({type:we,title:"Error",error:e})}));case 4:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()},saveGroup:function(e,t){return function(){var s=Object(pt.a)(ut.a.mark((function s(a,n){var r,i;return ut.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:a({type:ke,busy:!0}),r=n().appReducer.selected_organisation_id,i={organisationId:r,name:e,userIdList:t},O.http_put("/auth/group",i,(function(e){Qt(r,a)}),(function(e){a({type:we,title:"Error",error:e})}));case 4:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}()},setGroupFilter:function(e){return function(){var t=Object(pt.a)(ut.a.mark((function t(s,a){return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:at,group_filter:e});case 1:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()}},ts=(s(213),s(0)),ss=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={title:e.title,signed_in:e.signed_in,showDocumentation:window.location.toString().indexOf("/#/documentation")<0},a}return Object(g.a)(s,[{key:"componentDidMount",value:function(){"light"===this.props.theme?document.getElementById("ss-body").className="light":document.getElementById("ss-body").className="dark"}},{key:"goWeb",value:function(){window.location=window.ENV.web_base}},{key:"signOut",value:function(){this.props.signOut(),window.location="/#/"}},{key:"getLogo",value:function(){return"dark"===this.props.theme?"../images/simsage-logo-white-no-strapline.svg":"../images/simsage-logo-no-strapline.svg"}},{key:"flipTheme",value:function(){"light"!==this.props.theme?(this.props.setTheme("light"),document.getElementById("ss-body").className="light"):(this.props.setTheme("dark"),document.getElementById("ss-body").className="dark")}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ts.jsxs)("div",{className:"app-menu menu-padding no-select",children:[Object(ts.jsx)("div",{className:"logo-box",children:Object(ts.jsx)("img",{alt:"SimSage",title:"Search less; find more.",className:"logo",src:this.getLogo(),onClick:function(){return e.goWeb()}})}),Object(ts.jsxs)("div",{children:[!this.state.signed_in&&Object(ts.jsxs)("span",{className:"home-image-container",children:[Object(ts.jsx)("img",{src:"light"===t?"../images/home.svg":"../images/home-light.svg",alt:"home",title:"home",onClick:function(){return e.goWeb()},className:"home-image"}),Object(ts.jsxs)("div",{className:"version-text",children:["version ",window.ENV.version]})]}),this.state.signed_in&&Object(ts.jsx)("div",{className:"sign-out-image-container",children:Object(ts.jsx)("img",{src:"light"===t?"../images/sign-out.svg":"../images/sign-out-light.svg",alt:"sign-out",title:"sign-out",onClick:function(){e.signOut()},className:"sign-out-image"})}),Object(ts.jsx)("div",{className:this.state.signed_in?"theme-select-logged-in":"theme-select",children:Object(ts.jsx)("div",{className:"form-check form-switch",children:Object(ts.jsx)("input",{className:"form-check-input",type:"checkbox",id:"flexSwitchCheckChecked",checked:"light"===this.props.theme,title:"change the SimSage theme from dark to light or vice versa",onChange:function(){return e.flipTheme()}})})})]}),Object(ts.jsx)("br",{clear:"both"})]})}}]),s}(a.Component),as=Object(o.b)((function(e){return{theme:e.appReducer.theme}}),(function(e){return Object(u.b)(es,e)}))(ss),ns=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={open:!1,title:e.title,message:e.message,callback:e.callback,has_error:!1},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleOk",value:function(){this.setState({open:!1}),this.state.callback&&this.state.callback()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&e.message&&this.setState({open:e.message.length>0,message:e.message,title:e.title})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"error-dialog.js: Something went wrong."}):this.state.open?Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline",zIndex:"9999"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded",children:[Object(ts.jsx)("div",{className:"modal-header",children:Object(ts.jsx)("div",{children:this.state.title})}),Object(ts.jsx)("div",{className:"modal-body",children:Object(ts.jsx)("div",{children:this.state.message})}),Object(ts.jsx)("div",{className:"modal-footer",children:Object(ts.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",onClick:function(){return e.handleOk()},children:"Ok"})})]})})}):Object(ts.jsx)("div",{})}}]),s}(n.a.Component),rs=ns,is=(s(79),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={email:"",password:""},a}return Object(g.a)(s,[{key:"componentDidMount",value:function(){!function(){try{x(_())}catch(e){}}(),this.props.notBusy()}},{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"handleClick",value:function(){this.props.signIn(this.state.email,this.state.password,(function(){window.location="/#/home"}))}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.handleClick()}},{key:"render",value:function(){var e=this;return Object(ts.jsxs)("div",{children:[Object(ts.jsx)(as,{signed_in:!1}),Object(ts.jsx)(rs,{title:this.props.error_title,theme:this.props.theme,message:this.props.error,callback:function(){return e.props.closeError()}}),this.props.busy&&Object(ts.jsx)("div",{className:"light"===this.props.theme?"busy":"busyDark"}),Object(ts.jsx)("div",{className:"auth-wrapper",children:Object(ts.jsx)("div",{className:"auth-inner",children:Object(ts.jsxs)("div",{children:[Object(ts.jsx)("h3",{children:"Sign In"}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("label",{children:"Email address"}),Object(ts.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email",autoFocus:!0,value:this.state.email,onKeyPress:function(t){return e.onKeyPress(t)},onChange:function(t){return e.setState({email:t.target.value})}})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("label",{children:"Password"}),Object(ts.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",value:this.state.password,onKeyPress:function(t){return e.onKeyPress(t)},onChange:function(t){return e.setState({password:t.target.value})}})]}),Object(ts.jsx)("div",{className:"form-group spacer-height"}),Object(ts.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",onClick:function(){return e.handleClick()},children:"Submit"}),Object(ts.jsxs)("p",{className:"forgot-password text-right",children:["Forgot ",Object(ts.jsx)("span",{className:"forgot-password-link",onClick:function(){return window.location="/#/reset-password-request"},children:"password?"})]}),Object(ts.jsx)("p",{className:"forgot-password text-right",children:Object(ts.jsx)("span",{className:"forgot-password-link",onClick:function(){return window.location="/#/foss-license"},children:"open-source licenses"})})]})})})]})}}]),s}(a.Component)),os=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,busy:e.appReducer.busy,theme:e.appReducer.theme}}),(function(e){return Object(u.b)(es,e)}))(is),cs=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={email:"",error_title:"",error_msg:"",has_error:!1},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleClick",value:function(e){var t=this;this.state.email.length>0?N.passwordResetRequest(this.state.email,(function(e){t.showError("Success","we've emailed you a link for resetting your password.")}),(function(e){t.showError("Error",e)})):this.showError("Error","Input field value is missing")}},{key:"showError",value:function(e,t){this.setState({error_title:e,error_msg:t})}},{key:"closeError",value:function(){this.setState({error_msg:""})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"ResetPasswordRequest: Something went wrong."}):Object(ts.jsxs)("div",{children:[Object(ts.jsx)(as,{title:"administration",loggedIn:!1}),Object(ts.jsx)(rs,{title:this.state.error_title,theme:this.props.theme,message:this.state.error_msg,callback:this.closeError.bind(this)}),Object(ts.jsx)("div",{children:Object(ts.jsx)("div",{className:"auth-wrapper",children:Object(ts.jsx)("div",{className:"auth-inner",children:Object(ts.jsxs)("div",{children:[Object(ts.jsx)("h3",{children:"Reset Password"}),Object(ts.jsx)("div",{children:"Please enter your email address and we'll email you a link to reset your password."}),Object(ts.jsx)("br",{}),Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsx)("input",{type:"text",className:"form-control",autoFocus:!0,placeholder:"Enter your email Address",onChange:function(t){return e.setState({email:t.target.value})}})}),Object(ts.jsx)("div",{className:"form-group submit-adjust",children:Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(t){return e.handleClick(t)},children:"Submit"})}),Object(ts.jsxs)("p",{className:"forgot-password text-right",children:["Click here to return to ",Object(ts.jsx)("span",{className:"forgot-password-link",onClick:function(){return window.location="/#/"},children:"sign-in"})]})]})})})})]})}}]),s}(a.Component),ls=Object(o.b)((function(e){return{theme:e.appReducer.theme}}),(function(e){return Object(u.b)(es,e)}))(cs),ds=s(215),us=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;Object(j.a)(this,s),a=t.call(this,e);var n=ds.parse(e.location.search),r="",i="";return n.email&&(r=n.email),n.resetid&&(i=n.resetid),a.state={email:r,reset_id:i,password:"",error_title:"",error_msg:"",has_error:!1},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleClick",value:function(e){var t=this;this.state.email.length>0&&this.state.reset_id.length>0&&this.state.password.length>5?N.resetPassword(this.state.email,this.state.password,this.state.reset_id,(function(e){t.showError("Success","Password reset.  You can now sign-in using your new password."),t.setState({reset_id:"",email:"",password:""})}),(function(e){t.showError("Error",e)})):this.showError("Error","Input field value(s) missing or incorrect.")}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.handleClick(e)}},{key:"showError",value:function(e,t){this.setState({error_title:e,error_msg:t})}},{key:"closeError",value:function(){this.setState({error_msg:""})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"ResetPasswordResponse: Something went wrong."}):Object(ts.jsxs)("div",{children:[Object(ts.jsx)(as,{title:"",loggedIn:!1}),Object(ts.jsx)(rs,{title:this.state.error_title,theme:this.props.theme,message:this.state.error_msg,callback:this.closeError.bind(this)}),Object(ts.jsx)("div",{className:"auth-wrapper",children:Object(ts.jsx)("div",{className:"auth-inner",children:Object(ts.jsxs)("div",{children:[Object(ts.jsx)("h3",{children:"Reset Password"}),Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control margin-bottom",placeholder:"Enter your email Address",autoComplete:!1,value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}})}),Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control margin-bottom",placeholder:"Enter the reset-id we sent you",autoComplete:!1,value:this.state.reset_id,onChange:function(t){return e.setState({reset_id:t.target.value})}})}),Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"password",className:"form-control margin-bottom",placeholder:"Enter your new Password",autoFocus:!0,autoComplete:!1,onChange:function(t){return e.setState({password:t.target.value})},onKeyPress:this.onKeyPress.bind(this)})}),Object(ts.jsx)("div",{children:Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(t){return e.handleClick(t)},children:"Reset Password"})}),Object(ts.jsxs)("p",{className:"forgot-password text-right",children:["Click here to return to ",Object(ts.jsx)("span",{className:"forgot-password-link",onClick:function(){return window.location="/#/"},children:"sign-in"})]})]})})})]})}}]),s}(a.Component),ps=Object(o.b)((function(e){return{theme:e.appReducer.theme}}),(function(e){return Object(u.b)(es,e)}))(us),hs=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={error_title:"",error_msg:"",has_error:!1},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"showError",value:function(e,t){this.setState({error_title:e,error_msg:t})}},{key:"closeError",value:function(){this.setState({error_msg:""})}},{key:"render",value:function(){return this.state.has_error?Object(ts.jsx)("h1",{children:"license: Something went wrong."}):Object(ts.jsxs)("div",{children:[Object(ts.jsx)(as,{title:"Open Source Licenses",loggedIn:!1}),Object(ts.jsx)(rs,{title:this.state.error_title,theme:this.props.theme,message:this.state.error_msg,callback:this.closeError.bind(this)}),Object(ts.jsxs)("div",{className:"license-container no-select",children:[Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Apache ActiveMQ"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2005-2019 The Apache Software Foundation "}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Apache Avro"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2010-2019 The Apache Software Foundation "}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Apache Cassandra"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2009-2021 The Apache Software Foundation "}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Apache Hadoop"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2019 The Apache Software Foundation "}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Apache http-client"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 1999-2007 The Apache Software Foundation"}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Apache http-mime"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 1999-2020 The Apache Software Foundation"}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Apache Parquet"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2020 The Apache Software Foundation "}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Apache PDFBox"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2020 The Apache Software Foundation "}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Apache Spark"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2014- The Apache Software Foundation "}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Apache Tika"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2020 The Apache Software Foundation"}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"commons-io"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2002-2020 The Apache Software Foundation"}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"commons-fileupload"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2002-2020 The Apache Software Foundation"}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"DataStax Driver"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 DataStax, Inc."}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Google API"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2012 Google Inc."}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Google Drive"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2018, Google Inc."}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Google OAuth"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2018, Google Inc."}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Jackson"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2007- Tatu Saloranta, tatu.saloranta@iki.fi"}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"javax-mail"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 1997-2011 Oracle and/or its affiliates."}),Object(ts.jsx)("div",{className:"license",children:"CDDL 1.1"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"javax WebSocket Client"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2012-2014 Oracle and/or its affiliates. "}),Object(ts.jsx)("div",{className:"license",children:"CDDL 1.1, GPL 2.0"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"jBcrypt"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2006 Damien Miller <djm@mindrot.org>"}),Object(ts.jsx)("div",{className:"license",children:"Mozilla public license 2.0"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"JCIFS-ng"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2016 AgNO3 Gmbh & Co. KG"}),Object(ts.jsx)("div",{className:"license",children:"GNU Lesser General public license 2.1"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"JEP"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright (c) 2004 - 2020 JEP AUTHORS"}),Object(ts.jsx)("div",{className:"license",children:"zlib/libpng License"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"JNA"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2011 Timothy Wall"}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"JEP"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2004 - 2020 JEP AUTHORS"}),Object(ts.jsx)("div",{className:"license",children:"zlib/libpng License"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Joda-time"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2001-2005 Stephen Colebourne"}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"jSoup"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2009 - 2021 Jonathan Hedley (https://jsoup.org/)"}),Object(ts.jsx)("div",{className:"license",children:"MIT License"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"junit"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2002-2020 JUnit"}),Object(ts.jsx)("div",{className:"license",children:"Eclipse Public License 1.0"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Kotlin"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2016-2020 JetBrains s.r.o."}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Kotlin Coroutines Core"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2016-2020 JetBrains s.r.o."}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Microsoft SQL JDBC"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2020 Microsoft Corporation"}),Object(ts.jsx)("div",{className:"license",children:"MIT license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Microsoft msal4j"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2020 Microsoft Corporation"}),Object(ts.jsx)("div",{className:"license",children:"MIT license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"MariaDB JDBC"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2021, MariaDB"}),Object(ts.jsx)("div",{className:"license",children:"LGPL 2.1"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"OpenJDK 11.0.9.1"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 1995, 2021, Oracle and/or its affiliates."}),Object(ts.jsx)("div",{className:"license",children:"GPLv2 with linking exception"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Postgres SQL JDBC"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 1997, PostgreSQL Global Development Group"}),Object(ts.jsx)("div",{className:"license",children:"BSD-2 Clause"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"snakeyaml"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2008-2013 Andrey Somov"}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"snappy java"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2011 Taro L. Saito"}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"spaCy"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2016-2020 ExplosionAI GmbH, 2016 spaCy GmbH, 2015 Matthew Honnibal"}),Object(ts.jsx)("div",{className:"license",children:"MIT license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Spring"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2002-2021 Pivotal, Inc."}),Object(ts.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ts.jsxs)("div",{className:"license-section",children:[Object(ts.jsx)("div",{className:"title",children:"Tyrus WebSocket Client"}),Object(ts.jsx)("div",{className:"copyright",children:"Copyright \xa9 2014-2015 Oracle and/or its affiliates. "}),Object(ts.jsx)("div",{className:"license",children:"Eclipse Public License 2.0"})]}),Object(ts.jsx)("br",{clear:"both"}),Object(ts.jsx)("div",{className:"button-bottom",children:Object(ts.jsx)("button",{onClick:function(){return window.location="/#/"},className:"btn btn-primary btn-block",children:"Return to Sign-in"})})]}),Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{})]})}}]),s}(a.Component),ms=Object(o.b)((function(e){return{theme:e.appReducer.theme}}),(function(e){return Object(u.b)(es,e)}))(hs),bs=(s(227),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={error_title:"",error_msg:"",has_error:!1},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"showError",value:function(e,t){this.setState({error_title:e,error_msg:t})}},{key:"closeError",value:function(){this.setState({error_msg:""})}},{key:"render",value:function(){return this.state.has_error?Object(ts.jsx)("h1",{children:"license-agreement: Something went wrong."}):Object(ts.jsxs)("div",{children:[Object(ts.jsx)(as,{title:"",loggedIn:!1}),Object(ts.jsx)(rs,{title:this.state.error_title,theme:this.props.theme,message:this.state.error_msg,callback:this.closeError.bind(this)}),Object(ts.jsx)("br",{clear:"both"}),Object(ts.jsxs)("div",{className:"license-screen",children:[Object(ts.jsx)("h1",{children:"SIMSAGE\u2122 TERMS OF USE"}),Object(ts.jsx)("br",{}),"Welcome to SimSage\u2122, an innovative, semantic, software-based Artificial Intelligence service that assists organisations to automate their web-page interactions with Customers. SimSage\u2122\u2019s capabilities include automating Customer enquiries requests for information, particularly by supplementing, or replacing Frequently Asked Questions (FAQs).",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"These Terms of Use, as amended from time to time (Terms) explain the terms on which SimSage\u2122  Limited (NZCN 6798094) of 86 Tinakori Road, Wellington, New Zealand (SimSage\u2122) provides customers with access to certain services through the www.simsage.nz website (Website). Please read them carefully.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"By registering to use the Services and clicking \u201cI accept\u201d, You acknowledge that You have read and understood these Terms and if You are acting on behalf of any person for whom You are using the Services, that You have full authority to act and are deemed to have agreed to these Terms on behalf of that person for whom you use the Services.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"SimSage\u2122 reserves the right to change these Terms at any time, effective on posting the modified terms on the Website, and SimSage\u2122 will make every effort to communicate these changes to You via email or notification via the Website. It is likely the Terms will change over time, particularly as the Services evolve to reflect our development of the Services and user feedback. It is Your obligation to ensure that You have read, understood and agree to the most recent Terms available on the Website.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),Object(ts.jsx)("h2",{children:"1. The Website and the Services"}),Object(ts.jsx)("br",{}),"1.1 The Website is owned and managed by SimSage Limited (NZCN 6798094) of 86 Tinakori Road, Wellington, New Zealand.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"1.2 In consideration of You paying the Fees, SimSage\u2122 shall provide You with the services described on the Website (Services). To avoid doubt, SimSage\u2122\u2019s obligations are limited to providing the Services and do not in any way include acting on Your behalf. Nothing in these Terms is intended to, or shall be deemed to, establish any partnership or joint venture between You and SimSage\u2122, appoint either party as the agent of the other, nor authorise either party to make or enter into any commitments for, or on behalf of, the other party.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"1.3 SimSage\u2122 may from time to time add, modify, suspend or cease (temporarily or permanently) providing any element of the Services upon notice to You, such notice to be effective on the earlier of SimSage\u2122 posting on the Website or via email to You.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"1.4 If there is unplanned service downtime in respect of the Services or the Website, SimSage\u2122 shall use its reasonable endeavours (but has no obligation) to notify You in advance provided that SimSage\u2122 is able to do so and such notice will be effective on the earlier of SimSage\u2122 posting on the Website or notifying You via email.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"1.5 Access to the Website and the Services may be granted to You, at SimSage\u2122\u2019s discretion and on terms and for a period agreed in writing (and if no time period is specified, for one month only), on a trial or \u2018free\u2019 basis (Trial). You acknowledge and agree that these Terms shall apply to the Trial, and in addition, during the Trial:",Object(ts.jsx)("br",{}),"1.5.1 access to the Services will be provided to You at no cost;",Object(ts.jsx)("br",{}),"1.5.2 such access is solely for the purpose of offering You a preview demonstration of the functionality and features of the Services;",Object(ts.jsx)("br",{}),"1.5.3 the functionality of the Services may be limited or restricted; and",Object(ts.jsx)("br",{}),"1.5.4 SimSage\u2122 may withdraw or suspend Your access to the Services at any time, and at the end of the one month Trial period (or such other Trial period agreed in writing), Your continued access to the Website and/or Services will be subject to payment of Fees or charges in accordance with clause 4.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),Object(ts.jsx)("h2",{children:"2 Register to use the Services"}),Object(ts.jsx)("br",{}),"2.1 To use the Services You must first register with SimSage\u2122 by completing the online registration form on the Website.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"2.2 SimSage\u2122 will send You a confirmation email (Confirmation Email) once it has accepted and confirmed Your registration. Your contract to use the Services on these Terms (Contract) starts on the date of the Confirmation Email.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"2.3 SimSage\u2122 reserves the right to conduct verification and security procedures in respect of all information provided by You to SimSage\u2122. If SimSage\u2122 believes the information provided by You to register and use any of the Services breaches (or may breach) any of these Terms, SimSage\u2122 at its sole discretion may take any action it deems appropriate, including without limitation, to terminate Your Contract (with no return of any Fees already paid).",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"2.4 These Terms apply to any Authorised Personnel who You authorize to access and use the Website and the Services through Your account. You acknowledge and agree:",Object(ts.jsx)("br",{}),"2.4.1 all Authorised Personnel must use the corporate  email address allocated to them by You when creating an Authorised Personnel profile;",Object(ts.jsx)("br",{}),'2.4.2 SimSage\u2122 may allocate Your "Admin" or "Member" accounts with varying levels of access, and You shall comply (and ensure each Authorised Personnel complies) with any SimSage\u2122 directions for setting up and using such accounts; and',Object(ts.jsx)("br",{}),"2.4.3 You are directly liable to SimSage\u2122 at all times for the acts or omissions of Your Authorised Personnel.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"2.5 You shall keep, and ensure Your Authorised Personnel keep, Your and Your Authorised Personnel\u2019s usernames and passwords (Logins) safe and secure to ensure they are not used without Your permission. You must immediately notify SimSage\u2122 if You believe there has been unauthorised use or access to Your Logins and/or Your profile on the Website. You shall be solely responsible and liable for any breach of these Terms arising out of, or resulting from, using Your Logins to access the Services and/or the Website (whether such use is authorised by You or not).",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"2.6 SimSage\u2122 may, at any time on notice, require You to sign any further documents to confirm Your acceptance of, or give full effect to, these Terms.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),Object(ts.jsx)("h2",{children:"3 Your obligations - general"}),Object(ts.jsx)("br",{}),"3.1 The obligations in this clause 3 apply to all users of SimSage\u2122, the Services and/or the Website. Additional obligations   are set out below.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"3.2 You shall at all times use the Services and the Website in accordance with these Terms.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"3.3 You shall ensure Your use of the Services and/or the Website, including submitting any information, data, images, videos, audio, files, links to external websites, communication between Authorised Personnel, and all other material of any format (Submissions), in each case:",Object(ts.jsx)("br",{}),"3.3.1 complies with all applicable laws;",Object(ts.jsx)("br",{}),"3.3.2 does not infringe any intellectual property or other proprietary rights of any third party;",Object(ts.jsx)("br",{}),"3.3.3 does not, or could not reasonably be deemed to:",Object(ts.jsx)("br",{}),Object(ts.jsxs)("ul",{children:[Object(ts.jsx)("li",{children:"be offensive, illegal, inappropriate or in any way promote racism, bigotry, hatred or physical harm of any kind against any group or individual;"}),Object(ts.jsx)("li",{children:"harass or advocate harassment of another person;"}),Object(ts.jsx)("li",{children:"display pornographic or sexually explicit material;"}),Object(ts.jsx)("li",{children:"promote conduct that is abusive, threatening, obscene, or defamatory;"}),Object(ts.jsx)("li",{children:"promote any illegal activities, or provide instructional information about illegal activities, including violating someone else\u2019s privacy; or"}),Object(ts.jsx)("li",{children:"provide or create computer viruses, other malware or denial of service attacks;"}),Object(ts.jsx)("li",{children:"promote or contain information that is inaccurate, false or misleading;"}),Object(ts.jsx)("li",{children:"engage in promoting contests, sweepstakes and pyramid schemes;"}),Object(ts.jsx)("li",{children:"exploit people in a sexual or violent manner;"}),Object(ts.jsx)("li",{children:"invade or violate any third party\u2019s right to privacy; and"}),Object(ts.jsx)("li",{children:'transmit "junk mail", or "chain letters", or unsolicited mass mailing, messaging or "spamming";'})]}),"and You hereby indemnify SimSage\u2122 for all losses, liabilities, costs and expenses (including legal costs) suffered or incurred by SimSage\u2122 (and/or its parent company) which arise directly or indirectly from Your breach of this clause 3.2.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"3.4 SimSage\u2122 does not vet, verify the accuracy, correctness and completeness, edit or modify any Submission or any other information, data and materials created, used and/or published by You or on Your behalf on Your Website to determine whether they may result in any liability to any third party. You warrant that You have the right to use all such information and material.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"3.5 Notwithstanding clause 3.3, SimSage\u2122 reserves the right to refuse to publish any Submissions, or to remove or edit a Submission (in whole or in part and at any time), if SimSage\u2122 believes Your use of the Services and/or the Website breaches these Terms.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"3.6 You shall not at any time:",Object(ts.jsx)("br",{}),"3.6.1 use the Services and/or the Website to impersonate (or in a way that impersonates) another User or person; and",Object(ts.jsx)("br",{}),"3.6.2 use the information made available to You through Your use of the Services and/or the Website for any purpose other than for procuring benefit out of the Services and/or the Website; and",Object(ts.jsx)("br",{}),"3.6.3 do anything whatsoever which (or which is likely to) impair, interfere with, damage, or cause harm or distress to any person using the Services and/or the Website or in respect of the network.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"3.7 SimSage\u2122 takes breaches of this clause 3 very seriously and reserves the right to take any action that SimSage\u2122 deems necessary, including suspending or terminating Your use of the Services and/or access to the Website. SimSage\u2122 may also commence legal proceedings if there is illegal use of the Services and/or the Website, or disclose information to any third party who is claiming that any material posted or uploaded by You to our Website violates their intellectual property or other proprietary rights or their right to privacy. You shall promptly notify SimSage\u2122 if You are aware of any breach (or any suspected breach) of this clause 3 by Your Authorised Personnel.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),Object(ts.jsx)("h2",{children:"4 Fees"}),Object(ts.jsx)("br",{}),"4.1 The fees to access the Services are set out on the Website (Fees). Except where You are using any Services that are specifically noted on the Website as \u201cFree\u201d, or participating in a Trial in accordance with clause 1.5, You may only access the Services by paying the Fees noted on the Website..",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"4.2 Unless stated otherwise on the Website or agreed by SimSage\u2122 in writing, the Fees shall be payable by You, in the manner as set out on the Website.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"4.3 All Fees are inclusive of GST and all other taxes or duties, and are non-refundable for any reason whatsoever.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"4.4 The Fees or any rate of charge may be increased by SimSage\u2122 upon not less than 30 days prior written notice to You, which notice may be provided through the Website.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),Object(ts.jsx)("h2",{children:"5 Warranties"}),Object(ts.jsx)("br",{}),"5.1 You: You warrant that (a) You have the right and capacity to enter into, and be bound by, these Terms;  (b) You shall comply with all applicable laws relating to Your use of the Services and/or the Website; and (c)  You shall comply with SimSage\u2122\u2019s requirements and reasonable directions relating to the Services and Website as notified by SimSage\u2122 from time to time.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),'5.2 SimSage\u2122: The provision of, access to, and use of, the Services and the Website is on an "as is " basis and at Your own risk. SimSage\u2122 gives no warranty about the Services and/or the Website, and in particular, SimSage\u2122 does not warrant that:',Object(ts.jsx)("br",{}),"5.2.1 the Services will meet Your requirements or that it will be suitable for any particular purpose. It is Your sole responsibility to determine that the Services meet Your needs and/or the needs of Your business and are suitable for the purposes for which they are used; or",Object(ts.jsx)("br",{}),"5.2.2 the use of the Services will be uninterrupted or error free. Among other things, the operation and availability of the systems used for accessing the Services, including public telephone services, computer networks and the Internet, can be unpredictable and may from time to time interfere with or prevent access to the Services. SimSage\u2122 is not in any way responsible for any such interference or prevention of Your access or use of the Services. To avoid doubt, all implied conditions or warranties are excluded to the maximum extent permitted by law, including (without limitation) warranties of merchantability, non-infringement of intellectual property, accuracy, completeness, fitness for a particular purpose, and any warranties arising by statute or otherwise in law or from course of dealing, course of performance, or use of trade.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"5.3 Third party websites: SimSage\u2122 may display or provide links or other interaction with third party websites and third party advertising banners on the Website (Third Party Websites). In particular, the Services may also provide You with the opportunity to connect and publish Your Information through Third Party Websites and other third party services such as social and business networking sites. Use of any such Third Party Websites and services shall be at Your sole risk and subject to the terms and conditions of the Third Party Website provider.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),Object(ts.jsx)("h2",{children:"6 Limitation of liability"}),Object(ts.jsx)("br",{}),"6.1 To the maximum extent permitted by law, SimSage\u2122 excludes all liability and responsibility to You (or any other person) in contract, tort (including negligence), or otherwise, for any loss (including loss of information, Data, profits and savings) or damage resulting, directly or indirectly, from any use of, or reliance on, the Services and/or Website.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"6.2 If You suffer loss or damage as a result of SimSage\u2122's negligence or failure to comply with these Terms, any claim by You against SimSage\u2122 arising from SimSage\u2122's negligence or failure will be limited in respect of any one incident, or series of connected incidents, to the Fees paid by You in the previous month. You are directly liable to SimSage\u2122 at all times for the acts or omissions of Your Authorised Personnel, in accordance with clause 2.4.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"6.3 If You are not satisfied with the Services, Your sole and exclusive remedy is to terminate these Terms in accordance with clause 7.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),Object(ts.jsx)("h2",{children:"7 Termination"}),Object(ts.jsx)("br",{}),"7.1 Trial policy:\u2028If SimSage\u2122 agrees in writing, in accordance with clause 1.5, to provide You with a trial usage period when You first sign up for access to the Services, You can evaluate the Services under the specified trial usage conditions, with no obligation to continue to use the Services. If You choose to continue using the Services thereafter, any payment applicable in accordance with clause 7 will be billed to You from the day You first added Your billing details into the Services.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"7.2 Prepaid Subscriptions:\u2028SimSage\u2122 will not provide any refund for any remaining prepaid period for a prepaid Fee subscription.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"7.3 No-fault termination:\u2028These Terms will continue for the period covered by the Fee paid or payable under clause 7.1. At the end of each billing period, these Terms will automatically continue for another period of the same duration as that period, provided You continue to pay the prescribed Fee when due, unless either party terminates these Terms by giving at least 30 days\u2019 notice to the other party before the end of the relevant payment period. If You terminate these Terms, You shall be liable to pay all relevant Fees on a pro-rata basis for each day of the then current period up to and including the day of termination of these Terms.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"7.4 Breach:\u2028If You:",Object(ts.jsx)("br",{}),"7.4.1 breach any of these Terms (including by non-payment of any Fees) and (i) if the breach is capable of being remedied, do not remedy the breach within 14 days after receiving notice of the breach; and (ii) if the breach is not capable of being remedied (which includes any payment of Fees that are more than 30 days overdue); or",Object(ts.jsx)("br",{}),"7.4.2 You or Your business become insolvent or Your business goes into liquidation or has a receiver or manager appointed of any of its assets or if You become insolvent, or make any arrangement with Your creditors, or become subject to any similar insolvency event in any jurisdiction, SimSage\u2122 may, at its sole discretion:",Object(ts.jsx)("br",{}),"7.4.3 Terminate this Agreement and Your use of the Services;",Object(ts.jsx)("br",{}),"7.4.4 Suspend for any definite or indefinite period of time, Your use of the Services;",Object(ts.jsx)("br",{}),"7.4.5 Suspend or terminate access to all or any Data; and/or",Object(ts.jsx)("br",{}),"7.4.6 Take any of these actions in relation to any other person/s whom You have authorised to have access to Your information or Data.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"7.5 Accrued Rights:\u2028Termination of these Terms is without prejudice to any rights or obligations of the parties which have accrued up to and including the date of termination, and shall not affect the provisions of these Terms which expressly, or by their nature, are intended to continue, including this clause 7 (Termination), and clauses 5 (Warranties), 6 (Limitation of Liability), 8 (Intellectual Property Rights). On termination of this Agreement You will:",Object(ts.jsx)("br",{}),"7.5.1 remain liable for any accrued Fees and amounts which become due for payment before or after termination; and",Object(ts.jsx)("br",{}),"7.5.2 immediately cease to use the Services.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),Object(ts.jsx)("h2",{children:"8 Intellectual property rights"}),Object(ts.jsx)("br",{}),"8.1 Title to, and all intellectual property rights in, the Services, the Website, including all software forming part of the Website (Software), and any documentation relating to the Services, is and remains the property of SimSage\u2122 (or its licensors). Nothing in these Terms will transfer from SimSage\u2122 to You any right, title or interest in the Services, the Website, the Software and associated documentation, all of which remain exclusively with SimSage\u2122 (or its licensors). All rights in and to the Software and the Website not expressly granted to You are reserved by SimSage\u2122 (and its licensors).",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"8.2 You may print off one copy and may download extracts of any pages from the Website solely for use by You; and You may draw the attention of other Users to Submissions or materials posted on the Website. You must not use any part of the Submissions of other Users and all materials on the Website for any purpose other than accessing the Website or obtaining a benefit from the Services in accordance with these Terms.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"8.3 You shall not, and shall procure that Authorised Personnel shall not modify, translate, create or attempt to create derivative copies of or copy the Software and/or the Website in whole or in part; reverse engineer, decompile, disassemble or otherwise reduce the object code of the Software and/or the Website to source code form; distribute, sub-licence, assign, share, timeshare, sell, rent, lease, transmit, grant a security interest in or otherwise transfer the Software, the Website and/or Your right to use the Software or the Website.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"8.4 You:",Object(ts.jsx)("br",{}),"8.4.1 Warrant that You own or have the right or licence to use the intellectual property rights in the Your Information, all information and materials provided by You to SimSage\u2122; and",Object(ts.jsx)("br",{}),"8.4.2 indemnify SimSage\u2122 against all losses, liabilities, costs and expenses (including but not limited to legal costs) arising from or incurred by reason of any infringement of any intellectual property right by the use or possession of Your Information, and all other information and material provided by You to SimSage\u2122.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),Object(ts.jsx)("h2",{children:"9 Data protection & privacy policy"}),Object(ts.jsx)("br",{}),"9.1 You and SimSage\u2122 shall comply with the Privacy Act 1993 (and all other successor legislation and regulations) in performing their obligations under these Terms.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"9.2 SimSage\u2122 processes personal information (as defined in the Privacy Act 1993) which it collects in the course of providing the Services in accordance with its Privacy Policy which is accessible on the Website. You should read that policy at www.SimSage.nz/privacy/. You will be deemed to have accepted that policy when You accept these Terms.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"9.3 For personal information which is processed by SimSage\u2122 on Your behalf as part of the Services, SimSage\u2122 will act strictly in accordance with Your instructions by following the processing and security obligations contained in these Terms. You confirm that You are solely responsible for ensuring that any such processing and security obligations comply with all applicable privacy and data protection laws. You hereby indemnify SimSage\u2122 against all losses, liabilities, costs and expenses (including but not limited to legal costs) arising from or incurred by reason of Your failure to comply with this clause 9.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),Object(ts.jsx)("h2",{children:"10 General"}),Object(ts.jsx)("br",{}),"10.1 No Assignment: You may not assign or transfer any rights to any other person without SimSage\u2122's prior written consent. SimSage\u2122 may assign or transfer its rights and/or obligations under these Terms without requiring Your consent.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"10.2 Waiver: If either party waives any breach of these Terms, this will not constitute a waiver of any other breach. No waiver will be effective unless made in writing.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"10.3 Delays: Neither party will be liable for any delay or failure in performing its obligations under these Terms if the delay or failure is due to any cause outside its reasonable control. This clause does not apply to any obligation to pay money.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"10.4 Severability: If any provision of these Terms is invalid, unenforceable or conflicts with applicable law, that provision is replaced with a provision which, as far as possible, accomplishes the original purpose of that provision. The remainder of these Terms will be binding on the parties.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"10.5 Notices: Unless specified otherwise in these Terms, any notice given under these Terms by one party to the other must be in writing by email and will be deemed to have been given on transmission. Notices to SimSage\u2122 must be sent to support@simsage.nz  or to any other email address notified by email to You by SimSage\u2122. Notices to You will be sent to the email address which You provided when registering for the Services. SimSage\u2122 reserves the right to change these Terms at any time, effective on posting the modified terms on the Website, and SimSage\u2122 will make every effort to communicate these changes to You via email or notification via the Website.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"10.6 Rights of Third Parties: A person who is not a party to these Terms has no right to benefit under or to enforce any term of these Terms.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"10.7 Acknowledgement: You acknowledge that in entering into these Terms, You have not relied on any representations, undertakings or promises given by or implied from anything said or written (whether on the Website, the internet or in negotiation between the parties) except as expressly set out in these Terms.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"10.8 Entire agreement: These Terms, together with our Privacy Policy and the terms of any other notices or instructions given to You under these Terms, supersede and extinguish all prior agreements, representations (whether oral or written), and understandings and constitute the entire agreement between You and SimSage\u2122 relating to the Services, the Website and the other matters addressed in these Terms.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),"10.9 Governing law and jurisdiction: These Terms are governed by, and shall be construed in accordance with, New Zealand law and shall be subject to the exclusive jurisdiction of the New Zealand courts.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{})]}),Object(ts.jsx)("div",{className:"bottom-link",children:Object(ts.jsx)("button",{onClick:function(){return window.close()},className:"btn btn-primary btn-block",children:"close"})})]})}}]),s}(a.Component)),js=Object(o.b)((function(e){return{theme:e.appReducer.theme}}),(function(e){return Object(u.b)(es,e)}))(bs),gs=(s(228),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,item:a.props.item},a}return Object(g.a)(s,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({item:e.item})}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"prevFragment",value:function(){var e=this.state.item;e&&e.textIndex>0&&(e.textIndex-=1,this.setState({item:e}))}},{key:"nextFragment",value:function(){var e=this.state.item;e&&e.textIndex+1<e.textList.length&&(e.textIndex+=1,this.setState({item:e}))}},{key:"getPreviewSource",value:function(e){return"http://localhost:8080/api/document/preview/"+this.props.organisationId+"/"+this.props.kbId+"/"+this.props.clientId+"/"+e.urlId+"/-1"}},{key:"getBinarySource",value:function(e){return"http://localhost:8080/api/document/binary/"+this.props.organisationId+"/"+this.props.kbId+"/"+this.props.clientId+"/"+e.urlId}},{key:"render",value:function(){var e=this;if(this.state.has_error)return Object(ts.jsx)("h1",{children:"single-search-result: Something went wrong."});var t=this.state.item;return Object(ts.jsxs)("div",{className:"single-search-result-page",children:[Object(ts.jsx)("div",{className:"title",children:Object(ts.jsx)("a",{href:this.getPreviewSource(t),target:"_blank",rel:"noreferrer",children:t.title})}),Object(ts.jsxs)("div",{children:[t.textIndex>0&&Object(ts.jsx)("span",{className:"prev-fragment",onClick:function(){return e.prevFragment()},children:"<"}),0===t.textIndex&&Object(ts.jsx)("span",{className:"prev-fragment-disabled",children:"<"}),t.textIndex+1<t.textList.length&&Object(ts.jsx)("span",{className:"next-fragment",onClick:function(){return e.nextFragment()},children:">"}),t.textIndex+1>=t.textList.length&&Object(ts.jsx)("span",{className:"next-fragment-disabled",children:">"})]}),Object(ts.jsx)("div",{className:"text",dangerouslySetInnerHTML:{__html:s.highlight(t.textList[t.textIndex])}}),Object(ts.jsx)("div",{className:"preview-image",children:Object(ts.jsx)("img",{src:this.getPreviewSource(t),alt:t.title,className:"preview-image",title:t.title})}),Object(ts.jsxs)("div",{children:[Object(ts.jsx)("span",{className:"author",children:t.author}),Object(ts.jsx)("span",{className:"url'",onClick:function(){e.props.openDocument&&e.props.openDocument(t.url)},children:t.url})]}),Object(ts.jsx)("div",{className:"spacer"})]})}}],[{key:"highlight",value:function(e){return e&&e.replace&&(e=(e=(e=(e=(e=e.replace(/{hl1:}/g,"<span class='hl1'>")).replace(/{hl2:}/g,"<span class='hl2'>")).replace(/{:hl1}/g,"</span>")).replace(/{:hl2}/g,"</span>")).replace(/\n/g,"<br />")),e}}]),s}(n.a.Component)),fs=gs,vs=(s(229),window.ENV.api_base),_s=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,busy:!1,searchText:"",page:0,has_searched:!1,search_result_list:[],shard_list:[],bot_response:"",bot_links:[]},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.state.searchText.length>0&&this.doSearch()}},{key:"doSearch",value:function(){var e=this;if(!e.state.busy&&this.state.searchText.length>0){e.setState({busy:!0});var t={organisationId:this.props.organisationId,kbList:[this.props.kbId],scoreThreshold:.8125,clientId:this.props.clientId,semanticSearch:!0,query:"("+this.state.searchText+")",queryText:this.state.searchText,numResults:1,page:this.state.page,pageSize:10,shardSizeList:this.state.shard_list,fragmentCount:3,maxWordDistance:20,spellingSuggest:!1,contextLabel:"",contextMatchBoost:.01,sourceId:""};s.http_post("/semantic/query",t,(function(t){if(t&&t.data&&"message"===t.data.messageType){var s=t.data,a=s.shardSizeList?s.shardSizeList:[],n=s.resultList?s.resultList:[],r=s.text?s.text:"",i=s.urlList?s.urlList:[];e.setState({shard_list:a,search_result_list:n,has_searched:!0,bot_response:r,bot_links:i,busy:!1})}else e.setState({busy:!1})}),(function(t){e.setState({busy:!1}),e.props.onError&&e.props.onError("Error",t)}))}}},{key:"openDocument",value:function(e){alert("open document "+e)}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"simsage-search.js: Something went wrong."}):Object(ts.jsxs)("div",{className:"search-page",children:[Object(ts.jsxs)("div",{className:"search-bar",children:[Object(ts.jsx)("div",{className:"busy-box",children:Object(ts.jsx)("span",{style:{display:this.state.busy?"":"none",width:"32px"},children:"\u231b"})}),Object(ts.jsx)("div",{className:"search-text-box",children:Object(ts.jsx)("input",{type:"text",className:"search-text",autoFocus:!0,onChange:function(t){return e.setState({searchText:t.target.value})},onKeyPress:function(t){return e.handleSearchTextKeydown(t)},disabled:this.state.busy,value:this.state.searchText})}),Object(ts.jsx)("div",{className:"search-button-box",children:Object(ts.jsx)("button",{className:"btn btn-primary btn-block",disabled:this.state.busy,onClick:function(){return e.doSearch()},children:"Search"})})]}),""!==this.state.bot_response&&Object(ts.jsxs)("div",{className:"qna-response-bubble",children:[Object(ts.jsx)("div",{children:this.state.bot_response}),Object(ts.jsx)("div",{className:"url-list",children:this.state.bot_links.map((function(t,s){return Object(ts.jsx)("div",{className:"url",onClick:function(){return e.openDocument(t)},children:t},s)}))})]}),this.state.search_result_list&&this.state.search_result_list.length>0&&Object(ts.jsx)("div",{children:Object(ts.jsx)("div",{className:"search-results-box",children:this.state.search_result_list.map((function(t,s){return Object(ts.jsx)(fs,{item:t,organisationId:e.props.organisationId,kbId:e.props.kbId,clientId:e.props.clientId,openDocument:function(t){return e.openDocument(t)}},s)}))})}),this.state.search_result_list&&0===this.state.search_result_list.length&&this.state.has_searched&&""===this.state.bot_response&&Object(ts.jsx)("div",{children:"no results"})]})}}],[{key:"get_error",value:function(e){if("string"===typeof e&&0===e.indexOf("{")){var t=JSON.parse(e);return t&&t.response&&t.response.data&&t.response.data.error?t.response.data.error:e}return e&&e.response&&e.response.data&&e.response.data.error?e.response.data.error:e}},{key:"getHeaders",value:function(){return{headers:{"API-Version":"1","Content-Type":"application/json"}}}},{key:"http_post",value:function(e,t,a,n){v.a.post(vs+e,t,s.getHeaders()).then((function(e){a&&a(e)})).catch((function(e){n&&(void 0===e.response?n("Servers not responding or cannot contact Servers"):n(s.get_error(e)))}))}}]),s}(a.Component),ys=_s,xs=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(ts.jsx)("div",{children:Object(ts.jsx)(ys,{organisationId:"c276f883-e0c8-43ae-9119-df8b7df9c574",kbId:"46ff0c75-7938-492c-ab50-442496f5de51",clientId:"37542428-7bf3-45a0-beb4-5179e6931379",onError:function(e,t){return alert(e+":"+t)}})})}}]),s}(a.Component),Os=(s(230),s(243),s(127),s(244),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={open:!1,title:e.title,message:e.message,callback:e.callback,has_error:!1},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleOk",value:function(){this.setState({open:!1}),this.state.callback&&this.state.callback(!0)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.message.length>0,message:e.message,callback:e.callback,title:e.title})}},{key:"cancel",value:function(){this.state.callback&&this.state.callback(!1)}},{key:"ok",value:function(){this.state.callback&&this.state.callback(!0)}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"message-dialog.js: Something went wrong."}):this.state.open?Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded message-dialog-height",children:[Object(ts.jsx)("div",{className:"modal-header",children:this.state.title}),Object(ts.jsx)("div",{className:"modal-body",children:Object(ts.jsx)("div",{children:Object(ts.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.message}})})}),Object(ts.jsxs)("div",{className:"modal-footer",children:[Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.cancel()},children:"Cancel"}),Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.ok()},children:"OK"})]})]})})}):Object(ts.jsx)("div",{})}}]),s}(a.Component)),ks=Os,ws=(s(245),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"select",value:function(e){if(this.props.onSelect)if(e&&e.length>0){var t,s=Object(b.a)(this.props.data_list);try{for(s.s();!(t=s.n()).done;){var a=t.value;if(a.id===e){this.props.onSelect(a);break}}}catch(n){s.e(n)}finally{s.f()}}else this.props.onSelect("")}},{key:"render",value:function(){var e=this;if(this.state.has_error)return Object(ts.jsx)("h1",{children:"auto-complete.js: Something went wrong."});var t=this.props.data_list?this.props.data_list:[];return Object(ts.jsxs)("div",{className:"select-control",children:[Object(ts.jsx)("span",{className:"select-label",children:this.state.label}),Object(ts.jsx)("span",{className:"select-box",children:Object(ts.jsxs)("select",{className:"form-select",onChange:function(t){return e.select(t.target.value)},defaultValue:this.props.value,"aria-label":"Default select example",children:[Object(ts.jsx)("option",{value:"",children:"not selected"}),t.map((function(e,t){return Object(ts.jsx)("option",{value:e.id,children:e.name},t)}))]})})]})}}]),s}(a.Component)),Ns=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,open:e.open,onSave:e.onSave,onError:e.onError,id:a.props.id,name:a.props.name,enabled:a.props.enabled},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){this.state.onSave&&this.state.onSave({id:this.state.id,name:this.state.name,enabled:this.state.enabled})}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open,onSave:e.onSave,onError:e.onError,id:e.id,name:e.name,enabled:e.enabled})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"organisation-edit.js: Something went wrong."}):this.state.open?Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded",children:[Object(ts.jsx)("div",{className:"modal-header",children:"Edit Organisation"}),Object(ts.jsx)("div",{className:"modal-body",children:Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"name"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("input",{type:"text",className:"form-control",autoFocus:!0,onChange:function(t){return e.setState({name:t.target.value})},placeholder:"name",value:this.state.name})})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"checkbox-only",children:Object(ts.jsx)("input",{type:"checkbox",checked:this.state.enabled,onChange:function(t){e.setState({enabled:t.target.checked})},value:"enable this organisation?"})}),Object(ts.jsx)("span",{children:"organisation enabled?"})]})]})}),Object(ts.jsxs)("div",{className:"modal-footer",children:[Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleCancel()},children:"Cancel"}),Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleSave()},children:"Save"})]})]})})}):Object(ts.jsx)("div",{})}}]),s}(a.Component),Ss=(s(246),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={filename:"",fileType:"",data:"",organisationId:e.organisationId,onError:e.onError},a}return Object(g.a)(s,[{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){this.setState({organisationId:e.organisationId,onError:e.onError})}},{key:"_handleImageChange",value:function(e){e.preventDefault();var t=this,s=new FileReader,a=e.target.files[0],n=a.name,r=a.type;s.onloadend=function(){t.setState({filename:n,fileType:r,data:s.result})},s.readAsDataURL(a)}},{key:"upload",value:function(){if(this.state.data){var e={organisationId:this.state.organisationId,data:this.state.data};this.props.doUpload&&this.props.doUpload(e)}}},{key:"render",value:function(){var e=this;return Object(ts.jsx)("div",{className:"restore-upload",children:Object(ts.jsx)("form",{onSubmit:function(t){return e._handleSubmit(t)},className:"upload-container",children:Object(ts.jsxs)("div",{className:"form-offset",children:[this.state.data&&this.state.data.length>0&&"text/plain"===this.state.fileType&&Object(ts.jsx)("div",{className:"restore-image-button",onClick:function(){return e.upload()},children:Object(ts.jsx)("img",{className:"image-size",src:"../images/restore.svg",title:'Click here to restore data from "'+this.state.filename+'"',alt:"restore data from file"})}),Object(ts.jsx)("input",{className:"upload-margin",type:"file",onChange:function(t){return e._handleImageChange(t)}})]})})})}}]),s}(n.a.Component)),Cs=(s(247),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(){return Object(j.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){var e=this,t=this.props.count/this.props.rowsPerPage;return t!==parseInt(""+t)&&(t+=1),t=parseInt(""+t),Object(ts.jsx)("nav",{"aria-label":"Page navigation example",children:Object(ts.jsxs)("ul",{className:"pagination",children:[Object(ts.jsx)("li",{className:"page-item"+(0===this.props.page?" disabled":""),onClick:function(){e.props.page>0&&e.props.onChangePage(e.props.page-1)},children:Object(ts.jsxs)("div",{className:"page-link link-cursor","aria-label":"Previous",children:[Object(ts.jsx)("span",{"aria-hidden":"true",children:"\xab\xa0"}),Object(ts.jsx)("span",{className:"sr-only",children:"previous"})]})}),Object(ts.jsx)("li",{className:"page-item",children:Object(ts.jsx)("span",{className:"page-display",children:Object(ts.jsx)("label",{children:"page "+(this.props.page+1)+" of "+t})})}),Object(ts.jsx)("li",{className:"page-item",children:Object(ts.jsxs)("div",{children:[Object(ts.jsx)("span",{className:"page-size-label",children:"page size"}),Object(ts.jsx)("span",{className:"page-size-select",children:Object(ts.jsx)("select",{className:"form-select",onChange:function(t){return e.props.onChangeRowsPerPage(t.target.value)},defaultValue:this.props.rowsPerPage,"aria-label":"set page-size",children:this.props.rowsPerPageOptions.map((function(e,t){return Object(ts.jsx)("option",{value:e,children:e},t)}))})})]})}),Object(ts.jsx)("li",{className:"page-item"+(this.props.page+1>=t?" disabled":""),onClick:function(){e.props.page+1<t&&e.props.onChangePage(e.props.page+1)},children:Object(ts.jsxs)("div",{className:"page-link link-cursor","aria-label":"Next",children:[Object(ts.jsx)("span",{className:"sr-only",children:"next"}),Object(ts.jsx)("span",{"aria-hidden":"true",children:"\xa0\xbb"})]})})]})})}}]),s}(a.Component)),Rs=(s(248),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={edit_organisation:!1,edit_organisation_id:"",name:"",max_tpm:0,analytics_window_size_in_months:12,enabled:!0,bot_enabled:!0,analytics_enabled:!0,operator_enabled:!0,language_enabled:!0,copied_visible:"",view_organisation_id:!1,organisation:null,page_size:5,page:0},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"addNewOrganisation",value:function(){this.setState({edit_organisation:!0,organisation:null,id:"",name:"",enabled:!0})}},{key:"refreshSecurityId",value:function(){this.setState({edit_security_id:w.createGuid()})}},{key:"editOrganisation",value:function(e){e&&this.setState({edit_organisation:!0,organisation:e,id:e.id,name:e.name,enabled:!w.defined(e.enabled)||e.enabled})}},{key:"deleteOrganisationAsk",value:function(e){var t=this;e&&this.props.openDialog&&(this.props.openDialog('are you sure you want to remove "'+e.name+'" ?',"Remove Organisation",(function(e){t.deleteOrganisation(e)})),this.setState({organisation:e}))}},{key:"deleteOrganisation",value:function(e){e&&this.props.deleteOrganisation(this.state.organisation.id),this.props.closeDialog&&this.props.closeDialog()}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getOrganisationList()}},{key:"getOrganisations",value:function(){var e=[],t=this.state.page*this.state.page_size,s=t+this.state.page_size;for(var a in this.props.organisation_list)a>=t&&a<s&&this.props.organisation_list.hasOwnProperty(a)&&e.push(this.props.organisation_list[a]);return e}},{key:"save",value:function(e){e?e.name.length>0?(this.props.updateOrganisation({id:w.defined(e.id)?e.id:"",name:e.name,enabled:e.enabled}),this.setState({edit_organisation:!1,organisation:null})):this.props.setError("Incomplete Data","Please complete all fields.  Must have a name."):this.setState({edit_organisation:!1,organisation:null})}},{key:"backupAll",value:function(){k.download_backup(this.props.selected_organisation_id,"all")}},{key:"backup",value:function(e){k.download_backup(e,"specific")}},{key:"restore",value:function(e){e&&e.data&&e.data.length>0&&this.props.restore(e.data)}},{key:"viewIds",value:function(e){this.setState({view_organisation_id:!0,organisation:e})}},{key:"startCopiedVisible",value:function(e){var t=this;this.setState({copied_visible:e}),window.setTimeout((function(){t.setState({copied_visible:""})}),1e3)}},{key:"render",value:function(){var e=this,t=this.props.theme,s=vn.hasRole(this.props.user,["admin"]);return Object(ts.jsxs)("div",{className:"organisation-display",children:[Object(ts.jsx)(Ns,{open:this.state.edit_organisation,id:this.state.id,theme:t,name:this.state.name,enabled:this.state.enabled,onError:function(t,s){return e.props.showError(t,s)},onSave:function(t){return e.save(t)}}),Object(ts.jsxs)("div",{className:"filter-find-box",children:[Object(ts.jsx)("span",{className:"filter-label",children:"filter"}),Object(ts.jsx)("span",{className:"filter-find-text",children:Object(ts.jsx)("input",{type:"text",value:this.props.user_filter,autoFocus:!0,className:t,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setOrganisationFilter(t.target.value)}})}),Object(ts.jsx)("span",{className:"filter-find-image",children:Object(ts.jsx)("img",{className:"image-size",onClick:function(){return e.props.getOrganisationList()},src:"../images/dark-magnifying-glass.svg",title:"filter",alt:"filter"})})]}),Object(ts.jsx)("br",{clear:"both"}),Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("table",{className:"table",children:[Object(ts.jsx)("thead",{children:Object(ts.jsxs)("tr",{className:"table-header",children:[Object(ts.jsx)("th",{className:"table-header table-width-70",children:"organisation"}),Object(ts.jsx)("th",{className:"table-header",children:"actions"})]})}),Object(ts.jsxs)("tbody",{children:[this.getOrganisations().map((function(t){return Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"org-label",children:t.name})}),Object(ts.jsxs)("td",{children:[Object(ts.jsx)("div",{className:"linkButton",onClick:function(){e.viewIds(t)},children:Object(ts.jsx)("img",{src:"../images/id.svg",className:"image-size",title:"view knowledge base ids",alt:"ids"})}),Object(ts.jsx)("div",{className:"linkButton",onClick:function(){return e.editOrganisation(t)},children:Object(ts.jsx)("img",{src:"../images/edit.svg",className:"image-size",title:"edit organisation",alt:"edit"})}),Object(ts.jsx)("div",{className:"linkButton",onClick:function(){return e.deleteOrganisationAsk(t)},children:Object(ts.jsx)("img",{src:"../images/delete.svg",className:"image-size",title:"remove organisation",alt:"remove"})}),s&&Object(ts.jsx)("div",{className:"linkButton",onClick:function(){return e.backup(t.id)},children:Object(ts.jsx)("img",{src:"../images/backup.svg",className:"image-size",title:"backup this organisation",alt:"backup "+t.name})})]})]},t.id)})),Object(ts.jsx)("tr",{children:Object(ts.jsxs)("td",{colSpan:2,children:[s&&Object(ts.jsx)("div",{className:"imageButton",onClick:function(){return e.backupAll()},children:Object(ts.jsx)("img",{className:"addImage",src:"../images/backup.svg",title:"backup all organisations",alt:"backup all organisations"})}),Object(ts.jsx)("div",{className:"imageButton",onClick:function(){return e.addNewOrganisation()},children:Object(ts.jsx)("img",{className:"addImage",src:"../images/add.svg",title:"add new organisation",alt:"add new organisation"})}),Object(ts.jsx)("br",{}),s&&Object(ts.jsx)(Ss,{doUpload:function(t){return e.restore(t)},organisationId:this.props.selected_organisation_id,onError:function(t){return e.props.setError("Error",t)}})]})})]})]}),Object(ts.jsx)(Cs,{rowsPerPageOptions:[5,10,25],component:"div",count:this.props.organisation_list.length,rowsPerPage:this.state.page_size,page:this.state.page,onChangePage:function(t){return e.changePage(t)},onChangeRowsPerPage:function(t){return e.changePageSize(t)}})]}),this.state.view_organisation_id&&Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content organisation-id-modal shadow p-3 mb-5 bg-white rounded",children:[Object(ts.jsxs)("div",{className:"modal-header",children:[null!=this.state.organisation?this.state.organisation.name:""," organisation-id"]}),Object(ts.jsx)("div",{className:"modal-body",children:Object(ts.jsxs)("div",{children:[Object(ts.jsx)("div",{className:"organisationIdLabel",children:"organisation id"}),Object(ts.jsx)("div",{className:"floatLeft",children:this.state.organisation?this.state.organisation.id:""}),Object(ts.jsxs)("span",{className:"copyImageSpan",title:"copy organisation id",children:[Object(ts.jsx)("img",{src:"light"===t?"../images/clipboard-copy.svg":"../images/clipboard-copy-dark.svg",className:"clipboardImage",alt:"copy",onClick:function(){w.writeToClipboard(e.state.organisation?e.state.organisation.id:"")&&e.startCopiedVisible(e.state.organisation.id)}}),null!=this.state.organisation&&this.state.copied_visible===this.state.organisation.id&&Object(ts.jsx)("div",{className:"copiedStyle",children:"copied"})]}),Object(ts.jsx)("br",{clear:"both"})]})}),Object(ts.jsx)("div",{className:"modal-footer",children:Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.setState({view_organisation_id:!1})},children:"Close"})})]})})})]})}}]),s}(n.a.Component)),Is=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,user:e.appReducer.user,theme:e.appReducer.theme,selected_organisation_id:e.appReducer.selected_organisation_id,organisation_list:e.appReducer.organisation_list}}),(function(e){return Object(u.b)(es,e)}))(Rs),Es=(s(249),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(){return Object(j.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){var e=this;return Object(ts.jsx)("div",{className:"role-chip",onClick:function(){return e.props.onClick()},children:this.props.label})}}]),s}(a.Component)),Ds=(s(250),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,selected_group_list:e.selected_group_list?e.selected_group_list:[],selectedFilter:"",availableFilter:""},a}return Object(g.a)(s,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({selected_group_list:e.selected_group_list?e.selected_group_list:[]})}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"update_parent",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"removeUserOrGroup",value:function(e){var t,s=[],a=Object(b.a)(this.state.selected_group_list);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.name!==e.name&&s.push(n)}}catch(r){a.e(r)}finally{a.f()}this.setState({selected_group_list:s}),this.update_parent(s)}},{key:"addUserOrGroup",value:function(e){var t=JSON.parse(JSON.stringify(this.state.selected_group_list));t.push(e),this.setState({selected_group_list:t}),this.update_parent(t)}},{key:"getAllGroups",value:function(){return this.props.group_list?this.props.group_list:[]}},{key:"getAllUsers",value:function(){return this.props.user_list?this.props.user_list:[]}},{key:"getAvailableGroupsAndUsers",value:function(){var e,t=[],s=this.state.availableFilter.trim().toLowerCase(),a=Object(b.a)(this.getAllGroups());try{for(a.s();!(e=a.n()).done;){var n,r=e.value,i=!1,o=Object(b.a)(this.state.selected_group_list);try{for(o.s();!(n=o.n()).done;){var c=n.value;r.name===c.name&&(i=!0)}}catch(g){o.e(g)}finally{o.f()}i||((0===s.length||r.name.toLowerCase().indexOf(s)>=0)&&(r.isUser=!1),t.push(r))}}catch(g){a.e(g)}finally{a.f()}if(this.props.include_users){var l,d=Object(b.a)(this.getAllUsers());try{for(d.s();!(l=d.n()).done;){var u,p=l.value,h=!1,m=Object(b.a)(this.state.selected_group_list);try{for(m.s();!(u=m.n()).done;){var j=u.value;p.email===j.name&&(h=!0)}}catch(g){m.e(g)}finally{m.f()}h||(0===s.length||p.email.toLowerCase().indexOf(s)>=0)&&t.push({organisationId:this.props.organisation_id,name:p.email,id:p.id,isUser:!0})}}catch(g){d.e(g)}finally{d.f()}}return t}},{key:"getSelectedGroups",value:function(){var e,t=this.state.selected_group_list?this.state.selected_group_list:[],s=[],a=this.state.selectedFilter.trim().toLowerCase(),n=Object(b.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;r&&r.name&&(0===a.length||r.name.toLowerCase().indexOf(a)>=0)&&s.push(r)}}catch(i){n.e(i)}finally{n.f()}return s}},{key:"selectAll",value:function(){var e,t=[],s=Object(b.a)(this.getAllGroups());try{for(s.s();!(e=s.n()).done;){var a=e.value;t.push(a)}}catch(n){s.e(n)}finally{s.f()}this.setState({selected_group_list:t}),this.update_parent(t)}},{key:"clearAll",value:function(){this.setState({selected_group_list:[]}),this.update_parent([])}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"group-selector.js: Something went wrong."}):Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("div",{className:"group-block",children:[Object(ts.jsxs)("div",{className:"group-label",children:["selected groups",Object(ts.jsx)("span",{className:"filter-label",children:"filter "}),Object(ts.jsxs)("span",{className:"filter-text-box",children:[Object(ts.jsx)("input",{type:"text",className:"filter-text",value:this.state.selectedFilter,onChange:function(t){e.setState({selectedFilter:t.target.value})}}),Object(ts.jsx)("span",{className:"clear",title:"clear filter",onClick:function(){return e.setState({selectedFilter:""})},children:"\xd7"})]})]}),Object(ts.jsx)("div",{className:"group-area",children:this.getSelectedGroups().map((function(t,s){return Object(ts.jsxs)("div",{className:"user-name",onClick:function(){return e.removeUserOrGroup(t)},title:t.name+(t.isUser?" (user)":" (group)"),children:[Object(ts.jsx)("span",{className:"user-group-image-box",children:Object(ts.jsx)("img",{className:"user-group-image",src:t.isUser?"../images/user.svg":"../images/group.svg",alt:"user"})}),Object(ts.jsx)("span",{children:t.name})]},s)}))})]}),Object(ts.jsxs)("div",{className:"group-controls",children:[Object(ts.jsx)("div",{className:"button",title:"move all to selected groups",onClick:function(){return e.selectAll()},children:"<<"}),Object(ts.jsx)("div",{className:"button",title:"move all to available groups",onClick:function(){return e.clearAll()},children:">>"})]}),Object(ts.jsxs)("div",{className:"group-block",children:[Object(ts.jsxs)("div",{className:"group-label",children:["available groups",Object(ts.jsx)("span",{className:"filter-label",children:"filter "}),Object(ts.jsxs)("span",{className:"filter-text-box",children:[Object(ts.jsx)("input",{type:"text",className:"filter-text",value:this.state.availableFilter,onChange:function(t){e.setState({availableFilter:t.target.value})}}),Object(ts.jsx)("span",{className:"clear",title:"clear filter",onClick:function(){return e.setState({availableFilter:""})},children:"\xd7"})]})]}),Object(ts.jsx)("div",{className:"group-area",children:this.getAvailableGroupsAndUsers().map((function(t,s){return Object(ts.jsxs)("div",{className:"user-name",onClick:function(){return e.addUserOrGroup(t)},title:t.name+(t.isUser?" (user)":" (group)"),children:[Object(ts.jsx)("span",{className:"user-group-image-box",children:Object(ts.jsx)("img",{className:"user-group-image",src:t.isUser?"../images/user.svg":"../images/group.svg",alt:"user"})}),Object(ts.jsx)("span",{children:t.name})]},s)}))})]})]})}}]),s}(a.Component)),Ts=(s(128),["admin","operator","dms","manager"]),Ps=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={selectedTab:"details",edit_password_2:"",edit_user_id:a.props.edit_user_id?a.props.edit_user_id:"",edit_email:a.props.edit_email?a.props.edit_email:"",edit_first_name:a.props.edit_first_name?a.props.edit_first_name:"",edit_surname:a.props.edit_surname?a.props.edit_surname:"",edit_password:a.props.edit_password?a.props.edit_password:"",edit_roles:a.props.edit_roles?a.props.edit_roles:[],edit_kb_list:a.props.edit_kb_list?a.props.edit_kb_list:[],edit_groups:a.props.edit_groups?a.props.edit_groups:[]},a}return Object(g.a)(s,[{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){this.setState({selectedTab:"details",edit_user_id:e.edit_user_id?e.edit_user_id:"",edit_email:e.edit_email?e.edit_email:"",edit_first_name:e.edit_first_name?e.edit_first_name:"",edit_surname:e.edit_surname?e.edit_surname:"",edit_password:e.edit_password?e.edit_password:"",edit_roles:e.edit_roles.length>0?e.edit_roles:[],edit_kb_list:e.edit_kb_list.length>0?e.edit_kb_list:[],edit_groups:e.edit_groups.length>0?e.edit_groups:[]})}},{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"close",value:function(e){var t=!0;e&&this.state.edit_password_2!==this.state.edit_password&&(t=!1,this.props.onError&&this.props.onError("Error","passwords do not match")),t&&this.props.onClose&&(e?this.props.onClose(e,{user_id:this.state.edit_user_id,email:this.state.edit_email,first_name:this.state.edit_first_name,surname:this.state.edit_surname,password:this.state.edit_password,roles:this.state.edit_roles,kb_list:this.state.edit_kb_list,groups:this.state.edit_groups}):this.props.onClose(e,{}))}},{key:"fillNames",value:function(){function e(e){return e.length>0?e.slice(0,1).toUpperCase()+e.slice(1):e}if(this.state.edit_email.length>0&&this.state.edit_email.indexOf("@")>0){var t=this.state.edit_email.split("@")[0].split("."),s="",a="";0===this.state.edit_first_name.length&&(s=e(t[0])),0===this.state.edit_surname.length&&t.length>1&&(a=e(t[1])),s.length>0&&a.length>0?this.setState({edit_first_name:s,edit_surname:a}):s.length>0?this.setState({edit_first_name:s}):a.length>0&&this.setState({edit_surname:a})}}},{key:"removeRoleFromUser",value:function(e){var t,s=[],a=Object(b.a)(this.state.edit_roles);try{for(a.s();!(t=a.n()).done;){var n=t.value;e!==n&&s.push(n)}}catch(r){a.e(r)}finally{a.f()}this.setState({edit_roles:s})}},{key:"addRoleToUser",value:function(e){var t,s=JSON.parse(JSON.stringify(this.state.edit_roles)),a=!1,n=Object(b.a)(this.state.edit_roles);try{for(n.s();!(t=n.n()).done;){e===t.value&&(a=!0)}}catch(r){n.e(r)}finally{n.f()}a||(s.push(e),this.setState({edit_roles:s}))}},{key:"getAvailableRoles",value:function(){var e,t=[],s=vn.hasRole(this.props.user,["admin"]),a=Object(b.a)(Ts);try{for(a.s();!(e=a.n()).done;){var n,r=e.value,i=!1,o=Object(b.a)(this.state.edit_roles);try{for(o.s();!(n=o.n()).done;){r===n.value&&(i=!0)}}catch(c){o.e(c)}finally{o.f()}i||("admin"===r&&s||"admin"!==r)&&t.push(r)}}catch(c){a.e(c)}finally{a.f()}return t}},{key:"removeKBFromUser",value:function(e){var t,s=[],a=Object(b.a)(this.state.edit_kb_list);try{for(a.s();!(t=a.n()).done;){var n=t.value;e.kbId!==n.kbId&&s.push(n)}}catch(r){a.e(r)}finally{a.f()}this.setState({edit_kb_list:s})}},{key:"addKBToUser",value:function(e){var t=JSON.parse(JSON.stringify(this.state.edit_kb_list));t.push(e),this.setState({edit_kb_list:t})}},{key:"getAvailableKnowledgeBases",value:function(){var e,t=[],s=Object(b.a)(this.props.knowledge_base_list);try{for(s.s();!(e=s.n()).done;){var a,n=e.value,r=!1,i=Object(b.a)(this.state.edit_kb_list);try{for(i.s();!(a=i.n()).done;){var o=a.value;n.kbId===o.kbId&&(r=!0)}}catch(c){i.e(c)}finally{i.f()}r||t.push(n)}}catch(c){s.e(c)}finally{s.f()}return t}},{key:"render",value:function(){var e=this;return this.props.open?Object(ts.jsx)("div",{className:"modal user-display",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded",children:[Object(ts.jsx)("div",{className:"modal-header",children:this.props.edit_user_id?"Edit User":"Add New User"}),Object(ts.jsxs)("div",{className:"modal-body",children:[Object(ts.jsxs)("ul",{className:"nav nav-tabs",children:[Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("details"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"details"})},children:"user details"})}),Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("roles"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"roles"})},children:"roles"})}),Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("groups"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"groups"})},children:"groups"})})]}),"details"===this.state.selectedTab&&Object(ts.jsxs)("div",{className:"tab-content",children:[Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"email"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",autoFocus:!0,autoComplete:"false",placeholder:"email",value:this.state.edit_email,onBlur:function(){return e.fillNames()},onChange:function(t){return e.setState({edit_email:t.target.value})}})})})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"first name"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",autoComplete:"false",placeholder:"first name",value:this.state.edit_first_name,onChange:function(t){return e.setState({edit_first_name:t.target.value})}})})})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"surname"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",autoComplete:"false",placeholder:"surname",value:this.state.edit_surname,onChange:function(t){return e.setState({edit_surname:t.target.value})}})})})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"password"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"password",className:"form-control",autoComplete:"false",placeholder:this.props.edit_user_id?"leave blank not to change":"password",value:this.state.edit_password,onChange:function(t){return e.setState({edit_password:t.target.value})}})})})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"verify password"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"password",className:"form-control",autoComplete:"false",placeholder:this.props.edit_user_id?"leave blank not to change":"verify password",value:this.state.edit_password_2,onChange:function(t){return e.setState({edit_password_2:t.target.value})}})})})]})]}),"roles"===this.state.selectedTab&&Object(ts.jsxs)("div",{className:"tab-content",children:[Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("div",{className:"role-block",children:[Object(ts.jsx)("div",{className:"role-label",children:"SimSage roles"}),Object(ts.jsx)("div",{className:"role-area",children:this.state.edit_roles.map((function(t,s){return Object(ts.jsx)(Es,{color:"secondary",onClick:function(){return e.removeRoleFromUser(t)},label:N.getPrettyRole(t),variant:"outlined"},s)}))})]}),Object(ts.jsxs)("div",{className:"role-block",children:[Object(ts.jsx)("div",{className:"role-label",children:"available SimSage roles"}),Object(ts.jsx)("div",{className:"role-area",children:this.getAvailableRoles().map((function(t,s){return Object(ts.jsx)(Es,{color:"primary",onClick:function(){return e.addRoleToUser(t)},label:N.getPrettyRole(t),variant:"outlined"},s)}))})]})]}),Object(ts.jsx)("br",{style:{clear:"both"}}),s.hasOperatorRole(this.state.edit_roles)&&Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("div",{className:"role-block",children:[Object(ts.jsx)("div",{className:"role-label",children:"operator's knowledge bases"}),Object(ts.jsx)("div",{className:"role-area",children:this.state.edit_kb_list.map((function(t,s){return Object(ts.jsx)(Es,{color:"secondary",onClick:function(){return e.removeKBFromUser(t)},label:t.name,variant:"outlined"},s)}))})]}),Object(ts.jsxs)("div",{className:"role-block",children:[Object(ts.jsx)("div",{className:"role-label",children:"operator available knowledge bases"}),Object(ts.jsx)("div",{className:"role-area",children:this.getAvailableKnowledgeBases().map((function(t,s){return Object(ts.jsx)(Es,{color:"primary",onClick:function(){return e.addKBToUser(t)},label:t.name,variant:"outlined"},s)}))})]})]})]}),"groups"===this.state.selectedTab&&Object(ts.jsx)("div",{className:"tab-content",children:Object(ts.jsx)(Ds,{group_list:this.props.all_groups,include_users:!1,organisation_id:this.props.organisation_id,user_list:this.props.all_users,selected_group_list:this.state.edit_groups,onChange:function(t){return e.setState({edit_groups:t})}})})]}),Object(ts.jsxs)("div",{className:"modal-footer",children:[Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.close(!1)},children:"Cancel"}),Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.close(!0)},children:"Save"})]})]})})}):Object(ts.jsx)("div",{})}}],[{key:"hasOperatorRole",value:function(e){if(e){var t,s=Object(b.a)(e);try{for(s.s();!(t=s.n()).done;){if("operator"===t.value)return!0}}catch(a){s.e(a)}finally{s.f()}}return!1}}]),s}(n.a.Component),Us=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={edit_user:!1,user:null,edit_user_id:"",edit_first_name:"",edit_surname:"",edit_email:"",edit_password:"",edit_roles:[],edit_kb_list:[],edit_groups:[],page_size:5,page:0},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"numUsers",value:function(e,t){var a=0;for(var n in this.props.user_list){var r=this.props.user_list[n],i=s.formatRoles(this.props.selected_organisation_id,r.roles);(t||i.length>0)&&(a+=1)}return a}},{key:"getUsers",value:function(e){var t=[],a=this.state.page*this.state.page_size,n=a+this.state.page_size,r=0;for(var i in this.props.user_list){var o=this.props.user_list[i],c=s.formatRoles(this.props.selected_organisation_id,o.roles);(e||c.length>0)&&(r>=a&&r<n&&t.push(o),r+=1)}return t}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"addNewUser",value:function(){this.setState({edit_user:!0,user:null,edit_user_id:"",edit_first_name:"",edit_surname:"",edit_email:"",edit_password:"",edit_roles:[],edit_kb_list:[],edit_groups:[]})}},{key:"editUser",value:function(e){var t=this;if(e){var s,a=e.roles.filter((function(e){return e.organisationId===t.props.selected_organisation_id})),n=[],r=Object(b.a)(a);try{for(r.s();!(s=r.n()).done;){var i=s.value;n.push(i.role)}}catch(m){r.e(m)}finally{r.f()}var o=[];if(e.operatorKBList){var c,l=Object(b.a)(e.operatorKBList);try{for(l.s();!(c=l.n()).done;){var d,u=c.value,p=Object(b.a)(this.props.knowledge_base_list);try{for(p.s();!(d=p.n()).done;){var h=d.value;h.kbId===u.kbId&&o.push(h)}}catch(m){p.e(m)}finally{p.f()}}}catch(m){l.e(m)}finally{l.f()}}this.setState({edit_user:!0,user:e,edit_user_id:e.id,edit_first_name:e.firstName,edit_surname:e.surname,edit_email:e.email,edit_password:"",edit_roles:n,edit_kb_list:o,edit_groups:e.groupList})}}},{key:"deleteUserAsk",value:function(e,t){var s=this;e&&this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0?(this.props.openDialog("are you sure you want to remove "+e.firstName+" "+e.surname+"?","Remove User",(function(e){s.deleteUser(e)})),this.setState({user:e})):this.props.setError("No Organisation","Please select an organisation from the drop-down box.")}},{key:"deleteUser",value:function(e){e&&this.props.deleteUser(this.props.selected_organisation_id,this.state.user.id),this.props.closeDialog&&this.props.closeDialog()}},{key:"editDone",value:function(e,t){e?t.first_name.length>0&&t.surname.length>0&&t.email.length>0&&(t.user_id.length>0||t.password.length>0)?s.hasOperatorRole(t.roles)&&0===t.kb_list.length?this.props.setError("Incomplete Data","An operator must have at least one knowledge base associated with it."):(!s.hasAdministratorRole(this.state.edit_roles)&&s.hasAdministratorRole(t.roles)&&alert("WARNING:\n\nYou are about to assign administrative rights to this user.\nPlease be responsible and consider assigning the right permissions to the right people."),this.props.updateUser(this.props.selected_organisation_id,t.user_id,t.first_name,t.surname,t.email,t.password,t.roles,t.kb_list,t.groups),this.setState({edit_user:!1,user:null,edit_user_id:"",edit_first_name:"",edit_surname:"",edit_email:"",edit_password:"",edit_roles:[],edit_kb_list:[],edit_groups:[]})):this.props.setError("Incomplete Data","Please complete all fields.  Must have email-address, first-name, surname, and at least one role.  New Accounts must have a password."):(this.setState({edit_user:!1,user:null,edit_user_id:"",edit_first_name:"",edit_surname:"",edit_email:"",edit_password:"",edit_roles:[],edit_kb_list:[],edit_groups:[]}),this.state.closeDialog&&this.state.closeDialog())}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.selected_organisation_id&&this.props.getUsers(this.props.selected_organisation_id)}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0}},{key:"render",value:function(){var e=this,t=this.props.theme,a=vn.hasRole(this.props.user,["admin"]),n=vn.hasRole(this.props.user,["manager"]);return Object(ts.jsx)("div",{className:"user-display",children:this.isVisible()&&Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("div",{className:"filter-find-box",children:[Object(ts.jsx)("span",{className:"filter-label",children:"filter"}),Object(ts.jsx)("span",{className:"filter-find-text",children:Object(ts.jsx)("input",{type:"text",value:this.props.user_filter,autoFocus:!0,className:t,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setUserFilter(t.target.value)}})}),Object(ts.jsx)("span",{className:"filter-find-image",children:Object(ts.jsx)("img",{className:"image-size",onClick:function(){return e.props.getUsers()},src:"../images/dark-magnifying-glass.svg",title:"search",alt:"search"})})]}),Object(ts.jsx)("br",{clear:"both"}),Object(ts.jsx)("div",{children:Object(ts.jsxs)("table",{className:"table",children:[Object(ts.jsx)("thead",{children:Object(ts.jsxs)("tr",{className:"table-header",children:[Object(ts.jsx)("th",{className:"table-header",children:"user name"}),Object(ts.jsx)("th",{className:"table-header",children:"first name"}),Object(ts.jsx)("th",{className:"table-header",children:"surname"}),Object(ts.jsx)("th",{className:"table-header",children:"roles"}),Object(ts.jsx)("th",{className:"table-header",children:"actions"})]})}),Object(ts.jsxs)("tbody",{children:[this.getUsers(a).map((function(t){var r=vn.canEdit(t,a,n),i=vn.canDelete(t,e.props.user,a,n);return Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"label",children:t.email})}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"label",children:t.firstName})}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"label",children:t.surname})}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"role-label",children:s.formatRoles(e.props.selected_organisation_id,t.roles)})}),Object(ts.jsxs)("td",{children:[!r&&Object(ts.jsx)("div",{className:"disabled-link-button",title:"cannot edit this user",children:Object(ts.jsx)("img",{src:"../images/edit.svg",className:"dl-image-size-disabled",title:"cannot edit this user",alt:"cannot edit this user"})}),r&&Object(ts.jsx)("div",{className:"link-button",title:"Edit this user",onClick:function(){return e.editUser(t)},children:Object(ts.jsx)("img",{src:"../images/edit.svg",className:"dl-image-size",title:"edit user",alt:"edit"})}),!i&&Object(ts.jsx)("div",{className:"disabled-link-button",title:"cannot remove this user",children:Object(ts.jsx)("img",{src:"../images/delete.svg",className:"dl-image-size-disabled",title:"cannot remove this user",alt:"cannot remove this user"})}),i&&Object(ts.jsx)("div",{className:"link-button",title:"Remove this user",onClick:function(){return e.deleteUserAsk(t,a)},children:Object(ts.jsx)("img",{src:"../images/delete.svg",className:"dl-image-size",title:a?"remove user":"remove user roles",alt:"remove"})})]})]},t.id)})),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{children:this.props.selected_organisation_id.length>0&&(a||n)&&Object(ts.jsx)("div",{className:"image-button",onClick:function(){return e.addNewUser()},children:Object(ts.jsx)("img",{className:"add-image",src:"../images/add.svg",title:"add new user",alt:"add new user"})})})]}),Object(ts.jsx)("tr",{children:Object(ts.jsx)("td",{colSpan:5,children:Object(ts.jsx)(Cs,{rowsPerPageOptions:[5,10,25],component:"div",count:this.numUsers(this.props.selected_organisation_id,a),rowsPerPage:this.state.page_size,page:this.state.page,onChangePage:function(t){return e.changePage(t)},onChangeRowsPerPage:function(t){return e.changePageSize(t)}})})})]})]})}),Object(ts.jsx)(Ps,{open:this.state.edit_user,theme:t,organisation_id:this.props.selected_organisation_id,user:this.props.user,edit_user_id:this.state.edit_user_id,edit_email:this.state.edit_email,edit_first_name:this.state.edit_first_name,edit_surname:this.state.edit_surname,edit_password:this.state.edit_password,edit_roles:this.state.edit_roles,edit_kb_list:this.state.edit_kb_list,edit_groups:this.state.edit_groups,all_groups:this.props.group_list,all_users:this.props.user_list,knowledge_base_list:this.props.knowledge_base_list,setError:this.props.setError,onClose:function(t,s){return e.editDone(t,s)},onError:function(t,s){return e.props.setError(t,s)}})]})})}}],[{key:"formatRoles",value:function(e,t){var s,a="",n=Object(b.a)(t);try{for(n.s();!(s=n.n()).done;){var r=s.value;r.organisationId!==e&&"admin"!==r.role||("admin"===r.role&&-1===a.indexOf("admin")||"admin"!==r.role)&&(a.length>0&&(a+=", "),a+=N.getPrettyRole(r.role))}}catch(i){n.e(i)}finally{n.f()}return a}},{key:"hasOperatorRole",value:function(e){if(e){var t,s=Object(b.a)(e);try{for(s.s();!(t=s.n()).done;){if("operator"===t.value)return!0}}catch(a){s.e(a)}finally{s.f()}}return!1}},{key:"hasAdministratorRole",value:function(e){if(e){var t,s=Object(b.a)(e);try{for(s.s();!(t=s.n()).done;){if("admin"===t.value)return!0}}catch(a){s.e(a)}finally{s.f()}}return!1}}]),s}(n.a.Component),As=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,user_list:e.appReducer.user_list,user_filter:e.appReducer.user_filter,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,knowledge_base_list:e.appReducer.knowledge_base_list,group_list:e.appReducer.group_list,user:e.appReducer.user}}),(function(e){return Object(u.b)(es,e)}))(Us),Ls=(s(251),["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"]),zs=["mon","tue","wed","thu","fri","sat","sun"],Fs="mon-0,tue-0,wed-0,thu-0,fri-0,sat-0,sun-0,mon-1,tue-1,wed-1,thu-1,fri-1,sat-1,sun-1,mon-2,tue-2,wed-2,thu-2,fri-2,sat-2,sun-2,mon-3,tue-3,wed-3,thu-3,fri-3,sat-3,sun-3,mon-4,tue-4,wed-4,thu-4,fri-4,sat-4,sun-4,mon-5,tue-5,wed-5,thu-5,fri-5,sat-5,sun-5,mon-6,tue-6,wed-6,thu-6,fri-6,sat-6,sun-6,mon-7,tue-7,wed-7,thu-7,fri-7,sat-7,sun-7,mon-8,tue-8,wed-8,thu-8,fri-8,sat-8,sun-8,mon-9,tue-9,wed-9,thu-9,fri-9,sat-9,sun-9,mon-10,tue-10,wed-10,thu-10,fri-10,sat-10,sun-10,mon-11,tue-11,wed-11,thu-11,fri-11,sat-11,sun-11,mon-12,tue-12,wed-12,thu-12,fri-12,sat-12,sun-12,mon-13,tue-13,wed-13,thu-13,fri-13,sat-13,sun-13,mon-14,tue-14,wed-14,thu-14,fri-14,sat-14,sun-14,mon-15,tue-15,wed-15,thu-15,fri-15,sat-15,sun-15,mon-16,tue-16,wed-16,thu-16,fri-16,sat-16,sun-16,mon-17,tue-17,wed-17,thu-17,fri-17,sat-17,sun-17,mon-18,tue-18,wed-18,thu-18,fri-18,sat-18,sun-18,mon-19,tue-19,wed-19,thu-19,fri-19,sat-19,sun-19,mon-20,tue-20,wed-20,thu-20,fri-20,sat-20,sun-20,mon-21,tue-21,wed-21,thu-21,fri-21,sat-21,sun-21,mon-22,tue-22,wed-22,thu-22,fri-22,sat-22,sun-22,mon-23,tue-23,wed-23,thu-23,fri-23,sat-23,sun-23",Ms=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={onSave:e.onSave,time:e.time,time_map:a.setupTimeMap(e.time),has_error:!1},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){var e="";for(var t in this.state.time_map)1===this.state.time_map[t]&&(e.length>0&&(e+=","),e+=t);this.state.onSave&&this.state.onSave(e)}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(null!==e){var t=this.setupTimeMap(e.time);this.setState({time:e.time,onSave:e.onSave,time_map:t})}}},{key:"setupTimeMap",value:function(e){var t={};return e&&e.split(",").map((function(e){return t[e]=1,t[e]})),t}},{key:"gs",value:function(e){return 1===this.state.time_map[e]?"active":"inactive"}},{key:"clearAll",value:function(){this.setState({time_map:this.setupTimeMap(""),time:""}),this.state.onSave&&this.state.onSave("")}},{key:"selectAll",value:function(){this.setState({time_map:this.setupTimeMap(Fs),time:Fs}),this.state.onSave&&this.state.onSave(Fs)}},{key:"select",value:function(e){var t=this.state.time_map;if("all"===e)for(var s=function(e){zs.map((function(s){var a=s+"-"+e;return 1===t[a]?t[a]=0:t[a]=1,t[a]}))},a=0;a<24;a++)s(a);else if(e.indexOf("-")>0)1===t[e]?t[e]=0:t[e]=1;else if(zs.indexOf(e)>=0)for(var n=0;n<24;n++){var r=e+"-"+n;1===t[r]?t[r]=0:t[r]=1}else zs.map((function(s){var a=s+"-"+e;return 1===t[a]?t[a]=0:t[a]=1,t[a]}));this.setState({time_map:t}),this.handleSave()}},{key:"timeStr",value:function(){var e=(new Date).toGMTString(),t=e.split(",")[0],s=e.split(" ")[4].split(":");return t+", "+(s[0]+":"+s[1])}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"time-select.js: Something went wrong."}):Object(ts.jsxs)("div",{className:"time-select",children:[Object(ts.jsxs)("div",{className:"labelTop",children:["all times in GMT (now ",this.timeStr(),")"]}),Object(ts.jsx)("table",{className:"tableStyle",children:Object(ts.jsxs)("tbody",{children:[Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{onClick:function(){return e.select("all")}}),Ls.map((function(t,s){return Object(ts.jsx)("td",{onClick:function(){return e.select(""+s)},className:"cell-spacing tHeader",children:t},"time-"+s)}))]}),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{onClick:function(){return e.select("mon")},className:"tCol",children:"Monday"}),Ls.map((function(t,s){return Object(ts.jsx)("td",{onClick:function(){return e.select("mon-"+s)},className:"cell-spacing "+e.gs("mon-"+s)},"mon-"+s)}))]}),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{onClick:function(){return e.select("tue")},className:"tCol",children:"Tuesday"}),Ls.map((function(t,s){return Object(ts.jsx)("td",{onClick:function(){return e.select("tue-"+s)},className:"cell-spacing "+e.gs("tue-"+s)},"tue-"+s)}))]}),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{onClick:function(){return e.select("wed")},className:"tCol",children:"Wednesday"}),Ls.map((function(t,s){return Object(ts.jsx)("td",{onClick:function(){return e.select("wed-"+s)},className:"cell-spacing "+e.gs("wed-"+s)},"wed-"+s)}))]}),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{onClick:function(){return e.select("thu")},className:"tCol",children:"Thursday"}),Ls.map((function(t,s){return Object(ts.jsx)("td",{onClick:function(){return e.select("thu-"+s)},className:"cell-spacing "+e.gs("thu-"+s)},"thu-"+s)}))]}),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{onClick:function(){return e.select("fri")},className:"tCol",children:"Friday"}),Ls.map((function(t,s){return Object(ts.jsx)("td",{onClick:function(){return e.select("fri-"+s)},className:"cell-spacing "+e.gs("fri-"+s)},"fri-"+s)}))]}),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{onClick:function(){return e.select("sat")},className:"tCol",children:"Saturday"}),Ls.map((function(t,s){return Object(ts.jsx)("td",{onClick:function(){return e.select("sat-"+s)},className:"cell-spacing "+e.gs("sat-"+s)},"sat-"+s)}))]}),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{onClick:function(){return e.select("sun")},className:"tCol",children:"Sunday"}),Ls.map((function(t,s){return Object(ts.jsx)("td",{onClick:function(){return e.select("sun-"+s)},className:"cell-spacing "+e.gs("sun-"+s)},"sun-"+s)}))]})]})}),Object(ts.jsx)("br",{}),Object(ts.jsxs)("div",{className:"legenda",children:[Object(ts.jsx)("div",{className:"activeText",children:"active"}),Object(ts.jsx)("div",{className:"inactiveText",children:"inactive"}),Object(ts.jsx)("div",{className:"button1",children:Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.clearAll()},children:"clear all"})}),Object(ts.jsx)("div",{className:"button2",children:Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.selectAll()},children:"select all"})})]})]})}}]),s}(a.Component),qs=(s(252),"mon-0,tue-0,wed-0,thu-0,fri-0,sat-0,sun-0,mon-1,tue-1,wed-1,thu-1,fri-1,sat-1,sun-1,mon-2,tue-2,wed-2,thu-2,fri-2,sat-2,sun-2,mon-3,tue-3,wed-3,thu-3,fri-3,sat-3,sun-3"),Ws="mon-0,tue-0,wed-0,thu-0,fri-0,sat-0,sun-0,mon-1,tue-1,wed-1,thu-1,fri-1,sat-1,sun-1,mon-2,tue-2,wed-2,thu-2,fri-2,sat-2,sun-2,mon-3,tue-3,wed-3,thu-3,fri-3,sat-3,sun-3",Ys=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={selectedTab:"general",edit_knowledgebase:!1,edit_knowledgebase_id:"",knowledgeBase:null,edit_kb_id:"",edit_name:"",edit_email:"",edit_security_id:"",edit_enabled:!0,edit_max_queries_per_day:"0",edit_analytics_window_size_in_months:"0",edit_operator_enabled:!0,edit_capacity_warnings:!0,edit_created:0,edit_index_optimization_schedule:qs,edit_dms_index_schedule:Ws,view_ids:!1,copied_visible:"",kb:null,page_size:5,page:0},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"addNewKnowledgeBase",value:function(){this.setState({edit_knowledgebase:!0,knowledgeBase:null,edit_knowledgebase_id:"",edit_name:"",edit_email:"",edit_enabled:!0,edit_max_queries_per_day:"0",edit_analytics_window_size_in_months:"0",edit_operator_enabled:!0,edit_capacity_warnings:!0,edit_created:0,edit_security_id:w.createGuid(),edit_index_optimization_schedule:qs,edit_dms_index_schedule:Ws})}},{key:"refreshSecurityId",value:function(){this.setState({edit_security_id:w.createGuid()})}},{key:"editKnowledgeBase",value:function(e){e&&this.setState({edit_knowledgebase:!0,knowledgeBase:e,edit_knowledgebase_id:e.kbId,edit_name:e.name,edit_email:e.email,edit_security_id:e.securityId,edit_enabled:e.enabled,edit_max_queries_per_day:e.maxQueriesPerDay,edit_analytics_window_size_in_months:e.analyticsWindowInMonths,edit_operator_enabled:e.operatorEnabled,edit_capacity_warnings:e.capacityWarnings,edit_index_optimization_schedule:e.indexOptimizationSchedule,edit_dms_index_schedule:e.dmsIndexSchedule,edit_created:e.created})}},{key:"optimizeIndexesAsk",value:function(e){var t=this;e&&(this.props.openDialog('are you sure you want to optimize the indexes for "'+e.name+'" ?',"Optimize Knowledge base",(function(e){t.optimizeIndexes(e)})),this.setState({knowledgeBase:e}))}},{key:"optimizeIndexes",value:function(e){e&&this.props.optimizeIndexes(this.props.selected_organisation_id,this.state.knowledgeBase.kbId),this.props.closeDialog&&this.props.closeDialog()}},{key:"removeOptimizedIndexesAsk",value:function(e){var t=this;e&&(this.props.openDialog('are you sure you want to remove the optimized indexes for "'+e.name+'" ?',"Remove Optimized Indexes",(function(e){t.removeOptimizedIndexes(e)})),this.setState({knowledgeBase:e}))}},{key:"removeOptimizedIndexes",value:function(e){e&&this.props.removeOptimizedIndexes(this.props.selected_organisation_id,this.state.knowledgeBase.kbId),this.props.closeDialog&&this.props.closeDialog()}},{key:"removeAllIndexesAsk",value:function(e){var t=this;e&&(this.props.openDialog('are you sure you want to remove the <b>ALL indexes</b> (optimized and non-optimized) for "'+e.name+'" ?',"Remove ALL Indexes",(function(e){t.removeAllIndexes(e)})),this.setState({knowledgeBase:e}))}},{key:"removeAllIndexes",value:function(e){e&&this.props.removeAllIndexes(this.props.selected_organisation_id,this.state.knowledgeBase.kbId),this.props.closeDialog&&this.props.closeDialog()}},{key:"deleteKnowledgeBaseAsk",value:function(e){var t=this;e&&(this.props.openDialog('are you sure you want to remove "'+e.name+'" ?',"Remove Knowledge base",(function(e){t.deleteKnowledgeBase(e)})),this.setState({knowledgeBase:e}))}},{key:"deleteKnowledgeBase",value:function(e){e&&this.props.deleteKnowledgeBase(this.props.selected_organisation_id,this.state.knowledgeBase.kbId),this.props.closeDialog&&this.props.closeDialog()}},{key:"editCancel",value:function(){this.setState({edit_knowledgebase:!1,knowledgeBase:null})}},{key:"editOk",value:function(){this.state.edit_name.length>0?(this.props.updateKnowledgeBase(this.props.selected_organisation_id,this.state.edit_knowledgebase_id,this.state.edit_name,this.state.edit_email,this.state.edit_security_id,this.state.edit_enabled,this.state.edit_max_queries_per_day,this.state.edit_analytics_window_size_in_months,this.state.edit_operator_enabled,this.state.edit_capacity_warnings,this.state.edit_created,this.state.edit_index_optimization_schedule,this.state.edit_dms_index_schedule),this.setState({edit_knowledgebase:!1,knowledgeBase:null})):this.props.setError("Incomplete Data","Please complete all fields.")}},{key:"viewIds",value:function(e){this.setState({view_ids:!0,kb:e})}},{key:"getKnowledgeBases",value:function(){var e=[],t=this.state.page*this.state.page_size,s=t+this.state.page_size;for(var a in this.props.knowledge_base_list)a>=t&&a<s&&e.push(this.props.knowledge_base_list[a]);return e}},{key:"updateIndexOptimizationSchedule",value:function(e){null!==e&&this.setState({edit_index_optimization_schedule:e})}},{key:"updateDMSIndexSchedule",value:function(e){null!==e&&this.setState({edit_dms_index_schedule:e})}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0}},{key:"startCopiedVisible",value:function(e){var t=this;this.setState({copied_visible:e}),window.setTimeout((function(){t.setState({copied_visible:""})}),1e3)}},{key:"indexOptimizationClass",value:function(e){return e?e.needsIndexOptimization||0===e.indexOptimizationTime?"indexes-out-of-date":"indexes-up-to-date":""}},{key:"indexOptimizationText",value:function(e){return e?e.needsIndexOptimization||0===e.indexOptimizationTime?'the indexes for "'+e.name+'" are out of date.':'the indexes for "'+e.name+'" are up to date.':""}},{key:"indexOptimizationStatus",value:function(e){if(e){var t="not optimized";return e.indexOptimizationTime>0&&(t=w.unixTimeConvert(e.indexOptimizationTime)),t}return""}},{key:"render",value:function(){var e=this,t=this.props.theme,s=this.state.selectedTab,a=vn.hasRole(this.props.user,["admin"]);return Object(ts.jsxs)("div",{className:"kb-page",children:[this.isVisible()&&Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("table",{className:"table",children:[Object(ts.jsx)("thead",{children:Object(ts.jsxs)("tr",{className:"table-header",children:[Object(ts.jsx)("th",{className:"table-header table-width-20",children:"knowledge base"}),Object(ts.jsx)("th",{className:"table-header table-width-20",children:"email queries to"}),Object(ts.jsx)("th",{className:"table-header table-width-20",children:"last index optimization"}),Object(ts.jsx)("th",{className:"table-header",children:"actions"})]})}),Object(ts.jsxs)("tbody",{children:[this.getKnowledgeBases().map((function(t){return Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"kb-label",children:t.name})}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"kb-label",children:t.email})}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"kb-label"+e.indexOptimizationClass(t),title:e.indexOptimizationText(t),children:e.indexOptimizationStatus(t)})}),Object(ts.jsxs)("td",{children:[Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.viewIds(t)},children:Object(ts.jsx)("img",{src:"../images/id.svg",className:"image-size",title:"view knowledge base ids",alt:"ids"})}),Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.editKnowledgeBase(t)},children:Object(ts.jsx)("img",{src:"../images/edit.svg",className:"image-size",title:"edit knowledge base",alt:"edit"})}),Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.deleteKnowledgeBaseAsk(t)},children:Object(ts.jsx)("img",{src:"../images/delete.svg",className:"image-size",title:"remove knowledge base",alt:"remove"})}),Object(ts.jsx)("br",{clear:"both"}),Object(ts.jsx)("button",{style:{marginBottom:"4px"},onClick:function(){return e.optimizeIndexesAsk(t)},children:"optimize indexes"}),a&&Object(ts.jsx)("div",{style:{marginBottom:"4px"},children:Object(ts.jsx)("button",{onClick:function(){return e.removeOptimizedIndexesAsk(t)},children:"remove optimized indexes"})}),a&&Object(ts.jsx)("div",{children:Object(ts.jsx)("button",{onClick:function(){return e.removeAllIndexesAsk(t)},children:"remove all indexes"})})]})]},t.kbId)})),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{children:this.props.selected_organisation_id.length>0&&Object(ts.jsx)("div",{className:"kb-image-button",onClick:function(){return e.addNewKnowledgeBase()},children:Object(ts.jsx)("img",{className:"image-size",src:"../images/add.svg",title:"add new user",alt:"add new user"})})})]})]})]}),Object(ts.jsx)(Cs,{rowsPerPageOptions:[5,10,25],theme:t,component:"div",count:this.props.knowledge_base_list.length,rowsPerPage:this.state.page_size,page:this.state.page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t){return e.changePage(t)},onChangeRowsPerPage:function(t){return e.changePageSize(t)}})]}),this.state.edit_knowledgebase&&Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded kb-height",children:[Object(ts.jsx)("div",{className:"modal-header",children:this.state.edit_knowledgebase_id?"Edit Knowledge Base":"Add New Knowledge Base"}),Object(ts.jsxs)("div",{className:"modal-body",children:[Object(ts.jsxs)("ul",{className:"nav nav-tabs",children:[Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("general"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"general"})},children:"general"})}),Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("index schedule"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"index schedule"})},children:"index schedule"})}),Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("DMS schedule"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"DMS schedule"})},children:"DMS schedule"})})]}),Object(ts.jsx)("br",{}),"general"===s&&Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"name"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("input",{type:"text",autoFocus:!0,className:"edit-box",placeholder:"knowledge base name",value:this.state.edit_name,onChange:function(t){return e.setState({edit_name:t.target.value})}})})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"email questions to"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("input",{type:"text",className:"edit-box",placeholder:"email questions to",value:this.state.edit_email,onChange:function(t){return e.setState({edit_email:t.target.value})}})})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"security id"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("input",{type:"text",className:"sid-box",disabled:!0,placeholder:"security id",value:this.state.edit_security_id,onChange:function(t){return e.setState({edit_security_id:t.target.value})}})}),Object(ts.jsx)("img",{title:"generate new security id",alt:"refresh",src:"light"===t?"../images/refresh.svg":"../images/refresh-dark.svg",onClick:function(){return e.refreshSecurityId()},className:"image-size"})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"checkbox-only",children:Object(ts.jsx)("input",{type:"checkbox",checked:this.state.edit_enabled,onChange:function(t){e.setState({edit_enabled:t.target.checked})},value:"enable this knowledge-base?"})}),Object(ts.jsx)("span",{children:"knowledge-base enabled?"})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"checkbox-only",children:Object(ts.jsx)("input",{type:"checkbox",checked:this.state.edit_operator_enabled,onChange:function(t){e.setState({edit_operator_enabled:t.target.checked})},value:"enable operator access?"})}),Object(ts.jsx)("span",{children:"operator enabled?"})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"checkbox-only",children:Object(ts.jsx)("input",{type:"checkbox",checked:this.state.edit_capacity_warnings,onChange:function(t){e.setState({edit_capacity_warnings:t.target.checked})},value:"enable capacity warnings?"})}),Object(ts.jsx)("span",{children:"capacity-warnings on?"})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-wide",children:"maximum number of queries per day (0 is no limits)"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("input",{type:"text",onChange:function(t){return e.setState({edit_max_queries_per_day:t.target.value})},placeholder:"max transactions per month",value:this.state.edit_max_queries_per_day})})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-wide",children:"maximum analytics retention period in months (0 is no limits)"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("input",{type:"text",onChange:function(t){return e.setState({edit_analytics_window_size_in_months:t.target.value})},placeholder:"max analytics retention period in months",value:this.state.edit_analytics_window_size_in_months})})]})]}),"index schedule"===s&&Object(ts.jsx)("div",{className:"time-tab-content",children:Object(ts.jsx)(Ms,{time:this.state.edit_index_optimization_schedule,onSave:function(t){return e.updateIndexOptimizationSchedule(t)}})}),"index schedule"===s&&Object(ts.jsx)("div",{className:"padding-bottom"}),"DMS schedule"===s&&Object(ts.jsx)("div",{className:"time-tab-content",children:Object(ts.jsx)(Ms,{time:this.state.edit_dms_index_schedule,onSave:function(t){return e.updateDMSIndexSchedule(t)}})}),"DMS schedule"===s&&Object(ts.jsx)("div",{className:"padding-bottom"})]}),Object(ts.jsxs)("div",{className:"modal-footer",children:[Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.editCancel()},children:"Cancel"}),Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.editOk()},children:"Save"})]})]})})})]}),this.state.view_ids&&Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded",children:[Object(ts.jsxs)("div",{className:"modal-header",children:[null!=this.state.kb?this.state.kb.name:""," IDS"]}),Object(ts.jsx)("div",{className:"modal-body",children:Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("div",{className:"dialog-line-height",children:[Object(ts.jsx)("div",{className:"organisation-id-label",children:"organisation id"}),Object(ts.jsx)("div",{className:"float-left",children:this.props.selected_organisation_id?this.props.selected_organisation_id:""}),Object(ts.jsxs)("span",{className:"copy-image-span",title:"copy organisation id",children:[Object(ts.jsx)("img",{src:"light"===t?"../images/clipboard-copy.svg":"../images/clipboard-copy-dark.svg",className:"clipboard-image",alt:"copy",onClick:function(){w.writeToClipboard(e.props.selected_organisation_id?e.props.selected_organisation_id:"")&&e.startCopiedVisible(e.props.selected_organisation_id)}}),this.props.selected_organisation_id&&this.state.copied_visible===this.props.selected_organisation_id&&Object(ts.jsx)("div",{className:"copied-style",children:"copied"})]}),Object(ts.jsx)("br",{clear:"both"})]}),Object(ts.jsxs)("div",{className:"dialog-line-height",children:[Object(ts.jsx)("div",{className:"organisation-id-label",children:"knowledge base id"}),Object(ts.jsx)("div",{className:"float-left",children:this.state.kb?this.state.kb.kbId:""}),Object(ts.jsxs)("span",{className:"copy-image-span",title:"copy knowledge base id",children:[Object(ts.jsx)("img",{src:"light"===t?"../images/clipboard-copy.svg":"../images/clipboard-copy-dark.svg",className:"clipboard-image",alt:"copy",onClick:function(){w.writeToClipboard(e.state.kb?e.state.kb.kbId:"")&&e.startCopiedVisible(e.state.kb.kbId)}}),this.state.kb&&this.state.copied_visible===this.state.kb.kbId&&Object(ts.jsx)("div",{className:"copied-style",children:"copied"})]}),Object(ts.jsx)("br",{clear:"both"})]}),Object(ts.jsxs)("div",{className:"dialog-line-height",children:[Object(ts.jsx)("div",{className:"organisation-id-label",children:"security id"}),Object(ts.jsx)("div",{className:"float-left",children:this.state.kb?this.state.kb.securityId:""}),Object(ts.jsxs)("span",{className:"copy-image-span",title:"copy security id",children:[Object(ts.jsx)("img",{src:"light"===t?"../images/clipboard-copy.svg":"../images/clipboard-copy-dark.svg",className:"clipboard-image",alt:"copy",onClick:function(){w.writeToClipboard(e.state.kb?e.state.kb.securityId:"")&&e.startCopiedVisible(e.state.kb.securityId)}}),this.state.kb&&this.state.copied_visible===this.state.kb.securityId&&Object(ts.jsx)("div",{className:"copied-style",children:"copied"})]}),Object(ts.jsx)("br",{clear:"both"})]})]})}),Object(ts.jsx)("div",{className:"modal-footer",children:Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.setState({view_ids:!1})},children:"Close"})})]})})})]})}}]),s}(a.Component),Bs=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,knowledge_base_list:e.appReducer.knowledge_base_list,user:e.appReducer.user}}),(function(e){return Object(u.b)(es,e)}))(Ys),Vs=(s(129),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={edit_edge_device:!1,edgeDevice:null,edit_edge_id:"",edit_name:"",edit_created:0,view_ids:!1,view_ids_edge_device:null,copied_visible:"",view_ids_edge_map:{},page_size:5,page:0},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"addEdgeDevice",value:function(){this.setState({edit_edge_device:!0,edgeDevice:null,edit_edge_id:"",edit_name:"",edit_created:0})}},{key:"editEdgeDevice",value:function(e){e&&this.setState({edit_edge_device:!0,edgeDevice:e,edit_edge_id:e.edgeId,edit_name:e.name,edit_created:e.created})}},{key:"deleteEdgeDeviceAsk",value:function(e){var t=this;e&&(this.props.openDialog('are you sure you want to remove "'+e.name+'" ?',"Remove Edge device?",(function(e){t.deleteEdgeDevice(e)})),this.setState({edgeDevice:e}))}},{key:"deleteEdgeDevice",value:function(e){e&&this.props.deleteEdgeDevice(this.props.selected_organisation_id,this.state.edgeDevice.edgeId),this.props.closeDialog&&this.props.closeDialog()}},{key:"editCancel",value:function(){this.setState({edit_edge_device:!1,edgeDevice:null})}},{key:"editOk",value:function(){this.state.edit_name.length>0?(this.props.updateEdgeDevice(this.props.selected_organisation_id,this.state.edit_edge_id,this.state.edit_name,this.state.edit_created),this.setState({edit_edge_device:!1,edgeDevice:null})):this.props.setError("Incomplete Data","Please complete all fields.")}},{key:"viewIds",value:function(e){var t={};e.details&&e.details.length>2&&(t=JSON.parse(e.details)),this.setState({view_ids:!0,view_ids_edge_device:e,view_ids_edge_map:t})}},{key:"startCopiedVisible",value:function(e){var t=this;this.setState({copied_visible:e}),window.setTimeout((function(){t.setState({copied_visible:""})}),1e3)}},{key:"getEdgeDevices",value:function(){var e=[],t=this.state.page*this.state.page_size,s=t+this.state.page_size;if(this.props.edge_device_list)for(var a in this.props.edge_device_list)a>=t&&a<s&&e.push(this.props.edge_device_list[a]);return e}},{key:"get_edge_details",value:function(e){var t="";if(e){if(e.details&&e.details.length>2){var s=JSON.parse(e.details);s.ipv4&&(t+="ip v4: "+s.ipv4)}0!==e.lastModified&&(t.length>0&&(t+=", "),t+="last seen: "+N.unixTimeConvert(e.lastModified))}return""===t?"device not active":t}},{key:"pretty_key",value:function(e){if(e){if("date"===e)return"last seen";if(e.indexOf("_k")>0)return e.replace("_k"," size").replace(/_/g," ");if(e.indexOf("v4")>0)return e.replace("v4"," v4").replace(/_/g," ");if(e.indexOf("v6")>0)return e.replace("v6"," v6").replace(/_/g," ")}return e.replace(/_/g," ")}},{key:"pretty_value",value:function(e,t){if(e&&t){if("date"===e)return N.unixTimeConvert(1e3*t);if(e.indexOf("_k")>0)return N.formatSizeUnits(1e3*parseInt(t))}return t}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ts.jsx)("div",{children:this.isVisible()&&Object(ts.jsxs)("div",{className:"edge-display",children:[Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("table",{className:"table",children:[Object(ts.jsx)("thead",{children:Object(ts.jsxs)("tr",{className:"table-header",children:[Object(ts.jsx)("th",{className:"table-header",children:"Edge device"}),Object(ts.jsx)("th",{className:"table-header",children:"remote details"}),Object(ts.jsx)("th",{className:"table-header",children:"actions"})]})}),Object(ts.jsxs)("tbody",{children:[this.getEdgeDevices().map((function(t){return Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{children:t.name})}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{children:e.get_edge_details(t)})}),Object(ts.jsxs)("td",{children:[Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.viewIds(t)},children:Object(ts.jsx)("img",{src:"../images/id.svg",className:"dl-image-size",title:"view edge device ids and details",alt:"ids"})}),Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.editEdgeDevice(t)},children:Object(ts.jsx)("img",{src:"../images/edit.svg",className:"dl-image-size",title:"edit edge device",alt:"edit"})}),Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.deleteEdgeDeviceAsk(t)},children:Object(ts.jsx)("img",{src:"../images/delete.svg",className:"dl-image-size",title:"remove edge device",alt:"remove"})})]})]},t.edgeId)})),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{children:this.props.selected_organisation_id.length>0&&Object(ts.jsx)("div",{className:"image-button",onClick:function(){return e.addEdgeDevice()},children:Object(ts.jsx)("img",{className:"dl-image-size",src:"../images/add.svg",title:"add new Edge device",alt:"add new Edge device"})})})]})]})]}),Object(ts.jsx)(Cs,{rowsPerPageOptions:[5,10,25],theme:t,component:"div",count:this.props.edge_device_list?this.props.edge_device_list.length:0,rowsPerPage:this.state.page_size,page:this.state.page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t){return e.changePage(t)},onChangeRowsPerPage:function(t){return e.changePageSize(t)}})]}),this.state.edit_edge_device&&Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-md",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded",children:[Object(ts.jsx)("div",{className:"modal-header",children:this.state.edit_edge_id?"Edit Edge device":"Add New Edge device"}),Object(ts.jsxs)("div",{className:"modal-body",children:[Object(ts.jsx)("div",{children:"name"}),Object(ts.jsx)("input",{type:"text",autoFocus:!0,className:"edit-box",placeholder:"Edge device name",value:this.state.edit_name,onChange:function(t){return e.setState({edit_name:t.target.value})}})]}),Object(ts.jsxs)("div",{className:"modal-footer",children:[Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.editCancel()},children:"Cancel"}),Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.editOk()},children:"Save"})]})]})})}),this.state.view_ids&&Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded",children:[Object(ts.jsxs)("div",{className:"modal-header",children:[null!=this.state.view_ids_edge_device?this.state.view_ids_edge_device.name:""," details"]}),Object(ts.jsx)("div",{className:"modal-body",children:Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("div",{className:"line-height",children:[Object(ts.jsx)("span",{className:"label-1",children:"organisation id"}),Object(ts.jsx)("span",{className:"guid",children:this.props.selected_organisation_id?this.props.selected_organisation_id:""}),Object(ts.jsxs)("span",{className:"clipboard",title:"copy organisation id",children:[Object(ts.jsx)("img",{src:"light"===t?"../images/clipboard-copy.svg":"../images/clipboard-copy-dark.svg",className:"dl-image-size",alt:"copy",onClick:function(){N.writeToClipboard(e.props.selected_organisation_id?e.props.selected_organisation_id:"")&&e.startCopiedVisible(e.props.selected_organisation_id)}}),this.props.selected_organisation_id&&this.state.copied_visible===this.props.selected_organisation_id&&Object(ts.jsx)("span",{className:"copied",children:"copied"})]})]}),Object(ts.jsxs)("div",{className:"line-height",children:[Object(ts.jsx)("span",{className:"label-1",children:"edge device id"}),Object(ts.jsx)("span",{className:"guid",children:this.state.view_ids_edge_device?this.state.view_ids_edge_device.edgeId:""}),Object(ts.jsxs)("span",{className:"clipboard",title:"copy Edge device id",children:[Object(ts.jsx)("img",{src:"light"===t?"../images/clipboard-copy.svg":"../images/clipboard-copy-dark.svg",className:"dl-image-size",alt:"copy",onClick:function(){N.writeToClipboard(e.state.view_ids_edge_device?e.state.view_ids_edge_device.edgeId:"")&&e.startCopiedVisible(e.state.view_ids_edge_device.edgeId)}}),this.state.view_ids_edge_device&&this.state.copied_visible===this.state.view_ids_edge_device.edgeId&&Object(ts.jsx)("span",{className:"copied",children:"copied"})]})]}),Object.keys(this.state.view_ids_edge_map).map((function(t){return Object(ts.jsxs)("div",{className:"line-height",children:[Object(ts.jsx)("span",{className:"label-1",children:e.pretty_key(t)}),Object(ts.jsx)("span",{className:"guid",children:e.pretty_value(t,e.state.view_ids_edge_map[t])})]},t)}))]})}),Object(ts.jsx)("div",{className:"modal-footer",children:Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.setState({view_ids:!1})},children:"Close"})})]})})})]})})}}]),s}(a.Component)),Js=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,edge_device_list:e.appReducer.edge_device_list}}),(function(e){return Object(u.b)(es,e)}))(Vs),Gs=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={edit_edge_device_cmd:!1,created:0,edit_command:"",edit_parameters:"",edc:null,view_results:!1,command:"",results:[],page_size:5,page:0},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"addEdgeDeviceCommand",value:function(){this.setState({edit_edge_device_cmd:!0,edc:null,created:0,edit_command:"",edit_parameters:""})}},{key:"editEdgeDeviceCommand",value:function(e){e&&this.setState({edit_edge_device_cmd:!0,edgeDeviceCommand:e,created:e.created,edit_command:e.command,edit_parameters:e.parameters})}},{key:"deleteEdgeDeviceCommandAsk",value:function(e){var t=this;e&&(this.props.openDialog('are you sure you want to remove "'+e.command+'" ?',"Remove Edge device command?",(function(e){t.deleteEdgeDeviceCommand(e)})),this.setState({edc:e}))}},{key:"deleteEdgeDeviceCommand",value:function(e){e&&this.state.edc&&this.props.deleteEdgeDeviceCommand(this.props.selected_organisation_id,this.props.selected_edge_device_id,this.state.edc.created),this.props.closeDialog&&this.props.closeDialog()}},{key:"editCancel",value:function(){this.setState({edit_edge_device_cmd:!1,edc:null})}},{key:"editOk",value:function(){this.state.edit_command.trim().length>0?(this.props.updateEdgeDeviceCommand(this.props.selected_organisation_id,this.props.selected_edge_device_id,this.state.edit_command,this.state.edit_parameters,this.state.created),this.setState({edit_edge_device_cmd:!1,edc:null,created:0,edit_command:"",edit_parameters:""})):this.props.setError("Incomplete Data","Please complete all fields.")}},{key:"getEdgeDeviceCommands",value:function(){var e=[],t=this.state.page*this.state.page_size,s=t+this.state.page_size;if(this.props.edge_device_command_list)for(var a in this.props.edge_device_command_list)a>=t&&a<s&&e.push(this.props.edge_device_command_list[a]);return e}},{key:"getExecutedStatus",value:function(e){return e>0?N.unixTimeConvert(e):"queued"}},{key:"isVisible",value:function(){return this.props.selected_edge_device_id&&this.props.selected_edge_device_id.length>0&&this.props.selected_edge_device&&this.props.selected_edge_device.length>0}},{key:"viewResult",value:function(e){e&&e.result&&this.setState({view_results:!0,results:e.result.split("\n"),command:e.command+" "+e.parameters})}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ts.jsx)("div",{className:"edge-display",children:this.isVisible()&&Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("table",{className:"table",children:[Object(ts.jsx)("thead",{children:Object(ts.jsxs)("tr",{className:"table-header",children:[Object(ts.jsx)("th",{className:"table-header",children:"Edge command"}),Object(ts.jsx)("th",{className:"table-header",children:"created"}),Object(ts.jsx)("th",{className:"table-header",children:"executed"}),Object(ts.jsx)("th",{className:"table-header",children:"actions"})]})}),Object(ts.jsxs)("tbody",{children:[this.getEdgeDeviceCommands().map((function(t){return Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{children:t.command})}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{children:N.unixTimeConvert(t.created)})}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{children:e.getExecutedStatus(t.executed)})}),Object(ts.jsxs)("td",{children:[0===t.executed&&Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.editEdgeDeviceCommand(t)},children:Object(ts.jsx)("img",{src:"../images/edit.svg",className:"dl-image-size",title:"edit Edge device",alt:"edit"})}),0===t.executed&&Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.deleteEdgeDeviceCommandAsk(t)},children:Object(ts.jsx)("img",{src:"../images/delete.svg",className:"dl-image-size",title:"remove Edge device",alt:"remove"})}),t.executed>0&&Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.viewResult(t)},children:Object(ts.jsx)("img",{src:"../images/edit.svg",className:"dl-image-size",title:"view command result",alt:"view"})})]})]},t.created)})),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{children:this.props.selected_edge_device_id.length>0&&Object(ts.jsx)("div",{className:"edge-float-right",onClick:function(){return e.addEdgeDeviceCommand()},children:Object(ts.jsx)("img",{className:"dl-image-size",src:"../images/add.svg",title:"add new Edge device command",alt:"add new Edge device command"})})})]})]})]}),Object(ts.jsx)(Cs,{rowsPerPageOptions:[5,10,25],theme:t,component:"div",count:this.props.edge_device_command_list?this.props.edge_device_command_list.length:0,rowsPerPage:this.state.page_size,page:this.state.page,onChangePage:function(t){return e.changePage(t)},onChangeRowsPerPage:function(t){return e.changePageSize(t)}})]}),this.state.edit_edge_device_cmd&&Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded",children:[Object(ts.jsx)("div",{className:"modal-header",children:this.state.created?"Edit Edge device command":"Add New Edge device command"}),Object(ts.jsx)("div",{className:"modal-body",children:Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"command"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("input",{type:"text",className:"form-control",autoFocus:!0,placeholder:"command",value:this.state.edit_command,onChange:function(t){return e.setState({edit_command:t.target.value})}})})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"parameters"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"command parameters",value:this.state.edit_parameters,onChange:function(t){return e.setState({edit_parameters:t.target.value})}})})]})]})}),Object(ts.jsxs)("div",{className:"modal-footer",children:[Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.editCancel()},children:"Cancel"}),Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.editOk()},children:"Save"})]})]})})}),this.state.view_results&&Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded",children:[Object(ts.jsx)("div",{className:"modal-header",children:"results"}),Object(ts.jsx)("div",{className:"modal-body",children:Object(ts.jsxs)("div",{children:[Object(ts.jsx)("div",{className:"command-item",children:this.state.command}),this.state.results.map((function(e,t){return Object(ts.jsx)("div",{className:"result-item",children:e},t)})),Object(ts.jsx)("br",{clear:"both"})]})}),Object(ts.jsx)("div",{className:"modal-footer",children:Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.setState({view_results:!1})},children:"Close"})})]})})})]})})}}]),s}(a.Component),Hs=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_edge_device_id:e.appReducer.selected_edge_device_id,selected_edge_device:e.appReducer.selected_edge_device,edge_device_list:e.appReducer.edge_device_list,edge_device_command_list:e.appReducer.edge_device_command_list}}),(function(e){return Object(u.b)(es,e)}))(Gs),Ks=(s(253),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={date_time:0},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"componentDidMount",value:function(){}},{key:"programConverted",value:function(e){e&&(window.open().document.body.innerHTML+=e.replace(/\n/g,"<br />"))}},{key:"inventorizeDump",value:function(e){k.download_inventorize_dump(this.props.selected_organisation_id,this.props.selected_knowledgebase_id,e)}},{key:"inventorizeDumpSpreadsheet",value:function(e){k.download_inventorize_dump_spreadhseet(this.props.selected_organisation_id,this.props.selected_knowledgebase_id,e)}},{key:"deleteInventorizeAsk",value:function(e){var t=this;this.setState({date_time:e}),this.props.openDialog("are you sure you want to remove the report dated <b>"+N.unixTimeConvert(e)+"</b>?","Remove Inventory Report",(function(e){t.deleteReport(e)}))}},{key:"deleteReport",value:function(e){e&&this.props.deleteInventoryItem(this.state.date_time),this.props.closeDialog&&this.props.closeDialog()}},{key:"mindDump",value:function(){k.download_mind_dump(this.props.selected_organisation_id,this.props.selected_knowledgebase_id)}},{key:"queryLogDump",value:function(){k.download_query_log(this.props.selected_organisation_id,this.props.selected_knowledgebase_id)}},{key:"restore",value:function(e){var t=this;e&&(this.setState({uploading:!0}),N.restore(e,(function(){t.setState({uploading:!1,message_title:"Success",message:"data restored",message_callback:function(){t.setState({message:"",message_title:""})}})}),(function(e){t.props.setError("Error",e)})))}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ts.jsxs)("div",{className:"inventory-page",children:[this.isVisible()&&Object(ts.jsx)("div",{className:"light"===t?"hr":"hr_dark"}),this.isVisible()&&Object(ts.jsxs)("div",{className:"inventory-label",children:["Manage snapshots of your document inventory.",this.props.inventorize_busy&&Object(ts.jsx)("span",{children:"  SimSage is busy creating a new snapshot."}),this.props.selected_organisation_id.length>0&&Object(ts.jsx)("img",{src:"../images/refresh.svg",alt:"refresh",title:"refresh the inventory list",onClick:function(){e.props.getInventoryList(),e.props.getInventoryBusy()},className:"refresh-image"})]}),this.isVisible()&&Object(ts.jsx)("div",{children:Object(ts.jsxs)("table",{className:"table",children:[Object(ts.jsx)("thead",{children:Object(ts.jsxs)("tr",{className:"table-header",children:[Object(ts.jsx)("th",{className:"table-header table-width-70",children:"created"}),Object(ts.jsx)("th",{className:"table-header",children:"action"})]})}),Object(ts.jsxs)("tbody",{children:[this.props.inventorize_list&&this.props.inventorize_list.timeList&&this.props.inventorize_list.timeList.map((function(t){return Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{children:Object(ts.jsxs)("div",{className:"snapshot-item",children:["content snapshot ",N.unixTimeConvert(t)]})}),Object(ts.jsxs)("td",{children:[Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.inventorizeDump(t)},children:Object(ts.jsx)("img",{src:"../images/parquet.png",className:"image-size",title:"download as parquet-file",alt:"download parquet"})}),Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.inventorizeDumpSpreadsheet(t)},children:Object(ts.jsx)("img",{src:"../images/xlsx.svg",className:"image-size",title:"download as spreadsheet-xlsx",alt:"download spreadsheet"})}),Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.deleteInventorizeAsk(t)},children:Object(ts.jsx)("img",{src:"../images/delete.svg",className:"image-size",title:"remove report",alt:"remove"})})]})]},t)})),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{}),Object(ts.jsxs)("td",{children:[this.props.selected_organisation_id.length>0&&!this.props.inventorize_busy&&Object(ts.jsx)("div",{className:"image-button",onClick:function(){e.props.createInventory(),e.props.forceInventoryBusy()},children:Object(ts.jsx)("img",{className:"image-size",src:"../images/add.svg",title:"create a new snapshot",alt:"create new snapshot"})}),this.props.selected_organisation_id.length>0&&this.props.inventorize_busy&&Object(ts.jsx)("div",{className:"image-button",children:Object(ts.jsx)("img",{className:"image-size add-image-disabled",src:"../images/add.svg",title:"SimSage is currently busy processing an inventory.  Please try again later.",alt:"create new snapshot"})})]})]})]})]})})]})}}]),s}(n.a.Component)),Qs=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id,inventorize_list:e.appReducer.inventorize_list,knowledge_base_list:e.appReducer.knowledge_base_list,inventorize_busy:e.appReducer.inventorize_busy}}),(function(e){return Object(u.b)(es,e)}))(Ks),Zs=(s(130),s(25),[{key:"none",value:"please select crawler type"},{key:"file",value:"file crawler"},{key:"web",value:"web crawler"},{key:"office365",value:"office 365 crawler"},{key:"dropbox",value:"dropbox crawler"},{key:"wordpress",value:"WordPress external crawler"},{key:"gdrive",value:"Google-drive crawler"},{key:"nfs",value:"nfs external crawler"},{key:"database",value:"database crawler"},{key:"restfull",value:"REST-full crawler"}]),Xs=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,message_callback:null,message:"",message_title:"",organisation_id:w.defined(e.organisation_id)?e.organisation_id:"",kb_id:w.defined(e.kb_id)?e.kb_id:"",sourceId:w.defined(e.sourceId)?e.sourceId:"0",nodeId:w.defined(e.nodeId)?e.nodeId:"0",maxItems:w.defined(e.maxItems)?e.maxItems:"0",maxQNAItems:w.defined(e.maxQNAItems)?e.maxQNAItems:"0",name:w.defined(e.name)?e.name:"",filesPerSecond:w.defined(e.filesPerSecond)?e.filesPerSecond:"0",crawlerType:w.defined(e.crawlerType)&&e.crawlerType.length>0?e.crawlerType:"none",deleteFiles:e.deleteFiles,allowAnonymous:e.allowAnonymous,enablePreview:e.enablePreview,processingLevel:e.processingLevel,customRender:e.customRender,edge_device_list:a.props.edge_device_list,edgeDeviceId:w.defined(e.edgeDeviceId)&&e.edgeDeviceId.length>0?e.edgeDeviceId:"none",qaMatchStrength:w.defined(e.qaMatchStrength)&&e.qaMatchStrength?e.qaMatchStrength:.8125,numResults:w.defined(e.numResults)&&e.numResults?e.numResults:5,numFragments:w.defined(e.numFragments)&&e.numFragments?e.numFragments:3},a}return Object(g.a)(s,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({filesPerSecond:e.filesPerSecond,crawlerType:w.defined(e.crawlerType)?e.crawlerType:"none",deleteFiles:e.deleteFiles,allowAnonymous:e.allowAnonymous,enablePreview:e.enablePreview,organisation_id:e.organisation_id,kb_id:e.kb_id,sourceId:e.sourceId,nodeId:e.nodeId,maxItems:e.maxItems,maxQNAItems:e.maxQNAItems,processingLevel:e.processingLevel,customRender:e.customRender,edgeDeviceId:w.defined(e.edgeDeviceId)?e.edgeDeviceId:"none",qaMatchStrength:w.defined(e.qaMatchStrength)?e.qaMatchStrength:.8125,numResults:w.defined(e.numResults)?e.numResults:5,numFragments:w.defined(e.numFragments)?e.numFragments:3,name:e.name,onSave:e.onSave,edge_device_list:e.edge_device_list,onError:e.onError}))}},{key:"construct_data",value:function(e){var t=w.defined(e.crawlerType)?e.crawlerType:this.state.crawlerType,s=(w.defined(e.allowAnonymous)?e.allowAnonymous:this.state.allowAnonymous)||"web"===t,a=w.defined(e.edgeDeviceId)?e.edgeDeviceId:this.state.edgeDeviceId;return"none"!==a&&this.canHaveEdgeDevice()||(a=""),{filesPerSecond:w.defined(e.filesPerSecond)?e.filesPerSecond:this.state.filesPerSecond,organisationId:w.defined(e.organisationId)?e.organisationId:this.state.organisationId,crawlerType:t,deleteFiles:w.defined(e.deleteFiles)?e.deleteFiles:this.state.deleteFiles,allowAnonymous:s,enablePreview:w.defined(e.enablePreview)?e.enablePreview:this.state.enablePreview,processingLevel:w.defined(e.processingLevel)?e.processingLevel:this.state.processingLevel,name:w.defined(e.name)?e.name:this.state.name,sourceId:w.defined(e.sourceId)?e.sourceId:this.state.sourceId,nodeId:w.defined(e.nodeId)?e.nodeId:this.state.nodeId,maxItems:w.defined(e.maxItems)?e.maxItems:this.state.maxItems,maxQNAItems:w.defined(e.maxQNAItems)?e.maxQNAItems:this.state.maxQNAItems,customRender:w.defined(e.customRender)?e.customRender:this.state.customRender,edgeDeviceId:a,qaMatchStrength:w.defined(e.qaMatchStrength)?e.qaMatchStrength:this.state.qaMatchStrength,numResults:w.defined(e.numResults)?e.numResults:this.state.numResults,numFragments:w.defined(e.numFragments)?e.numFragments:this.state.numFragments}}},{key:"setError",value:function(e,t){this.props.onError&&this.props.onError(e,t)}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"testCrawler",value:function(){var e=this,t=this.state.name;w.testCrawler(this.state.organisation_id,this.state.kb_id,this.state.sourceId,(function(){e.setState({message_callback:function(){e.setState({message_title:"",message:""})},message_title:"Crawler Test",message:'Success!  crawler "'+t+'" can communicate with its intended end-point.'})}),(function(t){console.log(t),e.setError("Error Testing Crawler",t)}))}},{key:"canHaveEdgeDevice",value:function(){var e=this.state.crawlerType;return"office365"!==e&&"wordpress"!==e&&"gdrive"!==e}},{key:"setProcessingLevelFromMark",value:function(e){this.state.onSave&&this.state.onSave(this.construct_data({processingLevel:e}))}},{key:"filteredEdgeDevices",value:function(){var e=[{key:"none",value:"n/a"}];if(this.props.edge_device_list){var t,s=Object(b.a)(this.props.edge_device_list);try{for(s.s();!(t=s.n()).done;){var a=t.value;a.organisationId===this.state.organisation_id&&a.edgeId&&e.push({key:a.edgeId,value:a.name})}}catch(n){s.e(n)}finally{s.f()}}return e}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"crawler-general.js: Something went wrong."}):Object(ts.jsxs)("div",{className:"crawler-page-form",children:[Object(ts.jsx)(ks,{callback:function(t){return e.state.message_callback(t)},open:this.state.message.length>0,theme:this.props.theme,message:this.state.message,title:this.state.message_title}),Object(ts.jsxs)("div",{className:"crawler-page",children:[Object(ts.jsx)("div",{className:"type-select-box",children:Object(ts.jsx)("select",{className:"form-select customWidth",onChange:function(t){e.change_callback({crawlerType:t.target.value})},disabled:""+this.state.sourceId!=="0",defaultValue:this.state.crawlerType,children:Zs.map((function(e){return Object(ts.jsx)("option",{value:e.key,children:e.value},e.key)}))})}),Object(ts.jsxs)("div",{className:"processing-selector",children:[Object(ts.jsx)("span",{className:"label-processing",children:"processing level:"}),Object(ts.jsxs)("span",{title:"Select what kind of processing you want done to these files",className:"processing-list",children:[Object(ts.jsxs)("div",{className:"form-check form-check-inline",children:[Object(ts.jsx)("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",onChange:function(){return e.setProcessingLevelFromMark("FILES")},id:"inlineRadio1",value:"FILES",checked:"FILES"===this.state.processingLevel}),Object(ts.jsx)("label",{className:"form-check-label",htmlFor:"inlineRadio1",children:"discovery"})]}),Object(ts.jsxs)("div",{className:"form-check form-check-inline",children:[Object(ts.jsx)("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",onChange:function(){return e.setProcessingLevelFromMark("GDPR")},id:"inlineRadio2",value:"GDPR",checked:"GDPR"===this.state.processingLevel}),Object(ts.jsx)("label",{className:"form-check-label",htmlFor:"inlineRadio2",children:"GDPR"})]}),Object(ts.jsxs)("div",{className:"form-check form-check-inline",children:[Object(ts.jsx)("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",onChange:function(){return e.setProcessingLevelFromMark("SEARCH")},id:"inlineRadio3",value:"SEARCH",checked:"SEARCH"===this.state.processingLevel}),Object(ts.jsx)("label",{className:"form-check-label",htmlFor:"inlineRadio3",children:"search"})]}),Object(ts.jsxs)("div",{className:"form-check form-check-inline",children:[Object(ts.jsx)("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",onChange:function(){return e.setProcessingLevelFromMark("NLU")},id:"inlineRadio4",value:"lang",disabled:!0}),Object(ts.jsx)("label",{className:"form-check-label",htmlFor:"inlineRadio3",children:"NLU"})]})]})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"left-column",children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"Crawler Name",autoFocus:!0,value:this.state.name,onChange:function(t){e.change_callback({name:t.target.value})}})}),Object(ts.jsxs)("span",{className:"right-column",children:[Object(ts.jsx)("span",{className:"label-right",children:"files per second throttle"}),Object(ts.jsx)("span",{className:"number-textbox",children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"files per second throttle",value:this.state.filesPerSecond,onChange:function(t){e.change_callback({filesPerSecond:t.target.value})}})})]})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"label-right",children:"maximum number of files"}),Object(ts.jsx)("span",{className:"number-textbox",children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"Maximum number of files (0 for no limits)",value:this.state.maxItems,onChange:function(t){e.change_callback({maxItems:t.target.value})}})})]}),Object(ts.jsxs)("span",{className:"right-column",children:[Object(ts.jsx)("span",{className:"label-right",children:"maximum number of QA"}),Object(ts.jsx)("span",{className:"number-textbox",children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"Maximum number of QA entries (0 for no limits)",value:this.state.maxQNAItems,onChange:function(t){e.change_callback({maxQNAItems:t.target.value})}})})]})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"label-right",children:"node id"}),Object(ts.jsx)("span",{className:"number-textbox",children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"node-id (0 for single node systems)",value:this.state.nodeId,onChange:function(t){e.change_callback({nodeId:t.target.value})}})})]}),Object(ts.jsxs)("span",{className:"right-column",children:[("database"===this.state.crawlerType||"restfull"===this.state.crawlerType)&&Object(ts.jsx)("div",{children:Object(ts.jsxs)("div",{title:"Restful and DB crawlers have optional custom-rendering flags.",children:[Object(ts.jsx)("input",{type:"checkbox",checked:this.state.customRender&&("database"===this.state.crawlerType||"restfull"===this.state.crawlerType),onChange:function(t){e.change_callback({customRender:t.target.checked&&("database"===e.state.crawlerType||"restfull"===e.state.crawlerType)})},value:"custom render?"}),Object(ts.jsx)("span",{className:"label-left",children:"custom render?"})]})}),"database"!==this.state.crawlerType&&"restfull"!==this.state.crawlerType&&Object(ts.jsx)("div",{})]})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"left-column",children:Object(ts.jsxs)("div",{style:{float:"left"},title:"At the end of a run through your data we can optionally check if files have been removed by seeing which files weren't seen during a run.  Check this option if you want files that no longer exist removed automatically from SimSage.",children:[Object(ts.jsx)("input",{type:"checkbox",checked:this.state.deleteFiles,onChange:function(t){e.change_callback({deleteFiles:t.target.checked})},value:"delete files?"}),Object(ts.jsx)("span",{className:"label-left",children:"remove un-seen files?"})]})}),Object(ts.jsx)("span",{className:"right-column",children:Object(ts.jsxs)("div",{style:{float:"left"},title:"Our default web-search and bot-interfaces require anonymous access to the data gathered by this source.  Check this box if you want anonymous users to view the data in it. (always enabled for web-sources).",children:[Object(ts.jsx)("input",{type:"checkbox",checked:this.state.allowAnonymous||"web"===this.state.crawlerType,disabled:"web"===this.state.crawlerType,onChange:function(t){e.change_callback({allowAnonymous:t.target.checked})},value:"allow anonymous access to these files?"}),Object(ts.jsx)("span",{className:"label-left",children:"allow anonymous access to these files?"})]})})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"left-column",children:Object(ts.jsxs)("div",{style:{float:"left"},title:"Check this box if you preview images generated for each document.  Document search must be enabled for this to work.",children:[Object(ts.jsx)("input",{type:"checkbox",checked:this.state.enablePreview&&("SEARCH"===this.state.processingLevel||"NLU"===this.state.processingLevel),disabled:"SEARCH"!==this.state.processingLevel&&"NLU"!==this.state.processingLevel,onChange:function(t){e.change_callback({enablePreview:t.target.checked})},value:"enable document image previews?"}),Object(ts.jsx)("span",{className:"label-left",children:"enable document image previews?"})]})}),Object(ts.jsxs)("span",{className:"right-column",children:[Object(ts.jsx)("span",{className:"label-right",children:"number of search results"}),Object(ts.jsx)("span",{className:"number-textbox",children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"number of search results",value:this.state.numResults,onChange:function(t){e.change_callback({numResults:t.target.value})}})})]})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"label-right",children:"number of fragments"}),Object(ts.jsx)("span",{className:"number-textbox",children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"number of fragments per search result",value:this.state.numFragments,onChange:function(t){e.change_callback({numFragments:t.target.value})}})})]}),Object(ts.jsxs)("span",{className:"right-column",children:[Object(ts.jsx)("span",{className:"label-right",children:"Q&A threshold"}),Object(ts.jsx)("span",{className:"number-textbox",children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"Q&A threshold (0.8125 default)",value:this.state.qaMatchStrength,onChange:function(t){e.change_callback({qaMatchStrength:t.target.value})}})})]})]}),this.canHaveEdgeDevice()&&Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"label-right",title:"you can connect this source to a SimSage Edge device if you have one.  Select it here.",children:"Edge device"}),Object(ts.jsx)("span",{className:"select-box-after-label",children:Object(ts.jsx)("select",{className:"form-select",onChange:function(t){return e.change_callback({edgeDeviceId:t.target.value})},disabled:""+this.state.sourceId!=="0",defaultValue:""!==this.state.edgeDeviceId?this.state.edgeDeviceId:"none",children:this.filteredEdgeDevices().map((function(e){return Object(ts.jsx)("option",{value:e.key,children:e.value},e.key)}))})})]}),Object(ts.jsx)("span",{className:"right-column"})]}),Object(ts.jsx)("div",{children:this.state.sourceId&&this.state.sourceId>0&&"nfs"!==this.state.crawlerType&&"database"!==this.state.crawlerType&&"restfull"!==this.state.crawlerType&&"gdrive"!==this.state.crawlerType&&Object(ts.jsx)("div",{children:Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.testCrawler()},children:"Test Connection"})})})]})]})}}]),s}(a.Component),$s=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,username:N.defined(e.username)?e.username:"",password:N.defined(e.password)?e.password:"",server:N.defined(e.server)?e.server:"",domain:N.defined(e.domain)?e.domain:"",fqdn:N.defined(e.fqdn)?e.fqdn:"",shareName:N.defined(e.shareName)?e.shareName:"",sharePath:N.defined(e.sharePath)?e.sharePath:"",specific_json:e.specific_json},a}return Object(g.a)(s,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({username:e.username,password:e.password,domain:e.domain,fqdn:e.fqdn,server:e.server,shareName:e.shareName,sharePath:e.sharePath,specific_json:e.specific_json,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.state.specific_json),{},{username:N.defined(e.username)?e.username:this.state.username,password:N.defined(e.password)?e.password:this.state.password,domain:N.defined(e.domain)?e.domain:this.state.domain,fqdn:N.defined(e.fqdn)?e.fqdn:this.state.fqdn,server:N.defined(e.server)?e.server:this.state.server,shareName:N.defined(e.shareName)?e.shareName:this.state.shareName,sharePath:N.defined(e.sharePath)?e.sharePath:this.state.sharePath})}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"crawler-file.js: Something went wrong."}):Object(ts.jsxs)("div",{className:"crawler-page",children:[Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"user name"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",autoFocus:!0,placeholder:"user name",value:this.state.username,onChange:function(t){e.change_callback({username:t.target.value})}})})})]}),Object(ts.jsxs)("span",{className:"right-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"password"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"password",className:"form-control",placeholder:"password",value:this.state.password,onChange:function(t){e.change_callback({password:t.target.value})}})})})]})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"domain name"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"domain name",value:this.state.domain,onChange:function(t){e.change_callback({domain:t.target.value})}})})})]}),Object(ts.jsxs)("span",{className:"right-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"fqdn"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"e.g.  simsage.ai  (this will form your user's email addresses, eg. account-name@simsage.ai)",value:this.state.fqdn,onChange:function(t){e.change_callback({fqdn:t.target.value})}})})})]})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"server"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"server (hostname or ip-address)",value:this.state.server,onChange:function(t){e.change_callback({server:t.target.value})}})})})]}),Object(ts.jsxs)("span",{className:"right-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"share name"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"share name",value:this.state.shareName,onChange:function(t){e.change_callback({shareName:t.target.value})}})})})]})]}),Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"share path"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"path inside share (optional)",value:this.state.sharePath,onChange:function(t){e.change_callback({sharePath:t.target.value})}})})})]})})]})}}]),s}(a.Component),ea=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,onError:e.onError,onSave:e.onSave,baseUrlList:N.defined(e.baseUrlList)?e.baseUrlList:"",webCss:N.defined(e.webCss)?e.webCss:"",webCssIgnore:N.defined(e.webCssIgnore)?e.webCssIgnore:"",validExtensions:N.defined(e.validExtensions)?e.validExtensions:"",validExtensionsIgnore:N.defined(e.validExtensionsIgnore)?e.validExtensionsIgnore:"",articleIncludeWordsCsv:N.defined(e.articleIncludeWordsCsv)?e.articleIncludeWordsCsv:"",articleExcludeWordsCsv:N.defined(e.articleExcludeWordsCsv)?e.articleExcludeWordsCsv:"",specific_json:e.specific_json},a}return Object(g.a)(s,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({baseUrlList:e.baseUrlList,webCss:N.defined(e.webCss)?e.webCss:"",validExtensions:N.defined(e.validExtensions)?e.validExtensions:"",webCssIgnore:N.defined(e.webCssIgnore)?e.webCssIgnore:"",validExtensionsIgnore:N.defined(e.validExtensionsIgnore)?e.validExtensionsIgnore:"",articleIncludeWordsCsv:N.defined(e.articleIncludeWordsCsv)?e.articleIncludeWordsCsv:"",articleExcludeWordsCsv:N.defined(e.articleExcludeWordsCsv)?e.articleExcludeWordsCsv:"",specific_json:e.specific_json,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.state.specific_json),{},{baseUrlList:N.defined(e.baseUrlList)?e.baseUrlList:this.state.baseUrlList,webCss:N.defined(e.webCss)?e.webCss:this.state.webCss,webCssIgnore:N.defined(e.webCssIgnore)?e.webCssIgnore:this.state.webCssIgnore,validExtensions:N.defined(e.validExtensions)?e.validExtensions:this.state.validExtensions,validExtensionsIgnore:N.defined(e.validExtensionsIgnore)?e.validExtensionsIgnore:this.state.validExtensionsIgnore,articleIncludeWordsCsv:N.defined(e.articleIncludeWordsCsv)?e.articleIncludeWordsCsv:this.state.articleIncludeWordsCsv,articleExcludeWordsCsv:N.defined(e.articleExcludeWordsCsv)?e.articleExcludeWordsCsv:this.state.articleExcludeWordsCsv})}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"crawler-web.js: Something went wrong."}):Object(ts.jsxs)("div",{className:"crawler-page",children:[Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"label-right-top",children:"http/s base url"}),Object(ts.jsx)("span",{className:"full-column",children:Object(ts.jsx)("input",{type:"text",placeholder:"single http/s base url path (e.g. https://simsage.ai)",autoFocus:!0,className:"form-control",value:this.state.baseUrlList,onChange:function(t){e.change_callback({baseUrlList:t.target.value})}})})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"valid extensions"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("input",{type:"text",className:"form-control",value:this.state.validExtensions,onChange:function(t){e.change_callback({validExtensions:t.target.value})}})})]}),Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"ignore extensions"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("input",{type:"text",className:"form-control",value:this.state.validExtensionsIgnore,onChange:function(t){e.change_callback({validExtensionsIgnore:t.target.value})}})})]})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"label-right-top",children:"include css csv"}),Object(ts.jsx)("span",{className:"full-column",children:Object(ts.jsx)("textarea",{className:"textarea-width",placeholder:"css/html root fragments to include csv",rows:"3",value:this.state.webCss,onChange:function(t){e.change_callback({webCss:t.target.value})}})})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"label-right-top",children:"exclude css csv"}),Object(ts.jsx)("span",{className:"full-column",children:Object(ts.jsx)("textarea",{className:"textarea-width",placeholder:"css/html root fragments to exclude csv",rows:"3",value:this.state.webCssIgnore,onChange:function(t){e.change_callback({webCssIgnore:t.target.value})}})})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"label-right-top",children:"csv include words"}),Object(ts.jsx)("span",{className:"full-column",children:Object(ts.jsx)("textarea",{className:"textarea-width",placeholder:"csv words, include articles by words [optional]",rows:"3",value:this.state.articleIncludeWordsCsv,onChange:function(t){e.change_callback({articleIncludeWordsCsv:t.target.value})}})})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"label-right-top",children:"csv exclude words"}),Object(ts.jsx)("span",{className:"full-column",children:Object(ts.jsx)("textarea",{className:"textarea-width",placeholder:"csv words, exclude articles by words [optional]",rows:"3",value:this.state.articleExcludeWordsCsv,onChange:function(t){e.change_callback({articleExcludeWordsCsv:t.target.value})}})})]})]})}}]),s}(a.Component),ta=[{key:"none",value:"please select database type"},{key:"mysql",value:"MySQL"},{key:"postgresql",value:"Postgresql"},{key:"microsoftsql",value:"Microsoft SQL"}],sa=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,username:e.username?e.username:"",password:e.password?e.password:"",jdbc:e.jdbc?e.jdbc:"",type:w.defined(e.type)?e.type:"none",query:e.query?e.query:"",pk:e.pk?e.pk:"",template:e.template?e.template:"",text:e.text?e.text:"",content_url:e.content_url?e.content_url:"",customRender:e.customRender,specific_json:e.specific_json},a}return Object(g.a)(s,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({username:e.username,password:e.password,jdbc:e.jdbc,type:w.defined(e.type)?e.type:"none",query:e.query,pk:e.pk,template:e.template,text:e.text,content_url:e.content_url,customRender:e.customRender,specific_json:e.specific_json,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.state.specific_json),{},{username:w.defined(e.username)?e.username:this.state.username,password:w.defined(e.password)?e.password:this.state.password,jdbc:w.defined(e.jdbc)?e.jdbc:this.state.jdbc,type:w.defined(e.type)?e.type:this.state.type,query:w.defined(e.query)?e.query:this.state.query,pk:w.defined(e.pk)?e.pk:this.state.pk,template:w.defined(e.template)?e.template:this.state.template,text:w.defined(e.text)?e.text:this.state.text,content_url:w.defined(e.content_url)?e.content_url:this.state.content_url})}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"crawler-database.js: Something went wrong."}):Object(ts.jsxs)("div",{className:"crawler-page",children:[Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"user name"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"the user name for db access",autoFocus:!0,value:this.state.username,onChange:function(t){e.change_callback({username:t.target.value})}})})})]}),Object(ts.jsxs)("span",{className:"right-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"password"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"password",className:"form-control",placeholder:"password",value:this.state.password,onChange:function(t){e.change_callback({password:t.target.value})}})})})]})]}),Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"jdbc string"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("input",{type:"text",className:"form-control jdbc-field-width",placeholder:"jdbc connection string, e.g. jdbc:microsoft:sqlserver://HOST:1433;DatabaseName=DATABASE",value:this.state.jdbc,onChange:function(t){e.change_callback({jdbc:t.target.value})}})})]})}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"database"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("select",{className:"form-select",onChange:function(t){e.change_callback({type:t.target.value})},defaultValue:this.state.type,children:ta.map((function(e){return Object(ts.jsx)("option",{value:e.key,children:e.value},e.key)}))})})]}),Object(ts.jsxs)("span",{className:"right-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"pk field"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"primary key field name",value:this.state.pk,onChange:function(t){e.change_callback({pk:t.target.value})}})})})]})]}),Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"web fields"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control jdbc-field-width",placeholder:"document http/https reference SQL fields in square brackets [FIELD-NAME]",disabled:this.state.customRender,value:this.state.content_url,onChange:function(t){e.change_callback({content_url:t.target.value})}})})})]})}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"label-right-top",children:"select"}),Object(ts.jsx)("span",{className:"full-column",children:Object(ts.jsx)("textarea",{className:"textarea-width",placeholder:"SQL query, a valid SELECT statement, no other allowed",rows:3,value:this.state.query,onChange:function(t){e.change_callback({query:t.target.value})}})})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"label-right-top",children:"text index template"}),Object(ts.jsx)("span",{className:"full-column",children:Object(ts.jsx)("textarea",{className:"textarea-width",placeholder:"sql text index template, an text template referencing SQL fields in square brackets [FIELD-NAME]",disabled:!this.state.customRender,rows:4,value:this.state.text,onChange:function(t){e.change_callback({text:t.target.value})}})})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"label-right-top",children:"html template"}),Object(ts.jsx)("span",{className:"full-column",children:Object(ts.jsx)("textarea",{className:"textarea-width",placeholder:"sql html render template, an html template referencing SQL fields in square brackets [FIELD-NAME]",disabled:!this.state.customRender,rows:4,value:this.state.template,onChange:function(t){e.change_callback({template:t.target.value})}})})]})]})}}]),s}(a.Component),aa=[{key:"none",display:null,field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"author",display:null,field1:"{author}",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"created",display:null,field1:"{created}",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"last modified",display:null,field1:"{lastmod}",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"title",display:null,field1:"{title}",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"image from binary-blob",display:null,field1:"binary-blob-image",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"image from base64",display:null,field1:"base64-image",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"image from url",display:null,field1:"url-image",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"category",display:"",field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"two level category",display:"",field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"number range",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"monetary x 100 range",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"monetary range",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"star rating",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"select if true",display:"",field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"created date range",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"last modified date ranges",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"csv string",display:"",field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""}],na=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,sourceId:0,specificJson:e.specificJson?e.specificJson:{}},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({specificJson:e.specificJson?e.specificJson:{},onSave:e.onSave,onError:e.onError}))}},{key:"get_md_list",value:function(){return this.state&&this.state.specificJson&&this.state.specificJson.metadata_list?this.state.specificJson.metadata_list:[]}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.props.specificJson),{},{metadata_list:w.defined(e)?e:this.get_md_list()})}},{key:"set_db",value:function(e,t,s){var a=this.get_md_list();t>=0&&t<a.length&&(a[t].db1=s,this.setState({specificJson:this.construct_data(a)}),this.state.onSave&&this.state.onSave(this.construct_data(a)))}},{key:"set_db_extra",value:function(e,t,s){var a=this.get_md_list();t>=0&&t<a.length&&(a[t].db2=s,this.setState({specificJson:this.construct_data(a)}),this.state.onSave&&this.state.onSave(this.construct_data(a)))}},{key:"set_md_type",value:function(e,t,s){var a=this.get_md_list();if(t>=0&&t<a.length){var n,r=null,i=Object(b.a)(aa);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.key===s){r=o;break}}}catch(c){i.e(c)}finally{i.f()}null!=r&&(a[t]=JSON.parse(JSON.stringify(r)),this.setState({specificJson:this.construct_data(a)}),this.state.onSave&&this.state.onSave(this.construct_data(a)))}}},{key:"setDisplayName",value:function(e,t,s){var a=this.get_md_list();t>=0&&t<a.length&&(a[t].display=s,this.setState({specificJson:this.construct_data(a)}),this.state.onSave&&this.state.onSave(this.construct_data(a)))}},{key:"setUserMetadataName1",value:function(e,t,s){var a=this.get_md_list();t>=0&&t<a.length&&(a[t].field1=s,this.setState({specificJson:this.construct_data(a)}),this.state.onSave&&this.state.onSave(this.construct_data(a)))}},{key:"setSort",value:function(e,t,s){var a=this.get_md_list();t>=0&&t<a.length&&(a[t].sort=s?"true":"false",this.setState({specificJson:this.construct_data(a)}),this.state.onSave&&this.state.onSave(this.construct_data(a)))}},{key:"setValue",value:function(e,t,s,a){var n=this.get_md_list();t>=0&&t<n.length&&(n[t][s]=a,this.setState({specificJson:this.construct_data(n)}),this.state.onSave&&this.state.onSave(this.construct_data(n)))}},{key:"setDefaultSort",value:function(e,t,s,a){var n=this.get_md_list();if(t>=0&&t<n.length){for(var r in n[t].sort_default=a?s:"",n)""+r!==""+t&&n.hasOwnProperty(r)&&(n[r].sort_default="");this.setState({specificJson:this.construct_data(n)}),this.state.onSave&&this.state.onSave(this.construct_data(n))}}},{key:"deleteMetadataItem",value:function(e){var t=[],s=""+e,a=this.get_md_list();for(var n in a)n!==s&&t.push(a[n]);this.setState({specificJson:this.construct_data(t)}),this.state.onSave&&this.state.onSave(this.construct_data(t))}},{key:"addNewMetadataMapping",value:function(){var e=this.get_md_list();e.push(JSON.parse(JSON.stringify(aa[0]))),this.setState({specificJson:this.construct_data(e)}),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"checkMetadataName",value:function(e){return e.key>="a"&&e.key<="z"||e.key>="A"&&e.key<="Z"||e.key>="0"&&e.key<="9"||"-"===e.key||(e.preventDefault(),e.stopPropagation(),!1)}},{key:"move_row_up",value:function(e,t){if(t>0){var s=this.get_md_list(),a=s[t-1];s[t-1]=e,s[t]=a,this.setState({specificJson:this.construct_data(s)}),this.state.onSave&&this.state.onSave(this.construct_data(s))}}},{key:"move_row_down",value:function(e,t){var s=this.get_md_list();if(t+1<s.length){var a=s[t+1];s[t+1]=e,s[t]=a,this.setState({specificJson:this.construct_data(s)}),this.state.onSave&&this.state.onSave(this.construct_data(s))}}},{key:"needs_metadata_field",value:function(e){return e&&e.key&&("category"===e.key||"number range"===e.key||"two level category"===e.key||"monetary x 100 range"===e.key||"monetary range"===e.key||"star rating"===e.key||"created date range"===e.key||"last modified date ranges"===e.key||"select if true"===e.key||"csv string"===e.key)}},{key:"render",value:function(){var e=this;if(this.state.has_error)return Object(ts.jsx)("h1",{children:"crawler-metadata-mapper.js: Something went wrong."});var t=this,s=this.get_md_list().length,a=this.props.theme,n=this.state&&this.state.sourceId?this.state.sourceId:0;return Object(ts.jsxs)("div",{className:"crawler-page",children:[Object(ts.jsx)("div",{className:"instructions-label",children:"All rows in order of UI.  Use 'actions' arrows to re-arrange existing rows."}),Object(ts.jsxs)("table",{className:"table",children:[Object(ts.jsx)("thead",{children:Object(ts.jsxs)("tr",{className:"table-header",children:[Object(ts.jsx)("th",{className:"table-header metadata-column",children:"data-type"}),Object(ts.jsx)("th",{className:"table-header db-field-column",children:"source field"}),Object(ts.jsx)("th",{className:"table-header display-column",children:"UI display-name"}),Object(ts.jsx)("th",{className:"table-header metadata-field-column",children:"metadata name"}),Object(ts.jsx)("th",{className:"table-header sort-field-column",children:"sortable"}),Object(ts.jsx)("th",{className:"table-header action-field-column",children:"actions"})]})}),Object(ts.jsxs)("tbody",{children:[this.get_md_list().map((function(e,r){return Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{className:"selector-column",children:Object(ts.jsx)("select",{className:"form-select metadata-field-column",onChange:function(s){t.set_md_type(e,r,s.target.value)},disabled:""+n!=="0","aria-label":"select what kind of metadata field to use",defaultValue:e.key,children:aa.map((function(e,t){return Object(ts.jsx)("option",{value:e.key,children:e.key},t)}))})}),"two level category"!==e.key&&Object(ts.jsx)("td",{className:"db-field-column",children:Object(ts.jsx)("input",{type:"text",className:"theme source-field-width",placeholder:"source [field-name]",title:"the source-name field to use for this category",value:e.db1,onChange:function(s){t.set_db(e,r,s.target.value)}})}),"two level category"===e.key&&Object(ts.jsxs)("td",{className:"db-field-column",children:[Object(ts.jsx)("input",{type:"text",placeholder:"level 1 [field-name]",className:"theme source-field-width",value:e.db1,title:"the first source field to use for this double category",onChange:function(s){t.set_db(e,r,s.target.value)}}),Object(ts.jsx)("input",{type:"text",placeholder:"level 2 [field-name]",className:"theme source-field-width",value:e.db2,title:"the second source field to use for this double category",onChange:function(s){t.set_db_extra(e,r,s.target.value)}})]}),Object(ts.jsx)("td",{className:"td-display-column",children:null!==e.display&&Object(ts.jsx)("span",{children:Object(ts.jsx)("input",{type:"text",className:"theme metadata-text",placeholder:"UI display-name",title:"name displayed in the UI for this item",value:e.display,onChange:function(s){t.setDisplayName(e,r,s.target.value)}})})}),Object(ts.jsxs)("td",{className:"td-align-top",children:[t.needs_metadata_field(e)&&Object(ts.jsx)("div",{className:"td-md-field-width",children:Object(ts.jsx)("input",{type:"text",className:"theme metadata-text",placeholder:"metadata name",value:e.field1,title:"metadata names should only contain 0..9, a..z, and A..Z",onKeyDown:function(e){return t.checkMetadataName(e)},onChange:function(s){t.setUserMetadataName1(e,r,s.target.value)}})}),"true"===e.sort&&Object(ts.jsx)("div",{children:Object(ts.jsx)("input",{type:"text",className:"theme metadata-text",placeholder:"sort descending UI text",value:e.sort_desc,title:"The text to display for this field if a descending sort is selected of this type",onChange:function(s){t.setValue(e,r,"sort_desc",s.target.value)}})}),"true"===e.sort&&Object(ts.jsx)("div",{children:Object(ts.jsx)("input",{type:"text",className:"theme metadata-text",placeholder:"sort ascending UI text",value:e.sort_asc,title:"The text to display for this field if an ascending sort is selected of this type",onChange:function(s){t.setValue(e,r,"sort_asc",s.target.value)}})}),"true"===e.sort&&Object(ts.jsx)("br",{})]}),Object(ts.jsxs)("td",{className:"td-align-top",children:[""!==e.sort&&Object(ts.jsx)("div",{className:"td-sort-2",title:"enable this category as an item used for sorting in the UI",children:Object(ts.jsx)("input",{type:"checkbox",checked:"true"===e.sort,onChange:function(s){t.setSort(e,r,s.target.checked)},value:"enable result sorting over this field?"})}),"true"===e.sort&&Object(ts.jsxs)("div",{className:"td-sort-2",title:"set this descending field as the default sort field for the UI",children:["\u2190",Object(ts.jsx)("input",{type:"checkbox",checked:"desc"===e.sort_default,onChange:function(s){t.setDefaultSort(e,r,"desc",s.target.checked)}})]}),"true"===e.sort&&Object(ts.jsxs)("div",{className:"td-sort-2",title:"set this ascending field as the default sort field for the UI",children:["\u2190",Object(ts.jsx)("input",{type:"checkbox",checked:"asc"===e.sort_default,onChange:function(s){t.setDefaultSort(e,r,"asc",s.target.checked)}})]})]}),Object(ts.jsxs)("td",{className:"td-action",children:[Object(ts.jsx)("span",{className:"delete-box",onClick:function(){return t.deleteMetadataItem(r)},title:"remove this metadata item",children:Object(ts.jsx)("img",{src:"light"===a?"../images/delete.svg":"../images/delete-dark.svg",className:"image-size",title:"remove this metadata mapping",alt:"remove this metadata mapping"})}),r>0&&Object(ts.jsx)("span",{className:"up-arrow",title:"move row up (change UI ordering)",onClick:function(){t.move_row_up(e,r)},children:"\u21e7"}),r+1<s&&Object(ts.jsx)("span",{className:"up-arrow",title:"move row down (change UI ordering)",onClick:function(){t.move_row_down(e,r)},children:"\u21e9"})]})]},r)})),Object(ts.jsx)("tr",{children:Object(ts.jsx)("td",{colSpan:5,children:"\xa0"})}),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{colSpan:5}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"image-button",onClick:function(){return e.addNewMetadataMapping()},children:Object(ts.jsx)("img",{className:"image-size",src:"light"===a?"../images/add.svg":"../images/add-dark.svg",title:"add new metadata mapping",alt:"add new metadata mapping"})})})]}),Object(ts.jsx)("tr",{children:Object(ts.jsx)("td",{colSpan:5,children:"\xa0"})})]})]})]})}}]),s}(a.Component),ra=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,tenantId:e.tenantId?e.tenantId:"",clientId:e.clientId?e.clientId:"",clientSecret:e.clientSecret?e.clientSecret:"",redirectUrl:e.redirectUrl?e.redirectUrl:"",crawlOneDrive:!!N.defined(e.crawlOneDrive)&&e.crawlOneDrive,crawlAllOfOneDrive:!!N.defined(e.crawlAllOfOneDrive)&&e.crawlAllOfOneDrive,oneDriveUsersToCrawl:e.oneDriveUsersToCrawl?e.oneDriveUsersToCrawl:"",crawlSharePoint:!!N.defined(e.crawlSharePoint)&&e.crawlSharePoint,crawlRootSite:!!N.defined(e.crawlRootSite)&&e.crawlRootSite,sharePointSitesToCrawl:e.sharePointSitesToCrawl?e.sharePointSitesToCrawl:"",crawlExchange:!!N.defined(e.crawlExchange)&&e.crawlExchange,crawlAllOfExchange:!!N.defined(e.crawlAllOfExchange)&&e.crawlAllOfExchange,exchangeUsersToCrawl:e.exchangeUsersToCrawl?e.exchangeUsersToCrawl:"",specific_json:e.specific_json},a}return Object(g.a)(s,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({tenantId:e.tenantId,clientId:e.clientId,clientSecret:e.clientSecret,redirectUrl:e.redirectUrl,crawlOneDrive:e.crawlOneDrive,crawlAllOfOneDrive:e.crawlAllOfOneDrive,oneDriveUsersToCrawl:e.oneDriveUsersToCrawl,crawlSharePoint:e.crawlSharePoint,crawlRootSite:e.crawlRootSite,sharePointSitesToCrawl:e.sharePointSitesToCrawl,crawlExchange:e.crawlExchange,crawlAllOfExchange:e.crawlAllOfExchange,exchangeUsersToCrawl:e.exchangeUsersToCrawl,specific_json:e.specific_json,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.state.specific_json),{},{tenantId:N.defined(e.tenantId)?e.tenantId:this.state.tenantId,clientId:N.defined(e.clientId)?e.clientId:this.state.clientId,clientSecret:N.defined(e.clientSecret)?e.clientSecret:this.state.clientSecret,redirectUrl:N.defined(e.redirectUrl)?e.redirectUrl:this.state.redirectUrl,crawlOneDrive:N.defined(e.crawlOneDrive)?e.crawlOneDrive:this.state.crawlOneDrive,crawlAllOfOneDrive:N.defined(e.crawlAllOfOneDrive)?e.crawlAllOfOneDrive:this.state.crawlAllOfOneDrive,oneDriveUsersToCrawl:N.defined(e.oneDriveUsersToCrawl)?e.oneDriveUsersToCrawl:this.state.oneDriveUsersToCrawl,crawlSharePoint:N.defined(e.crawlSharePoint)?e.crawlSharePoint:this.state.crawlSharePoint,crawlRootSite:N.defined(e.crawlRootSite)?e.crawlRootSite:this.state.crawlRootSite,sharePointSitesToCrawl:N.defined(e.sharePointSitesToCrawl)?e.sharePointSitesToCrawl:this.state.sharePointSitesToCrawl,crawlExchange:N.defined(e.crawlExchange)?e.crawlExchange:this.state.crawlExchange,crawlAllOfExchange:N.defined(e.crawlAllOfExchange)?e.crawlAllOfExchange:this.state.crawlAllOfExchange,exchangeUsersToCrawl:N.defined(e.exchangeUsersToCrawl)?e.exchangeUsersToCrawl:this.state.exchangeUsersToCrawl})}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"crawler-office365.js: Something went wrong."}):Object(ts.jsxs)("div",{className:"crawler-page",children:[Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsxs)("div",{className:"full-column-2",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"domain name"}),Object(ts.jsx)("span",{className:"bigger-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"tenant id",autoFocus:!0,value:this.state.tenantId,onChange:function(t){e.change_callback({tenantId:t.target.value})}})})}),Object(ts.jsx)("span",{className:"office-manual-box",children:Object(ts.jsxs)("a",{href:"../resources/simsage-office365-setup.pdf",id:"dlOffice365",target:"_blank",title:"download the SimSage Office 365 setup guide",children:[Object(ts.jsx)("span",{className:"instructions-label",children:"instructions"}),Object(ts.jsx)("img",{src:"../images/pdf-icon.png",alt:"office 365 setup guide",className:"image-size"})]})})]})}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"client id"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"client id",value:this.state.clientId,onChange:function(t){e.change_callback({clientId:t.target.value})}})})})]}),Object(ts.jsxs)("span",{className:"right-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"client secret"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"client secret",value:this.state.clientSecret,onChange:function(t){e.change_callback({clientSecret:t.target.value})}})})})]})]}),Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsxs)("span",{className:"full-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"redirect url"}),Object(ts.jsx)("span",{className:"bigger-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"redirect url: the SimSage interface url to return-to after MS sign-in completes.",value:this.state.redirectUrl,onChange:function(t){e.change_callback({redirectUrl:t.target.value})}})})})]})}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"left-column",children:Object(ts.jsxs)("div",{style:{float:"left"},title:"Check this box if you want OneDrive of your Office365 to be included",children:[Object(ts.jsx)("input",{type:"checkbox",checked:this.state.crawlOneDrive,onChange:function(t){e.change_callback({crawlOneDrive:t.target.checked})},value:"enable OneDrive?"}),Object(ts.jsx)("span",{className:"label-left",children:"enable OneDrive?"})]})}),Object(ts.jsx)("span",{className:"right-column",children:Object(ts.jsxs)("div",{style:{float:"left"},title:"Check this box if you want ALL of OneDrive to be included",children:[Object(ts.jsx)("input",{type:"checkbox",checked:this.state.crawlAllOfOneDrive,disabled:!this.state.crawlOneDrive,onChange:function(t){e.change_callback({crawlAllOfOneDrive:t.target.checked})},value:"crawl all of OneDrive?"}),Object(ts.jsx)("span",{className:"label-left",children:"crawl all of OneDrive?"})]})})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"label-right-top",children:"one-drive accounts"}),Object(ts.jsx)("span",{className:"full-column",children:Object(ts.jsx)("textarea",{className:"textarea-width",placeholder:"specific one-drive accounts (comma separated email addresses)",disabled:this.state.crawlAllOfOneDrive||!this.state.crawlOneDrive,rows:2,value:this.state.oneDriveUsersToCrawl,onChange:function(t){e.change_callback({oneDriveUsersToCrawl:t.target.value})}})})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"left-column",children:Object(ts.jsxs)("div",{style:{float:"left"},title:"Check this box if you want SharePoint of your Office365 to be included",children:[Object(ts.jsx)("input",{type:"checkbox",checked:this.state.crawlSharePoint,onChange:function(t){e.change_callback({crawlSharePoint:t.target.checked})},value:"enable SharePoint indexing?"}),Object(ts.jsx)("span",{className:"label-left",children:"enable SharePoint indexing?"})]})}),Object(ts.jsx)("span",{className:"right-column",children:Object(ts.jsxs)("div",{style:{float:"left"},title:"Check this box if you want the root SharePoint site to be indexed",children:[Object(ts.jsx)("input",{type:"checkbox",checked:this.state.crawlRootSite,disabled:!this.state.crawlSharePoint,onChange:function(t){e.change_callback({crawlRootSite:t.target.checked})},value:"crawl SharePoint root site?"}),Object(ts.jsx)("span",{className:"label-left",children:"crawl SharePoint root site?"})]})})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"label-right-top",children:"sharepoint site ids"}),Object(ts.jsx)("span",{className:"full-column",children:Object(ts.jsx)("textarea",{className:"textarea-width",placeholder:"other SharePoint sites (comma separated ids)",disabled:!this.state.crawlSharePoint,rows:2,value:this.state.sharePointSitesToCrawl,onChange:function(t){e.change_callback({sharePointSitesToCrawl:t.target.value})}})})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"left-column",children:Object(ts.jsxs)("div",{style:{float:"left"},title:"Check this box if you want Exchange of your Office365 to be included",children:[Object(ts.jsx)("input",{type:"checkbox",checked:this.state.crawlExchange,onChange:function(t){e.change_callback({crawlExchange:t.target.checked})},value:"enable Exchange?"}),Object(ts.jsx)("span",{className:"label-left",children:"enable Exchange?"})]})}),Object(ts.jsx)("span",{className:"right-column",children:Object(ts.jsxs)("div",{style:{float:"left"},title:"Check this box if you want ALL of Exchange to be included",children:[Object(ts.jsx)("input",{type:"checkbox",checked:this.state.crawlAllOfExchange,disabled:!this.state.crawlExchange,onChange:function(t){e.change_callback({crawlAllOfExchange:t.target.checked})},value:"crawl all of Exchange?"}),Object(ts.jsx)("span",{className:"label-left",children:"crawl all of Exchange?"})]})})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"label-right-top",children:"specific exchange accounts"}),Object(ts.jsx)("span",{className:"full-column",children:Object(ts.jsx)("textarea",{className:"textarea-width",placeholder:"specific exchange accounts (comma separated email addresses)",disabled:this.state.crawlAllOfExchange||!this.state.crawlExchange,rows:2,value:this.state.exchangeUsersToCrawl,onChange:function(t){e.change_callback({exchangeUsersToCrawl:t.target.value})}})})]})]})}}]),s}(a.Component),ia=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,clientToken:e.clientToken?e.clientToken:"",folderList:e.folderList?e.folderList:"",specific_json:e.specific_json},a}return Object(g.a)(s,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({tenantId:e.tenantId,clientToken:N.defined(e.clientToken)?e.clientToken:"",folderList:N.defined(e.folderList)?e.folderList:"",specific_json:e.specific_json,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.state.specific_json),{},{clientToken:N.defined(e.clientToken)?e.clientToken:this.state.clientToken,folderList:N.defined(e.folderList)?e.folderList:this.state.folderList})}},{key:"change_callback",value:function(e){if(this.setState(e),this.state.onSave){var t=this.construct_data(e);this.state.onSave(t)}}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"crawler-dropbox.js: Something went wrong."}):Object(ts.jsxs)("div",{className:"crawler-page",children:[Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"client token"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control dropbox-text-width",autoFocus:!0,spellCheck:!1,placeholder:"client token",value:this.state.clientToken,onChange:function(t){e.change_callback({clientToken:t.target.value})}})})})]}),Object(ts.jsx)("span",{className:"dropbox-manual-box",children:Object(ts.jsxs)("a",{href:"../resources/simsage-dropbox-setup.pdf",id:"dlDropbox",target:"_blank",title:"download the SimSage Dropbox setup guide",children:[Object(ts.jsx)("span",{className:"instructions-label",children:"instructions"}),Object(ts.jsx)("img",{src:"../images/pdf-icon.png",alt:"dropbox setup guide",className:"image-size"})]})})]}),Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"start folder"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("input",{type:"text",className:"form-control textarea-width",placeholder:"specific folder to crawl, leave empty to crawl all folders.",value:this.state.folderList,onChange:function(t){e.change_callback({folderList:t.target.value})}})})]})})]})}}]),s}(a.Component),oa=(s(254),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={filename:"",fileType:"",data:"",organisationId:e.organisationId,kbId:e.kbId,sourceId:e.sourceId,onError:e.onError},a}return Object(g.a)(s,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({organisationId:e.organisationId,kbId:e.kbId,sourceId:e.sourceId,onError:e.onError})}},{key:"_handleImageChange",value:function(e){e.preventDefault();var t=this,s=new FileReader,a=e.target.files[0],n=a.name,r=a.type;s.onloadend=function(){t.setState({filename:n,fileType:r,data:s.result})},s.readAsDataURL(a)}},{key:"upload",value:function(){if(this.state.data){var e={organisationId:this.state.organisationId,kbId:this.state.kbId,sid:"",sourceId:this.state.sourceId,data:this.state.data};this.props.doUpload&&this.props.doUpload(e)}}},{key:"render",value:function(){var e=this;return Object(ts.jsx)("div",{className:"restore-wp",children:Object(ts.jsx)("form",{onSubmit:function(t){return e._handleSubmit(t)},className:"upload-container",children:Object(ts.jsxs)("div",{className:"form-width",children:[Object(ts.jsx)("input",{className:"upload-control",type:"file",onChange:function(t){return e._handleImageChange(t)}}),this.state.data&&this.state.data.length>0&&"application/zip"===this.state.fileType&&Object(ts.jsx)("span",{className:"image-button",onClick:function(){return e.upload()},children:Object(ts.jsx)("img",{className:"image-size",src:"../images/restore.svg",title:'Click here to upload WordPress Archive "'+this.state.filename+'"',alt:"restore data from file"})})]})})})}}]),s}(n.a.Component)),ca=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,organisation_id:e.organisation_id,kb_id:e.kb_id,source_id:e.source_id,onSave:e.onSave,onError:e.onError},a}return Object(g.a)(s,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState({onSave:e.onSave,onError:e.onError})}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave({crawlerType:"wordpress"})}},{key:"exportArchive",value:function(){k.download_export_archive(this.state.organisation_id,this.state.kb_id,this.state.source_id)}},{key:"restore",value:function(e){e&&e.data&&e.data.length>0&&this.props.wpUploadArchive({organisationId:this.state.organisation_id,kbId:this.state.kb_id,sid:"",sourceId:this.state.source_id,data:e.data})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"crawler-wordpress.js: Something went wrong."}):Object(ts.jsx)("div",{className:"crawler-page",children:Object(ts.jsxs)("div",{className:"wp-form",children:["The WordPress crawler is an external entity controlled by the SimSage WordPress plugin.",Object(ts.jsx)("br",{}),"As such there are no properties to configure here, nor is there a schedule for SimSage to work to.",Object(ts.jsx)("br",{}),Object(ts.jsx)("br",{}),this.state.source_id>0&&Object(ts.jsxs)("div",{className:"export-wp",children:[Object(ts.jsx)("div",{children:"export the contents of this source as a WordPress GZip Archive"}),Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.exportArchive()},children:"Export WordPress Archive"})]}),this.state.source_id>0&&Object(ts.jsxs)("div",{className:"import-wp",children:[Object(ts.jsx)("div",{className:"import-text",children:"import the contents of  WordPress GZip Archive into this source"}),Object(ts.jsx)(oa,{doUpload:function(t){return e.restore(t)},organisationId:this.state.organisation_id,kbId:this.state.kb_id,sourceId:this.state.source_id,onError:function(t){return e.props.setError("Error",t)}})]})]})})}}]),s}(a.Component),la=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,gdrive_projectId:e.gdrive_projectId?e.gdrive_projectId:"",gdrive_clientId:e.gdrive_clientId?e.gdrive_clientId:"",gdrive_clientSecret:e.gdrive_clientSecret?e.gdrive_clientSecret:"",gdrive_clientName:e.gdrive_clientName?e.gdrive_clientName:"",gdrive_clientPort:e.gdrive_clientPort?e.gdrive_clientPort:"",specific_json:e.specific_json},a}return Object(g.a)(s,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({tenantId:e.tenantId,gdrive_projectId:N.defined(e.gdrive_projectId)?e.gdrive_projectId:"",gdrive_clientId:N.defined(e.gdrive_clientId)?e.gdrive_clientId:"",gdrive_clientSecret:N.defined(e.gdrive_clientSecret)?e.gdrive_clientSecret:"",gdrive_clientName:N.defined(e.gdrive_clientName)?e.gdrive_clientName:"",gdrive_clientPort:N.defined(e.gdrive_clientPort)?e.gdrive_clientPort:"",specific_json:e.specific_json,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.state.specific_json),{},{gdrive_projectId:N.defined(e.gdrive_projectId)?e.gdrive_projectId:this.state.gdrive_projectId,gdrive_clientId:N.defined(e.gdrive_clientId)?e.gdrive_clientId:this.state.gdrive_clientId,gdrive_clientSecret:N.defined(e.gdrive_clientSecret)?e.gdrive_clientSecret:this.state.gdrive_clientSecret,gdrive_clientName:N.defined(e.gdrive_clientName)?e.gdrive_clientName:this.state.gdrive_clientName,gdrive_clientPort:N.defined(e.gdrive_clientPort)?e.gdrive_clientPort:this.state.gdrive_clientPort})}},{key:"change_callback",value:function(e){if(this.setState(e),this.state.onSave){var t=this.construct_data(e);this.state.onSave(t)}}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"crawler-gdrive.js: Something went wrong."}):Object(ts.jsxs)("div",{className:"crawler-page",children:[Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsxs)("div",{className:"full-column-2",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"client id"}),Object(ts.jsx)("span",{className:"bigger-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"client id",value:this.state.gdrive_clientId,onChange:function(t){e.change_callback({gdrive_clientId:t.target.value})}})})}),Object(ts.jsx)("span",{className:"office-manual-box",children:Object(ts.jsxs)("a",{href:"../resources/simsage-google-drive-setup.pdf",id:"dlGDrive",target:"_blank",title:"download the SimSage Google-drive setup guide",children:[Object(ts.jsx)("span",{className:"instructions-label",children:"instructions"}),Object(ts.jsx)("img",{src:"../images/pdf-icon.png",alt:"google-drive setup guide",className:"image-size"})]})})]})}),Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"client secret"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"client Secret",value:this.state.gdrive_clientSecret,onChange:function(t){e.change_callback({gdrive_clientSecret:t.target.value})}})})})]})}),Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"project id"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"project id",value:this.state.gdrive_projectId,onChange:function(t){e.change_callback({gdrive_projectId:t.target.value})}})})})]})}),Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"client name"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"client name",value:this.state.gdrive_clientName,onChange:function(t){e.change_callback({gdrive_clientName:t.target.value})}})})})]})}),Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"local web port"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control",placeholder:"local web port",value:this.state.gdrive_clientPort,onChange:function(t){e.change_callback({gdrive_clientPort:t.target.value})}})})})]})})]})}}]),s}(a.Component),da=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,nfs_local_folder:e.nfs_local_folder?e.nfs_local_folder:"",specific_json:e.specific_json},a}return Object(g.a)(s,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState({nfs_local_folder:N.defined(e.nfs_local_folder)?e.nfs_local_folder:"",specific_json:e.specific_json,onSave:e.onSave,onError:e.onError})}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.state.specific_json),{},{nfs_local_folder:N.defined(e.nfs_local_folder)?e.nfs_local_folder:this.state.nfs_local_folder})}},{key:"change_callback",value:function(e){if(this.setState(e),this.state.onSave){var t=this.construct_data(e);this.state.onSave(t)}}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"crawler-nfs.js: Something went wrong."}):Object(ts.jsx)("div",{className:"crawler-page",children:Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"local folder"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control nfs-width",placeholder:"local folder",value:this.state.nfs_local_folder,onChange:function(t){e.change_callback({nfs_local_folder:t.target.value})}})})})]})})})}}]),s}(a.Component),ua=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,pk:e.pk?e.pk:"",url:e.url?e.url:"",template:e.template?e.template:"",text:e.text?e.text:"",content_url:e.content_url?e.content_url:"",customRender:!!e.customRender&&e.customRender,specific_json:e.specific_json},a}return Object(g.a)(s,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({pk:e.pk,url:e.url,template:e.template,text:e.text,content_url:e.content_url?e.content_url:"",customRender:!!e.customRender&&e.customRender,specific_json:e.specific_json,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.state.specific_json),{},{url:w.defined(e.url)?e.url:this.state.url,template:w.defined(e.template)?e.template:this.state.template,text:w.defined(e.text)?e.text:this.state.text,content_url:w.defined(e.content_url)?e.content_url:this.state.content_url,pk:w.defined(e.pk)?e.pk:this.state.pk})}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"crawler-restfull.js: Something went wrong."}):Object(ts.jsxs)("div",{className:"crawler-page",children:[Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"API url"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control jdbc-field-width",placeholder:"url",value:this.state.url,onChange:function(t){e.change_callback({url:t.target.value})}})})})]})}),Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"record primary key"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control jdbc-field-width",placeholder:"the name of the primary key in the record",value:this.state.pk,onChange:function(t){e.change_callback({pk:t.target.value})}})})})]})}),Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsxs)("span",{className:"left-column",children:[Object(ts.jsx)("span",{className:"small-label-right",children:"JSON fields"}),Object(ts.jsx)("span",{className:"big-text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",className:"form-control jdbc-field-width",placeholder:"document http/https reference JSON fields in square brackets [FIELD-NAME]",disabled:this.state.customRender,value:this.state.content_url,onChange:function(t){e.change_callback({content_url:t.target.value})}})})})]})}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"label-right-top",children:"text index template"}),Object(ts.jsx)("span",{className:"full-column",children:Object(ts.jsx)("textarea",{className:"textarea-width",placeholder:"REST text index template, an text template referencing REST fields in square brackets [FIELD-NAME]",disabled:!this.state.customRender,rows:7,value:this.state.text,onChange:function(t){e.change_callback({text:t.target.value})}})})]}),Object(ts.jsxs)("div",{className:"form-group",children:[Object(ts.jsx)("span",{className:"label-right-top",children:"html render template"}),Object(ts.jsx)("span",{className:"full-column",children:Object(ts.jsx)("textarea",{className:"textarea-width",placeholder:"REST html render template, an html template referencing REST fields in square brackets [FIELD-NAME]",disabled:!this.state.customRender,rows:7,value:this.state.template,onChange:function(t){e.change_callback({template:t.target.value})}})})]})]})}}]),s}(a.Component),pa=[{key:"none",display:null,field1:null,db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"author list",display:"",field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"created date range",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"last modified date ranges",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"document type",display:"",field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"people list",display:"",field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"location list",display:"",field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"money range",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"number range",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""}],ha=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,specific_json:e.specific_json?e.specific_json:{}},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState({specific_json:e.specific_json,onSave:e.onSave,onError:e.onError})}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:w.defined(e)?e:this.get_md_list()})}},{key:"set_db",value:function(e,t,s){var a=this.get_md_list();t>=0&&t<a.length&&(a[t].db1=s,this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:a})}),this.state.onSave&&this.state.onSave(this.construct_data(a)))}},{key:"set_db_extra",value:function(e,t,s){var a=this.get_md_list();t>=0&&t<a.length&&(a[t].db2=s,this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:a})}),this.state.onSave&&this.state.onSave(this.construct_data(a)))}},{key:"set_md_type",value:function(e,t,s){var a=this.get_md_list();if(t>=0&&t<a.length){var n,r=null,i=Object(b.a)(pa);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.key===s){r=o;break}}}catch(c){i.e(c)}finally{i.f()}null!=r&&(a[t]=JSON.parse(JSON.stringify(r)),this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:a})}),this.state.onSave&&this.state.onSave(this.construct_data(a)))}}},{key:"setDisplayName",value:function(e,t,s){var a=this.get_md_list();t>=0&&t<a.length&&(a[t].display=s,this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:a})}),this.state.onSave&&this.state.onSave(this.construct_data(a)))}},{key:"setUserMetadataName1",value:function(e,t,s){var a=this.get_md_list();t>=0&&t<a.length&&(a[t].field1=s,this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:a})}),this.state.onSave&&this.state.onSave(this.construct_data(a)))}},{key:"setSort",value:function(e,t,s){var a=this.get_md_list();t>=0&&t<a.length&&(a[t].sort=s?"true":"false",this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:a})}),this.state.onSave&&this.state.onSave(this.construct_data(a)))}},{key:"setValue",value:function(e,t,s,a){var n=this.get_md_list();t>=0&&t<n.length&&(n[t][s]=a,this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:n})}),this.state.onSave&&this.state.onSave(this.construct_data(n)))}},{key:"setDefaultSort",value:function(e,t,s,a){var n=this.get_md_list();if(t>=0&&t<n.length){for(var r in n[t].sort_default=a?s:"",n)""+r!==""+t&&n.hasOwnProperty(r)&&(n[r].sort_default="");this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:n})}),this.state.onSave&&this.state.onSave(this.construct_data(n))}}},{key:"deleteMetadataItem",value:function(e){var t=[],s=""+e,a=this.get_md_list();for(var n in a)n!==s&&a.hasOwnProperty(n)&&t.push(a[n]);this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:t})}),this.state.onSave&&this.state.onSave(this.construct_data(t))}},{key:"addNewMetadataMapping",value:function(){var e=this.get_md_list();e.push(JSON.parse(JSON.stringify(pa[0]))),this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:e})}),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"checkMetadataName",value:function(e){return e.key>="a"&&e.key<="z"||e.key>="A"&&e.key<="Z"||e.key>="0"&&e.key<="9"||"-"===e.key||(e.preventDefault(),e.stopPropagation(),!1)}},{key:"move_row_up",value:function(e,t){if(t>0){var s=this.get_md_list(),a=s[t-1];s[t-1]=e,s[t]=a,this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:s})}),this.state.onSave&&this.state.onSave(this.construct_data(s))}}},{key:"move_row_down",value:function(e,t){var s=this.get_md_list();if(t+1<s.length){var a=s[t+1];s[t+1]=e,s[t]=a,this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:s})}),this.state.onSave&&this.state.onSave(this.construct_data(s))}}},{key:"get_md_list",value:function(){return this.state&&this.state.specific_json&&this.state.specific_json.metadata_list?this.state.specific_json.metadata_list:[]}},{key:"needs_metadata_field",value:function(e){return null!==e.field1}},{key:"render",value:function(){var e=this;if(this.state.has_error)return Object(ts.jsx)("h1",{children:"crawler-metadata-mapper.js: Something went wrong."});var t=this,s=this.props.theme,a=this.get_md_list().length;return Object(ts.jsxs)("div",{className:"crawler-page",children:[Object(ts.jsx)("div",{className:"instructions-label",children:"All rows in order of UI.  Use 'actions' arrows to re-arrange existing rows."}),Object(ts.jsxs)("table",{className:"table",children:[Object(ts.jsx)("thead",{children:Object(ts.jsxs)("tr",{className:"table-header",children:[Object(ts.jsx)("th",{className:"table-header metadata-column",children:"data-type"}),Object(ts.jsx)("th",{className:"table-header display-column",children:"UI display-name"}),Object(ts.jsx)("th",{className:"table-header metadata-field-column",children:"metadata name"}),Object(ts.jsx)("th",{className:"table-header sort-field-column",children:"sortable"}),Object(ts.jsx)("th",{className:"table-header action-field-column",children:"actions"})]})}),Object(ts.jsxs)("tbody",{children:[Object(ts.jsx)("tr",{children:Object(ts.jsx)("td",{colSpan:3,children:"\xa0"})}),this.get_md_list().map((function(e,n){return Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{className:"selector-column",children:Object(ts.jsx)("select",{className:"form-select",onChange:function(s){t.set_md_type(e,n,s.target.value)},defaultValue:e.key,"aria-label":"select what kind of metadata field to use",children:pa.map((function(e,t){return Object(ts.jsx)("option",{value:e.key,children:e.key},t)}))})}),Object(ts.jsx)("td",{className:"td-display-column",children:null!==e.display&&Object(ts.jsx)("span",{children:Object(ts.jsx)("input",{type:"text",className:"theme metadata-text",placeholder:"UI display-name",title:"name displayed in the UI for this item",value:e.display,onChange:function(s){t.setDisplayName(e,n,s.target.value)}})})}),Object(ts.jsxs)("td",{className:"td-align-top",children:[t.needs_metadata_field(e)&&Object(ts.jsx)("div",{className:"td-md-field-width",children:Object(ts.jsx)("input",{type:"text",className:"theme metadata-text",placeholder:"metadata name",value:e.field1,title:"metadata names should only contain 0..9, a..z, and A..Z",onKeyDown:function(e){return t.checkMetadataName(e)},onChange:function(s){t.setUserMetadataName1(e,n,s.target.value)}})}),"true"===e.sort&&Object(ts.jsx)("div",{children:Object(ts.jsx)("input",{type:"text",placeholder:"sort descending UI text",className:"theme metadata-text",value:e.sort_desc,title:"The text to display for this field if a descending sort is selected of this type",onChange:function(s){t.setValue(e,n,"sort_desc",s.target.value)}})}),"true"===e.sort&&Object(ts.jsx)("div",{children:Object(ts.jsx)("input",{type:"text",className:"theme metadata-text",placeholder:"sort ascending UI text",value:e.sort_asc,title:"The text to display for this field if an ascending sort is selected of this type",onChange:function(s){t.setValue(e,n,"sort_asc",s.target.value)}})}),"true"===e.sort&&Object(ts.jsx)("br",{})]}),Object(ts.jsxs)("td",{className:"td-align-top",children:[""!==e.sort&&Object(ts.jsxs)("div",{className:"td-sort-2",title:"enable this category as an item used for sorting in the UI",children:[Object(ts.jsx)("input",{type:"checkbox",checked:"true"===e.sort,onChange:function(s){t.setSort(e,n,s.target.checked)},value:"enable result sorting over this field?"}),Object(ts.jsx)("span",{className:"sort-label",children:"sort"})]}),"true"===e.sort&&Object(ts.jsxs)("div",{className:"td-sort-2",title:"set this descending field as the default sort field for the UI",children:["\u2190",Object(ts.jsx)("input",{type:"checkbox",checked:"desc"===e.sort_default,onChange:function(s){t.setDefaultSort(e,n,"desc",s.target.checked)}})]}),"true"===e.sort&&Object(ts.jsxs)("div",{className:"td-sort-2",title:"set this ascending field as the default sort field for the UI",children:["\u2190",Object(ts.jsx)("input",{type:"checkbox",checked:"asc"===e.sort_default,onChange:function(s){t.setDefaultSort(e,n,"asc",s.target.checked)}})]})]}),Object(ts.jsxs)("td",{className:"td-action",children:[Object(ts.jsx)("span",{className:"delete-box",onClick:function(){return t.deleteMetadataItem(n)},title:"remove this metadata item",children:Object(ts.jsx)("img",{src:"light"===s?"../images/delete.svg":"../images/delete-dark.svg",className:"image-size",title:"remove this metadata mapping",alt:"remove this metadata mapping"})}),n>0&&Object(ts.jsx)("span",{className:"up-arrow",title:"move row up (change UI ordering)",onClick:function(){t.move_row_up(e,n)},children:"\u21e7"}),n+1<a&&Object(ts.jsx)("span",{className:"up-arrow",title:"move row down (change UI ordering)",onClick:function(){t.move_row_down(e,n)},children:"\u21e9"})]})]},n)})),Object(ts.jsx)("tr",{children:Object(ts.jsx)("td",{colSpan:4,children:"\xa0"})}),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{colSpan:4}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"image-button",onClick:function(){return e.addNewMetadataMapping()},children:Object(ts.jsx)("img",{className:"image-size",src:"light"===s?"../images/add.svg":"../images/add-dark.svg",title:"add new metadata mapping",alt:"add new metadata mapping"})})})]}),Object(ts.jsx)("tr",{children:Object(ts.jsx)("td",{colSpan:4,children:"\xa0"})})]})]})]})}}]),s}(a.Component),ma=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,acl_list:e.acl_list?e.acl_list:[],selectedFilter:"",availableFilter:""},a}return Object(g.a)(s,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({acl_list:e.acl_list?e.acl_list:[]})}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"update_parent",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"removeAcl",value:function(e){var t,s=[],a=Object(b.a)(this.state.acl_list);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.acl!==e.acl&&s.push(n)}}catch(r){a.e(r)}finally{a.f()}this.setState({acl_list:s}),this.update_parent(s)}},{key:"addAcl",value:function(e){var t,s=JSON.parse(JSON.stringify(this.state.acl_list)),a={acl:e.name,access:"R",isUser:e.isUser},n=!1,r=Object(b.a)(this.state.acl_list);try{for(r.s();!(t=r.n()).done;){if(t.value.acl===e.name){n=!0;break}}}catch(i){r.e(i)}finally{r.f()}n||(s.push(a),this.setState({acl_list:s}),this.update_parent(s))}},{key:"getAllGroups",value:function(){return this.props.group_list?this.props.group_list:[]}},{key:"getAllUsers",value:function(){return this.props.user_list?this.props.user_list:[]}},{key:"getAvailableGroupsOrUsers",value:function(){var e,t=[],s=this.state.availableFilter.trim().toLowerCase(),a=Object(b.a)(this.getAllGroups());try{for(a.s();!(e=a.n()).done;){var n,r=e.value,i=!1,o=Object(b.a)(this.state.acl_list);try{for(o.s();!(n=o.n()).done;){var c=n.value;r.name===c.acl&&(i=!0)}}catch(f){o.e(f)}finally{o.f()}i||(0===s.length||r.name.toLowerCase().indexOf(s)>=0)&&(r.isUser=!1,t.push(r))}}catch(f){a.e(f)}finally{a.f()}var l,d=Object(b.a)(this.getAllUsers());try{for(d.s();!(l=d.n()).done;){var u,p=l.value,h=!1,m=Object(b.a)(this.state.acl_list);try{for(m.s();!(u=m.n()).done;){var j=u.value;p.email===j.acl&&(h=!0)}}catch(f){m.e(f)}finally{m.f()}if(!h){var g=p.email;(0===s.length||g.toLowerCase().indexOf(s)>=0)&&t.push({organisationId:this.props.organisation_id,name:g,isUser:!0,userIdList:[]})}}}catch(f){d.e(f)}finally{d.f()}return t}},{key:"getAcls",value:function(){var e,t=this.state.acl_list,s=[],a=this.state.selectedFilter.trim().toLowerCase(),n={},r=Object(b.a)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;i&&i.acl&&(0===a.length||i.acl.toLowerCase().indexOf(a)>=0)&&(n.hasOwnProperty(i.acl)||(n[i.acl]=!0,s.push(i)))}}catch(o){r.e(o)}finally{r.f()}return s}},{key:"invertAccess",value:function(e,t,s){e.preventDefault(),e.stopPropagation(),t&&t.access&&t.access.indexOf(s)>=0?t.access=t.access.replace(s,""):t.access+=s;var a,n=this.state.acl_list,r=[],i=Object(b.a)(n);try{for(i.s();!(a=i.n()).done;){var o=a.value;o&&o.acl&&(o.acl===t.acl?r.push(t):r.push(o))}}catch(c){i.e(c)}finally{i.f()}this.setState({acl_list:r}),this.update_parent(r)}},{key:"getAccess",value:function(e,t){return t}},{key:"getTitle",value:function(e,t){var s="do not have ";return e&&e.access&&e.access.indexOf(t)>=0&&(s="have "),"R"===t?s+="read access":"W"===t?s+="write access":"D"===t?s+="delete access":"M"===t&&(s+="the ability to change permissions"),s}},{key:"getAclClassName",value:function(e,t){return e&&e.access&&e.access.indexOf(t)>=0?"acl-access":"acl-no-access"}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"acl-setup.js: Something went wrong."}):Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("div",{className:"acl-setup-role-block",children:[Object(ts.jsxs)("div",{className:"role-label",children:["ACLs",Object(ts.jsx)("span",{className:"filter-label",children:"filter "}),Object(ts.jsxs)("span",{className:"filter-text-box",children:[Object(ts.jsx)("input",{type:"text",className:"filter-text",value:this.state.selectedFilter,onChange:function(t){e.setState({selectedFilter:t.target.value})}}),Object(ts.jsx)("span",{className:"clear",title:"clear filter",onClick:function(){return e.setState({selectedFilter:""})},children:"\xd7"})]})]}),Object(ts.jsx)("div",{className:"role-area",children:this.getAcls().map((function(t,s){return Object(ts.jsxs)("div",{className:"acl-box",title:(t.isUser?"user ":"group ")+t.acl,children:[Object(ts.jsxs)("span",{className:"acl-name",onClick:function(){return e.removeAcl(t)},children:[Object(ts.jsx)("span",{className:"user-group-image-box",children:Object(ts.jsx)("img",{className:"user-group-image",src:t.isUser?"../images/user.svg":"../images/group.svg",alt:"user"})}),Object(ts.jsx)("span",{children:t.acl})]}),Object(ts.jsx)("span",{className:e.getAclClassName(t,"R"),title:e.getTitle(t,"R"),onClick:function(s){return e.invertAccess(s,t,"R")},children:e.getAccess(t,"R")}),Object(ts.jsx)("span",{className:e.getAclClassName(t,"W"),title:e.getTitle(t,"W"),onClick:function(s){return e.invertAccess(s,t,"W")},children:e.getAccess(t,"W")}),Object(ts.jsx)("span",{className:e.getAclClassName(t,"D"),title:e.getTitle(t,"D"),onClick:function(s){return e.invertAccess(s,t,"D")},children:e.getAccess(t,"D")}),Object(ts.jsx)("span",{className:e.getAclClassName(t,"M"),title:e.getTitle(t,"M"),onClick:function(s){return e.invertAccess(s,t,"M")},children:e.getAccess(t,"M")})]},s)}))})]}),Object(ts.jsxs)("div",{className:"acl-setup-role-block-2",children:[Object(ts.jsxs)("div",{className:"role-label",children:["available",Object(ts.jsx)("span",{className:"available-filter-label",children:"filter "}),Object(ts.jsxs)("span",{className:"filter-text-box",children:[Object(ts.jsx)("input",{type:"text",className:"filter-text",value:this.state.availableFilter,onChange:function(t){e.setState({availableFilter:t.target.value})}}),Object(ts.jsx)("span",{className:"clear",title:"clear filter",onClick:function(){return e.setState({availableFilter:""})},children:"\xd7"})]})]}),Object(ts.jsx)("div",{className:"role-area",children:this.getAvailableGroupsOrUsers().map((function(t,s){return Object(ts.jsxs)("div",{className:"user-name",onClick:function(){return e.addAcl(t)},title:(t.isUser?"user ":"group ")+t.name,children:[Object(ts.jsx)("span",{className:"user-group-image-box",children:Object(ts.jsx)("img",{className:"user-group-image",src:t.isUser?"../images/user.svg":"../images/group.svg",alt:"user"})}),Object(ts.jsx)("span",{children:t.name})]},s)}))})]})]})}}]),s}(a.Component),ba=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={open:e.open,onSave:e.onSave,onUpdate:e.onUpdate,onError:e.onError,error_title:e.error_title,error_msg:e.error_msg,selectedTab:"general",schedule:"",organisation_id:e.organisation_id,kb_id:e.kb_id,crawler:e.crawler,has_error:!1},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState({selectedTab:e.open!==this.state.open?"general":this.state.selectedTab,open:e.open,title:e.title,onSave:e.onSave,onUpdate:e.onUpdate,onError:e.onError,error_title:e.error_title,error_msg:e.error_msg,organisation_id:e.organisation_id,kb_id:e.kb_id,crawler:e.crawler})}},{key:"setError",value:function(e,t){this.props.onError&&this.props.onError(e,t)}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null),this.setState({open:!1})}},{key:"isValidMetadata",value:function(e,t){var s={},a=0,n=0,r=0;N.defined(e)||(e=[]);var i,o=Object(b.a)(e);try{for(o.s();!(i=o.n()).done;){var c=i.value,l=c.field1;if(!l||0===l.length)return this.setError("invalid metadata field","metadata field missing metadata-field-name"),!1;var d=c.db1;if(t&&(!d||0===d.length))return this.setError("invalid database field",'database field missing for database-field-name "'+l+'"'),!1;if("two level category"===c.key){var u=c.db2;if(!u||0===u.length)return this.setError("invalid database field",'database field missing for database-field-name "'+l+'"'),!1}var p=c.display;if(null!==p&&0===p.length)return this.setError("invalid display-name",'database field missing display-name "'+l+'"'),!1;s[l]?s[l]+=1:s[l]=1,"true"===c.sort&&(a+=1,0===c.sort_asc.trim().length&&(n+=1),0===c.sort_desc.trim().length&&(n+=1),""!==c.sort_default.trim()&&(r+=1))}}catch(m){o.e(m)}finally{o.f()}for(var h in s){if(s.hasOwnProperty(h))if(s[h]>1)return this.setError("invalid metadata",'metadata name "'+h+'" is used more than once.'),!1}if(a>0){if(n>0)return this.setError("invalid metadata","sort-by fields cannot be empty"),!1;if(1!==r)return this.setError("invalid metadata","you must specify the default UI sort field"),!1}return!0}},{key:"validFQDN",value:function(e){if(e&&e.length>0){for(var t=0;t<e.length;t++){var s=e.charAt(t);if("."!==s&&!(s>="a"&&s<="z"||s>="A"&&s<="Z"||s>="0"&&s<="9"))return!1}return e.indexOf(".")>0&&e.indexOf(".")+1<e.length}return!1}},{key:"handleSave",value:function(){var e=this.state.crawler,t=e.allowAnonymous||e.acls&&e.acls.length>0,s={};e&&e.specificJson&&("string"===typeof e.specificJson||e.specificJson instanceof String)&&(s=JSON.parse(e.specificJson)),e.qaMatchStrength<0||e.qaMatchStrength>1?this.setError("invalid parameters","Q&A threshold must be between 0.0 and 1.0."):0===e.name.length?this.setError("invalid parameters","you must supply a crawler name."):"none"===e.crawlerType?this.setError("invalid parameters","you must select a crawler-type."):s?t?"file"!==e.crawlerType||s.username&&0!==s.username.length&&s.server&&0!==s.server.length&&this.validFQDN(s.fqdn)&&s.shareName&&0!==s.shareName.length?"web"!==e.crawlerType||s.baseUrlList&&0!==s.baseUrlList.length&&s.baseUrlList&&(s.baseUrlList.startsWith("http://")||s.baseUrlList.startsWith("https://"))?"database"!==e.crawlerType||s.jdbc&&0!==s.jdbc.length&&s.type&&0!==s.type.length&&s.type&&"none"!==s.type&&s.query&&0!==s.query.length&&s.pk&&0!==s.pk.length&&s.template&&0!==s.template.length&&s.text&&0!==s.text.length?"restfull"!==e.crawlerType||s.url&&0!==s.url.length&&s.pk&&0!==s.pk.length&&(!e.customRender||s.template&&0!==s.template.length&&s.text&&0!==s.text.length)&&(e.customRender||s.content_url&&0!==s.content_url.length)?"database"===e.crawlerType&&s.metadata_list&&s.metadata_list.length>0&&!this.isValidMetadata(s.metadata_list,!0)||("office365"!==e.crawlerType||s.tenantId&&0!==s.tenantId.length&&s.clientId&&0!==s.clientId.length&&s.redirectUrl&&0!==s.redirectUrl.length&&s.clientSecret&&0!==s.clientSecret.length?"dropbox"!==e.crawlerType||s.clientToken&&0!==s.clientToken.length?"gdrive"!==e.crawlerType||s.gdrive_clientId&&0!==s.gdrive_clientId.length&&s.gdrive_projectId&&0!==s.gdrive_projectId.length&&s.gdrive_clientSecret&&0!==s.gdrive_clientSecret.length&&s.gdrive_clientName&&0!==s.gdrive_clientName.length&&s.gdrive_clientPort&&0!==s.gdrive_clientPort.length?"nfs"===e.crawlerType&&0===s.nfs_local_folder.length?this.setError("invalid parameters","nfs: you must set a local folder."):"web"!==e.crawlerType&&"file"!==e.crawlerType&&"database"!==e.crawlerType&&"office365"!==e.crawlerType&&"dropbox"!==e.crawlerType&&"nfs"!==e.crawlerType&&"wordpress"!==e.crawlerType&&"gdrive"!==e.crawlerType&&"restfull"!==e.crawlerType?this.setError("invalid parameters","you must select a crawler-type first."):isNaN(e.filesPerSecond)?this.setError("invalid parameters","files-per-second must be a number"):this.isValidMetadata(s.metadata_list,!1)&&this.state.onSave&&(this.state.onSave(e),this.setState({selectedTab:"general"})):this.setError("invalid parameters","you must supply values for all fields, and select one user as a minimum."):this.setError("invalid parameters","you must supply a client-token, and select a user as a minimum."):this.setError("invalid parameters","you must supply tenant-id, client-id, client-secret, and redirect-url as a minimum.")):!e.customRender||s.template&&0!==s.template.length&&s.text&&0!==s.text.length?this.setError("invalid parameters","you must supply a primary-key, a url, and a content-url as a minimum."):this.setError("invalid parameters","you must supply a primary-key, a url, a text-template, and an HTML-template as a minimum."):this.setError("invalid parameters","you must supply a jdbc connection string, database-type, a query, a primary-key, a text-template, and a SQL-template as a minimum."):this.setError("invalid parameters","you must supply a base url of type http:// or https://"):this.setError("invalid parameters","file crawler: you must supply a name, username, server, valid FQDN and share path as a minimum."):this.setError("invalid parameters","This source does not have valid ACLs.\nThis source won't be usable.  Please add ACLs to this source."):this.setError("invalid parameters","crawler specific data not set")}},{key:"updateSchedule",value:function(e){if(null!==e){var t=this.state.crawler;t.schedule=e,this.setState({crawler:t}),this.state.onUpdate&&this.state.onUpdate(t)}}},{key:"update_general_data",value:function(e){var t=this.state.crawler;e.specificJson=t.specificJson,e.schedule=t.schedule,e.acls=t.acls,this.setState({crawler:e}),this.state.onUpdate&&this.state.onUpdate(e)}},{key:"update_acl_list",value:function(e){var t=this.state.crawler;t.acls=e,this.setState({crawler:t}),this.state.onUpdate&&this.state.onUpdate(t)}},{key:"update_specific_json",value:function(e){var t=this.state.crawler;t.specificJson=JSON.stringify(e),this.setState({crawler:t}),this.state.onUpdate&&this.state.onUpdate(t)}},{key:"render",value:function(){var e=this;if(this.state.has_error)return Object(ts.jsx)("h1",{children:"crawler-dialog.js: Something went wrong."});var t=this.props.theme,s=this.state.selectedTab,a=this.state.crawler,n=a.crawlerType,r=JSON.parse(a.specificJson?a.specificJson:"{}");return console.log(a),this.state.open?Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded crawler-page",children:[Object(ts.jsx)("div",{className:"modal-header",children:this.state.title}),Object(ts.jsx)("div",{className:"modal-body "+this.props.theme,children:Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("ul",{className:"nav nav-tabs",children:[Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("general"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"general"})},children:"general"})}),"file"===n&&Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("file crawler"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"file crawler"})},children:"file crawler"})}),"web"===n&&Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("web crawler"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"web crawler"})},children:"web crawler"})}),"database"===n&&Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("database crawler"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"database crawler"})},children:"database crawler"})}),"restfull"===n&&Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("RESTful crawler"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"RESTful crawler"})},children:"RESTful crawler"})}),"office365"===n&&Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("office365 crawler"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"office365 crawler"})},children:"office365 crawler"})}),"dropbox"===n&&Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("dropbox crawler"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"dropbox crawler"})},children:"dropbox crawler"})}),"gdrive"===n&&Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("google drive crawler"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"google drive crawler"})},children:"google drive crawler"})}),"wordpress"===n&&Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("wordpress crawler"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"wordpress crawler"})},children:"wordpress crawler"})}),"nfs"===n&&Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("nfs crawler"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"nfs crawler"})},children:"nfs crawler"})}),"wordpress"!==n&&Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("metadata"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"metadata"})},children:"metadata"})}),Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("acls"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"acls"})},children:"ACLs"})}),"wordpress"!==n&&Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("schedule"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"schedule"})},children:"schedule"})})]}),Object(ts.jsxs)("div",{className:"form-content",children:["general"===s&&Object(ts.jsx)(Xs,{theme:t,sourceId:a.sourceId,nodeId:a.nodeId,organisation_id:a.organisationId,kb_id:a.kbId,name:a.name,filesPerSecond:a.filesPerSecond,crawlerType:n,deleteFiles:a.deleteFiles,allowAnonymous:a.allowAnonymous,enablePreview:a.enablePreview,processingLevel:a.processingLevel,maxItems:a.maxItems,maxQNAItems:a.maxQNAItems,schedule:a.schedule,customRender:a.customRender,edgeDeviceId:a.edgeDeviceId,qaMatchStrength:a.qaMatchStrength,numResults:a.numResults,numFragments:a.numFragments,edge_device_list:this.props.edge_device_list,onError:function(t,s){return e.setError(t,s)},onSave:function(t){return e.update_general_data(t)}}),"file crawler"===s&&Object(ts.jsx)($s,{theme:t,username:r.username,password:r.password,server:r.server,domain:r.domain,fqdn:r.fqdn,shareName:r.shareName,sharePath:r.sharePath,specific_json:r,onError:function(t,s){return e.setError(t,s)},onSave:function(t){return e.update_specific_json(t)}}),"web crawler"===s&&Object(ts.jsx)(ea,{theme:t,baseUrlList:r.baseUrlList,webCss:r.webCss,webCssIgnore:r.webCssIgnore,validExtensions:r.validExtensions,validExtensionsIgnore:r.validExtensionsIgnore,articleIncludeWordsCsv:r.articleIncludeWordsCsv,articleExcludeWordsCsv:r.articleExcludeWordsCsv,specific_json:r,onError:function(t,s){return e.setError(t,s)},onSave:function(t){return e.update_specific_json(t)}}),"database crawler"===s&&Object(ts.jsx)(sa,{theme:t,username:r.username,password:r.password,jdbc:r.jdbc,type:r.type,query:r.query,pk:r.pk,metadata_list:r.metadata_list,template:r.template,text:r.text,content_url:r.content_url,specific_json:r,customRender:a.customRender,onError:function(t,s){return e.setError(t,s)},onSave:function(t){return e.update_specific_json(t)}}),"RESTful crawler"===s&&Object(ts.jsx)(ua,{theme:t,pk:r.pk,url:r.url,template:r.template,text:r.text,content_url:r.content_url,specific_json:r,customRender:a.customRender,onError:function(t,s){return e.setError(t,s)},onSave:function(t){return e.update_specific_json(t)}}),"metadata"===s&&("database"===n||"restfull"===n)&&Object(ts.jsx)(na,{theme:t,specificJson:r,onError:function(t,s){return e.setError(t,s)},onSave:function(t){return e.update_specific_json(t)}}),"office365 crawler"===s&&Object(ts.jsx)(ra,{theme:t,tenantId:r.tenantId,clientId:r.clientId,clientSecret:r.clientSecret,redirectUrl:r.redirectUrl,crawlOneDrive:r.crawlOneDrive,crawlAllOfOneDrive:r.crawlAllOfOneDrive,oneDriveUsersToCrawl:r.oneDriveUsersToCrawl,crawlSharePoint:r.crawlSharePoint,crawlRootSite:r.crawlRootSite,sharePointSitesToCrawl:r.sharePointSitesToCrawl,crawlExchange:r.crawlExchange,crawlAllOfExchange:r.crawlAllOfExchange,exchangeUsersToCrawl:r.exchangeUsersToCrawl,specific_json:r,onError:function(t,s){return e.setError(t,s)},onSave:function(t){return e.update_specific_json(t)}}),"dropbox crawler"===s&&Object(ts.jsx)(ia,{theme:t,clientToken:r.clientToken,folderList:r.folderList,specific_json:r,onError:function(t,s){return e.setError(t,s)},onSave:function(t){return e.update_specific_json(t)}}),"google drive crawler"===s&&Object(ts.jsx)(la,{theme:t,gdrive_projectId:r.gdrive_projectId,gdrive_clientId:r.gdrive_clientId,gdrive_clientSecret:r.gdrive_clientSecret,gdrive_clientName:r.gdrive_clientName,gdrive_clientPort:r.gdrive_clientPort,specific_json:r,onError:function(t,s){return e.setError(t,s)},onSave:function(t){return e.update_specific_json(t)}}),"nfs crawler"===s&&Object(ts.jsx)(da,{theme:t,nfs_local_folder:r.nfs_local_folder,specific_json:r,availableUserList:this.props.user_list,onError:function(t,s){return e.setError(t,s)},onSave:function(t){return e.update_specific_json(t)}}),"wordpress crawler"===s&&Object(ts.jsx)(ca,{theme:t,source_id:a.sourceId,organisation_id:this.props.organisation_id,kb_id:this.props.kb_id,specific_json:r,wpUploadArchive:function(t){return e.props.wpUploadArchive(t)},onError:function(t,s){return e.setError(t,s)},onSave:function(t){return e.update_specific_json(t)}}),"metadata"===s&&"restfull"!==n&&"database"!==n&&"wordpress"!==n&&Object(ts.jsx)(ha,{theme:t,specific_json:r,onError:function(t,s){return e.setError(t,s)},onSave:function(t){return e.update_specific_json(t)}}),"acls"===s&&Object(ts.jsxs)("div",{children:[Object(ts.jsx)("div",{className:"acl-text",children:"this list sets a default set of Access Control for this source"}),Object(ts.jsx)(ma,{organisation_id:this.props.organisation_id,acl_list:a.acls,onChange:function(t){return e.update_acl_list(t)},user_list:this.props.user_list,group_list:this.props.group_list})]}),"schedule"===s&&"wordpress"!==n&&Object(ts.jsx)("div",{className:"time-tab-content",children:Object(ts.jsx)(Ms,{time:a.schedule,onSave:function(t){return e.updateSchedule(t)}})})]})]})}),Object(ts.jsxs)("div",{className:"modal-footer",children:[Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleCancel()},children:"cancel"}),Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleSave()},children:"save"})]})]})})}):Object(ts.jsx)("div",{})}}]),s}(a.Component),ja=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;Object(j.a)(this,s),a=t.call(this,e);var n=e.crawler?JSON.stringify(e.crawler):"";return"{}"===n&&(n=""),a.state={has_error:!1,open:e.open,data:n,onSave:e.onSave,onError:e.onError},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){this.state.onSave&&this.state.onSave(this.state.data)}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.crawler?JSON.stringify(e.crawler):"";"{}"===t&&(t=""),this.setState({open:e.open,data:t,onSave:e.onSave,onError:e.onError})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"mind-edit.js: Something went wrong."}):this.state.open?Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded",children:[Object(ts.jsx)("div",{className:"modal-header",children:this.props.export_upload?"Import Crawler":"Export Crawler"}),Object(ts.jsx)("div",{className:"modal-body",children:Object(ts.jsxs)("div",{children:[Object(ts.jsx)("div",{children:"data"}),Object(ts.jsx)("div",{children:Object(ts.jsx)("textarea",{autoFocus:!0,style:{width:"100%"},onChange:function(t){return e.setState({data:t.target.value})},placeholder:"crawler data",spellCheck:!1,rows:10,value:this.state.data})})]})}),Object(ts.jsxs)("div",{className:"modal-footer",children:[this.props.export_upload&&Object(ts.jsxs)("div",{children:[Object(ts.jsx)("button",{className:"btn btn-primary btn-block",style:{marginRight:"8px"},onClick:function(){return e.handleCancel()},children:"Cancel"}),Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleSave()},children:"Import"})]}),!this.props.export_upload&&Object(ts.jsx)("div",{children:Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleCancel()},children:"Close"})})]})]})})}):Object(ts.jsx)("div",{})}}]),s}(a.Component),ga=(s(255),{id:"",sourceId:"0",crawlerType:"",name:"",deleteFiles:!0,allowAnonymous:!1,enablePreview:!0,schedule:"",filesPerSecond:"0",specificJson:'{"metadata_list":[{"key":"created date range","display":"created","field1":"created","db1":"","db2":"","sort":"true","sort_default":"desc","sort_asc":"oldest documents first","sort_desc":"newest documents first"},{"key":"last modified date ranges","display":"last modified","field1":"last-modified","db1":"","db2":"","sort":"true","sort_default":"","sort_asc":"least recently modified","sort_desc":"most recently modified"},{"key":"document type","display":"document type","field1":"document-type","db1":"","db2":"","sort":"","sort_default":"","sort_asc":"","sort_desc":""}]}',processingLevel:"SEARCH",nodeId:"0",maxItems:"0",maxQNAItems:"0",customRender:!1,acls:[]}),fa=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={page_size:5,page:0,open:!1,export_open:!1,export_upload:!1,title:"",selected_crawler:{},crawler_ask:null,message_callback:null,message:"",message_title:""},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"getCrawlers",value:function(){var e=[],t=this.state.page*this.state.page_size,s=t+this.state.page_size;for(var a in this.props.crawler_list)a>=t&&a<s&&e.push(this.props.crawler_list[a]);return e}},{key:"addNewCrawler",value:function(){this.setState({open:!0,selected_crawler:ga,title:"Create New Crawler"})}},{key:"onUpdate",value:function(e){this.setState({selected_crawler:e})}},{key:"editCrawler",value:function(e){e&&this.setState({open:!0,selected_crawler:Object(d.a)(Object(d.a)({},ga),e),title:"Edit Crawler"})}},{key:"deleteCrawlerAsk",value:function(e){var t=this;this.setState({crawler_ask:e}),this.props.openDialog("are you sure you want to remove the crawler named <b>"+e.name+"</b>?","Remove Crawler",(function(e){t.deleteCrawler(e)}))}},{key:"deleteCrawler",value:function(e){e&&this.state.crawler_ask&&this.state.crawler_ask.sourceId&&this.props.deleteCrawler(this.state.crawler_ask.sourceId),this.props.closeDialog&&this.props.closeDialog()}},{key:"saveCrawler",value:function(e){e&&(e.organisationId=this.props.selected_organisation_id,e.kbId=this.props.selected_knowledgebase_id,this.props.updateCrawler(e)),this.setState({open:!1})}},{key:"canDeleteDocuments",value:function(e){return"wordpress"!==e.crawlerType}},{key:"exportCrawler",value:function(e){this.setState({selected_crawler:e,export_upload:!1,export_open:!0})}},{key:"importCrawler",value:function(){this.setState({selected_crawler:{},export_upload:!0,export_open:!0})}},{key:"saveExport",value:function(e){if(e&&this.state.export_upload){var t=JSON.parse(e);delete t.sourceId,this.saveCrawler(t)}this.setState({export_open:!1,selected_crawler:{}})}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ts.jsxs)("div",{children:[Object(ts.jsx)(ba,{open:this.state.open,title:this.state.title,theme:t,organisation_id:this.props.selected_organisation_id,kb_id:this.props.selected_knowledgebase_id,user_list:this.props.user_list,onSave:function(t){return e.saveCrawler(t)},onUpdate:function(t){return e.onUpdate(t)},onError:function(t,s){return e.props.setError(t,s)},error_title:this.props.error_title,error_msg:this.props.error,wpUploadArchive:function(t){return e.props.wpUploadArchive(t)},group_list:this.props.group_list,crawler:this.state.selected_crawler,edge_device_list:this.props.edge_device_list}),Object(ts.jsx)(ja,{open:this.state.export_open,theme:t,upload:this.state.export_upload,crawler:this.state.selected_crawler,export_upload:this.state.export_upload,onSave:function(t){return e.saveExport(t)},onError:function(t,s){return e.props.setError(t,s)}}),Object(ts.jsx)(ks,{callback:function(t){return e.state.message_callback(t)},open:this.state.message.length>0,theme:this.props.theme,message:this.state.message,title:this.state.message_title}),this.props.selected_knowledgebase_id.length>0&&Object(ts.jsxs)("div",{className:"source-page",children:[Object(ts.jsxs)("table",{className:"table",children:[Object(ts.jsx)("thead",{children:Object(ts.jsxs)("tr",{className:"table-header",children:[Object(ts.jsx)("th",{className:"table-header",children:"name"}),Object(ts.jsx)("th",{className:"table-header",children:"type"}),Object(ts.jsx)("th",{className:"table-header",children:"status"}),Object(ts.jsx)("th",{className:"table-header",children:"crawled / indexed"}),Object(ts.jsx)("th",{className:"table-header",children:"actions"})]})}),Object(ts.jsxs)("tbody",{children:[this.getCrawlers().map((function(t){return Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"source-label",children:t.name})}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"source-label",children:t.crawlerType})}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"source-label",children:t.isCrawling?"busy":"idle"})}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"source-label",children:t.numCrawledDocuments+" / "+t.numIndexedDocuments})}),Object(ts.jsxs)("td",{children:[Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.editCrawler(t)},children:Object(ts.jsx)("img",{src:"../images/edit.svg",className:"image-size",title:"edit crawler",alt:"edit"})}),Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.deleteCrawlerAsk(t)},children:Object(ts.jsx)("img",{src:"../images/delete.svg",className:"image-size",title:"remove crawler",alt:"remove"})}),Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.exportCrawler(t)},children:Object(ts.jsx)("img",{src:"../images/download.svg",className:"image-size",title:"get crawler JSON for export",alt:"export"})})]})]},t.sourceId)})),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{}),Object(ts.jsxs)("td",{children:[this.props.selected_organisation_id.length>0&&Object(ts.jsx)("div",{className:"image-button",onClick:function(){return e.addNewCrawler()},children:Object(ts.jsx)("img",{className:"image-size",src:"../images/add.svg",title:"add new crawler",alt:"add new crawler"})}),this.props.selected_organisation_id.length>0&&Object(ts.jsx)("div",{className:"image-button",onClick:function(){return e.importCrawler()},children:Object(ts.jsx)("img",{className:"image-size",src:"../images/upload.svg",title:"upload crawler JSON",alt:"import"})})]})]})]})]}),Object(ts.jsx)(Cs,{rowsPerPageOptions:[5,10,25],theme:t,component:"div",count:this.props.crawler_list.length,rowsPerPage:this.state.page_size,page:this.state.page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t){return e.changePage(t)},onChangeRowsPerPage:function(t){return e.changePageSize(t)}})]})]})}}]),s}(a.Component),va=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,selected_organisation_id:e.appReducer.selected_organisation_id,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id,user_list:e.appReducer.user_list,user_filter:e.appReducer.user_filter,crawler_list:e.appReducer.crawler_list,edge_device_list:e.appReducer.edge_device_list,group_list:e.appReducer.group_list}}),(function(e){return Object(u.b)(es,e)}))(fa),_a=(s(256),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={document:null,crawler_map:{}},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"componentDidMount",value:function(){var e,t={},s=Object(b.a)(this.props.crawler_list);try{for(s.s();!(e=s.n()).done;){var a=e.value;t[a.sourceId]=a.crawlerType}}catch(n){s.e(n)}finally{s.f()}this.setState({crawler_map:t})}},{key:"deleteDocumentAsk",value:function(e){var t=this;e&&(this.props.openDialog('are you sure you want to remove "'+e.url+'" ?',"Remove Document",(function(e){t.deleteDocument(e)})),this.setState({document:e}))}},{key:"deleteDocument",value:function(e){e&&w.defined(this.state.document)&&(console.log(this.state.document),this.props.deleteDocument(this.state.document.url,this.state.document.sourceId)),this.props.closeDialog&&this.props.closeDialog()}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getDocuments()}},{key:"documentUploaded",value:function(){var e=this;this.setState({message_title:"done",message:"document uploaded",message_callback:function(){e.setState({message:""})}})}},{key:"getDocuments",value:function(){return this.props.document_list}},{key:"getActive",value:function(e,t){if("crawled"===t){if(e.crawled>0)return 1}else if("converted"===t){if(e.converted>0)return 1;if(e.converted<0)return 2}else if("parsed"===t){if(e.converted>0&&e.converted<=e.parsed)return 1;if(e.parsed<0)return 2}else if("indexed"===t){if(e.converted>0&&e.parsed>0&&e.parsed<=e.indexed)return 1;if(e.indexed<0)return 2}else if("previewed"===t){if(e.previewed>0)return 1;if(e.previewed<0)return 2}return 0}},{key:"getStatus",value:function(e,t){var s=this.getActive(e,t);return 1===s?"../images/dot-green.svg":0===s?"../images/dot-orange.svg":"../images/dot-grey.svg"}},{key:"getStatusText",value:function(e,t,s){var a=this.getActive(e,t);return 1===a?"document "+t:0===a?"document not "+t:s+" disabled for this document-source"}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"canDeleteDocument",value:function(e){return"wordpress"!==this.state.crawler_map[e.sourceId]}},{key:"render",value:function(){var e=this,t=this.props.theme,a=vn.hasRole(this.props.user,["admin"]);return Object(ts.jsxs)("div",{className:"document-display",children:[this.isVisible()&&Object(ts.jsxs)("div",{className:"filter-find-box",children:[Object(ts.jsx)("span",{className:"filter-label",children:"filter"}),Object(ts.jsx)("span",{className:"filter-find-text",children:Object(ts.jsx)("input",{type:"text",value:this.props.document_filter,autoFocus:!0,className:t,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setDocumentFilter(t.target.value)}})}),Object(ts.jsx)("span",{className:"filter-find-image",children:Object(ts.jsx)("img",{className:"image-size",onClick:function(){return e.props.getDocuments()},src:"../images/dark-magnifying-glass.svg",title:"filter",alt:"filter"})})]}),this.isVisible()&&Object(ts.jsxs)("div",{className:"table-style",children:[Object(ts.jsxs)("table",{className:"table",children:[Object(ts.jsx)("thead",{children:Object(ts.jsxs)("tr",{className:"table-header",children:[Object(ts.jsx)("th",{className:"table-header",children:"url"}),Object(ts.jsx)("th",{className:"table-header",children:"source"}),Object(ts.jsx)("th",{className:"table-header",children:"last modified"}),Object(ts.jsx)("th",{className:"table-header",children:"status"}),a&&Object(ts.jsx)("th",{className:"table-header",children:"actions"})]})}),Object(ts.jsx)("tbody",{children:this.getDocuments().map((function(t){return Object(ts.jsxs)("tr",{children:[Object(ts.jsxs)("td",{className:"urlLabel",children:[s.isWeb(t.url)&&Object(ts.jsx)("div",{className:"urlLabel",children:Object(ts.jsx)("a",{href:t.url,title:t.url,rel:"noopener noreferrer",target:"_blank",children:s.adjustUrl(t.url)})}),!s.isWeb(t.url)&&Object(ts.jsx)("div",{className:"urlLabel",children:s.adjustUrl(t.url)})]}),Object(ts.jsx)("td",{className:"sourceLabel",children:t.origin}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"timeLabel",children:w.unixTimeConvert(t.lastModified)})}),Object(ts.jsx)("td",{children:Object(ts.jsxs)("div",{className:"label",children:[Object(ts.jsx)("img",{src:e.getStatus(t,"crawled"),className:"statusImage",alt:"crawler",title:e.getStatusText(t,"crawled","crawling")}),Object(ts.jsx)("img",{src:e.getStatus(t,"converted"),className:"statusImage",alt:"converted",title:e.getStatusText(t,"converted","converting")}),Object(ts.jsx)("img",{src:e.getStatus(t,"parsed"),className:"statusImage",alt:"parsed",title:e.getStatusText(t,"parsed","parsing")}),Object(ts.jsx)("img",{src:e.getStatus(t,"indexed"),className:"statusImage",alt:"indexed",title:e.getStatusText(t,"indexed","indexing")}),Object(ts.jsx)("img",{src:e.getStatus(t,"previewed"),className:"statusImage",alt:"previewed",title:e.getStatusText(t,"previewed","preview generation")})]})}),a&&Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"linkButton",onClick:function(){return e.deleteDocumentAsk(t)},children:Object(ts.jsx)("img",{src:"../images/delete.svg",className:"image-size",title:"remove document",alt:"remove"})})})]},t.url)}))})]}),Object(ts.jsx)(Cs,{theme:t,rowsPerPageOptions:[5,10,25],component:"div",count:this.props.num_documents,rowsPerPage:this.props.document_page_size,page:this.props.document_page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t){return e.props.setDocumentPage(t)},onChangeRowsPerPage:function(t){return e.props.setDocumentPageSize(t)}})]})]})}}],[{key:"isWeb",value:function(e){return e.toLowerCase().startsWith("http://")||e.toLowerCase().startsWith("https://")}},{key:"adjustUrl",value:function(e){if(e&&e.length>50){var t=Math.floor(25);return e.substring(0,t)+" ... "+e.substring(e.length-t)}return e}}]),s}(n.a.Component)),ya=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,user:e.appReducer.user,document_list:e.appReducer.document_list,document_filter:e.appReducer.document_filter,document_page:e.appReducer.document_page,document_page_size:e.appReducer.document_page_size,document_nav_list:e.appReducer.document_nav_list,num_documents:e.appReducer.num_documents,crawler_list:e.appReducer.crawler_list,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(es,e)}))(_a),xa=(s(257),[".jpg",".jpeg",".png",".gif",".svg"]),Oa=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,open:e.open,onSave:e.onSave,onError:e.onError,memory:e.memory,information:e.memory&&e.memory.information?e.memory.information:"",questionList:s.getQuestions(e.memory),links:a.linksToText(e.memory)},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open,onSave:e.onSave,onError:e.onError,memory:e.memory,information:e.memory&&e.memory.information?e.memory.information:"",questionList:s.getQuestions(e.memory),links:this.linksToText(e.memory)})}},{key:"handleSave",value:function(){if(this.state.onSave){var e=this.state.memory;e.information=this.state.information,e.questionList=[];var t,s=Object(b.a)(this.state.questionList);try{for(s.s();!(t=s.n()).done;){var a=t.value;a.trim().length>0&&e.questionList.push(a.trim())}}catch(n){s.e(n)}finally{s.f()}e.urlList=this.getLinks(this.state.links),e.imageList=this.getImageLinks(this.state.links),this.state.onSave(e)}}},{key:"getLinks",value:function(e){var t,s=[],a=Object(b.a)(e.split("\n"));try{for(a.s();!(t=a.n()).done;){var n=t.value.trim();n.length>0&&!this.isImage(n)&&s.push(n.trim())}}catch(r){a.e(r)}finally{a.f()}return s}},{key:"linksToText",value:function(e){var t="";if(e){if(e.urlList){var s,a=Object(b.a)(e.urlList);try{for(a.s();!(s=a.n()).done;){var n=s.value.trim();n.length>0&&(t+=n.trim()+"\n")}}catch(c){a.e(c)}finally{a.f()}}if(e.imageList){var r,i=Object(b.a)(e.imageList);try{for(i.s();!(r=i.n()).done;){var o=r.value.trim();o.length>0&&(t+=o.trim()+"\n")}}catch(c){i.e(c)}finally{i.f()}}}return t}},{key:"getImageLinks",value:function(e){var t,s=[],a=Object(b.a)(e.split("\n"));try{for(a.s();!(t=a.n()).done;){var n=t.value.trim();n.length>0&&this.isImage(n)&&s.push(n.trim())}}catch(r){a.e(r)}finally{a.f()}return s}},{key:"isImage",value:function(e){if(e){var t=e.toLowerCase(),s=t.lastIndexOf(".");if(s>0){var a=t.substring(s);return xa.includes(a)}}return!1}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"setQuestion",value:function(e,t){var s=this.state.questionList;s[e]=t,this.setState({questionList:s})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"mind-edit.js: Something went wrong."}):this.state.open?Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded",children:[Object(ts.jsx)("div",{className:"modal-header",children:"Edit Memory"}),Object(ts.jsxs)("div",{className:"modal-body",children:[this.state.questionList.map((function(t,s){return Object(ts.jsxs)("div",{className:"edit-row",children:[Object(ts.jsx)("span",{className:"label-area",children:"question "+(s+1)}),Object(ts.jsx)("span",{className:"input-area",children:Object(ts.jsx)("input",{type:"text",className:"form-control",autoFocus:0===s,onChange:function(t){return e.setQuestion(s,t.target.value)},placeholder:"question "+(s+1),value:t})})]},s)})),Object(ts.jsxs)("div",{className:"edit-row",children:[Object(ts.jsx)("span",{className:"label-area",children:"answer text"}),Object(ts.jsx)("span",{className:"input-area",children:Object(ts.jsx)("textarea",{className:"input-area",onChange:function(t){return e.setState({information:t.target.value})},placeholder:"answer, or function (e.g. 'exec show_help person1 person2 date1')",rows:5,value:this.state.information})})]}),Object(ts.jsxs)("div",{className:"edit-row",children:[Object(ts.jsx)("span",{className:"label-area",children:"links (one per line)"}),Object(ts.jsx)("span",{className:"input-area",children:Object(ts.jsx)("textarea",{className:"input-area",onChange:function(t){return e.setState({links:t.target.value})},placeholder:"links",rows:5,value:this.state.links})})]})]}),Object(ts.jsxs)("div",{className:"modal-footer",children:[Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleCancel()},children:"Cancel"}),Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleSave()},children:"Save"})]})]})})}):Object(ts.jsx)("div",{})}}],[{key:"getLinks",value:function(e){var t="";if(e&&e.urlList){var s,a=Object(b.a)(e.urlList);try{for(a.s();!(s=a.n()).done;){var n=s.value;t.length>0&&(t+="\n"),t+=n}}catch(c){a.e(c)}finally{a.f()}}if(e&&e.imageList){var r,i=Object(b.a)(e.imageList);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.length>0&&(t+="\n"),t+=o}}catch(c){i.e(c)}finally{i.f()}}return t}},{key:"getQuestions",value:function(e){var t=[];if(e&&e.questionList){var s,a=Object(b.a)(e.questionList);try{for(a.s();!(s=a.n()).done;){var n=s.value;t.push(n.trim())}}catch(r){a.e(r)}finally{a.f()}}for(;t.length<5;)t.push("");return t}}]),s}(a.Component),ka=(s(258),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={filename:"",file_type:"",filter:"",binary_data:null},a}return Object(g.a)(s,[{key:"_handleImageChange",value:function(e){e.preventDefault();var t=this,s=new FileReader,a=e.target.files[0],n=a.name,r=a.type;s.onloadend=function(){t.setState({filename:n,file_type:r,binary_data:s.result})},s.readAsDataURL(a)}},{key:"upload",value:function(){if(this.state.binary_data){var e={base64Text:this.state.binary_data,fileType:this.state.file_type,kbId:this.props.selected_knowledgebase_id,organisationId:this.props.selected_organisation_id};this.props.uploadProgram(e),this.props.onUploadDone&&this.props.onUploadDone()}}},{key:"render",value:function(){var e=this;return Object(ts.jsx)("div",{className:"spreadsheet-upload",children:Object(ts.jsx)("form",{onSubmit:function(t){return e._handleSubmit(t)},className:"upload-container",children:Object(ts.jsxs)("div",{children:[Object(ts.jsx)("input",{className:"upload-control-position",type:"file",onChange:function(t){return e._handleImageChange(t)}}),Object(ts.jsx)("div",{className:"upload-button",children:Object(ts.jsxs)("div",{className:"upload-input",children:[Object(ts.jsx)("button",{className:"btn btn-primary btn-block",disabled:null===this.state.binary_data||this.props.uploading,onClick:this.upload.bind(this),children:"upload"}),this.props.uploading&&Object(ts.jsx)("div",{className:"upload-wheel",children:Object(ts.jsx)("img",{src:"../images/busy2.gif",alt:"busy",className:"busy-image"})})]})})]})})})}}]),s}(a.Component)),wa=Object(o.b)((function(e){return{uploading:e.appReducer.uploading,selected_organisation_id:e.appReducer.selected_organisation_id,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(es,e)}))(ka),Na=(s(82),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={mind_item:null,mind_edit:!1},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"componentDidMount",value:function(){}},{key:"deleteMemoryAsk",value:function(e){var t=this;e&&(this.props.openDialog("are you sure you want to remove id "+e.id+"?<br/><br/>("+e.questionList[0]+")","Remove Memory",(function(e){t.deleteMemory(e)})),this.setState({mind_item:e}))}},{key:"deleteMemory",value:function(e){e&&w.defined(this.state.mind_item)&&this.props.deleteMemory(this.state.mind_item.id),this.props.closeDialog&&this.props.closeDialog()}},{key:"deleteAllMemoriesAsk",value:function(){var e=this;this.props.openDialog("are you sure you want to remove all memories of this knowledge-base?","Remove All Memories",(function(t){e.deleteAllMemories(t)}))}},{key:"deleteAllMemories",value:function(e){e&&this.props.deleteAllMemories(),this.props.closeDialog&&this.props.closeDialog()}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getMindItems()}},{key:"editMemory",value:function(e){this.setState({mind_edit:!0,mind_item:e})}},{key:"newMemory",value:function(){this.setState({mind_edit:!0,mind_item:{id:"",questionList:[],urlList:[],information:""}})}},{key:"programUploaded",value:function(){var e=this;this.props.openDialog("SimSage is now processing these new memories.  Check 'the mind' periodically for updates.","Uploading Memories",(function(){return e.programUploadedClose()}))}},{key:"programUploadedClose",value:function(){this.props.closeDialog()}},{key:"mindDump",value:function(){k.download_mind_dump(this.props.selected_organisation_id,this.props.selected_knowledgebase_id)}},{key:"save",value:function(e){e?e.information.length>0&&e.questionList.length>0?(this.props.saveMemory(e),this.setState({mind_edit:!1})):this.props.setError("Error Saving Memory","memory must have questions and an answer"):this.setState({mind_edit:!1})}},{key:"getMemoryList",value:function(){return this.props.mind_item_list?this.props.mind_item_list:[]}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ts.jsxs)("div",{className:"mind-page",children:[Object(ts.jsx)(Oa,{open:this.state.mind_edit,theme:t,memory:this.state.mind_item,onSave:function(t){return e.save(t)},onError:function(t){return e.props.setError("Error",t)}}),this.isVisible()&&Object(ts.jsxs)("div",{className:"filter-find-box",children:[Object(ts.jsx)("span",{className:"filter-label",children:"find items in the mind"}),Object(ts.jsx)("span",{className:"filter-find-text",children:Object(ts.jsx)("input",{type:"text",value:this.props.mind_item_filter,autoFocus:!0,className:"form-control",onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setMindItemFilter(t.target.value)}})}),Object(ts.jsx)("span",{className:"filter-find-image",children:Object(ts.jsx)("img",{className:"image-size",onClick:function(){return e.props.getMindItems()},src:"../images/dark-magnifying-glass.svg",title:"search",alt:"search"})})]}),Object(ts.jsx)("br",{clear:"both"}),this.isVisible()&&Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("table",{className:"table",children:[Object(ts.jsx)("thead",{children:Object(ts.jsxs)("tr",{className:"table-header",children:[Object(ts.jsx)("th",{className:"table-header",children:"id"}),Object(ts.jsx)("th",{className:"table-header",children:"memory"}),Object(ts.jsx)("th",{className:"table-header",children:"actions"})]})}),Object(ts.jsxs)("tbody",{children:[this.getMemoryList().map((function(t){return Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{children:t.id})}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"mind-text-column",title:s.getDisplayText(t),children:s.getDisplayText(t)})}),Object(ts.jsxs)("td",{children:[Object(ts.jsx)("span",{onClick:function(){return e.editMemory(t)},children:Object(ts.jsx)("img",{src:"../images/edit.svg",className:"image-size",title:"edit memory",alt:"edit"})}),Object(ts.jsx)("span",{onClick:function(){return e.deleteMemoryAsk(t)},children:Object(ts.jsx)("img",{src:"../images/delete.svg",className:"image-size",title:"remove memory",alt:"remove"})})]})]},t.id)})),Object(ts.jsx)("tr",{children:Object(ts.jsxs)("td",{colSpan:3,className:"bottom-td-margin",children:[this.props.selected_knowledgebase_id.length>0&&Object(ts.jsx)("div",{className:"uploader",children:Object(ts.jsx)(wa,{kbId:this.props.selected_knowledgebase_id,organisationId:this.props.selected_organisation_id,onUploadDone:function(){return e.programUploaded()},onError:function(t){return e.props.setError("Error",t)}})}),this.props.selected_knowledgebase_id.length>0&&Object(ts.jsx)("div",{className:"export",children:Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.mindDump()},children:"Export"})}),this.props.selected_knowledgebase_id.length>0&&Object(ts.jsx)("div",{className:"image-button",onClick:function(){return e.newMemory()},children:Object(ts.jsx)("img",{className:"image-size",src:"../images/add.svg",title:"new mind item",alt:"new mind item"})}),this.props.selected_knowledgebase_id.length>0&&Object(ts.jsx)("div",{className:"image-button",onClick:function(){return e.deleteAllMemoriesAsk()},children:Object(ts.jsx)("img",{className:"image-size",src:"../images/delete.svg",title:"remove all mind items of this knowledgebase",alt:"remove all mind items"})})]})})]})]}),Object(ts.jsx)(Cs,{theme:t,rowsPerPageOptions:[5,10,25],component:"div",count:this.props.num_mind_items,rowsPerPage:this.props.mind_item_page_size,page:this.props.mind_item_page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t){return e.props.setMindItemPage(t)},onChangeRowsPerPage:function(t){return e.props.setMindItemPageSize(t)}})]})]})}}],[{key:"getDisplayText",value:function(e){var t,s="",a=Object(b.a)(e.questionList);try{for(a.s();!(t=a.n()).done;){var n=t.value;s.length>0&&(s+=" | "),s+=n}}catch(r){a.e(r)}finally{a.f()}return s+=" => "+e.information}}]),s}(n.a.Component)),Sa=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,mind_item_list:e.appReducer.mind_item_list,mind_item_filter:e.appReducer.mind_item_filter,mind_item_page:e.appReducer.mind_item_page,mind_item_page_size:e.appReducer.mind_item_page_size,num_mind_items:e.appReducer.num_mind_items,bot_query:e.appReducer.bot_query,mind_result_list:e.appReducer.mind_result_list,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(es,e)}))(Na),Ca=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,item:e.item,openDocument:e.openDocument},a}return Object(g.a)(s,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e&&this.setState({item:e.item,openDocument:e.openDocument})}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"toText",value:function(e){return e.text.replace("<br />","\n")}},{key:"render",value:function(){if(this.state.has_error)return Object(ts.jsx)("h1",{children:"bot-single-search-result: Something went wrong."});var e=this.state.item;return Object(ts.jsxs)("div",{className:"mind-search-results",children:[Object(ts.jsx)("span",{className:"mind-score",children:e.score.toFixed(2)}),Object(ts.jsx)("span",{className:"mind-id",children:"id:"+e.url}),Object(ts.jsx)("span",{className:"mind-result-text",children:this.toText(e)}),Object(ts.jsx)("div",{className:"image-list-container",children:e.imageList&&e.imageList.map((function(e){return Object(ts.jsx)("div",{className:"image-holder",children:Object(ts.jsx)("img",{alt:"search result",src:e,className:"preview-image-size"})},e)}))}),Object(ts.jsx)("br",{clear:"both"}),Object(ts.jsx)("div",{className:"url-list-container",children:e.urlList&&e.urlList.map((function(e){return Object(ts.jsx)("div",{className:"url-style",children:Object(ts.jsx)("a",{href:e,rel:"noopener noreferrer",target:"_blank",children:e})},e)}))})]})}}],[{key:"highlight",value:function(e){return e&&e.replace&&(e=(e=(e=(e=(e=(e=(e=e.replace(/{hl1:}/g,"<span class='hl1'>")).replace(/{hl2:}/g,"<span class='hl2'>")).replace(/{hl3:}/g,"<span class='hl3'>")).replace(/{:hl1}/g,"</span>")).replace(/{:hl2}/g,"</span>")).replace(/{:hl3}/g,"</span>")).replace(/\n/g,"<br />")),e}}]),s}(n.a.Component),Ra=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={onError:e.onError,setBotQueryString:e.setBotQueryString,botQueryString:e.botQueryString,queryResultList:e.queryResultList,hasSearched:!1},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.props.onError(e,t),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({botQueryString:e.botQueryString,queryResultList:e.queryResultList,setBotQueryString:e.setBotQueryString,onError:e.onError})}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.doClickSearch()}},{key:"doClickSearch",value:function(){this.props.mindQuery&&(this.setState({hasSearched:!0}),this.props.mindQuery())}},{key:"getResultList",value:function(){return JSON.parse(JSON.stringify(this.props.queryResultList))}},{key:"openDocument",value:function(e){var t=k.getSession(),s=k.toUrl("/document/"+encodeURIComponent(t)+"/"+encodeURIComponent(e));window.open(s,"_blank")}},{key:"render",value:function(){var e=this;return Object(ts.jsxs)("div",{className:"mind-page",children:[Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsx)("div",{className:"busy-body",children:Object(ts.jsx)("img",{alt:"busy",src:"../images/busy2.gif",style:{display:this.state.busy?"":"none",width:"32px"}})})}),Object(ts.jsx)("div",{className:"form-group",children:Object(ts.jsxs)("div",{className:"full-column",children:[Object(ts.jsx)("span",{className:"left-1",children:Object(ts.jsx)("input",{type:"text",className:"form-control text-width",onChange:function(t){return e.props.setBotQueryString(t.target.value)},onKeyPress:function(t){return e.handleSearchTextKeydown(t)}})}),Object(ts.jsx)("span",{className:"left",children:Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.doClickSearch()},children:"Ask"})})]})}),Object(ts.jsx)("br",{clear:"both"}),this.state.queryResultList&&this.state.queryResultList.length>0&&Object(ts.jsx)("div",{children:Object(ts.jsx)("div",{className:"search-results-box",children:this.getResultList().map((function(t){return Object(ts.jsx)(Ca,{item:t,openDocument:function(t){return e.openDocument(t)}},t.key)}))})}),this.state.queryResultList&&0===this.state.queryResultList.length&&this.state.hasSearched&&!this.state.busy&&Object(ts.jsx)("div",{className:"no-results",children:"no results"})]})}}]),s}(a.Component),Ia=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={mind_item:null,mind_edit:!1},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"componentDidMount",value:function(){}},{key:"deleteMemoryAsk",value:function(e){var t=this;e&&(this.props.openDialog("are you sure you want to remove id "+e.id+"?<br/><br/>("+e.expression+")","Remove Mind Entry",(function(e){t.deleteMemory(e)})),this.setState({mind_item:e}))}},{key:"deleteMemory",value:function(e){e&&w.defined(this.state.mind_item)&&this.props.deleteMemory(this.state.mind_item.id),this.props.closeDialog&&this.props.closeDialog()}},{key:"deleteAllMemoriesAsk",value:function(){var e=this;this.props.openDialog("are you sure you want to remove all mind-items of this knowledge-base?","Remove All Mind Items",(function(t){e.deleteAllMemories(t)}))}},{key:"deleteAllMemories",value:function(e){e&&this.props.deleteAllMemories(),this.props.closeDialog&&this.props.closeDialog()}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getMindItems()}},{key:"editMindItem",value:function(e){this.setState({mind_edit:!0,mind_item:e})}},{key:"newMindItem",value:function(){this.setState({mind_edit:!0,mind_item:{id:w.createGuid(),preContext:"",postContext:"",expression:"",actionList:[],metadata:""}})}},{key:"mindDump",value:function(){k.download_mind_dump(this.props.selected_organisation_id,this.props.selected_knowledgebase_id)}},{key:"save",value:function(e){e?e.expression.length>0&&e.actionList.length>0?(this.props.saveMindItem(e),this.setState({mind_edit:!1})):this.props.setError("Error Saving Mind Entry","mind-item must have an expression and actions"):this.setState({mind_edit:!1})}},{key:"render",value:function(){var e=this;return Object(ts.jsx)("div",{children:this.props.selected_knowledgebase_id&&Object(ts.jsx)(Ra,{onError:function(t,s){return e.props.setError(t,s)},mindQuery:this.props.mindQuery,botQueryString:this.props.bot_query,setBotQueryString:this.props.setBotQueryString,queryResultList:this.props.mind_result_list})})}}],[{key:"toAnswer",value:function(e){var t="";if(e&&e.actionList){var s,a=Object(b.a)(e.actionList);try{for(a.s();!(s=a.n()).done;){var n=s.value;if(n&&"browser.write"===n.action&&n.parameters){var r,i=Object(b.a)(n.parameters);try{for(i.s();!(r=i.n()).done;){t+=r.value.replace(/<br \/>/g,"\n")}}catch(o){i.e(o)}finally{i.f()}}}}catch(o){a.e(o)}finally{a.f()}}return t}}]),s}(n.a.Component),Ea=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,bot_query:e.appReducer.bot_query,mind_result_list:e.appReducer.mind_result_list,selected_organisation_id:e.appReducer.selected_organisation_id,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(es,e)}))(Ia),Da=(s(259),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,open:e.open,synonym:e.synonym,onSave:e.onSave,onError:e.onError,words:e.synonym&&e.synonym.words?e.synonym.words:""},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){if(this.state.onSave){var e=this.state.synonym;e.words=this.state.words,this.state.onSave(e)}}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open,synonym:e.synonym,onSave:e.onSave,onError:e.onError,words:e.synonym&&e.synonym.words?e.synonym.words:""})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"synonym-edit.js: Something went wrong."}):this.state.open?Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded synonym-page",children:[Object(ts.jsx)("div",{className:"modal-header",children:"Edit Synonym"}),Object(ts.jsx)("div",{className:"modal-body",children:Object(ts.jsx)("div",{children:Object(ts.jsxs)("div",{className:"edit-row",children:[Object(ts.jsx)("span",{className:"label-area",children:"synonyms"}),Object(ts.jsx)("span",{className:"input-area",children:Object(ts.jsx)("textarea",{className:"input-area",autoFocus:!0,onChange:function(t){return e.setState({words:t.target.value})},placeholder:"words",spellCheck:!1,rows:5,value:this.state.words})})]})})}),Object(ts.jsxs)("div",{className:"modal-footer",children:[Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleCancel()},children:"Cancel"}),Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleSave()},children:"Save"})]})]})})}):Object(ts.jsx)("div",{})}}]),s}(a.Component)),Ta=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={synonym:{},synonym_edit:!1,openDialog:e.openDialog,closeDialog:e.closeDialog,page_size:5,page:0},a}return Object(g.a)(s,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog,closeDialog:e.closeDialog})}},{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"getSynonymList",value:function(){return this.props.synonym_list}},{key:"deleteSynonymAsk",value:function(e){var t=this;e&&(this.props.openDialog("are you sure you want to remove id "+e.id+"?<br/><br/>("+e.words+")","Remove Synonym",(function(e){t.deleteSynonym(e)})),this.setState({synonym:e}))}},{key:"deleteSynonym",value:function(e){e&&this.state.synonym&&this.props.deleteSynonym(this.state.synonym.id),this.props.closeDialog&&this.props.closeDialog(),this.setState({synonym_edit:!1,synonym:{}})}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getSynonyms()}},{key:"editSynonym",value:function(e){this.setState({synonym_edit:!0,synonym:e})}},{key:"newSynonym",value:function(){this.setState({synonym_edit:!0,synonym:{id:"",words:""}})}},{key:"save",value:function(e){e?e.words.length>0&&e.words.indexOf(",")>0?(this.props.saveSynonym(e),this.setState({synonym_edit:!1,synonym:{}})):this.props.setError("Error Saving Synonym","synonym cannot be empty and need more than one item"):this.setState({synonym_edit:!1,synonym:{}})}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ts.jsxs)("div",{children:[Object(ts.jsx)(Da,{open:this.state.synonym_edit,theme:t,synonym:this.state.synonym,onSave:function(t){return e.save(t)},onError:function(t){return e.props.setError("Error",t)}}),this.isVisible()&&Object(ts.jsxs)("div",{className:"filter-find-box",children:[Object(ts.jsx)("span",{className:"filter-label",children:"find synonyms"}),Object(ts.jsx)("span",{className:"filter-find-text",children:Object(ts.jsx)("input",{type:"text",value:this.props.synonym_filter,autoFocus:!0,className:t,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setSynonymFilter(t.target.value)}})}),Object(ts.jsx)("span",{className:"filter-find-image",children:Object(ts.jsx)("img",{className:"image-size",onClick:function(){return e.props.getSemantics()},src:"../images/dark-magnifying-glass.svg",title:"search",alt:"search"})})]}),Object(ts.jsx)("br",{clear:"both"}),this.isVisible()&&Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("table",{className:"table",children:[Object(ts.jsx)("thead",{children:Object(ts.jsxs)("tr",{className:"table-header",children:[Object(ts.jsx)("th",{className:"table-header",children:"id"}),Object(ts.jsx)("th",{className:"table-header",children:"synonyms"}),Object(ts.jsx)("th",{className:"table-header",children:"actions"})]})}),Object(ts.jsxs)("tbody",{children:[this.getSynonymList().map((function(t){return Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{children:t.id})}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{children:t.words})}),Object(ts.jsxs)("td",{children:[Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.editSynonym(t)},children:Object(ts.jsx)("img",{src:"../images/edit.svg",className:"image-size",title:"edit synonym",alt:"edit"})}),Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.deleteSynonymAsk(t)},children:Object(ts.jsx)("img",{src:"../images/delete.svg",className:"image-size",title:"remove synonym",alt:"remove"})})]})]},t.id)})),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{children:this.isVisible()&&Object(ts.jsx)("div",{onClick:function(){return e.newSynonym()},children:Object(ts.jsx)("img",{className:"image-size",src:"../images/add.svg",title:"new synonym",alt:"new synonym"})})})]})]})]}),Object(ts.jsx)(Cs,{theme:t,rowsPerPageOptions:[5,10,25],component:"div",count:this.props.num_synonyms,rowsPerPage:this.props.synonym_page_size,page:this.props.synonym_page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t){return e.props.setSynonymPage(t)},onChangeRowsPerPage:function(t){return e.props.setSynonymPageSize(t)}})]})]})}}]),s}(n.a.Component),Pa=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,synonym_list:e.appReducer.synonym_list,synonym_filter:e.appReducer.synonym_filter,synonym_page:e.appReducer.synonym_page,synonym_page_size:e.appReducer.synonym_page_size,num_synonyms:e.appReducer.num_synonyms,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(es,e)}))(Ta),Ua=(s(260),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,open:e.open,semantic:e.semantic,onSave:e.onSave,onError:e.onError,word:e.semantic&&e.semantic.word?e.semantic.word:"",semantic_str:e.semantic&&e.semantic.semantic?e.semantic.semantic:""},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){this.state.onSave&&this.state.onSave({word:this.state.word,prevWord:"",semantic:this.state.semantic_str})}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open,semantic:e.semantic,onSave:e.onSave,onError:e.onError,word:e.semantic&&e.semantic.word?e.semantic.word:"",semantic_str:e.semantic&&e.semantic.semantic?e.semantic.semantic:""})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"semantic-edit.js: Something went wrong."}):this.state.open?Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded",children:[Object(ts.jsx)("div",{className:"modal-header",children:"Edit Semantic"}),Object(ts.jsx)("div",{className:"modal-body",children:Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"word"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("input",{type:"text",className:"form-control",autoFocus:!0,onChange:function(t){return e.setState({word:t.target.value})},placeholder:"word",value:this.state.word})})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"semantic"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("input",{type:"text",className:"form-control",onChange:function(t){return e.setState({semantic_str:t.target.value})},placeholder:"semantic",value:this.state.semantic_str})})]})]})}),Object(ts.jsxs)("div",{className:"modal-footer",children:[Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleCancel()},children:"Cancel"}),Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleSave()},children:"Save"})]})]})})}):Object(ts.jsx)("div",{})}}]),s}(a.Component)),Aa=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={semantic:{},prev_semantic:{word:"",semantic:""},semantic_edit:!1,openDialog:e.openDialog,closeDialog:e.closeDialog,page_size:5,page:0},a}return Object(g.a)(s,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog,closeDialog:e.closeDialog})}},{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"getSemanticList",value:function(){return this.props.semantic_list}},{key:"deleteSemanticAsk",value:function(e){var t=this;e&&(this.props.openDialog("are you sure you want to remove "+e.word+" is a "+e.semantic+"?","Remove Semantic",(function(e){t.deleteSemantic(e)})),this.setState({semantic:e}))}},{key:"deleteSemantic",value:function(e){e&&this.state.semantic&&this.props.deleteSemantic(this.state.semantic.word),this.props.closeDialog&&this.props.closeDialog(),this.setState({semantic_edit:!1,semantic:{}})}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getSemantics()}},{key:"editSemantic",value:function(e){this.setState({semantic_edit:!0,prev_semantic:{word:e.word,semantic:e.semantic},semantic:{word:e.word,semantic:e.semantic}})}},{key:"newSemantic",value:function(){this.setState({semantic_edit:!0,prev_semantic:{word:"",semantic:""},semantic:{word:"",semantic:""}})}},{key:"save",value:function(e){e?e.word.length>0&&e.semantic.length>0?(""!==this.state.prev_semantic.word&&this.state.prev_semantic.word!==e.word?e.prevWord=this.state.prev_semantic.word:e.prevWord="",this.props.saveSemantic(e),this.setState({semantic_edit:!1,semantic:{}}),this.state.closeDialog&&this.state.closeDialog()):this.props.setError("Error Saving Semantic","word and semantic must have a value"):this.setState({semantic_edit:!1,semantic:{}})}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ts.jsxs)("div",{children:[Object(ts.jsx)(Ua,{open:this.state.semantic_edit,theme:t,semantic:this.state.semantic,onSave:function(t){return e.save(t)},onError:function(t){return e.props.setError("Error",t)}}),this.isVisible()&&Object(ts.jsxs)("div",{className:"filter-find-box",children:[Object(ts.jsx)("span",{className:"filter-label",children:"find semantics"}),Object(ts.jsx)("span",{className:"filter-find-text",children:Object(ts.jsx)("input",{type:"text",value:this.props.semantic_filter,autoFocus:!0,className:t,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setSemanticFilter(t.target.value)}})}),Object(ts.jsx)("span",{className:"filter-find-image",children:Object(ts.jsx)("img",{className:"image-size",onClick:function(){return e.props.getSemantics()},src:"../images/dark-magnifying-glass.svg",title:"search",alt:"search"})})]}),Object(ts.jsx)("br",{clear:"both"}),this.isVisible()&&Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("table",{className:"table",children:[Object(ts.jsx)("thead",{children:Object(ts.jsxs)("tr",{className:"table-header",children:[Object(ts.jsx)("th",{className:"table-header",children:"word"}),Object(ts.jsx)("th",{className:"table-header",children:"semantic"}),Object(ts.jsx)("th",{className:"table-header",children:"actions"})]})}),Object(ts.jsxs)("tbody",{children:[this.getSemanticList().map((function(t){return Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{children:t.word})}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{children:t.semantic})}),Object(ts.jsxs)("td",{children:[Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.editSemantic(t)},children:Object(ts.jsx)("img",{src:"../images/edit.svg",className:"image-size",title:"edit semantic",alt:"edit"})}),Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.deleteSemanticAsk(t)},children:Object(ts.jsx)("img",{src:"../images/delete.svg",className:"image-size",title:"remove semantic",alt:"remove"})})]})]},t.word+":"+t.semantic)})),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{children:this.isVisible()&&Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.newSemantic()},children:Object(ts.jsx)("img",{className:"image-size",src:"../images/add.svg",title:"new semantic",alt:"new semantic"})})})]})]})]}),Object(ts.jsx)(Cs,{theme:t,rowsPerPageOptions:[5,10,25],component:"div",count:this.props.num_semantics,rowsPerPage:this.props.semantic_page_size,page:this.props.semantic_page,onChangePage:function(t){return e.props.setSemanticPage(t)},onChangeRowsPerPage:function(t){return e.props.setSemanticPageSize(t)}})]})]})}}]),s}(n.a.Component),La=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,semantic_list:e.appReducer.semantic_list,semantic_filter:e.appReducer.semantic_filter,semantic_page:e.appReducer.semantic_page,semantic_page_size:e.appReducer.semantic_page_size,num_semantics:e.appReducer.num_semantics,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(es,e)}))(Aa),za=(s(131),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,open:e.open,synSet:e.synSet,onSave:e.onSave,onError:e.onError,word:w.defined(e.synSet)&&w.defined(e.synSet.word)?e.synSet.word:"",cloud_list:s.getWordCloudList(e.synSet)},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){if(this.state.onSave){var e=this.state.synSet;e.word=this.state.word.trim(),e.wordCloudCsvList=this.state.cloud_list,e.word.indexOf(" ")>=0?this.state.onError("syn-sets must be a single words without spaces."):this.state.onSave(e)}}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open,synSet:e.synSet,onSave:e.onSave,onError:e.onError,word:w.defined(e.synSet)&&w.defined(e.synSet.word)?e.synSet.word:"",cloud_list:s.getWordCloudList(e.synSet)})}},{key:"updateWC",value:function(e,t){var s=this.state.cloud_list;s[e]=t,this.setState({cloud_list:s})}},{key:"newSyn",value:function(){var e=this.state.cloud_list;e.push(""),this.setState({cloud_list:e})}},{key:"deleteSyn",value:function(e){for(var t=[],s=this.state.cloud_list,a=0;a<s.length;a++)a!==e&&t.push(s[a]);this.setState({cloud_list:t})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"synset-edit.js: Something went wrong."}):this.state.open?Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded",children:[Object(ts.jsxs)("div",{className:"modal-header",children:['Edit syn-set "',this.state.word,'"']}),Object(ts.jsx)("div",{className:"modal-body",children:Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"syn-set"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("input",{type:"text",className:"form-control",autoFocus:!0,onChange:function(t){return e.setState({word:t.target.value})},placeholder:"syn-set",value:this.state.word})})]}),this.state.cloud_list.map((function(t,s){return Object(ts.jsxs)("div",{className:"edit-row",children:[Object(ts.jsx)("span",{className:"label-area",children:"word cloud "+(s+1)}),Object(ts.jsxs)("span",{className:"input-area synset-area-width",children:[Object(ts.jsx)("textarea",{className:"input-area synset-text-area-width",onChange:function(t){return e.updateWC(s,t.target.value)},placeholder:"word-cloud for syn-set "+(s+1),rows:2,value:t}),s>1&&Object(ts.jsx)("div",{className:"synset-trashcan",onClick:function(){return e.deleteSyn(s)},children:Object(ts.jsx)("img",{src:"light"===e.props.theme?"../images/delete.svg":"../images/delete-dark.svg",className:"image-size",title:"remove syn",alt:"remove syn"})})]})]},s)})),Object(ts.jsx)("div",{className:"new-syn-button",onClick:function(){return e.newSyn()},children:Object(ts.jsx)("img",{src:"light"===this.props.theme?"../images/add.svg":"../images/add-dark.svg",title:"add a new syn item",className:"image-size",alt:"add a new syn"})})]})}),Object(ts.jsxs)("div",{className:"modal-footer",children:[Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleCancel()},children:"Cancel"}),Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleSave()},children:"Save"})]})]})})}):Object(ts.jsx)("div",{})}}],[{key:"getWordCloudList",value:function(e){var t=[];for(w.defined(e)&&w.defined(e.wordCloudCsvList)&&(t=e.wordCloudCsvList);t.length<2;)t.push("");return t}}]),s}(a.Component)),Fa=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={synSet:{},synSet_edit:!1,openDialog:e.openDialog,closeDialog:e.closeDialog},a}return Object(g.a)(s,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog,closeDialog:e.closeDialog})}},{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"deleteSynSetAsk",value:function(e){var t=this;e&&(this.props.openDialog("are you sure you want to remove id "+e.word+"?","Remove SynSet",(function(e){t.deleteSynSet(e)})),this.setState({synSet:e}))}},{key:"deleteSynSet",value:function(e){e&&this.state.synSet&&this.props.deleteSynSet(this.state.synSet.lemma),this.props.closeDialog&&this.props.closeDialog(),this.setState({synSet_edit:!1,synSet:{}})}},{key:"handleSynSetFilterKeydown",value:function(e){"Enter"===e.key&&this.props.findSynSets()}},{key:"editSynSet",value:function(e){this.setState({synSet_edit:!0,synSet:e})}},{key:"newSynSet",value:function(){this.setState({synSet_edit:!0,synSet:{word:"",lemma:"",wordCloudCsvList:[]}})}},{key:"save",value:function(e){if(e)if(e.word.trim().length>0&&e.wordCloudCsvList.length>1){var t,s=e.wordCloudCsvList,a=!0,n=Object(b.a)(s);try{for(n.s();!(t=n.n()).done;){0===t.value.trim().length&&(a=!1)}}catch(r){n.e(r)}finally{n.f()}a?(this.props.saveSynSet(e),this.setState({synSet_edit:!1,synSet:{}})):this.props.setError("Error Saving SynSet","syn-set word-cloud items must not be empty.")}else this.props.setError("Error Saving SynSet","syn-set cannot be empty and need more than one item");else this.setState({synSet_edit:!1,synSet:{}})}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ts.jsxs)("div",{className:"synset-page",children:[Object(ts.jsx)(za,{open:this.state.synSet_edit,theme:t,synSet:this.state.synSet,onSave:function(t){return e.save(t)},onError:function(t){return e.props.setError("Error",t)}}),this.isVisible()&&Object(ts.jsxs)("div",{className:"filter-find-box",children:[Object(ts.jsx)("span",{className:"filter-label",children:"find synsets"}),Object(ts.jsx)("span",{className:"filter-find-text",children:Object(ts.jsx)("input",{type:"text",value:this.props.synset_filter,autoFocus:!0,onKeyPress:function(t){return e.handleSynSetFilterKeydown(t)},onChange:function(t){e.props.setSynSetFilter(t.target.value)}})}),Object(ts.jsx)("span",{className:"filter-find-image",children:Object(ts.jsx)("img",{className:"image-size",onClick:function(){return e.props.findSynSets()},src:"../images/dark-magnifying-glass.svg",title:"search",alt:"search"})})]}),Object(ts.jsx)("br",{clear:"both"}),this.isVisible()&&Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("table",{className:"table",children:[Object(ts.jsx)("thead",{children:Object(ts.jsxs)("tr",{className:"table-header",children:[Object(ts.jsx)("th",{className:"table-header",children:"syn-set"}),Object(ts.jsx)("th",{className:"table-header",children:"actions"})]})}),Object(ts.jsxs)("tbody",{children:[this.props.synset_list.map((function(t){return Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"synset-label",children:t.word})}),Object(ts.jsxs)("td",{children:[Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.editSynSet(t)},children:Object(ts.jsx)("img",{src:"../images/edit.svg",className:"image-size",title:"edit syn-set",alt:"edit"})}),Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.deleteSynSetAsk(t)},children:Object(ts.jsx)("img",{src:"../images/delete.svg",className:"image-size",title:"remove syn-set",alt:"remove"})})]})]},t.word)})),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{children:this.isVisible()&&Object(ts.jsx)("div",{className:"image-button",onClick:function(){return e.newSynSet()},children:Object(ts.jsx)("img",{className:"image-size",src:"../images/add.svg",title:"new syn-set",alt:"new syn-set"})})})]})]})]}),Object(ts.jsx)(Cs,{rowsPerPageOptions:[5,10,25],theme:t,component:"div",count:this.props.synset_total_size,rowsPerPage:this.props.synset_page_size,page:this.props.synset_page,onChangePage:function(t){return e.props.setSynSetPage(t)},onChangeRowsPerPage:function(t){return e.props.setSynSetPageSize(t)}})]})]})}}]),s}(n.a.Component),Ma=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,synset_list:e.appReducer.synset_list,synset_filter:e.appReducer.synset_filter,synset_page:e.appReducer.synset_page,synset_page_size:e.appReducer.synset_page_size,synset_total_size:e.appReducer.synset_total_size,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(es,e)}))(Fa),qa=s(68),Wa=s.n(qa),Ya=(s(132),s(261),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,onError:e.onError,openDialog:e.openDialog,closeDialog:e.closeDialog,timer_value:0},a.messagesEndRef=n.a.createRef(),a.timer=null,a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog,closeDialog:e.closeDialog})}},{key:"componentWillUnmount",value:function(){null!=this.timer&&(window.clearTimeout(this.timer),this.timer=null)}},{key:"componentDidUpdate",value:function(e,t,s){var a=this;this.scrollToBottom();var n=this.props.log_refresh;n>0&&null==this.timer&&(this.timer=window.setTimeout((function(){a.timer=null,a.props.getLogs&&a.props.getLogs()}),1e3*n))}},{key:"scrollToBottom",value:function(){this.isVisible()&&this.messagesEndRef.current.scrollIntoView({behavior:"smooth"})}},{key:"getClassForType",value:function(e){return"Debug"===e?"log-type-debug":"Info"===e?"log-type-info":"Error"===e?"log-type-error":"log-type-warn"}},{key:"getSelectedHourStyle",value:function(e){return e?"log-hour-selector-selected":"log-hour-selector"}},{key:"getHourTitle",value:function(e){return 1===e?"display the next one hour after the selected time":2===e?"display the next two hours after the selected time":4===e?"display the next four hours after the selected time":"display the next "+e+" hours after the selected time"}},{key:"setLogHours",value:function(e){this.props.setLogHours(e),this.props.getLogs()}},{key:"getSelectedServiceStyle",value:function(e){return e?"log-service-selector-selected":"log-service-selector"}},{key:"setLogService",value:function(e){this.props.setLogService(e),this.props.getLogs()}},{key:"getSelectedLogStyle",value:function(e){return e?"log-type-selector-selected":"log-type-selector"}},{key:"setLogType",value:function(e){this.props.setLogType(e),this.props.getLogs()}},{key:"getLogRefreshStyle",value:function(e){return e?"log-refresh-selector-selected":"log-refresh-selector"}},{key:"setLogRefresh",value:function(e){this.props.setLogRefresh(e),this.props.getLogs()}},{key:"getLogs",value:function(){if(this.props.log_list){for(var e=this.props.log_type,t=this.props.log_service,s=[],a=0;a<this.props.log_list.length;a++){var n=this.props.log_list[a];"All"!==e&&n.type!==e||"All"!==t&&n.service!==t||s.push(n)}return s}return[]}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0}},{key:"render",value:function(){var e=this,t=new Date;this.props.log_date&&(t=new Date(this.props.log_date));var s=this.props.theme,a=this.props.log_hours,n=this.props.log_type,r=this.props.log_service,i=this.props.log_refresh;return this.isVisible()?Object(ts.jsxs)("div",{className:"log-page",children:[Object(ts.jsx)("div",{className:"date-select",children:Object(ts.jsx)(Wa.a,{className:"light"===s?"wide-date-picker-input":"wide-date-picker-input-dark",selected:t,dateFormat:"yyyy/MM/dd HH:mm",timeFormat:"HH:mm",showTimeSelect:!0,timeIntervals:60,todayButton:"today",onChange:function(t){e.props.setLogDate(t),e.props.getLogs()}})}),Object(ts.jsxs)("div",{className:"log-selectors",children:[Object(ts.jsx)("span",{title:this.getHourTitle(1),className:this.getSelectedHourStyle(1===a),onClick:function(){return e.setLogHours(1)},children:"1 hour"}),Object(ts.jsx)("span",{title:this.getHourTitle(2),className:this.getSelectedHourStyle(2===a),onClick:function(){return e.setLogHours(2)},children:"2 hours"}),Object(ts.jsx)("span",{title:this.getHourTitle(4),className:this.getSelectedHourStyle(4===a),onClick:function(){return e.setLogHours(4)},children:"4 hours"}),Object(ts.jsx)("span",{title:this.getHourTitle(12),className:this.getSelectedHourStyle(12===a),onClick:function(){return e.setLogHours(12)},children:"12 hours"}),Object(ts.jsx)("span",{title:this.getHourTitle(24),className:this.getSelectedHourStyle(24===a),onClick:function(){return e.setLogHours(24)},children:"24 hours"}),Object(ts.jsx)("span",{title:this.getHourTitle(48),className:this.getSelectedHourStyle(48===a),onClick:function(){return e.setLogHours(48)},children:"48 hours"}),Object(ts.jsx)("span",{className:"log-spacer",children:"\xa0"}),Object(ts.jsx)("span",{title:"display all log-types",className:this.getSelectedLogStyle("All"===n),onClick:function(){return e.setLogType("All")},children:"all"}),Object(ts.jsx)("span",{title:"display only 'info' log-types",className:this.getSelectedLogStyle("Info"===n),onClick:function(){return e.setLogType("Info")},children:"info"}),Object(ts.jsx)("span",{title:"display only 'debug' log-types",className:this.getSelectedLogStyle("Debug"===n),onClick:function(){return e.setLogType("Debug")},children:"debug"}),Object(ts.jsx)("span",{title:"display only 'error' log-types",className:this.getSelectedLogStyle("Error"===n),onClick:function(){return e.setLogType("Error")},children:"error"}),Object(ts.jsx)("span",{title:"display only 'warning' log-types",className:this.getSelectedLogStyle("Warn"===n),onClick:function(){return e.setLogType("Warn")},children:"warn"})]}),Object(ts.jsxs)("div",{className:"log-selectors",children:[Object(ts.jsx)("span",{title:"do not automatically refresh the logs",className:this.getLogRefreshStyle(0===i),onClick:function(){return e.setLogRefresh(0)},children:"off"}),Object(ts.jsx)("span",{title:"automatically refresh this log every five seconds",className:this.getLogRefreshStyle(5===i),onClick:function(){return e.setLogRefresh(5)},children:"5 seconds"}),Object(ts.jsx)("span",{title:"automatically refresh this log every 10 seconds",className:this.getLogRefreshStyle(10===i),onClick:function(){return e.setLogRefresh(10)},children:"10 seconds"}),Object(ts.jsx)("span",{className:"log-spacer",children:"\xa0"}),Object(ts.jsx)("span",{title:"display logs from all services",className:this.getSelectedServiceStyle("All"===r),onClick:function(){return e.setLogService("All")},children:"all"}),Object(ts.jsx)("span",{title:"only display logs from the Auth service",className:this.getSelectedServiceStyle("Auth"===r),onClick:function(){return e.setLogService("Auth")},children:"auth"}),Object(ts.jsx)("span",{title:"only display logs from the Conversion service",className:this.getSelectedServiceStyle("Conversion"===r),onClick:function(){return e.setLogService("Conversion")},children:"conv"}),Object(ts.jsx)("span",{title:"only display logs from the Crawler service",className:this.getSelectedServiceStyle("Crawler"===r),onClick:function(){return e.setLogService("Crawler")},children:"crawl"}),Object(ts.jsx)("span",{title:"only display logs from the Document service",className:this.getSelectedServiceStyle("Document"===r),onClick:function(){return e.setLogService("Document")},children:"doc"}),Object(ts.jsx)("span",{title:"only display logs from the Index service",className:this.getSelectedServiceStyle("Index"===r),onClick:function(){return e.setLogService("Index")},children:"index"}),Object(ts.jsx)("span",{title:"only display logs from the Knowledgebase service",className:this.getSelectedServiceStyle("KB"===r),onClick:function(){return e.setLogService("KB")},children:"kb"}),Object(ts.jsx)("span",{title:"only display logs from the Language service",className:this.getSelectedServiceStyle("Language"===r),onClick:function(){return e.setLogService("Language")},children:"lang"}),Object(ts.jsx)("span",{title:"only display logs from the Mind service",className:this.getSelectedServiceStyle("Mind"===r),onClick:function(){return e.setLogService("Mind")},children:"mind"}),Object(ts.jsx)("span",{title:"only display logs from the Operator service",className:this.getSelectedServiceStyle("Operator"===r),onClick:function(){return e.setLogService("Operator")},children:"operator"}),Object(ts.jsx)("span",{title:"only display logs from the Search service",className:this.getSelectedServiceStyle("Search"===r),onClick:function(){return e.setLogService("Search")},children:"search"}),Object(ts.jsx)("span",{title:"only display logs from the Statistics service",className:this.getSelectedServiceStyle("Stats"===r),onClick:function(){return e.setLogService("Stats")},children:"stats"}),Object(ts.jsx)("span",{title:"only display logs from the Web service",className:this.getSelectedServiceStyle("Web"===r),onClick:function(){return e.setLogService("Web")},children:"web"})]}),Object(ts.jsxs)("div",{className:"log-files",children:[this.getLogs().map((function(t){return Object(ts.jsxs)("div",{className:"log-line",id:t.created,children:[Object(ts.jsx)("span",{className:"log-type-width "+e.getClassForType(t.type),children:t.type}),Object(ts.jsx)("span",{className:"log-service-width",children:t.service}),Object(ts.jsx)("span",{className:"log-time-width",children:N.unixTimeConvert(t.created)}),Object(ts.jsx)("span",{children:t.message})]})})),Object(ts.jsx)("div",{ref:this.messagesEndRef})]})]}):Object(ts.jsx)("div",{})}}]),s}(n.a.Component)),Ba=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id,selected_organisation_id:e.appReducer.selected_organisation_id,log_date:e.appReducer.log_date,log_list:e.appReducer.log_list,log_hours:e.appReducer.log_hours,log_type:e.appReducer.log_type,log_service:e.appReducer.log_service,log_refresh:e.appReducer.log_refresh,user:e.appReducer.user}}),(function(e){return Object(u.b)(es,e)}))(Ya),Va=s(58),Ja=(s(406),350),Ga=400,Ha=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,onError:e.onError,openDialog:e.openDialog,closeDialog:e.closeDialog},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog,closeDialog:e.closeDialog})}},{key:"componentDidMount",value:function(){}},{key:"downloadReport",value:function(){var e=new Date(this.props.report_date),t=e.getFullYear(),s=e.getMonth()+1;k.download_query_log(this.props.selected_organisation_id,this.props.selected_knowledgebase_id,t,s)}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this,t=new Date(this.props.report_date),s=this.props.theme;return Object(ts.jsxs)("div",{className:"report-page",children:[this.isVisible()&&Object(ts.jsxs)("div",{children:[Object(ts.jsx)("br",{clear:"both"}),Object(ts.jsx)("div",{className:"download-button",children:Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.downloadReport()},children:"download report"})}),Object(ts.jsx)("div",{className:"date-select",children:Object(ts.jsx)(Wa.a,{className:"light"===s?"date-picker-input":"date-picker-input-dark",selected:t,dateFormat:"yyyy/MM",todayButton:"today",showMonthYearPicker:!0,onChange:function(t){e.props.setReportDate(t),e.props.getReports()}})}),Object(ts.jsx)("br",{clear:"both"})]}),Object(ts.jsxs)("div",{className:"bar-graphs",children:[this.isVisible()&&this.props.general_statistics.map((function(e){return Object(ts.jsx)("div",{className:"bar-graph",children:Object(ts.jsx)(Va.Bar,{data:e,options:ht.getGraphOptions(""),width:Ga,height:Ja})},e.id)})),this.isVisible()&&this.props.file_type_statistics.map((function(e){return Object(ts.jsx)("div",{className:"bar-graph",children:Object(ts.jsx)(Va.Bar,{data:e,options:ht.getGraphOptions(""),width:Ga,height:Ja})},e.id)})),this.isVisible()&&this.props.query_word_frequency.map((function(e){return Object(ts.jsx)("div",{className:"bar-graph",children:Object(ts.jsx)(Va.Bar,{data:e,options:ht.getGraphOptions("queries"),width:Ga,height:Ja})},e.id)})),this.isVisible()&&this.props.access_frequency.labels.length>0&&Object(ts.jsx)("div",{className:"bar-graph",children:Object(ts.jsx)(Va.Line,{data:this.props.access_frequency,options:ht.getGraphOptions("access count"),width:Ga,height:Ja})})]})]})}}]),s}(n.a.Component),Ka=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,report_date:e.appReducer.report_date,access_frequency:e.appReducer.access_frequency,general_statistics:e.appReducer.general_statistics,query_word_frequency:e.appReducer.query_word_frequency,file_type_statistics:e.appReducer.file_type_statistics}}),(function(e){return Object(u.b)(es,e)}))(Ha),Qa=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,links:""},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){if(this.props.onSave){var e=this.state.links.replace(/\n/g," ");e=(e=e.replace(/\r/g," ")).replace(/\t/g," "),this.props.onSave(!0,e)}}},{key:"handleCancel",value:function(){this.props.onSave&&this.props.onSave(!1,"")}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"operator-teach.js: Something went wrong."}):this.props.open?Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded",children:[Object(ts.jsx)("div",{className:"modal-header",children:"Teach SimSage?"}),Object(ts.jsx)("div",{className:"modal-body",children:Object(ts.jsxs)("div",{children:[Object(ts.jsx)("div",{children:"question"}),Object(ts.jsx)("div",{children:this.props.question}),Object(ts.jsx)("div",{children:"answer"}),Object(ts.jsx)("div",{children:this.props.answer}),Object(ts.jsx)("div",{children:"links"}),Object(ts.jsx)("div",{children:Object(ts.jsx)("textarea",{onChange:function(t){return e.setState({links:t.target.value})},placeholder:"links (images and page-links, separated by commas or spaces)",rows:5,value:this.state.links})})]})}),Object(ts.jsxs)("div",{className:"modal-footer",children:[Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleCancel()},children:"Cancel"}),Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleSave()},children:"Save"})]})]})})}):Object(ts.jsx)("div",{})}}]),s}(a.Component),Za=(s(96),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,open:e.open,onSave:e.onSave,onError:e.onError},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open})}},{key:"handleSave",value:function(){this.state.onSave&&this.state.onSave(!0)}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(!1)}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"operator-previous-answer.js: Something went wrong."}):this.state.open?Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded operator-display",children:[Object(ts.jsx)("div",{className:"modal-header",children:"Use Previous Answer?"}),Object(ts.jsxs)("div",{className:"modal-body",children:[Object(ts.jsxs)("div",{children:["SimSage has a previous answer to the question: ",Object(ts.jsx)("div",{className:"questionStyle",children:this.props.question})]}),Object(ts.jsx)("div",{children:"SimSage's answer was:"}),Object(ts.jsx)("div",{className:"answerStyle",children:this.props.answer})]}),Object(ts.jsxs)("div",{className:"modal-footer",children:[Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleCancel()},children:"Cancel"}),Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleSave()},children:"Use this Answer"})]})]})})}):Object(ts.jsx)("div",{})}}]),s}(a.Component)),Xa=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(){return Object(j.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){return Object(ts.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-mic-fill",viewBox:"0 0 16 16",children:[Object(ts.jsx)("path",{d:"M5 3a3 3 0 0 1 6 0v5a3 3 0 0 1-6 0V3z"}),Object(ts.jsx)("path",{d:"M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5z"})]})}}]),s}(a.Component),$a=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(){return Object(j.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){return Object(ts.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-cup-fill",viewBox:"0 0 16 16",children:Object(ts.jsx)("path",{d:"M1 2a1 1 0 0 1 1-1h11a1 1 0 0 1 1 1v1h.5A1.5 1.5 0 0 1 16 4.5v7a1.5 1.5 0 0 1-1.5 1.5h-.55a2.5 2.5 0 0 1-2.45 2h-8A2.5 2.5 0 0 1 1 12.5V2zm13 10h.5a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5H14v8z"})})}}]),s}(a.Component),en=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(){return Object(j.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){return Object(ts.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-person-x-fill",viewBox:"0 0 16 16",children:Object(ts.jsx)("path",{fillRule:"evenodd",d:"M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6.146-2.854a.5.5 0 0 1 .708 0L14 6.293l1.146-1.147a.5.5 0 0 1 .708.708L14.707 7l1.147 1.146a.5.5 0 0 1-.708.708L14 7.707l-1.146 1.147a.5.5 0 0 1-.708-.708L13.293 7l-1.147-1.146a.5.5 0 0 1 0-.708z"})})}}]),s}(a.Component),tn=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(){return Object(j.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){return Object(ts.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-person-circle",viewBox:"0 0 16 16",children:[Object(ts.jsx)("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),Object(ts.jsx)("path",{fillRule:"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"})]})}}]),s}(a.Component),sn=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).scrollToBottom=function(){a.messagesEndRef.current.scrollIntoView({behavior:"smooth"})},a.state={operator_reply:"",last_time:0},a.messagesEndRef=n.a.createRef(),a}return Object(g.a)(s,[{key:"componentDidMount",value:function(){var e=this;window.setInterval((function(){return e.checkClientTyping()}),1e3)}},{key:"componentDidCatch",value:function(e,t){console.log(e,t),this.props.setError(e,t)}},{key:"componentDidUpdate",value:function(e,t,s){this.scrollToBottom()}},{key:"readyForChat",value:function(){var e={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,userId:this.props.user.id};this.props.sendOperatorMessage("/ops/ready",e),this.props.operatorReady(this.props.operator.id,!0)}},{key:"isTyping",value:function(){var e=this.state.last_time,t=N.getSystemTime();if(e<t&&(this.setState({last_time:t+2e3}),this.props.operator.client_id&&this.props.operator.id)){var s={fromId:this.props.operator.id,toId:this.props.operator.client_id,isTyping:!0};this.props.sendOperatorMessage("/ops/typing",s)}}},{key:"checkClientTyping",value:function(){this.props.operator&&this.props.operator.is_typing&&this.props.operator.typing_time<N.getSystemTime()&&this.props.stopClientTyping(this.props.operator.id)}},{key:"takeBreak",value:function(){var e={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,clientId:this.props.operator.client_id};this.props.sendOperatorMessage("/ops/take-break",e),this.props.operatorReady(this.props.operator.id,!1)}},{key:"nextUser",value:function(){var e={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,clientId:this.props.operator.client_id};this.props.sendOperatorMessage("/ops/next-user",e),this.props.clearUser(this.props.operator.id)}},{key:"banUserConfirm",value:function(){var e=this;this.props.operator.client_id&&this.props.operator.client_id.length>0&&this.props.openDialog("are you sure you want to ban this user?","Ban User",(function(t){e.banUser(t)}))}},{key:"banUser",value:function(e){if(e){var t={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,clientId:this.props.operator.client_id};this.props.sendOperatorMessage("/ops/ban-user",t),this.props.clearUser(this.props.operator.id)}this.props.closeDialog&&this.props.closeDialog()}},{key:"operatorReply",value:function(e){if(this.props.operator.client_id.length>0&&e.length>0){var t={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,clientId:this.props.operator.client_id,kbId:this.props.operator.client_kb_id,text:e};this.props.sendOperatorMessage("/ops/chat",t),this.props.addConversation(this.props.operator.id,{id:this.props.operator.conversation_list.length+1,primary:e,secondary:"You",used:!1,is_simsage:!0}),this.setState({operator_reply:""})}}},{key:"selectForLearn",value:function(e){e&&e.is_simsage?e.id===this.props.operator.answer_id?this.props.setOperatorAnswer(this.props.operator.id,"",""):this.props.setOperatorAnswer(this.props.operator.id,e.id,e.primary):e&&(e.id===this.props.operator.question_id?this.props.setOperatorQuestion(this.props.operator.id,"",""):this.props.setOperatorQuestion(this.props.operator.id,e.id,e.primary))}},{key:"teachSimSage",value:function(e,t){if(e&&this.props.operator.client_id.length>0&&this.props.operator.question.length>0&&this.props.operator.answer.length>0){var s={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,clientId:this.props.operator.client_id,kbId:this.props.operator.client_kb_id,text:this.props.operator.question,answer:this.props.operator.answer,links:t};this.props.sendOperatorMessage("/ops/teach",s);var a,n=this.props.operator.conversation_list,r=Object(b.a)(n);try{for(r.s();!(a=r.n()).done;){var i=a.value;i.id!==this.props.operator.question_id&&i.id!==this.props.operator.answer_id||this.props.markConversationItemUsed(this.props.operator.id,i.id)}}catch(o){r.e(o)}finally{r.f()}}this.props.setOperatorAnswer(this.props.operator.id,"",""),this.props.setOperatorQuestion(this.props.operator.id,"","")}},{key:"usePreviousQuestion",value:function(e){e&&this.props.operator.prev_answer.length>0&&this.operatorReply(this.props.operator.prev_answer),this.props.clearPreviousAnswer(this.state.operator.id)}},{key:"getAvatarStyle",value:function(e){var t="";return"light"!==this.props.theme&&(t="-dark"),e.is_simsage?e.id===this.props.operator.answer_id||e.used?"operator-text-box-selected"+t:"operator-text-box"+t:e.id===this.props.operator.question_id||e.used?"user-text-selected"+t:"user-text"+t}},{key:"render",value:function(){var e=this,t=_n.hasRole(this.props.user,["operator"]),s=this.props.operator.operator_ready&&this.props.operator_connected&&t,a=this.props.operator.operator_ready||!this.props.operator_connected,n=this.props.operator.client_id&&this.props.operator.client_id.length>0,r="light"===this.props.theme?"operator-buttons-top":"operator-buttons-top-dark";return Object(ts.jsxs)("div",{className:"operator-display",children:[Object(ts.jsx)(Qa,{open:""!==this.props.operator.question_id&&""!==this.props.operator.answer_id,theme:this.props.theme,question:this.props.operator.question,onSave:function(t,s){return e.teachSimSage(t,s)},answer:this.props.operator.answer}),Object(ts.jsx)(Za,{open:""!==this.props.operator.current_question&&""!==this.props.operator.prev_answer,theme:this.props.theme,question:this.props.operator.current_question,onSave:function(t){return e.usePreviousQuestion(t)},answer:this.props.operator.prev_answer}),Object(ts.jsxs)("div",{className:r,children:[Object(ts.jsxs)("button",{className:"operator-button",disabled:a,title:a?"Disabled, click 'Break' top stop any conversations.":"Signal that you are ready to go and converse with customers.",onClick:function(){return e.readyForChat()},children:[Object(ts.jsx)(Xa,{}),Object(ts.jsx)("span",{className:"operator-button-text",children:"Ready"})]}),Object(ts.jsxs)("button",{className:"operator-button",disabled:!s,title:s?"take a break, stop participating in conversations while you have a break.":"Disabled, click Ready before you take a break.",onClick:function(){return e.takeBreak()},children:[Object(ts.jsx)($a,{}),Object(ts.jsx)("span",{className:"operator-button-text",children:"Break"})]}),Object(ts.jsxs)("button",{className:"operator-button operator-button-margin-left",disabled:!n,title:n?"The current conversation is abusive or bad spirited, ban this user from the system.":"Disabled, you aren't currently connected to any user.",onClick:function(){return e.banUserConfirm()},children:[Object(ts.jsx)(en,{}),Object(ts.jsx)("span",{className:"operator-button-text",children:"Ban User"})]}),Object(ts.jsxs)("button",{className:"operator-button operator-button-margin-left",disabled:!n,title:n?"We have finished the current conversation and are ready for a next one.":"Disabled, you aren't currently connected to any users.",onClick:function(){return e.nextUser()},children:[Object(ts.jsx)(tn,{}),Object(ts.jsx)("span",{className:"operator-button-text",children:"End Chat"})]}),this.props.operator.client_kb_name&&this.props.operator.client_kb_name.length>0&&Object(ts.jsx)("div",{className:"kb-name",children:this.props.operator.client_kb_name})]}),Object(ts.jsxs)("div",{className:"operator-conversation-area",children:[this.props.operator.conversation_list.map((function(t){return Object(ts.jsxs)("div",{className:t.is_simsage?"operator-box":"user-box",onClick:function(){s&&e.selectForLearn(t)},children:[Object(ts.jsxs)("div",{className:t.is_simsage?"operator-line":"user-line",children:[Object(ts.jsx)("span",{className:"user-label",children:t.is_simsage?"You":"User"}),Object(ts.jsx)("span",{className:"hyphen",children:"-"}),Object(ts.jsx)("span",{className:"time",children:N.unixTimeConvert(t.created)})]}),Object(ts.jsx)("div",{className:e.getAvatarStyle(t),children:t.primary})]},t.id)})),this.props.operator.is_typing&&Object(ts.jsx)("div",{children:Object(ts.jsx)("img",{src:"../images/dots.gif",className:"typing-dots",alt:"typing"})}),Object(ts.jsx)("div",{ref:this.messagesEndRef})]}),Object(ts.jsxs)("div",{className:"operator-reply-area",children:[Object(ts.jsx)("span",{className:"operator-reply-text-box",children:Object(ts.jsx)("input",{type:"text",title:n?"Type your reply and press enter, or click the 'Reply' button.":"Disabled, you aren't in a chat with a user.",className:"operator-reply-text",onChange:function(t){return e.setState({operator_reply:t.target.value})},disabled:!n,onKeyPress:function(t){"Enter"===t.key&&e.operatorReply(e.state.operator_reply),e.isTyping()},value:this.state.operator_reply})}),Object(ts.jsx)("span",{className:"operator-reply-button-box",children:Object(ts.jsx)("button",{disabled:!n,className:"operator-button",title:n?"Send the text you've typed to the user (or press enter in the reply field).":"Disabled, you aren't in a chat with a user.",onClick:function(){return e.operatorReply(e.state.operator_reply)},children:"Reply"})})]})]})}}]),s}(n.a.Component),an=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,session:e.appReducer.session,user:e.appReducer.user,operator_connected:e.appReducer.operator_connected,num_active_connections:e.appReducer.num_active_connections,selected_organisation_id:e.appReducer.selected_organisation_id}}),(function(e){return Object(u.b)(es,e)}))(sn),nn=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(){return Object(j.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){return Object(ts.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-people-fill",viewBox:"0 0 16 16",children:[Object(ts.jsx)("path",{d:"M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"}),Object(ts.jsx)("path",{fillRule:"evenodd",d:"M5.216 14A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216z"}),Object(ts.jsx)("path",{d:"M4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"})]})}}]),s}(a.Component),rn=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(){return Object(j.a)(this,s),t.apply(this,arguments)}return Object(g.a)(s,[{key:"render",value:function(){return Object(ts.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-file-plus-fill",viewBox:"0 0 16 16",children:Object(ts.jsx)("path",{d:"M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM8.5 6v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 1 0z"})})}}]),s}(a.Component),on=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={selectedTab:1},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){console.log(e,t),this.props.setError(e,t)}},{key:"takeBreak",value:function(e){if(e&&e.id){var t={sessionId:this.props.session.id,operatorId:e.id,organisationId:this.props.selected_organisation_id,clientId:e.client_id};this.props.sendOperatorMessage("/ops/take-break",t),this.props.operatorReady(e.id,!1)}}},{key:"render",value:function(){var e=this,t="light"===this.props.theme?"":"-dark";return Object(ts.jsxs)("div",{className:"operator-display",children:[Object(ts.jsx)("div",{children:this.props.operators&&this.props.operators.map((function(s,a){return Object(ts.jsxs)("span",{className:a+1===e.state.selectedTab?"operator-tab-selected"+t:"operator-tab"+t,children:[Object(ts.jsx)("span",{title:"Conversation "+(a+1),onClick:function(){return e.setState({selectedTab:a+1})},children:"Conversation "+(a+1)}),a>0&&Object(ts.jsx)("span",{className:"operator-close-conversation-button",title:"Close and remove this conversation.",onClick:function(){e.takeBreak(s),e.setState({selectedTab:1}),e.props.removeOperator(s.id)},children:Object(ts.jsx)("span",{className:"operator-close-conversation-text",children:"\xd7"})},"tab_close"+(a+1))]},"tab"+(a+1))}))}),this.props.operators&&this.props.operators.length<5&&Object(ts.jsxs)("div",{className:"add-button",onClick:function(){return e.props.addOperator()},title:"add Chat",children:[Object(ts.jsx)(rn,{}),Object(ts.jsxs)("span",{className:"max-text",children:["(Max ",5," chats)"]}),Object(ts.jsx)("span",{className:"add-text",children:"Add Chat\xa0"})]}),Object(ts.jsxs)("div",{className:"kbName",children:[Object(ts.jsx)(nn,{})," ",Object(ts.jsxs)("span",{className:"bot_text",children:[this.props.num_active_connections," active users"]})]}),this.props.operators&&this.props.operators.map((function(t,s){return s+1===e.state.selectedTab?Object(ts.jsx)(an,{operator:t,isFirst:0===s,onCloseTab:function(){return e.setState({selectedTab:1})},openDialog:function(t,s,a){return e.props.openDialog(t,s,a)},closeDialog:function(){return e.props.closeDialog()}},"display"+(s+1)):Object(ts.jsx)("div",{},"display"+(s+1))}))]})}}]),s}(n.a.Component),cn=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,session:e.appReducer.session,user:e.appReducer.user,num_active_connections:e.appReducer.num_active_connections,selected_organisation_id:e.appReducer.selected_organisation_id,operators:e.appReducer.operators}}),(function(e){return Object(u.b)(es,e)}))(on),ln=(s(407),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state=Object(d.a)(Object(d.a)({open:e.open,onSave:e.onSave,onTest:e.onTest,onUpdate:e.onUpdate,onError:e.onError,error_title:e.error_title,error_msg:e.error_msg,selectedTab:"general",organisation_id:e.organisation_id,kb_id:e.kb_id,edge_device_list:a.props.edge_device_list},a.construct_data(e.domain)),{},{has_error:!1}),a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&(e.domain?this.setState(Object(d.a)({open:e.open,title:e.title,onSave:e.onSave,onUpdate:e.onUpdate,onTest:e.onTest,onError:e.onError,error_title:e.error_title,error_msg:e.error_msg,organisation_id:e.organisation_id,kb_id:e.kb_id,edge_device_list:e.edge_device_list},this.construct_data(e.domain))):this.setState({open:e.open,title:e.title,onSave:e.onSave,onError:e.onError}))}},{key:"change_callback",value:function(e){this.setState(e)}},{key:"construct_data",value:function(e){return e?{organisationId:"",kbId:"",domainId:N.defined(e.domainId)?e.domainId:"",domainName:N.defined(e.domainName)?e.domainName:"",userName:N.defined(e.userName)?e.userName:"",password:N.defined(e.password)?e.password:"",serverIp:N.defined(e.serverIp)?e.serverIp:"",basePath:N.defined(e.basePath)?e.basePath:"",portNumber:N.defined(e.portNumber)?e.portNumber:389,sslOn:!!N.defined(e.sslOn)&&e.sslOn,schedule:N.defined(e.schedule)?e.schedule:"",edgeDeviceId:N.defined(e.edgeDeviceId)?e.edgeDeviceId:""}:{organisationId:"",kbId:"",domainId:"",domainName:"",userName:"",password:"",serverIp:"",basePath:"",portNumber:389,sslOn:!1,schedule:"",edgeDeviceId:""}}},{key:"gather_data",value:function(){return{organisationId:"",kbId:"",domainId:this.state.domainId,domainName:this.state.domainName,userName:this.state.userName,password:this.state.password,serverIp:this.state.serverIp,basePath:this.state.basePath,portNumber:this.state.portNumber,sslOn:this.state.sslOn,schedule:this.state.schedule,edgeDeviceId:this.state.edgeDeviceId}}},{key:"setError",value:function(e,t){this.props.onError&&this.props.onError(e,t)}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null),this.setState({open:!1})}},{key:"handleSave",value:function(){0!==this.state.userName.trim().length||0!==this.state.password.trim().length&&0!==this.state.domainName.trim().length&&0!==this.state.serverIp.trim().length&&0!==this.state.portNumber.trim().length&&0!==this.state.basePath.trim().length?this.state.onSave&&this.state.onSave(this.gather_data()):this.setError("invalid parameters","you must supply credentials, and domain details using all fields.")}},{key:"testConnection",value:function(){0!==this.state.userName.trim().length||0!==this.state.password.trim().length&&0!==this.state.domainName.trim().length&&0!==this.state.serverIp.trim().length&&0!==this.state.portNumber.trim().length&&0!==this.state.basePath.trim().length?this.state.onTest&&this.state.onTest(this.gather_data()):this.setError("invalid parameters","you must supply credentials, and domain details using all fields.")}},{key:"updateSchedule",value:function(e){null!==e&&(this.setState({schedule:e}),this.state.onUpdate&&this.state.onUpdate(Object(d.a)(Object(d.a)({},this.gather_data()),{},{schedule:e})))}},{key:"filteredEdgeDevices",value:function(){var e=[{key:"none",value:"n/a"}];if(this.props.edge_device_list){var t,s=Object(b.a)(this.props.edge_device_list);try{for(s.s();!(t=s.n()).done;){var a=t.value;a.organisationId===this.state.organisation_id&&a.edgeId&&e.push({key:a.edgeId,value:a.name})}}catch(n){s.e(n)}finally{s.f()}}return e}},{key:"render",value:function(){var e=this;if(this.state.has_error)return Object(ts.jsx)("h1",{children:"domain-dialog.js: Something went wrong."});var t=this.props.theme,s="light"===t?".tab":"tab_dark",a=this.state.selectedTab;return this.state.open?Object(ts.jsx)("div",{className:"domain-dialog",children:Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl "+s,role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded domain-dialog-height",children:[Object(ts.jsxs)("div",{className:"modal-header",children:[Object(ts.jsx)("h5",{className:"modal-title "+t,children:this.props.title}),Object(ts.jsx)("button",{type:"button",className:"btn btn-primary btn-block close",onClick:function(){return e.handleCancel()},"data-dismiss":"modal","aria-label":"Close",children:Object(ts.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(ts.jsxs)("div",{className:"modal-body",children:[Object(ts.jsxs)("ul",{className:"nav nav-tabs",children:[Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("general"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"general"})},children:"general"})}),Object(ts.jsx)("li",{className:"nav-item nav-cursor",children:Object(ts.jsx)("div",{className:"nav-link "+("schedule"===this.state.selectedTab?"active":""),onClick:function(){return e.setState({selectedTab:"schedule"})},children:"schedule"})})]}),"general"===a&&Object(ts.jsxs)("div",{className:"domain-page",children:[Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"domain name"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text",autoFocus:!0,"aria-placeholder":"domain name",value:this.state.domainName,onChange:function(t){e.change_callback({domainName:t.target.value})},className:"form-control"})})})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"user name"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text","aria-placeholder":"user name",value:this.state.userName,onChange:function(t){e.change_callback({userName:t.target.value})},className:"form-control"})})})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"password"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"password","aria-placeholder":"password (leave blank not to change)",value:this.state.password,onChange:function(t){e.change_callback({password:t.target.value})},className:"form-control"})})})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"domain ip"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text","aria-placeholder":"domain ip-address",value:this.state.serverIp,onChange:function(t){e.change_callback({serverIp:t.target.value})},className:"form-control"})})})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"domain base path"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text","aria-placeholder":"domain base-path (e.g. dc=my-domain,dc=co,dc=uk)",value:this.state.basePath,onChange:function(t){e.change_callback({basePath:t.target.value})},className:"form-control"})})})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"port number"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("input",{type:"text","aria-placeholder":"Active Directory port-number",value:this.state.portNumber,onChange:function(t){e.change_callback({portNumber:t.target.value})},className:"form-control"})})})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"edge device"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("form",{children:Object(ts.jsx)("select",{value:""!==this.state.edgeDeviceId?this.state.edgeDeviceId:"none",onChange:function(t){e.change_callback({edgeDeviceId:t.target.value})},children:this.filteredEdgeDevices().map((function(e){return Object(ts.jsx)("option",{value:e.key,children:e.value},e.key)}))})})})]}),Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"SSL?"}),Object(ts.jsx)("span",{className:"short-checkbox",children:Object(ts.jsx)("input",{type:"checkbox",checked:this.state.sslOn,onChange:function(t){t.target.checked?e.change_callback({sslOn:t.target.checked}):e.change_callback({sslOn:!1})},value:"enable Active Directory SSL?"})}),Object(ts.jsx)("span",{className:"explanation-label",children:"Check this box if you want the enable SSL communications with the Active Directory server."})]}),Object(ts.jsx)("div",{className:"control-box",children:Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.testConnection()},children:"Test Connection"})})]}),"schedule"===a&&Object(ts.jsx)("div",{className:"time-tab-content",children:Object(ts.jsx)(Ms,{time:this.state.schedule,onSave:function(t){return e.updateSchedule(t)}})})]}),Object(ts.jsxs)("div",{className:"modal-footer",children:[Object(ts.jsx)("button",{type:"button",className:"btn btn-primary btn-block",onClick:function(){return e.handleCancel()},"data-dismiss":"modal",children:"cancel"}),Object(ts.jsx)("button",{type:"button",className:"btn btn-primary btn-block",onClick:function(){return e.handleSave()},children:"save"})]})]})})})}):Object(ts.jsx)("div",{})}}]),s}(a.Component)),dn=(s(408),{domainId:"",domainName:"",userName:"",password:"",serverIp:"",basePath:"",portNumber:389,sslOn:!1,schedule:""}),un=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={page_size:5,page:0,open:!1,title:"Create new domain",selected_domain:{},domain_ask:null},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"getDomains",value:function(){var e=[],t=this.state.page*this.state.page_size,s=t+this.state.page_size;for(var a in this.props.domain_list)a>=t&&a<s&&e.push(this.props.domain_list[a]);return e}},{key:"addNewDomain",value:function(){this.setState({open:!0,selected_domain:dn,title:"Create new domain"})}},{key:"onUpdate",value:function(e){this.setState({selected_domain:e})}},{key:"editDomain",value:function(e){e&&this.setState({open:!0,selected_domain:Object(d.a)(Object(d.a)({},dn),e),title:"Edit domain"})}},{key:"deleteDomainAsk",value:function(e){var t=this;this.setState({domain_ask:e}),this.props.openDialog("are you sure you want to remove the domain named <b>"+e.domainName+"</b>?","Remove Domain",(function(e){t.deleteDomain(e)}))}},{key:"deleteDomain",value:function(e){e&&this.state.domain_ask&&this.state.domain_ask.domainId&&this.props.deleteDomain(this.state.domain_ask.domainId),this.props.closeDialog&&this.props.closeDialog()}},{key:"saveDomain",value:function(e){e&&(e.organisationId=this.props.selected_organisation_id,e.kbId=this.props.selected_knowledgebase_id,this.props.updateDomain(e)),this.setState({open:!1})}},{key:"testDomain",value:function(e){e&&(e.organisationId=this.props.selected_organisation_id,e.kbId=this.props.selected_knowledgebase_id,this.setState({selected_domain:e}),this.props.testDomain(e))}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ts.jsxs)("div",{children:[Object(ts.jsx)(ln,{open:this.state.open,title:this.state.title,theme:t,organisation_id:this.props.selected_organisation_id,kb_id:this.props.selected_knowledgebase_id,edge_device_list:this.props.edge_device_list,onSave:function(t){return e.saveDomain(t)},onTest:function(t){return e.testDomain(t)},onUpdate:function(t){return e.onUpdate(t)},onError:function(t,s){return e.props.setError(t,s)},error_title:this.props.error_title,error_msg:this.props.error,domain:this.state.selected_domain}),this.isVisible()&&Object(ts.jsxs)("div",{className:"page-width",children:[Object(ts.jsxs)("table",{className:"table",children:[Object(ts.jsx)("thead",{children:Object(ts.jsxs)("tr",{className:"table-header",children:[Object(ts.jsx)("th",{scope:"col",className:"table-header",children:"name"}),Object(ts.jsx)("th",{scope:"col",className:"table-header",children:"path"}),Object(ts.jsx)("th",{scope:"col",className:"table-header",children:"objects"}),Object(ts.jsx)("th",{scope:"col",className:"table-header",children:"actions"})]})}),Object(ts.jsxs)("tbody",{className:"light"===t?"table-light":"table-dark",children:[this.getDomains().map((function(t){return Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"label",children:t.domainName})}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"label",children:t.basePath})}),Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"label",children:t.numObjects})}),Object(ts.jsxs)("td",{children:[Object(ts.jsx)("div",{className:"label-button",onClick:function(){return e.editDomain(t)},children:Object(ts.jsx)("img",{src:"../images/edit.svg",className:"download-image",title:"edit domain",alt:"edit"})}),Object(ts.jsx)("div",{className:"label-button",onClick:function(){return e.deleteDomainAsk(t)},children:Object(ts.jsx)("img",{src:"../images/delete.svg",className:"download-image",title:"remove domain",alt:"remove"})})]})]},t.domainId)})),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{children:this.props.selected_organisation_id.length>0&&this.props.selected_knowledgebase_id.length>0&&Object(ts.jsx)("div",{className:"image-button",onClick:function(){return e.addNewDomain()},children:Object(ts.jsx)("img",{className:"add-image",src:"../images/add.svg",title:"add new domain",alt:"add new domain"})})})]})]})]}),Object(ts.jsx)(Cs,{theme:t,rowsPerPageOptions:[5,10,25],component:"div",count:this.props.domain_list.length,rowsPerPage:this.state.page_size,page:this.state.page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t){return e.changePage(t)},onChangeRowsPerPage:function(t){return e.changePageSize(t)}})]})]})}}]),s}(a.Component),pn=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id,edge_device_list:e.appReducer.edge_device_list,domain_list:e.appReducer.domain_list,theme:e.appReducer.theme}}),(function(e){return Object(u.b)(es,e)}))(un),hn=(s(409),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,userIdList:e.user_id_List?e.user_id_List:[],selectedFilter:"",availableFilter:""},a}return Object(g.a)(s,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({userIdList:e.user_id_List?e.user_id_List:[]})}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"update_parent",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"getUserMap",value:function(){var e,t={},s=this.getAllUsers(),a=Object(b.a)(s);try{for(a.s();!(e=a.n()).done;){var n=e.value;t[n.id]=n}}catch(r){a.e(r)}finally{a.f()}return t}},{key:"getUserFullName",value:function(e){return e.email}},{key:"removeUserFromGroup",value:function(e){var t,s=[],a=Object(b.a)(this.state.userIdList);try{for(a.s();!(t=a.n()).done;){var n=t.value;n!==e&&s.push(n)}}catch(r){a.e(r)}finally{a.f()}this.setState({userIdList:s}),this.update_parent(s)}},{key:"addUserToGroup",value:function(e){var t=JSON.parse(JSON.stringify(this.state.userIdList));t.push(e),this.setState({userIdList:t}),this.update_parent(t)}},{key:"getAllUsers",value:function(){return this.props.user_list?this.props.user_list:[]}},{key:"getAvailableUsers",value:function(){var e,t=[],s=this.state.availableFilter.trim().toLowerCase(),a=Object(b.a)(this.getAllUsers());try{for(a.s();!(e=a.n()).done;){var n,r=e.value,i=!1,o=Object(b.a)(this.state.userIdList);try{for(o.s();!(n=o.n()).done;){var c=n.value;r.id===c&&(i=!0)}}catch(d){o.e(d)}finally{o.f()}if(!i){var l=this.getUserFullName(r);(0===s.length||l.toLowerCase().indexOf(s)>=0)&&t.push(r)}}}catch(d){a.e(d)}finally{a.f()}return t}},{key:"getSelectedUsers",value:function(){var e,t=this.getUserMap(),s=this.state.userIdList?this.state.userIdList:[],a=[],n=this.state.selectedFilter.trim().toLowerCase(),r=Object(b.a)(s);try{for(r.s();!(e=r.n()).done;){var i=t[e.value];if(i&&i.id){var o=this.getUserFullName(i);(0===n.length||o.toLowerCase().indexOf(n)>=0)&&a.push(i)}}}catch(c){r.e(c)}finally{r.f()}return a}},{key:"selectAll",value:function(){var e,t=[],s=Object(b.a)(this.getAllUsers());try{for(s.s();!(e=s.n()).done;){var a=e.value;t.push(a.id)}}catch(n){s.e(n)}finally{s.f()}this.setState({userIdList:t}),this.update_parent(t)}},{key:"clearAll",value:function(){this.setState({userIdList:[]}),this.update_parent([])}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"user-selector.js: Something went wrong."}):Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("div",{className:"role-block",children:[Object(ts.jsxs)("div",{className:"role-label",children:["selected users",Object(ts.jsx)("span",{className:"filter-label",children:"filter "}),Object(ts.jsxs)("span",{className:"filter-text-box",children:[Object(ts.jsx)("input",{type:"text",className:"filter-text",value:this.state.selectedFilter,onChange:function(t){e.setState({selectedFilter:t.target.value})}}),Object(ts.jsx)("span",{className:"clear",title:"clear filter",onClick:function(){return e.setState({selectedFilter:""})},children:"\xd7"})]})]}),Object(ts.jsx)("div",{className:"role-area",children:this.getSelectedUsers().map((function(t){var s=e.getUserFullName(t);return Object(ts.jsxs)("div",{className:"user-name",onClick:function(){return e.removeUserFromGroup(t.id)},title:s,children:[Object(ts.jsx)("span",{className:"user-group-image-box",children:Object(ts.jsx)("img",{className:"user-group-image",src:"../images/user.svg",alt:"user"})}),Object(ts.jsx)("span",{children:s})]},t.id)}))})]}),Object(ts.jsxs)("div",{className:"role-controls",children:[Object(ts.jsx)("div",{className:"button",title:"move all to selected users",onClick:function(){return e.selectAll()},children:"<<"}),Object(ts.jsx)("div",{className:"button",title:"move all to available users",onClick:function(){return e.clearAll()},children:">>"})]}),Object(ts.jsxs)("div",{className:"role-block",children:[Object(ts.jsxs)("div",{className:"role-label",children:["available users",Object(ts.jsx)("span",{className:"filter-label",children:"filter "}),Object(ts.jsxs)("span",{className:"filter-text-box",children:[Object(ts.jsx)("input",{type:"text",className:"filter-text",value:this.state.availableFilter,onChange:function(t){e.setState({availableFilter:t.target.value})}}),Object(ts.jsx)("span",{className:"clear",title:"clear filter",onClick:function(){return e.setState({availableFilter:""})},children:"\xd7"})]})]}),Object(ts.jsx)("div",{className:"role-area",children:this.getAvailableUsers().map((function(t){var s=e.getUserFullName(t);return Object(ts.jsxs)("div",{className:"user-name",onClick:function(){return e.addUserToGroup(t.id)},title:s,children:[Object(ts.jsx)("span",{className:"user-group-image-box",children:Object(ts.jsx)("img",{className:"user-group-image",src:"../images/user.svg",alt:"user"})}),Object(ts.jsx)("span",{children:s})]},t.id)}))})]})]})}}]),s}(a.Component)),mn=function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={has_error:!1,open:e.open,onSave:e.onSave,onError:e.onError,name:e.group&&e.group.name?e.group.name:"",userIdList:e.group&&e.group.userIdList?e.group.userIdList:[]},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"getAllUsers",value:function(){return this.props.user_list?this.props.user_list:[]}},{key:"getUserMap",value:function(){var e,t={},s=this.getAllUsers(),a=Object(b.a)(s);try{for(a.s();!(e=a.n()).done;){var n=e.value;t[n.id]=n}}catch(r){a.e(r)}finally{a.f()}return t}},{key:"handleSave",value:function(){if(this.state.onSave){var e,t=[],s=this.getUserMap(),a=Object(b.a)(this.state.userIdList);try{for(a.s();!(e=a.n()).done;){var n=e.value,r=s[n];r&&r.id&&t.push(n)}}catch(i){a.e(i)}finally{a.f()}this.state.onSave({name:this.state.name,userIdList:t})}}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open,onSave:e.onSave,onError:e.onError,name:e.group&&e.group.name?e.group.name:"",userIdList:e.group&&e.group.userIdList?e.group.userIdList:[]})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ts.jsx)("h1",{children:"group-edit.js: Something went wrong."}):this.state.open?Object(ts.jsx)("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"inline"},children:Object(ts.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl",role:"document",children:Object(ts.jsxs)("div",{className:"modal-content shadow p-3 mb-5 bg-white rounded",children:[Object(ts.jsx)("div",{className:"modal-header",children:"Edit Group"}),Object(ts.jsx)("div",{className:"modal-body",children:Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("div",{className:"control-row",children:[Object(ts.jsx)("span",{className:"label-2",children:"group name"}),Object(ts.jsx)("span",{className:"text",children:Object(ts.jsx)("input",{type:"text",className:"form-control",autoFocus:!0,onChange:function(t){return e.setState({name:t.target.value})},placeholder:"name",value:this.state.name})})]}),Object(ts.jsx)(hn,{user_list:this.props.user_list,user_id_List:this.state.userIdList,onChange:function(t){return e.setState({userIdList:t})}})]})}),Object(ts.jsxs)("div",{className:"modal-footer",children:[Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleCancel()},children:"Cancel"}),Object(ts.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return e.handleSave()},children:"Save"})]})]})})}):Object(ts.jsx)("div",{})}}]),s}(a.Component),bn=(s(410),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={group_edit:!1,group:{name:"",userIdList:[]},openDialog:e.openDialog,closeDialog:e.closeDialog},a}return Object(g.a)(s,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog,closeDialog:e.closeDialog})}},{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"getGroupList",value:function(){var e=this.props.group_page*this.props.group_page_size,t=e+this.props.group_page_size,s=this.props.group_list,a=this.props.group_filter.trim().toLowerCase();if(a&&a.length>0){var n,r=[],i=Object(b.a)(s);try{for(i.s();!(n=i.n()).done;){var o=n.value;console.log(o),o.name.toLowerCase().indexOf(a)>=0&&r.push(o)}}catch(d){i.e(d)}finally{i.f()}s=r}for(var c=[],l=e;l<t;l++)l<s.length&&c.push(s[l]);return{list:c,size:s.length}}},{key:"deleteGroupAsk",value:function(e){var t=this;e&&(this.props.openDialog('are you sure you want to remove "'+e.name+'"?',"Remove Group",(function(e){t.deleteGroup(e)})),this.setState({group:e}))}},{key:"deleteGroup",value:function(e){e&&this.state.group&&this.props.deleteGroup(this.state.group.name),this.props.closeDialog&&this.props.closeDialog(),this.setState({group_edit:!1,group:{}})}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getGroups()}},{key:"editGroup",value:function(e){this.setState({group_edit:!0,group:{name:e.name,userIdList:e.userIdList}})}},{key:"newGroup",value:function(){this.setState({group_edit:!0,group:{name:"",userIdList:[]}})}},{key:"save",value:function(e){e?e.name&&e.name.trim().length>0?(this.props.saveGroup(e.name,e.userIdList),this.setState({group_edit:!1,group:{}}),this.state.closeDialog&&this.state.closeDialog()):this.props.setError("Error Saving Group","group must have a valid name"):this.setState({group_edit:!1,group:{}})}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0}},{key:"render",value:function(){var e=this,t=this.props.theme,s=this.getGroupList();return Object(ts.jsxs)("div",{className:"group-display",children:[Object(ts.jsx)(mn,{open:this.state.group_edit,theme:t,group:this.state.group,user_list:this.props.user_list,onSave:function(t){return e.save(t)},onError:function(t){return e.props.setError("Error",t)}}),this.isVisible()&&Object(ts.jsxs)("div",{className:"filter-find-box",children:[Object(ts.jsx)("span",{className:"filter-label",children:"find synonyms"}),Object(ts.jsx)("span",{className:"filter-find-text",children:Object(ts.jsx)("input",{type:"text",value:this.props.group_filter,autoFocus:!0,className:t,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setGroupFilter(t.target.value)}})}),Object(ts.jsx)("span",{className:"filter-find-image",children:Object(ts.jsx)("img",{className:"image-size",onClick:function(){return e.props.getGroups()},src:"../images/dark-magnifying-glass.svg",title:"search",alt:"search"})})]}),Object(ts.jsx)("br",{clear:"both"}),this.isVisible()&&Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("table",{className:"table",children:[Object(ts.jsx)("thead",{children:Object(ts.jsxs)("tr",{className:"table-header",children:[Object(ts.jsx)("th",{className:"table-header",children:"group name"}),Object(ts.jsx)("th",{className:"table-header",children:"actions"})]})}),Object(ts.jsxs)("tbody",{children:[s.list.map((function(t){return Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{children:Object(ts.jsx)("div",{className:"label user-group-align-left",children:t.name})}),Object(ts.jsxs)("td",{children:[Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.editGroup(t)},children:Object(ts.jsx)("img",{src:"../images/edit.svg",className:"image-size",title:"edit group",alt:"edit"})}),Object(ts.jsx)("div",{className:"link-button",onClick:function(){return e.deleteGroupAsk(t)},children:Object(ts.jsx)("img",{src:"../images/delete.svg",className:"image-size",title:"remove group",alt:"remove"})})]})]},t.name)})),Object(ts.jsxs)("tr",{children:[Object(ts.jsx)("td",{}),Object(ts.jsx)("td",{children:this.isVisible()&&Object(ts.jsx)("div",{className:"image-button",onClick:function(){return e.newGroup()},children:Object(ts.jsx)("img",{className:"image-size",src:"../images/add.svg",title:"new group",alt:"new group"})})})]})]})]}),Object(ts.jsx)(Cs,{theme:t,rowsPerPageOptions:[5,10,25],component:"div",count:s.size,rowsPerPage:this.props.group_page_size?this.props.group_page_size:10,page:this.props.group_page?this.props.group_page:0,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t){return e.props.setGroupPage(t)},onChangeRowsPerPage:function(t){return e.props.setGroupPageSize(t)}})]})]})}}]),s}(n.a.Component)),jn=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,group_list:e.appReducer.group_list,group_filter:e.appReducer.group_filter,group_page:e.appReducer.group_page,group_page_size:e.appReducer.group_page_size,user_list:e.appReducer.user_list,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation}}),(function(e){return Object(u.b)(es,e)}))(bn),gn=s(182),fn=s.n(gn),vn=(s(465),function(e){Object(ct.a)(s,e);var t=Object(lt.a)(s);function s(e){var a;return Object(j.a)(this,s),(a=t.call(this,e)).state={message_callback:null,message:"",message_title:""},a}return Object(g.a)(s,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"componentDidMount",value:function(){if(N.defined(k.getSession())){this.props.getOrganisationList(),s.hasRole(this.props.user,["admin"])||"organisations"!==this.props.selected_tab||this.props.setupManager();var e=s.hasRole(this.props.user,["admin","manager"]),t=s.hasRoleInOrganisation(this.props.user,this.props.selected_organisation_id,["operator"]),a=this,n=this.props.operator_wait_timeout_in_ms&&this.props.operator_wait_timeout_in_ms>=1e3?this.props.operator_wait_timeout_in_ms:1e4;(e||t)&&setInterval((function(){a.refreshOperator(a)}),n),t&&(this.props.html5_notifications&&0!==this.props.html5_notifications.length||this.props.getHtml5Notifications())}else window.location="/#/"}},{key:"refreshOperator",value:function(e){if(e.props.selected_organisation_id.length>0&&e.props.operators&&e.props.operators.length>0){var t,s=[],a=Object(b.a)(e.props.operators);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.operator_ready&&s.push({operatorId:n.id,isTyping:n.is_typing,clientId:n.client_id})}}catch(i){a.e(i)}finally{a.f()}if(s.length>0){var r={sessionId:e.props.session.id,organisationId:e.props.selected_organisation_id,operatorList:s};this.props.sendOperatorMessage("/ops/refresh",r)}}}},{key:"getStyle",value:function(e,t){var s=this.props.theme;return t?"light"===s?"home-nav-item-disabled no-select":"home-nav-item-disabled-dark no-select":this.props.selected_tab===e?"selected-home-nav-item":"light"===s?"home-nav-item":"home-nav-item-dark"}},{key:"getOrganisationListFiltered",value:function(e,t){if(e&&e.length>0){var s,a=e.toLowerCase(),n=[],r=Object(b.a)(this.props.organisation_list);try{for(r.s();!(s=r.n()).done;){var i=s.value;i.name.toLowerCase().indexOf(a)>=0&&n.push({label:i.name,data:i.id})}}catch(u){r.e(u)}finally{r.f()}t(n)}else{var o,c=[],l=Object(b.a)(this.props.organisation_list);try{for(l.s();!(o=l.n()).done;){var d=o.value;c.push({label:d.name,data:d.id})}}catch(u){l.e(u)}finally{l.f()}t(c)}}},{key:"getKnowledgeBaseListFiltered",value:function(e,t){if(e&&e.length>0){var s,a=e.toLowerCase(),n=[],r=Object(b.a)(this.props.knowledge_base_list);try{for(r.s();!(s=r.n()).done;){var i=s.value;i.name.toLowerCase().indexOf(a)>=0&&n.push({label:i.name,data:i.kbId})}}catch(u){r.e(u)}finally{r.f()}t(n)}else{var o,c=[],l=Object(b.a)(this.props.knowledge_base_list);try{for(l.s();!(o=l.n()).done;){var d=o.value;c.push({label:d.name,data:d.kbId})}}catch(u){l.e(u)}finally{l.f()}t(c)}}},{key:"getEdgeDeviceList",value:function(e,t){if(this.props.edge_device_list)if(e&&e.length>0){var s,a=e.toLowerCase(),n=[],r=Object(b.a)(this.props.edge_device_list);try{for(r.s();!(s=r.n()).done;){var i=s.value;i.name.toLowerCase().indexOf(a)>=0&&n.push({label:i.name,data:i.edgeId})}}catch(u){r.e(u)}finally{r.f()}t(n)}else{var o,c=[],l=Object(b.a)(this.props.edge_device_list);try{for(l.s();!(o=l.n()).done;){var d=o.value;c.push({label:d.name,data:d.edgeId})}}catch(u){l.e(u)}finally{l.f()}t(c)}}},{key:"openDialog",value:function(e,t,s){this.setState({dialog_open:!0,message:e,message_title:t,message_callback:s})}},{key:"closeDialog",value:function(){this.setState({dialog_open:!1,message:"",message_title:"",message_callback:null})}},{key:"connectionError",value:function(e){this.props.setOperatorConnected(!1),this.props.setError("Operator Connection",e)}},{key:"convertOrganisationList",value:function(e){var t,s=[],a=Object(b.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.id&&n.name&&s.push({id:n.id,name:n.name})}}catch(r){a.e(r)}finally{a.f()}return s}},{key:"convertKbList",value:function(e){var t,s=[],a=Object(b.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.kbId&&n.name&&s.push({id:n.kbId,name:n.name})}}catch(r){a.e(r)}finally{a.f()}return s}},{key:"convertEdgeList",value:function(e){var t,s=[],a=Object(b.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.edgeId&&n.name&&s.push({id:n.edgeId,name:n.name})}}catch(r){a.e(r)}finally{a.f()}return s}},{key:"render",value:function(){var e=this,t=s.hasRole(this.props.user,["admin"]),a=s.hasRoleInOrganisation(this.props.user,this.props.selected_organisation_id,["operator"]),n=[];if(this.props.operators){var r,i=Object(b.a)(this.props.operators);try{for(i.s();!(r=i.n()).done;){var o=r.value;o&&o.id&&n.push("/chat/"+o.id)}}catch(l){i.e(l)}finally{i.f()}}var c=this.props.theme;return Object(ts.jsxs)("div",{className:"home-screen",children:[this.props.busy&&Object(ts.jsx)("div",{className:"light"===c?"busy":"busyDark"}),Object(ts.jsx)(as,{title:"",signed_in:!0}),Object(ts.jsx)(rs,{title:this.props.error_title,theme:c,message:this.props.error,callback:function(){return e.props.closeError()}}),Object(ts.jsx)(Os,{callback:function(t){e.state.message_callback&&e.state.message_callback(t)},open:this.state.message.length>0,theme:this.props.theme,message:this.state.message,title:this.state.message_title}),Object(ts.jsx)(fn.a,{url:window.ENV.ws_base,topics:n,ref:function(t){e.clientRef=t},onMessage:function(t){e.props.processOperatorMessage(t)},onConnect:function(){return e.props.setOperatorConnected(!0)},onDisconnect:function(){return e.props.setOperatorConnected(!1)},onError:function(t){return e.connectionError(t)}}),Object(ts.jsxs)("div",{children:[Object(ts.jsxs)("div",{className:"page-nav",children:[s.hasRole(this.props.user,["admin"])&&Object(ts.jsx)("div",{className:this.getStyle("organisations",!1),onClick:function(){return e.props.selectTab("organisations")},children:"organisations"}),s.hasRole(this.props.user,["admin","manager"])&&Object(ts.jsx)("div",{className:this.getStyle("knowledge bases",!1),onClick:function(){return e.props.selectTab("knowledge bases")},children:"knowledge bases"}),s.hasRole(this.props.user,["admin","manager"])&&Object(ts.jsx)("div",{className:this.getStyle("edge devices",!1),onClick:function(){return e.props.selectTab("edge devices")},children:"Edge devices"}),s.hasRole(this.props.user,["admin","manager"])&&this.props.edge_device_list&&this.props.edge_device_list.length>0&&Object(ts.jsx)("div",{className:this.getStyle("edge commands",!1),onClick:function(){return e.props.selectTab("edge commands")},children:"Edge commands"}),s.hasRole(this.props.user,["admin","manager"])&&Object(ts.jsx)("div",{className:this.getStyle("users",!1),onClick:function(){return e.props.selectTab("users")},children:"user manager"}),s.hasRole(this.props.user,["admin","manager"])&&Object(ts.jsx)("div",{className:this.getStyle("groups",!1),onClick:function(){return e.props.selectTab("groups")},children:"group manager"}),Object(ts.jsx)("div",{className:this.getStyle("operator",!this.props.operator_connected||!a),onClick:function(){a&&e.props.selectTab("operator")},children:"operator"}),s.hasRole(this.props.user,["admin","manager"])&&Object(ts.jsx)("div",{className:this.getStyle("inventory",!1),onClick:function(){return e.props.selectTab("inventory")},children:"inventory"}),s.hasRole(this.props.user,["admin","manager"])&&Object(ts.jsx)("div",{className:this.getStyle("document sources",!1),onClick:function(){return e.props.selectTab("document sources")},children:"document sources"}),s.hasRole(this.props.user,["admin","manager"])&&Object(ts.jsx)("div",{className:this.getStyle("documents",!1),onClick:function(){return e.props.selectTab("documents")},children:"documents"}),s.hasRole(this.props.user,["admin","manager"])&&Object(ts.jsx)("div",{className:this.getStyle("active directory",!1),onClick:function(){return e.props.selectTab("active directory")},children:"active directory"}),s.hasRole(this.props.user,["admin","manager"])&&Object(ts.jsx)("div",{className:this.getStyle("mind",!1),onClick:function(){return e.props.selectTab("mind")},children:"the mind"}),s.hasRole(this.props.user,["admin","manager"])&&Object(ts.jsx)("div",{className:this.getStyle("mind-test",!1),onClick:function(){return e.props.selectTab("mind-test")},children:"test the mind"}),s.hasRole(this.props.user,["admin","manager"])&&Object(ts.jsx)("div",{className:this.getStyle("synonyms",!1),onClick:function(){return e.props.selectTab("synonyms")},children:"synonyms"}),s.hasRole(this.props.user,["admin","manager"])&&Object(ts.jsx)("div",{className:this.getStyle("semantics"),onClick:function(){return e.props.selectTab("semantics")},children:"semantics"}),s.hasRole(this.props.user,["admin","manager"])&&Object(ts.jsx)("div",{className:this.getStyle("syn-sets"),onClick:function(){return e.props.selectTab("syn-sets")},children:"syn-sets"}),s.hasRole(this.props.user,["admin","manager"])&&Object(ts.jsx)("div",{className:this.getStyle("reports",!1),onClick:function(){return e.props.selectTab("reports")},children:"reports"}),s.hasRole(this.props.user,["admin"])&&Object(ts.jsx)("div",{className:this.getStyle("logs",!1),onClick:function(){return e.props.selectTab("logs")},children:"logs"})]}),Object(ts.jsxs)("div",{className:"page-content",children:["organisations"!==this.props.selected_tab&&"os"!==this.props.selected_tab&&"operator"!==this.props.selected_tab&&"license"!==this.props.selected_tab&&t&&Object(ts.jsxs)("div",{className:"organisation-select",children:[Object(ts.jsx)("div",{className:"lhs",children:"organisation"}),Object(ts.jsx)("div",{className:"rhs",children:Object(ts.jsx)(ws,{theme:c,label:"organisation",value:this.props.selected_organisation_id,data_list:this.convertOrganisationList(this.props.organisation_list),onSelect:function(t){return e.props.selectOrganisation(t)}})})]}),"organisations"!==this.props.selected_tab&&"os"!==this.props.selected_tab&&"license"!==this.props.selected_tab&&"operator"!==this.props.selected_tab&&!t&&Object(ts.jsxs)("div",{className:"organisation-select",children:[Object(ts.jsx)("div",{className:"lhs",children:"organisation"}),Object(ts.jsx)("div",{className:"rhs",children:Object(ts.jsx)("div",{className:"organisation-label",children:this.props.selected_organisation})})]}),"organisations"!==this.props.selected_tab&&"os"!==this.props.selected_tab&&"users"!==this.props.selected_tab&&"groups"!==this.props.selected_tab&&"operator"!==this.props.selected_tab&&"license"!==this.props.selected_tab&&"knowledge bases"!==this.props.selected_tab&&"logs"!==this.props.selected_tab&&"edge devices"!==this.props.selected_tab&&"edge commands"!==this.props.selected_tab&&Object(ts.jsxs)("div",{className:"knowledgebase-select",children:[Object(ts.jsx)("div",{className:"lhs",children:"knowledge base"}),Object(ts.jsx)("div",{className:"rhs",children:Object(ts.jsx)(ws,{label:"knowledge base",value:this.props.selected_knowledgebase_id,data_list:this.convertKbList(this.props.knowledge_base_list),onSelect:function(t){return e.props.selectKnowledgeBase(t)},theme:c})})]}),"edge commands"===this.props.selected_tab&&Object(ts.jsxs)("div",{className:"knowledgebase-select",children:[Object(ts.jsx)("div",{className:"lhs",children:"edge device"}),Object(ts.jsx)("div",{className:"rhs",children:Object(ts.jsx)(ws,{label:"edge device",theme:c,value:this.props.selected_edge_device_id,data_list:this.convertEdgeList(this.props.edge_device_list),onSelect:function(t){return e.props.selectEdgeDevice(t)}})})]}),"organisations"===this.props.selected_tab&&Object(ts.jsx)(Is,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"knowledge bases"===this.props.selected_tab&&Object(ts.jsx)(Bs,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"edge devices"===this.props.selected_tab&&Object(ts.jsx)(Js,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"edge commands"===this.props.selected_tab&&Object(ts.jsx)(Hs,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"users"===this.props.selected_tab&&Object(ts.jsx)(As,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"groups"===this.props.selected_tab&&Object(ts.jsx)(jn,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"operator"===this.props.selected_tab&&Object(ts.jsx)(cn,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"inventory"===this.props.selected_tab&&Object(ts.jsx)(Qs,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"document sources"===this.props.selected_tab&&Object(ts.jsx)(va,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"documents"===this.props.selected_tab&&Object(ts.jsx)(ya,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"active directory"===this.props.selected_tab&&Object(ts.jsx)(pn,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"mind"===this.props.selected_tab&&Object(ts.jsx)(Sa,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"mind-test"===this.props.selected_tab&&Object(ts.jsx)(Ea,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"synonyms"===this.props.selected_tab&&Object(ts.jsx)(Pa,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"semantics"===this.props.selected_tab&&Object(ts.jsx)(La,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"syn-sets"===this.props.selected_tab&&Object(ts.jsx)(Ma,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"reports"===this.props.selected_tab&&Object(ts.jsx)(Ka,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"logs"===this.props.selected_tab&&Object(ts.jsx)(Ba,{openDialog:function(t,s,a){return e.openDialog(t,s,a)},closeDialog:function(){return e.closeDialog()}}),"invalid"===this.props.selected_tab&&Object(ts.jsx)("div",{children:"You do not have access to this application"})]})]})]})}}],[{key:"getTab",value:function(e){return s.hasRole(e,["admin"])?"organisations":s.hasRole(e,["manager"])?"users":s.hasRole(e,["reporter"])?"reports":"invalid"}},{key:"hasRole",value:function(e,t){if(e&&e.roles){var s,a=Object(b.a)(e.roles);try{for(a.s();!(s=a.n()).done;){var n=s.value;if(t.indexOf(n.role)>=0)return!0}}catch(r){a.e(r)}finally{a.f()}}return!1}},{key:"hasRoleInOrganisation",value:function(e,t,s){if(e&&e.roles){var a,n=Object(b.a)(e.roles);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.organisationId===t&&s.indexOf(r.role)>=0)return!0}}catch(i){n.e(i)}finally{n.f()}}return!1}},{key:"canEdit",value:function(e,t,a){return!!t||!s.hasRole(e,["admin"])&&a}},{key:"canDelete",value:function(e,t,a,n){return e.email!==t.email&&(!!a||!s.hasRole(e,["admin"])&&n)}},{key:"pad",value:function(e){return(""+e).padStart(2,"0")}},{key:"pad2",value:function(e){return(""+e).padStart(3,"0")}}]),s}(a.Component)),_n=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,operator_wait_timeout_in_ms:e.appReducer.operator_wait_timeout_in_ms,busy:e.appReducer.busy,theme:e.appReducer.theme,user:e.appReducer.user,selected_tab:e.appReducer.selected_tab,session:e.appReducer.session,operator_connected:e.appReducer.operator_connected,operators:e.appReducer.operators,organisation_list:e.appReducer.organisation_list,knowledge_base_list:e.appReducer.knowledge_base_list,html5_notifications:e.appReducer.html5_notifications,selected_organisation:e.appReducer.selected_organisation,selected_organisation_id:e.appReducer.selected_organisation_id,selected_knowledgebase:e.appReducer.selected_knowledgebase,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id,edge_device_list:e.appReducer.edge_device_list,selected_edge_device:e.appReducer.selected_edge_device,selected_edge_device_id:e.appReducer.selected_edge_device_id}}),(function(e){return Object(u.b)(es,e)}))(vn);s(127);var yn=function(){var e={appReducer:it},t=[p.a,ot],s=[],a=Object(u.c)(Object(d.a)(Object(d.a)({},e),{},{routing:m.routerReducer}));return Object(u.e)(a,y(),u.d.apply(void 0,[u.a.apply(void 0,t)].concat(s)))}();yn.subscribe((function(){x(yn.getState())})),i.a.render(Object(ts.jsx)(o.a,{store:yn,children:Object(ts.jsx)("div",{children:Object(ts.jsx)(c.a,{basename:"/",children:Object(ts.jsxs)("div",{children:[Object(ts.jsx)(l.a,{exact:!0,path:"/",component:os}),Object(ts.jsx)(l.a,{exact:!0,path:"/home",component:_n}),Object(ts.jsx)(l.a,{exact:!0,path:"/search",component:xs}),Object(ts.jsx)(l.a,{path:"/reset-password-request",component:ls}),Object(ts.jsx)(l.a,{path:"/reset-password-response",component:ps}),Object(ts.jsx)(l.a,{exact:!0,path:"/foss-license",component:ms}),Object(ts.jsx)(l.a,{exact:!0,path:"/license-agreement",component:js})]})})})}),document.getElementById("content"))},79:function(e,t,s){},82:function(e,t,s){},96:function(e,t,s){}},[[469,1,2]]]);
//# sourceMappingURL=main.db221967.chunk.js.map