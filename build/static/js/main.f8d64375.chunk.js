(this["webpackJsonpsimsage-admin"]=this["webpackJsonpsimsage-admin"]||[]).push([[0],{555:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),i=a(27),r=a.n(i),o=a(19),c=a(266),l=a(29),d=a(3),u=a(16),p=a(248),h=a(249),b=a(250),m=a(14),g=a(8),f=a(9),j=a(81),x=a.n(j);function v(){return{selected_tab:"organisations",notification_list:[],show_notifications:!1,operator_wait_timeout_in_ms:1e4,notification_list_display_size:50,selected_organisation_id:"",selected_organisation:"",organisation_filter:"",organisation_list:[],selected_knowledgebase:null,selected_knowledgebase_id:"",knowledge_base_list:[],edge_device_list:[],selected_edge_device:null,selected_edge_device_id:"",edge_device_command_list:[],inventorize_list:[],inventorize_busy:!1,user_list:[],user_filter:"",crawler_list:[],theme:window.ENV.theme,busy:!1,uploading:!1,session:null,user:null,license:null,document_list:[],document_previous:null,document_filter:"",prev_document_filter:"",document_page:0,document_page_size:5,num_documents:0,document_nav_list:["null"],mind_item_list:[],mind_item_previous:null,mind_item_filter:"",mind_item_page:0,mind_item_page_size:5,num_mind_items:0,prev_mind_item_filter:"",mind_item_nav_list:["null"],bot_query:"",bot_query_result_list:[],bot_query_page_size:10,bot_query_threshold:.01,synonym_list:[],synonym_prev_id:null,synonym_filter:"",synonym_page:0,synonym_page_size:5,num_synonyms:0,prev_synonym_filter:"",synonym_nav_list:["null"],semantic_list:[],semantic_prev_id:null,semantic_filter:"",semantic_page:0,semantic_page_size:5,num_semantics:0,prev_semantic_filter:"",semantic_nav_list:["null"],synset_filter:"",synset_list:[],synset_page:0,synset_page_size:10,synset_total_size:0,report_date:S.toIsoDate((new Date).getUTCDate()),report_num_items:20,access_frequency:{labels:[]},general_statistics:[],query_word_frequency:[],file_type_statistics:[],operators:[S.createOperator()],num_active_connections:0,operator_connected:!1,html5_notifications:"",log_list:[],log_date:S.toIsoDateTime(new Date),log_hours:2,log_type:"All",log_service:"All",log_refresh:0,domain_list:[],semantic_display_category_list:[],defined_semantic_list:[],error_title:"Error",error:""}}function y(){try{var e=localStorage.getItem("https://simsage.ai/state");return null===e||window.location.href.endsWith("/#/")?{appReducer:v()}:JSON.parse(e)}catch(t){return{appReducer:v()}}}function _(e){try{var t=JSON.stringify(e);localStorage.setItem("https://simsage.ai/state",t)}catch(a){}}var O=function(){function e(){Object(g.a)(this,e)}return Object(f.a)(e,null,[{key:"http_post",value:function(t,a,s,n){var i=window.ENV.api_base;console.log("POST "+i+t),x.a.post(i+t,a,e.getHeaders()).then((function(e){s&&s(e)})).catch((function(t){n&&(void 0===t.response?n("Servers not responding or cannot contact Servers"):n(e.get_error(t)))}))}},{key:"http_put",value:function(t,a,s,n){var i=window.ENV.api_base;console.log("PUT "+i+t),x.a.put(i+t,a,e.getHeaders()).then((function(e){s&&s(e)})).catch((function(t){n&&(void 0===t.response?n("Servers not responding or cannot contact Servers"):n(e.get_error(t)))}))}},{key:"http_get",value:function(t,a,s){var n=window.ENV.api_base;return"/stats/stats/os"!==t&&console.log("GET "+n+t),x.a.get(n+t,e.getHeaders()).then((function(e){a&&a(e)})).catch((function(t){s&&(void 0===t.response?s("Servers not responding or cannot contact Servers"):s(e.get_error(t)))}))}},{key:"http_delete",value:function(t,a,s){var n=window.ENV.api_base;console.log("DELETE "+n+t),x.a.delete(n+t,e.getHeaders()).then((function(e){a&&a(e)})).catch((function(t){s&&(void 0===t||void 0===t.response?s("Servers not responding or cannot contact Servers"):s(e.get_error(t)))}))}},{key:"get_backup_url",value:function(t,a){var s=e.getSession();return window.ENV.api_base+"/backup/backup/"+encodeURIComponent(s.id)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)}},{key:"get_mind_dump_url",value:function(t,a){var s=e.getSession();return window.ENV.api_base+"/backup/mind-dump/"+encodeURIComponent(s.id)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)}},{key:"get_inventorize_dump_url",value:function(t,a,s){var n=e.getSession();return window.ENV.api_base+"/document/parquet/"+encodeURIComponent(n.id)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(s)}},{key:"get_inventorize_dump_spreadhseet_url",value:function(t,a,s){var n=e.getSession();return window.ENV.api_base+"/document/spreadsheet/"+encodeURIComponent(n.id)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(s)}},{key:"get_crawler_url",value:function(t,a,s){var n=e.getSession();return window.ENV.api_base+"/crawler/download/"+encodeURIComponent(n.id)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(s)}},{key:"get_html_url",value:function(t,a){var s=e.getSession();return window.ENV.api_base+"/knowledgebase/download/"+t+"/"+encodeURIComponent(s.id)+"/"+encodeURIComponent(a)}},{key:"get_query_log_url",value:function(t,a,s,n){var i=e.getSession();return window.ENV.api_base+"/stats/query-logs/"+encodeURIComponent(i.id)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(s)+"/"+encodeURIComponent(n)}},{key:"get_export_archive_url",value:function(t,a,s){var n=e.getSession();return window.ENV.api_base+"/crawler/wp-archive/download/"+encodeURIComponent(n.id)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(s)}},{key:"toUrl",value:function(e){return window.ENV.api_base+e}},{key:"get_error",value:function(e){if("string"===typeof e&&0===e.indexOf("{")){var t=JSON.parse(e);return t&&t.response&&t.response.data&&t.response.data.error?t.response.data.error:e}return e&&e.response&&e.response.data&&e.response.data.error?e.response.data.error:e}},{key:"getISODate",value:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}},{key:"getSession",value:function(){var e=y();return e&&e.appReducer&&e.appReducer.session&&e.appReducer.session.id?e.appReducer.session:null}},{key:"getHeaders",value:function(){var t=e.getSession();return t&&t.id?{headers:{"API-Version":window.ENV.api_version,"Content-Type":"application/json","Session-Id":t.id}}:{headers:{"API-Version":window.ENV.api_version,"Content-Type":"application/json"}}}}]),e}(),w=O,k=function(){function e(){Object(g.a)(this,e)}return Object(f.a)(e,null,[{key:"defined",value:function(e){return null!==e&&void 0!==e}},{key:"createGuid",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"createOperator",value:function(){return{id:e.createGuid(),conversation_list:[],operator_ready:!1,question_id:"",question:"",answer_id:"",answer:"",client_id:"",client_kb_id:"",client_kb_name:"",is_typing:!1,typing_time:0,current_question:"",prev_answer:""}}},{key:"formatSizeUnits",value:function(e){return e>=1073741824?e=(e/1073741824).toFixed(2)+" GB":e>=1048576?e=(e/1048576).toFixed(2)+" MB":e>=1024?e=(e/1024).toFixed(2)+" KB":e>1?e+=" bytes":1===e?e+=" byte":e="0 bytes",e}},{key:"unixTimeConvert",value:function(t){if(t>1e3){var a=new Date(t),s=a.getUTCFullYear(),n=a.getUTCMonth()+1,i=a.getUTCDate(),r=a.getUTCHours(),o=a.getUTCMinutes(),c=a.getUTCSeconds();return s+"/"+e.pad2(n)+"/"+e.pad2(i)+" "+e.pad2(r)+":"+e.pad2(o)+":"+e.pad2(c)}return""}},{key:"getSystemTime",value:function(){return(new Date).getTime()}},{key:"toIsoDate",value:function(t){t&&t.getFullYear||(t=new Date);var a=t.getFullYear(),s=t.getMonth()+1,n=t.getDate();return a+"-"+e.pad2(s)+"-"+e.pad2(n)+"T00:00:00.000"}},{key:"toIsoDateTime",value:function(t){t&&t.getFullYear||(t=new Date);var a=t.getFullYear(),s=t.getMonth()+1,n=t.getDate(),i=t.getHours()+0;return i<0&&(i+=24),i>=24&&(i-=24),a+"-"+e.pad2(s)+"-"+e.pad2(n)+"T"+e.pad2(i)+":00:00.000"}},{key:"pad2",value:function(e){return(""+e).padStart(2,"0")}},{key:"setupTimer",value:function(){return!0}},{key:"merge_notifications",value:function(e,t){var a={},s=[];if(e){var n,i=Object(m.a)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;a[r.id]=!0,s.push(r)}}catch(d){i.e(d)}finally{i.f()}}if(t){var o,c=Object(m.a)(t);try{for(c.s();!(o=c.n()).done;){var l=o.value;a.hasOwnProperty(l.id)||(a[l.id]=!0,s.push(l))}}catch(d){c.e(d)}finally{c.f()}}return s}},{key:"getThemeColour",value:function(e){return"light"===e?"#2a2a2e":"#e0e0e0"}},{key:"getThemeBackground",value:function(e){return"light"===e?"#ffffff":"#2a2a2e"}},{key:"passwordResetRequest",value:function(e,t,a){e&&e.length>0?O.http_post("/auth/reset-password-request",{email:e},(function(e){t(e.data.session,e.data.user)}),(function(e){a(e)})):a("you must provide your SimSage email address")}},{key:"resetPassword",value:function(e,t,a,s,n){if(e&&e.length>0&&t.length>0){var i={email:e,password:t,resetId:a};O.http_post("/auth/reset-password",i,(function(e){s(e.data.session,e.data.user)}),(function(e){n(e)}))}else n("please complete and check all fields")}},{key:"getUser",value:function(){var e=localStorage.getItem("user");return e&&e.startsWith("{")?JSON.parse(e):null}},{key:"uploadDocument",value:function(e,t,a){O.http_put("/document/upload",e,(function(e){t(e.data)}),(function(e){a(e)}))}},{key:"testCrawler",value:function(e,t,a,s,n){O.http_get("/crawler/crawler/test/"+encodeURIComponent(e)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a),(function(e){e.data&&e.data.errorStr&&e.data.errorStr.length>0?n(e.data.errorStr):s(e.data)}),(function(e){n(e)}))}},{key:"semanticSearch",value:function(e,t,a){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,i=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0;O.http_put("/semantic/search",{organisationId:e,kbId:t,botQuery:a,superSearch:a,numResults:s,scoreThreshold:n},(function(e){i(e.data)}),(function(e){r(e)}))}},{key:"writeToClipboard",value:function(e){return!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText)&&(navigator.clipboard.writeText(e),!0)}}]),e}(),S=k,C="sign in",I="sign out",R="set theme",D="set user list",T="update user",N="set user filter",E="get organisation list",L="select organisation",P="update organisation",B="set organisation filter",z="reset selected kb",A="get knowledge bases",U="selected knowledge base",W="select edge device",F="get inventorize list",M="get inventorize busy",q="uploading program",Y="uploading program finished",H="uploading wp archive",K="uploading wp archive finished",J="get crawlers",V="get domains",G="get documents paginated",Q="set document filter",Z="set document page",X="set document page size",$="reset document pagination",ee="set mind items paginated",te="set mind item page size",ae="set mind item page",se="reset mind item pagination",ne="set mind item filter",ie="set bot query list",re="set bot query string",oe="set synonyms paginated",ce="set synonym page size",le="set synonym page",de="reset synonym pagination",ue="set synonym filter",pe="set semantics paginated",he="set semantic page size",be="set semantic page",me="reset semantic pagination",ge="set semantic filter",fe="set semantic display list",je="set synset filter",xe="set synset list",ve="set synset page",ye="set synset page size",_e="reset synset pagination",Oe="get license",we="busy",ke="error",Se="close error",Ce="select tab",Ie="hide notifications",Re="show notifications",De="set notification list",Te="set report date",Ne="set report graphs",Ee="process operator message",Le="set operator connected",Pe="add conversation",Be="mark conversation used",ze="operator ready",Ae="set operator answer",Ue="set operator question",We="operator clear user",Fe="clear previous answer",Me="add operator",qe="remove operator",Ye="stop client typing",He="get html5 notifications",Ke="set log list",Je="set log date",Ve="set log hours",Ge="set log type",Qe="set log service",Ze="set log refresh",Xe="get edge devices",$e="get edge device commands",et="active connections";function tt(e){e&&(e.conversation_list=[],e.client_id="",e.client_kb_id="",e.client_kb_name="",e.question_id="",e.question="",e.answer_id="",e.answer="",e.prev_answer="",e.current_question="",e.is_typing=!1,e.typing_time=0)}var at=function(e,t){if(e=e||v(),window.ENV.debug&&console.debug("applicationReducer:"+t.type),t.type===ke&&console.log("ERROR: ("+JSON.stringify(t)+")"),t.type===I)return e=v();switch(t.type){default:break;case ke:return t&&t.error&&t.error.length>0&&t.error.indexOf("invalid session id")>=0?(window.location="/#/",Object(d.a)(Object(d.a)({},e),{},{session:null,user:null,error_title:"",error:"",busy:!1,uploading:!1})):Object(d.a)(Object(d.a)({},e),{},{error_title:t.title,error:t.error,busy:!1,uploading:!1});case z:return Object(d.a)(Object(d.a)({},e),{},{selected_organisation_id:"",selected_organisation:null,selected_knowledgebase_id:"",selected_knowledgebase:null});case Se:return Object(d.a)(Object(d.a)({},e),{},{error_title:"",error:"",busy:!1});case we:return Object(d.a)(Object(d.a)({},e),{},{busy:t.busy});case R:return Object(d.a)(Object(d.a)({},e),{},{theme:t.theme});case C:var a="operator";if(t.user&&t.user.roles){var s,n=Object(m.a)(t.user.roles);try{for(n.s();!(s=n.n()).done;){var i=s.value;"admin"!==i.role&&"manager"!==i.role||(a="organisations")}}catch(va){n.e(va)}finally{n.f()}}var r="";if(t.user&&t.user.roles){var o,c=Object(m.a)(t.user.roles);try{for(c.s();!(o=c.n()).done;){var l=o.value;l&&l.organisationId&&""===r&&(r=l.organisationId)}}catch(va){c.e(va)}finally{c.f()}}return Object(d.a)(Object(d.a)({},e),{},{session:t.session,user:t.user,selected_tab:a,selected_organisation_id:r,selected_organisation:"",busy:!1});case Oe:return Object(d.a)(Object(d.a)({},e),{},{license:t.license,busy:!1});case E:return Object(d.a)(Object(d.a)({},e),{},{organisation_list:t.organisation_list,busy:!1});case B:return Object(d.a)(Object(d.a)({},e),{},{organisation_filter:t.filter});case A:return Object(d.a)(Object(d.a)({},e),{},{knowledge_base_list:t.knowledge_base_list,busy:!1});case F:return Object(d.a)(Object(d.a)({},e),{},{inventorize_list:t.inventorize_list,busy:!1});case M:return Object(d.a)(Object(d.a)({},e),{},{inventorize_busy:t.busy,busy:!1});case L:return Object(d.a)(Object(d.a)({},e),{},{selected_organisation_id:t.id,selected_organisation:t.name,selected_knowledgebase_id:"",selected_knowledgebase:"",selected_edge_device_id:"",selected_edge_device:"",busy:!1});case P:var u,p=[],h=t.organisation,b=!1,g=Object(m.a)(e.organisation_list);try{for(g.s();!(u=g.n()).done;){var f=u.value;f.id===h.id?(p.push(h),b=!0):p.push(f)}}catch(va){g.e(va)}finally{g.f()}return b||p.push(h),Object(d.a)(Object(d.a)({},e),{},{organisation_list:p,busy:!1});case U:return Object(d.a)(Object(d.a)({},e),{},{selected_knowledgebase_id:t.id,selected_knowledgebase:t.name,busy:!1});case W:return Object(d.a)(Object(d.a)({},e),{},{selected_edge_device_id:t.id,selected_edge_device:t.name,busy:!1});case I:return Object(d.a)(Object(d.a)({},e),{},{session:null,user:null,busy:!1});case Ce:return Object(d.a)(Object(d.a)({},e),{},{selected_tab:t.selected_tab,log_refresh:0,busy:!1});case Ie:return Object(d.a)(Object(d.a)({},e),{},{show_notifications:!1});case Re:return Object(d.a)(Object(d.a)({},e),{},{show_notifications:!0});case De:return Object(d.a)(Object(d.a)({},e),{},{notification_list:t.notification_list});case D:return Object(d.a)(Object(d.a)({},e),{},{user_list:t.user_list,busy:!1});case N:return Object(d.a)(Object(d.a)({},e),{},{user_filter:t.filter});case T:return Object(d.a)(Object(d.a)({},e),{},{user:t.user,busy:!1});case J:return Object(d.a)(Object(d.a)({},e),{},{crawler_list:t.crawler_list,busy:!1});case V:return Object(d.a)(Object(d.a)({},e),{},{domain_list:t.domain_list,busy:!1});case q:return Object(d.a)(Object(d.a)({},e),{},{uploading:!0});case Y:return Object(d.a)(Object(d.a)({},e),{},{uploading:!1,busy:!1});case H:return Object(d.a)(Object(d.a)({},e),{},{uploading:!0});case K:return Object(d.a)(Object(d.a)({},e),{},{uploading:!1,busy:!1});case G:return Object(d.a)(Object(d.a)({},e),{},{document_list:t.document_list,num_documents:t.num_documents,prev_document_filter:t.document_filter,busy:!1});case Q:return Object(d.a)(Object(d.a)({},e),{},{document_page:0,document_filter:t.filter});case Z:var j=e.document_nav_list;return t.page>=j.length&&j.push(t.prev_url),Object(d.a)(Object(d.a)({},e),{},{document_page:t.page,document_previous:t.prev_url,document_nav_list:j,busy:!1});case X:return Object(d.a)(Object(d.a)({},e),{},{document_page:0,document_previous:null,document_nav_list:["null"],document_page_size:t.page_size});case $:return Object(d.a)(Object(d.a)({},e),{},{document_page:0,document_previous:null,document_nav_list:["null"],busy:!1});case"mind find":return Object(d.a)(Object(d.a)({},e),{},{mind_item_list:t.mind_item_list,busy:!1});case ee:return Object(d.a)(Object(d.a)({},e),{},{mind_item_list:t.data.mindItemList,num_mind_items:t.data.numMindItems,prev_mind_item_filter:t.data.filter,busy:!1});case ne:return Object(d.a)(Object(d.a)({},e),{},{mind_item_page:0,mind_item_filter:t.filter});case ae:var x=e.mind_item_nav_list;return t.page>=x.length&&x.push(t.prev_id),Object(d.a)(Object(d.a)({},e),{},{mind_item_page:t.page,mind_item_previous:t.prev_id,mind_item_nav_list:x,busy:!1});case te:return Object(d.a)(Object(d.a)({},e),{},{mind_item_page:0,mind_item_previous:null,mind_item_nav_list:["null"],mind_item_page_size:t.page_size});case se:return Object(d.a)(Object(d.a)({},e),{},{mind_item_page:0,mind_item_previous:null,mind_item_nav_list:["null"],busy:!1});case ie:return Object(d.a)(Object(d.a)({},e),{},{bot_query_result_list:t.bot_query_result_list,busy:!1});case re:return Object(d.a)(Object(d.a)({},e),{},{bot_query:t.bot_query});case oe:return Object(d.a)(Object(d.a)({},e),{},{synonym_list:t.data.synonymList,num_synonyms:t.data.numSynonyms,prev_synonym_filter:t.data.filter,busy:!1});case le:var y=e.synonym_nav_list;return t.page>=y.length&&y.push(t.prev_id),Object(d.a)(Object(d.a)({},e),{},{synonym_page:t.page,synonym_prev_id:t.prev_id,synonym_nav_list:y,busy:!1});case ce:return Object(d.a)(Object(d.a)({},e),{},{synonym_page:0,synonym_prev_id:null,synonym_nav_list:["null"],synonym_page_size:t.page_size});case de:return Object(d.a)(Object(d.a)({},e),{},{synonym_page:0,synonym_prev_id:null,synonym_nav_list:["null"],busy:!1});case ue:return Object(d.a)(Object(d.a)({},e),{},{synonym_page:0,synonym_filter:t.synonym_filter});case pe:return Object(d.a)(Object(d.a)({},e),{},{semantic_list:t.data.semanticList,num_semantics:t.data.numSemantics,prev_semantic_filter:t.data.filter,busy:!1});case be:var _=e.semantic_nav_list;return t.page>=_.length&&_.push(t.prev_word),Object(d.a)(Object(d.a)({},e),{},{semantic_page:t.page,semantic_prev_word:t.prev_word,semantic_nav_list:_,busy:!1});case he:return Object(d.a)(Object(d.a)({},e),{},{semantic_page:0,semantic_prev_id:null,semantic_nav_list:["null"],semantic_page_size:t.page_size});case me:return Object(d.a)(Object(d.a)({},e),{},{semantic_page:0,semantic_prev_id:null,semantic_nav_list:["null"],busy:!1});case fe:return Object(d.a)(Object(d.a)({},e),{},{semantic_display_category_list:t.semantic_display_category_list,defined_semantic_list:t.defined_semantic_list,busy:!1});case ge:return Object(d.a)(Object(d.a)({},e),{},{semantic_page:0,semantic_filter:t.semantic_filter});case xe:return Object(d.a)(Object(d.a)({},e),{},{synset_list:t.synset_list,synset_total_size:t.total_size,busy:!1});case je:return Object(d.a)(Object(d.a)({},e),{},{synset_page:0,synset_filter:t.synset_filter});case ve:return Object(d.a)(Object(d.a)({},e),{},{synset_page:t.page,busy:!1});case ye:return Object(d.a)(Object(d.a)({},e),{},{synset_page:0,synset_page_size:t.page_size});case _e:return Object(d.a)(Object(d.a)({},e),{},{synset_page:0,busy:!1});case Te:return Object(d.a)(Object(d.a)({},e),{},{report_date:S.toIsoDate(t.report_date)});case Ne:return Object(d.a)(Object(d.a)({},e),{},{access_frequency:t.access_frequency,general_statistics:t.general_statistics,query_word_frequency:t.query_word_frequency,file_type_statistics:t.file_type_statistics,busy:!1});case Ae:var O,w=[],k=Object(m.a)(e.operators);try{for(k.s();!(O=k.n()).done;){var at=O.value;at.id===t.operatorId&&(at.answer_id=t.id,at.answer=t.answer),w.push(at)}}catch(va){k.e(va)}finally{k.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:w});case Ue:var st,nt=[],it=Object(m.a)(e.operators);try{for(it.s();!(st=it.n()).done;){var rt=st.value;rt.id===t.operatorId&&(rt.question_id=t.id,rt.question=t.question),nt.push(rt)}}catch(va){it.e(va)}finally{it.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:nt});case ze:if(t.ready){var ot,ct=[],lt=Object(m.a)(e.operators);try{for(lt.s();!(ot=lt.n()).done;){var dt=ot.value;dt.id===t.operatorId&&(dt.operator_ready=!0),ct.push(dt)}}catch(va){lt.e(va)}finally{lt.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:ct})}var ut,pt=[],ht=Object(m.a)(e.operators);try{for(ht.s();!(ut=ht.n()).done;){var bt=ut.value;if(bt.id===t.operatorId){var mt=S.createOperator();mt.id=t.operatorId,pt.push(mt)}else pt.push(bt)}}catch(va){ht.e(va)}finally{ht.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:pt});case We:var gt,ft=[],jt=Object(m.a)(e.operators);try{for(jt.s();!(gt=jt.n()).done;){var xt=gt.value;if(xt.id===t.operatorId){var vt=S.createOperator();vt.id=t.operatorId,vt.operator_ready=xt.operator_ready,ft.push(vt)}else ft.push(xt)}}catch(va){jt.e(va)}finally{jt.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:ft});case Me:var yt=JSON.parse(JSON.stringify(e.operators));return yt.push(S.createOperator()),Object(d.a)(Object(d.a)({},e),{},{operators:yt});case qe:var _t,Ot=[],wt=Object(m.a)(e.operators);try{for(wt.s();!(_t=wt.n()).done;){var kt=_t.value;kt.id!==t.id&&Ot.push(kt)}}catch(va){wt.e(va)}finally{wt.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:Ot});case Ye:var St,Ct=t.operator_id,It=[],Rt=Object(m.a)(e.operators);try{for(Rt.s();!(St=Rt.n()).done;){var Dt=St.value;Dt.id===Ct&&(Dt.is_typing=!1,Dt.typing_time=0),It.push(Dt)}}catch(va){Rt.e(va)}finally{Rt.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:It});case Ee:var Tt=t.message;if(Tt.messageType,"error"===Tt.messageType&&Tt.error.length>0)return Object(d.a)(Object(d.a)({},e),{},{error_title:"error",error:Tt.error,busy:!1,uploading:!1});if("disconnect"===Tt.messageType){var Nt,Et=[],Lt=Object(m.a)(e.operators);try{for(Lt.s();!(Nt=Lt.n()).done;){var Pt=Nt.value;Pt.id===Tt.operatorId&&tt(Pt),Et.push(Pt)}}catch(va){Lt.e(va)}finally{Lt.f()}return Tt.disconnectedByClient?Object(d.a)(Object(d.a)({},e),{},{operators:Et,error_title:"Disconnected",error:"the client has terminated this conversation."}):Object(d.a)(Object(d.a)({},e),{},{operators:Et})}if("teaching success"===Tt.messageType)return Object(d.a)({},e);if(Tt.messageType===et)return Object(d.a)(Object(d.a)({},e),{},{num_active_connections:Tt.connectionCount});if("typing"===Tt.messageType){var Bt,zt=[],At=Object(m.a)(e.operators);try{for(At.s();!(Bt=At.n()).done;){var Ut=Bt.value;Ut.id===Tt.toId&&(Ut.is_typing=Tt.fromIsTyping,Ut.typing_time=S.getSystemTime()+2e3),zt.push(Ut)}}catch(va){At.e(va)}finally{At.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:zt})}if("message"===Tt.messageType){if(!Tt.kbId||0===Tt.kbId.length)return Object(d.a)(Object(d.a)({},e),{},{error_title:"error",error:"message does not include a valid knowledge-base id.",busy:!1,uploading:!1});if(!Tt.assignedOperatorId||0===Tt.assignedOperatorId.length)return Object(d.a)(Object(d.a)({},e),{},{error_title:"error",error:"message does not include a valid assigned-operator-id.",busy:!1,uploading:!1});var Wt,Ft=null,Mt=Object(m.a)(e.operators);try{for(Mt.s();!(Wt=Mt.n()).done;){var qt=Wt.value;if(qt.id===Tt.assignedOperatorId){Ft=qt;break}}}catch(va){Mt.e(va)}finally{Mt.f()}if(null!=Ft){var Yt=[];if(0===Ft.conversation_list.length&&Tt.conversationList&&Tt.conversationList.length>0){var Ht=(Yt=[]).length+1;for(var Kt in Tt.conversationList)if(Tt.conversationList.hasOwnProperty(Kt)){var Jt=Tt.conversationList[Kt],Vt="user"!==Jt.origin;Yt.push({id:Ht,primary:Jt.conversationText,created:Jt.created,secondary:Vt?"You":"user",used:!1,is_simsage:Vt}),Ht+=1}}else Tt.text&&Tt.text.length>0?(Yt=JSON.parse(JSON.stringify(Ft.conversation_list))).push({id:Yt.length+1,primary:Tt.text,secondary:"user",used:!1,is_simsage:!1}):Yt=Ft.conversation_list;if(Tt.text&&Tt.text.length>0&&window.Notification&&"granted"===window.Notification.permission){var Gt={body:'A new question just came in.  Click here to open the operator window.  "'+Tt.text+'"'};new Notification("the Operator needs your Attention",Gt).onclick=function(){window.focus()}}Tt.previousAnswer&&Tt.previousAnswer.length>0&&(Ft.prev_answer=Tt.previousAnswer),Tt.clientId.length>5&&(Ft.client_id=Tt.clientId,Ft.client_kb_id=Tt.kbId),Tt.kbName&&Tt.kbName.length>0&&(Ft.client_kb_name=Tt.kbName),Ft.conversation_list=Yt,Ft.is_typing=!1,Ft.typing_time=0;var Qt,Zt=[],Xt=Object(m.a)(e.operators);try{for(Xt.s();!(Qt=Xt.n()).done;){var $t=Qt.value;$t.id!==Tt.organisationId?Zt.push($t):Zt.push(Ft)}}catch(va){Xt.e(va)}finally{Xt.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:Zt})}console.log("organisation id not found:"+Tt.organisationId)}return Object(d.a)({},e);case Le:var ea,ta=[],aa=Object(m.a)(e.operators);try{for(aa.s();!(ea=aa.n()).done;){var sa=ea.value;sa.operator_ready=!1,tt(sa),ta.push(sa)}}catch(va){aa.e(va)}finally{aa.f()}return Object(d.a)(Object(d.a)({},e),{},{operator_connected:t.connected,num_active_connections:0,operators:ta});case Fe:var na,ia=[],ra=Object(m.a)(e.operators);try{for(ra.s();!(na=ra.n()).done;){var oa=na.value;oa.id===t.operatorId&&(oa.current_question="",oa.prev_answer=""),ia.push(oa)}}catch(va){ra.e(va)}finally{ra.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:ia});case Pe:var ca,la=[],da=Object(m.a)(e.operators);try{for(da.s();!(ca=da.n()).done;){var ua=ca.value;ua.id===t.operatorId&&ua.conversation_list.push(t.item),la.push(ua)}}catch(va){da.e(va)}finally{da.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:la});case Be:var pa,ha=[],ba=Object(m.a)(e.operators);try{for(ba.s();!(pa=ba.n()).done;){var ma=pa.value;if(ma.id===t.operatorId){var ga,fa=ma.conversation_list,ja=Object(m.a)(fa);try{for(ja.s();!(ga=ja.n()).done;){var xa=ga.value;xa.id===t.id&&(xa.used=!0)}}catch(va){ja.e(va)}finally{ja.f()}ma.conversation_list=fa}ha.push(ma)}}catch(va){ba.e(va)}finally{ba.f()}return Object(d.a)(Object(d.a)({},e),{},{operators:ha});case He:return Object(d.a)(Object(d.a)({},e),{},{html5_notifications:t.status});case Ke:return Object(d.a)(Object(d.a)({},e),{},{log_list:t.log_list,busy:!1});case Je:return Object(d.a)(Object(d.a)({},e),{},{log_date:S.toIsoDateTime(t.log_date)});case Ve:return Object(d.a)(Object(d.a)({},e),{},{log_hours:t.log_hours});case Ge:return Object(d.a)(Object(d.a)({},e),{},{log_type:t.log_type});case Qe:return Object(d.a)(Object(d.a)({},e),{},{log_service:t.log_service});case Ze:return Object(d.a)(Object(d.a)({},e),{},{log_refresh:t.log_refresh});case Xe:return Object(d.a)(Object(d.a)({},e),{},{edge_device_list:t.edge_device_list,busy:!1});case $e:return Object(d.a)(Object(d.a)({},e),{},{edge_device_command_list:t.edge_device_command_list,busy:!1})}return e},st=Object(h.createLogger)({predicate:function(e,t){return window.ENV.debug}});var nt,it=a(11),rt=a(10),ot=a(599),ct=a(598),lt=a(614),dt=a(251),ut=a(255),pt=a(267),ht=Object(pt.a)({spacing:4,palette:{primary:{light:"#62C2D6",main:"#62C2D6",dark:"#62C2D6"},secondary:{light:"#51B274",main:"#51B274",dark:"#51B274"}}}),bt=Object(pt.a)({spacing:4,overrides:{MuiInput:{input:{color:"#e0e0e0"}},MuiInputBase:{input:{color:"#e0e0e0"}},MuiInputLabel:{root:{color:"#e0e0e0"}},MuiSelect:{root:{color:"#808080"},icon:{color:"#808080"}},MuiCheckbox:{root:{color:"#808080"}},MuiNativeSelect:{root:{color:"#000"}},MuiSlider:{markLabel:{color:"#a0a0a0"},markLabelActive:{color:"#e0e0e0"}}},palette:{primary:{light:"#62C2D6",main:"#62C2D6",dark:"#62C2D6"},secondary:{light:"#9ACA93",main:"#9ACA93",dark:"#9ACA93"}}}),mt=(Object(ut.a)(nt||(nt=Object(dt.a)(["\n  body {\n    background: ",";\n    color: ",";\n    font-family: Tahoma, Helvetica, Arial, Roboto, sans-serif;\n    transition: all 0.50s linear;\n  }\n"])),(function(e){return e.theme.body}),(function(e){return e.theme.text})),a(590)),gt=a(593),ft=a(4),jt=a.n(ft),xt=a(12),vt=function(){function e(){Object(g.a)(this,e)}return Object(f.a)(e,null,[{key:"setupDoughnut",value:function(e,t){return{labels:e,datasets:[{data:t,backgroundColor:["#36A2EB","#FF6384","#56CE56"],hoverBackgroundColor:["#36A2EB","#FF6384","#56CE56"]}]}}},{key:"setupMap",value:function(e,t){if(e){var a=[],s=[100,1e4,1e5,-1],n=new Set;for(var i in s){var r=s[i],o=[],c=[];for(var l in e)if(e.hasOwnProperty(l)){var d=e[l];(-1===d||d<r)&&!n.has(l)&&(n.add(l),o.push(l),c.push(d.toFixed(2)))}o.length>0&&a.push({id:i,labels:o,title:t,datasets:[{label:t,fill:!1,lineTension:.1,backgroundColor:"rgba(98,194,214,1)",borderColor:"rgba(98,194,214,1)",pointBackgroundColor:"#fff",pointBorderColor:"rgba(98,194,214,1)",pointHoverBackgroundColor:"rgba(98,194,214,1)",pointHoverBorderColor:"rgba(220,220,220,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderWidth:1,pointHoverRadius:5,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:c}]})}return a}return[]}},{key:"setupList",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e&&e.length){for(var s=[],n=[],i={},r=0,o=0;o<=30;o++)i[o+1]=e[o],e[o]>0&&(r+=1);if(0===r)return{labels:[]};for(var c=1;c<=31;c++)s.push(""+c),i.hasOwnProperty(c)&&i[c]>0?n.push(i[c]/a):n.push(0);return{labels:s,datasets:[{label:t,fill:!1,lineTension:.4,backgroundColor:"rgba(154,202,147,1)",borderColor:"rgba(154,202,147,1)",pointBackgroundColor:"#fff",pointBorderColor:"rgba(154,202,147,1)",pointHoverBackgroundColor:"rgba(154,202,147,1)",pointHoverBorderColor:"rgba(220,220,220,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderWidth:1,pointHoverRadius:5,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:n}]}}return{labels:[]}}},{key:"setupCpuList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e&&e.length){var s=[],n=[],i=[],r=0;e.length>t&&(r=e.length-t);for(var o=r;o<r+t;o++)s.push(""),o<e.length?(n.push(e[o].idle/a),i.push((e[o].user+e[o].system)/a)):(n.push(0),i.push(0));return{labels:s,datasets:[{label:"busy",fill:!0,lineTension:.1,backgroundColor:"rgba(192, 75,120,0.7)",borderColor:"rgba(192, 75,120,1)",pointBackgroundColor:"#fff",pointBorderColor:"rgba(192, 75, 120,1)",pointHoverBackgroundColor:"rgba(192, 75,120,1)",pointHoverBorderColor:"rgba(220,220,220,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderWidth:1,pointHoverRadius:5,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:i},{label:"idle",fill:!0,lineTension:.1,backgroundColor:"rgba(75,192,120,0.4)",borderColor:"rgba(75,192,120,1)",pointBackgroundColor:"#fff",pointBorderColor:"rgba(75, 192,120,1)",pointHoverBackgroundColor:"rgba(75,192,120,1)",pointHoverBorderColor:"rgba(220,220,220,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderWidth:1,pointHoverRadius:5,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:0,data:n}]}}return{labels:[]}}},{key:"getGraphOptions",value:function(e){return{responsive:!0,legend:{position:"bottom"},hover:{mode:"label"},scales:{xAxes:[{display:!0,scaleLabel:{display:!1,labelString:""}}],yAxes:[{display:!0,ticks:{beginAtZero:!0,steps:10,stepValue:5}}]},title:{display:!0,text:e}}}},{key:"getDoughnutOptions",value:function(e){return{responsive:!0,legend:{position:"bottom"},hover:{mode:"label"},title:{display:!0,text:e}}}},{key:"processList",value:function(e,t,a){if(t&&t.labels&&t.datasets&&1===t.datasets.length&&t.datasets[0].data){e.push(["",""]),e.push([a,""]);for(var s=0;s<t.labels.length;s++)e.push([""+t.labels[s],""+t.datasets[0].data[s]])}}},{key:"processSet",value:function(t,a,s){var n,i=Object(m.a)(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.processList(t,r,s)}}catch(o){i.e(o)}finally{i.f()}}}]),e}(),yt=vt,_t=!1;function Ot(e,t,a,s,n){return wt.apply(this,arguments)}function wt(){return(wt=Object(xt.a)(jt.a.mark((function e(t,a,s,n,i){var r;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i({type:we,busy:!0}),r=s,s&&""!==s.trim()||(r="null"),e.next=5,O.http_get("/auth/user/organisations/"+encodeURIComponent(r),(function(e){var t=e.data;i({type:E,organisation_list:t}),n&&t&&t.length>0&&0===a.length&&(i({type:L,name:t[0].name,id:t[0].id}),kt(t[0].id,i))}),(function(e){i({type:ke,title:"Error",error:e})}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kt(e,t){return St.apply(this,arguments)}function St(){return(St=Object(xt.a)(jt.a.mark((function e(t,a){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:we,busy:!0}),e.next=3,O.http_get("/knowledgebase/"+encodeURIComponent(t),(function(e){a({type:A,knowledge_base_list:e.data})}),(function(e){a({type:ke,title:"Error",error:e})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(e,t,a){return It.apply(this,arguments)}function It(){return(It=Object(xt.a)(jt.a.mark((function e(t,a,s){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=4;break}return s({type:we,busy:!0}),e.next=4,O.http_get("/document/parquets/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)+"/0/5",(function(e){s({type:F,inventorize_list:e.data})}),(function(e){s({type:ke,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rt(e,t,a){return Dt.apply(this,arguments)}function Dt(){return(Dt=Object(xt.a)(jt.a.mark((function e(t,a,s){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:we,busy:!0}),a&&""!==a.trim()||(a="null"),e.next=4,O.http_get("/auth/users/"+encodeURIComponent(t)+"/"+encodeURIComponent(a),(function(e){s({type:D,user_list:e.data})}),(function(e){s({type:ke,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tt(e,t,a){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(xt.a)(jt.a.mark((function e(t,a,s){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=4;break}return s({type:we,busy:!0}),e.next=4,O.http_get("/crawler/crawlers/"+encodeURIComponent(t)+"/"+encodeURIComponent(a),(function(e){s({type:J,crawler_list:e.data})}),(function(e){s({type:ke,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Et(e,t,a,s,n,i){return Lt.apply(this,arguments)}function Lt(){return(Lt=Object(xt.a)(jt.a.mark((function e(t,a,s,n,i,r){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=4;break}return r({type:we,busy:!0}),e.next=4,O.http_put("/knowledgebase/domains",{organisationId:t,kbId:a,page:s,pageSize:n,filter:i},(function(e){r({type:V,domain_list:e.data})}),(function(e){r({type:ke,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pt(e,t,a,s,n,i){return Bt.apply(this,arguments)}function Bt(){return(Bt=Object(xt.a)(jt.a.mark((function e(t,a,s,n,i,r){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=4;break}return r({type:we,busy:!0}),e.next=4,O.http_post("/document/documents",{organisationId:t,kbId:a,prevUrl:s||"null",pageSize:n,filter:i},(function(e){var t=e.data.documentList,a=e.data.numDocuments;r({type:G,document_list:t,num_documents:a,document_filter:i})}),(function(e){r({type:ke,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zt(e,t,a,s,n,i){return At.apply(this,arguments)}function At(){return(At=Object(xt.a)(jt.a.mark((function e(t,a,s,n,i,r){var o;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=5;break}return r({type:we,busy:!0}),o={organisationId:t,kbId:a,prevId:s||"null",filter:n,pageSize:i},e.next=5,O.http_put("/bot/mind-items",o,(function(e){r({type:ee,data:e.data})}),(function(e){r({type:ke,title:"Error",error:e})}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ut(e,t,a,s,n,i){return Wt.apply(this,arguments)}function Wt(){return(Wt=Object(xt.a)(jt.a.mark((function e(t,a,s,n,i,r){var o;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=5;break}return r({type:we,busy:!0}),o={organisationId:t,kbId:a,prevId:s||"",filter:n,pageSize:i},e.next=5,O.http_put("/language/synonyms",o,(function(e){r({type:oe,data:e.data})}),(function(e){r({type:ke,title:"Error",error:e})}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ft(e,t,a,s,n,i){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(xt.a)(jt.a.mark((function e(t,a,s,n,i,r){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=4;break}return r({type:we,busy:!0}),e.next=4,O.http_put("/language/semantics",{organisationId:t,kbId:a,prevWord:s||"",filter:n,pageSize:i},(function(e){r({type:pe,data:e.data})}),(function(e){r({type:ke,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qt(e,t,a){return Yt.apply(this,arguments)}function Yt(){return(Yt=Object(xt.a)(jt.a.mark((function e(t,a,s){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=6;break}return s({type:we,busy:!0}),e.next=4,O.http_get("/language/semantic-display-categories/"+encodeURIComponent(t)+"/"+encodeURIComponent(a),(function(e){s({type:fe,semantic_display_category_list:e.data.semanticDisplayCategoryList,defined_semantic_list:e.data.semanticList})}),(function(e){s({type:ke,title:"Error",error:e})}));case 4:e.next=7;break;case 6:s({type:fe,semantic_display_category_list:[],defined_semantic_list:[]});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ht(e,t,a,s,n,i){return Kt.apply(this,arguments)}function Kt(){return(Kt=Object(xt.a)(jt.a.mark((function e(t,a,s,n,i,r){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=4;break}return r({type:we,busy:!0}),e.next=4,O.http_put("/language/find-syn-sets",{organisationId:t,kbId:a,page:s,pageSize:n,filter:i},(function(e){r({type:xe,synset_list:e.data.list,total_size:e.data.totalSize})}),(function(e){r({type:ke,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jt(e,t,a,s,n,i){return Vt.apply(this,arguments)}function Vt(){return(Vt=Object(xt.a)(jt.a.mark((function e(t,a,s,n,i,r){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&a.length>0)){e.next=6;break}return r({type:we,busy:!0}),e.next=4,O.http_get("/stats/stats/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(s)+"/"+encodeURIComponent(n)+"/"+encodeURIComponent(i),(function(e){var t=e.data,a=yt.setupList(t.accessFrequency,"access"),s=yt.setupMap(t.generalStatistics,"system"),n=yt.setupMap(t.queryWordFrequency,"queries (top "+i+")"),o=yt.setupMap(t.fileTypeStatistics,"file types");r({type:Ne,access_frequency:a,general_statistics:s,query_word_frequency:n,file_type_statistics:o})}),(function(e){r({type:ke,title:"Error",error:e})}));case 4:e.next=7;break;case 6:r({type:Ne,access_frequency:yt.setupList([]),general_statistics:yt.setupMap([]),query_word_frequency:yt.setupMap([]),file_type_statistics:yt.setupMap([])});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gt(e,t,a,s,n,i){return Qt.apply(this,arguments)}function Qt(){return(Qt=Object(xt.a)(jt.a.mark((function e(t,a,s,n,i,r){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&a&&s&&n&&i)){e.next=4;break}return r({type:we,busy:!0}),e.next=4,O.http_get("/stats/system-logs/"+encodeURIComponent(t)+"/"+encodeURIComponent(a)+"/"+encodeURIComponent(s)+"/"+encodeURIComponent(n)+"/"+encodeURIComponent(i),(function(e){var t=e.data;r({type:Ke,log_list:t.logList})}),(function(e){r({type:ke,title:"Error",error:e})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zt(e){return Xt.apply(this,arguments)}function Xt(){return(Xt=Object(xt.a)(jt.a.mark((function e(t){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.Notification&&"granted"!==window.Notification.permission&&window.Notification.requestPermission&&window.Notification.requestPermission((function(e){Notification.permission!==e&&(Notification.permission=e),t({type:He,status:e})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $t(e,t){return ea.apply(this,arguments)}function ea(){return(ea=Object(xt.a)(jt.a.mark((function e(t,a){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:we,busy:!0}),e.next=3,O.http_get("/edge/"+encodeURIComponent(t),(function(e){a({type:Xe,edge_device_list:e.data})}),(function(e){a({type:ke,title:"Error",error:e})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ta(e,t,a){return aa.apply(this,arguments)}function aa(){return(aa=Object(xt.a)(jt.a.mark((function e(t,a,s){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:we,busy:!0}),e.next=3,O.http_get("/edge/command/"+encodeURIComponent(t)+"/"+encodeURIComponent(a),(function(e){s({type:$e,edge_device_command_list:e.data})}),(function(e){s({type:ke,title:"Error",error:e})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sa(e,t,a){return na.apply(this,arguments)}function na(){return(na=Object(xt.a)(jt.a.mark((function e(t,a,s){var n,i,r,o,c,l,d,u,p,h,b,m,g,f,j,x,v,y,_,O,w,k,S,C,I,R,D,T,N,E;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_organisation,r=s().appReducer.selected_knowledgebase_id,"operator"===t||n&&0!==n.length&&i&&0!==i.length||a({type:z}),"users"!==t||""===n){e.next=10;break}return o=s().appReducer.user_filter,e.next=8,Rt(n,o,a);case 8:e.next=135;break;case 10:if("organisations"!==t){e.next=18;break}return c=s().appReducer.selected_organisation,l=s().appReducer.selected_organisation_id,d=s().appReducer.organisation_filter,e.next=16,Ot(c,l,d,!0,a);case 16:e.next=135;break;case 18:if("edge devices"!==t||""===n){e.next=23;break}return e.next=21,$t(n,a);case 21:e.next=135;break;case 23:if("edge commands"!==t||""===n){e.next=30;break}if(!(u=s().appReducer.selected_edge_device_id)||""===u){e.next=28;break}return e.next=28,ta(n,u,a);case 28:e.next=135;break;case 30:if("knowledge bases"!==t){e.next=37;break}if(""===(p=s().appReducer.selected_organisation_id)){e.next=35;break}return e.next=35,kt(p,a);case 35:e.next=135;break;case 37:if("document sources"!==t||""===n||""===r){e.next=44;break}return e.next=40,Rt(n,"",a);case 40:return e.next=42,Tt(n,r,a);case 42:e.next=135;break;case 44:if("documents"!==t||""===n||""===r){e.next=54;break}return a({type:$}),a({type:we,busy:!0}),h=s().appReducer.document_filter,"null",b=s().appReducer.document_page_size,e.next=52,Pt(n,r,"null",b,h,a);case 52:e.next=135;break;case 54:if("syn-sets"!==t||""===n||""===r){e.next=63;break}return m=s().appReducer.synset_page,g=s().appReducer.synset_page_size,f=s().appReducer.synset_filter,e.next=60,Ht(n,r,m,g,f,a);case 60:a({type:_e}),e.next=135;break;case 63:if("inventory"!==t||""===n||""===r){e.next=68;break}return e.next=66,Ct(n,r,a);case 66:e.next=135;break;case 68:if("reports"!==t||""===n||""===r){e.next=77;break}return j=s().appReducer.report_num_items,x=new Date(s().appReducer.report_date),v=x.getFullYear(),y=x.getMonth()+1,e.next=75,Jt(n,r,v,y,j,a);case 75:e.next=135;break;case 77:if("logs"!==t||""===n){e.next=88;break}return _=new Date(s().appReducer.log_date),O=_.getFullYear(),w=_.getMonth()+1,k=_.getDate(),S=_.getHours(),C=s().appReducer.log_hours,e.next=86,Gt(O,w,k,S,C,a);case 86:e.next=135;break;case 88:if("mind"!==t){e.next=101;break}if(a({type:se}),a({type:we,busy:!0}),I=s().appReducer.mind_item_filter,R=s().appReducer.mind_item_page_size,!n||!r){e.next=98;break}return e.next=96,zt(n,r,null,I,R,a);case 96:e.next=99;break;case 98:a({type:ee,data:{mindItemList:[],numMindItems:0,filter:""}});case 99:e.next=135;break;case 101:if("synonyms"!==t){e.next=114;break}if(a({type:de}),a({type:we,busy:!0}),D=s().appReducer.synonym_filter,T=s().appReducer.synonym_page_size,!n||!r){e.next=111;break}return e.next=109,Ut(n,r,"",D,T,a);case 109:e.next=112;break;case 111:a({type:oe,data:{synonymList:[],numSynonyms:0,filter:""}});case 112:e.next=135;break;case 114:if("semantics"!==t){e.next=127;break}if(a({type:me}),a({type:we,busy:!0}),N=s().appReducer.semantic_filter,E=s().appReducer.semantic_page_size,!n||!r){e.next=124;break}return e.next=122,Ft(n,r,"",N,E,a);case 122:e.next=125;break;case 124:a({type:pe,data:{semanticList:[],numSemantics:0,filter:""}});case 125:e.next=135;break;case 127:if("active directory"!==t){e.next=135;break}if(a({type:we,busy:!0}),!n||!r){e.next=134;break}return e.next=132,Et(n,r,0,10,"",a);case 132:e.next=135;break;case 134:a({type:V,domain_list:[]});case 135:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ia={signIn:function(e,t,a){return function(){var s=Object(xt.a)(jt.a.mark((function s(n,i){return jt.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!(e&&e.length>0&&t&&t.length>0)){s.next=6;break}return n({type:we,busy:!0}),s.next=4,O.http_post("/auth/sign-in",{email:e,password:t},(function(e){n({type:C,session:e.data.session,user:e.data.user}),a&&a()}),(function(e){n({type:ke,title:"Error",error:e})}));case 4:s.next=7;break;case 6:n({type:ke,title:"Error",error:"please complete and check all fields"});case 7:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}()},signOut:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ia.setLogRefresh(0),t({type:I});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},notBusy:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:we,busy:!1});case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},setTheme:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:R,theme:e});case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},passwordResetRequest:function(e){return{type:"password reset request"}},resetPassword:function(e,t,a){return{type:"reset password",email:e,newPassword:t,reset_id:a}},getStats:function(e,t,a){return{type:"get stats",year:e,month:t,top:a}},getOSMessages:function(){return{type:"get os messages"}},restoreSystem:function(e){return{type:"restore system",data:e}},getLicense:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:we,busy:!0}),e.next=3,O.http_get("/auth/license",(function(e){t({type:Oe,license:e.data})}),(function(e){t({type:ke,title:"Error",error:e})}));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},installLicense:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),t.next=3,O.http_post("/auth/license",{license:e},(function(e){a({type:Oe,license:e.data})}),(function(e){a({type:ke,title:"Error",error:e})}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setError:function(e,t){return{type:ke,title:e,error:t}},closeError:function(){return{type:Se}},selectTab:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:Ce,selected_tab:e}),t.next=3,sa(e,a,s);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setupManager:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:Ce,selected_tab:"knowledge bases"}),e.next=3,Ot("","","",!0,t);case 3:return e.next=5,sa("knowledge bases",t,a);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},hideNotifications:function(){return{type:Ie}},showNotifications:function(){return{type:Re}},getNotifications:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){var s;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_t){e.next=5;break}return _t=!0,s=a().appReducer.notification_list,e.next=5,O.http_get("/stats/stats/os",(function(e){var a=S.merge_notifications(s,e.data.notificationList);a.length!==s.length&&t({type:De,notification_list:a}),_t=!1}),(function(e){console.log("error getting os-messages:"+e),_t=!1}));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},getOrganisationList:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){var s,n,i;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:we,busy:!0}),s=a().appReducer.selected_organisation,n=a().appReducer.selected_organisation_id,i=a().appReducer.organisation_filter,e.next=6,Ot(s,n,i,!0,t);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},selectOrganisation:function(e,t){return function(){var a=Object(xt.a)(jt.a.mark((function a(s,n){var i;return jt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t&&t.length>0)){a.next=8;break}return s({type:we,busy:!0}),s({type:L,name:e,id:t}),a.next=5,kt(t,s);case 5:return i=n().appReducer.selected_tab,a.next=8,sa(i,s,n);case 8:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},setOrganisationFilter:function(e){return{type:B,filter:e}},updateOrganisation:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),t.next=3,O.http_put("/auth/organisation",e,(function(e){a({type:P,organisation:e.data})}),(function(e){a({type:ke,title:"Error",error:e})}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},deleteOrganisation:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),n=s().appReducer.selected_organisation,i=s().appReducer.selected_organisation_id,r=s().appReducer.organisation_filter,t.next=6,O.http_delete("/auth/organisation/"+encodeURIComponent(e),(function(t){Ot(n,i,r,!1,a),i===e&&(a({type:L,name:"",id:""}),a({type:A,knowledge_base_list:[]}))}),(function(e){a({type:ke,title:"Error",error:e})}));case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},selectEdgeDevice:function(e,t){return function(){var a=Object(xt.a)(jt.a.mark((function a(s,n){var i;return jt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t&&t.length>0)){a.next=6;break}return s({type:we,busy:!0}),i=n().appReducer.selected_tab,s({type:W,name:e,id:t}),a.next=6,sa(i,s,n);case 6:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},selectKnowledgeBase:function(e,t){return function(){var a=Object(xt.a)(jt.a.mark((function a(s,n){var i;return jt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t&&t.length>0)){a.next=6;break}return s({type:we,busy:!0}),i=n().appReducer.selected_tab,s({type:U,name:e,id:t}),a.next=6,sa(i,s,n);case 6:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},getKnowledgeBases:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt(a().appReducer.selected_organisation_id,t);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},optimizeIndexes:function(e,t){return function(){var a=Object(xt.a)(jt.a.mark((function a(s,n){var i;return jt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s({type:we,busy:!0}),i={organisationId:e,kbId:t},a.next=4,O.http_put("/language/optimize-indexes",i,(function(e){s({type:we,busy:!1})}),(function(e){s({type:ke,title:"Error",error:e})}));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},reIndex:function(e,t){return function(){var a=Object(xt.a)(jt.a.mark((function a(s,n){return jt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s({type:we,busy:!0}),a.next=3,O.http_get("/knowledgebase/re-index/"+encodeURIComponent(e)+"/"+encodeURIComponent(t),(function(e){s({type:we,busy:!1})}),(function(e){s({type:ke,title:"Error",error:e})}));case 3:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},deleteKnowledgeBase:function(e,t){return function(){var a=Object(xt.a)(jt.a.mark((function a(s,n){return jt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s({type:we,busy:!0}),a.next=3,O.http_delete("/knowledgebase/"+encodeURIComponent(e)+"/"+encodeURIComponent(t),(function(t){kt(e,s),s({type:U,name:"",id:""})}),(function(e){s({type:ke,title:"Error",error:e})}));case 3:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},updateKnowledgeBase:function(e,t,a,s,n,i,r,o,c,l,d,u){return function(){var p=Object(xt.a)(jt.a.mark((function p(h,b){var m;return jt.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return h({type:we,busy:!0}),m={kbId:t,organisationId:e,name:a,email:s,securityId:n,maxQueriesPerDay:r,enabled:i,analyticsWindowInMonths:o,operatorEnabled:c,capacityWarnings:l,created:d,indexOptimizationSchedule:u},p.next=4,O.http_put("/knowledgebase/",m,(function(t){kt(e,h)}),(function(e){h({type:ke,title:"Error",error:e})}));case 4:case"end":return p.stop()}}),p)})));return function(e,t){return p.apply(this,arguments)}}()},createInventory:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){var s,n;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:we,busy:!0}),s=a().appReducer.selected_organisation_id,n=a().appReducer.selected_knowledgebase_id,e.next=5,O.http_post("/document/inventorize",{kbId:n,organisationId:s},(function(e){Ct(s,n,t)}),(function(e){t({type:ke,title:"Error",error:e})}));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},getInventoryList:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){var s,n;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a().appReducer.selected_organisation_id,n=a().appReducer.selected_knowledgebase_id,e.next=4,Ct(s,n,t);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},deleteInventoryItem:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,!(n.length>0&&i.length>0)){t.next=7;break}return a({type:we,busy:!0}),r="/document/parquet/"+encodeURIComponent(n)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),t.next=7,O.http_delete(r,(function(e){Ct(n,i,a)}),(function(e){a({type:ke,title:"Error",error:e})}));case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getInventoryBusy:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){var s,n;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a().appReducer.selected_organisation_id,n=a().appReducer.selected_knowledgebase_id,!(s.length>0&&n.length>0)){e.next=6;break}return t({type:we,busy:!0}),e.next=6,O.http_get("/document/inventorize/"+encodeURIComponent(s),(function(e){t({type:M,busy:e.data})}),(function(e){t({type:ke,title:"Error",error:e})}));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},forceInventoryBusy:function(){return function(e,t){e({type:M,busy:!0})}},getUsers:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s().appReducer.user_filter,t.next=3,Rt(e,n,a);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},updateUser:function(e,t,a,s,n,i,r,o){return function(){var c=Object(xt.a)(jt.a.mark((function c(l,d){var u,p,h,b,g,f,j,x,v,y;return jt.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:l({type:we,busy:!0}),u=d().appReducer.user_filter,p=d().appReducer.user,h=[],b=Object(m.a)(r);try{for(b.s();!(g=b.n()).done;)f=g.value,h.push({userId:t,organisationId:e,role:f})}catch(_){b.e(_)}finally{b.f()}j=[],x=Object(m.a)(o);try{for(x.s();!(v=x.n()).done;)y=v.value,j.push({userId:t,organisationId:e,kbId:y.kbId})}catch(_){x.e(_)}finally{x.f()}return c.next=11,O.http_put("/auth/user/"+encodeURIComponent(e),{id:t,password:i,firstName:a,surname:s,email:n,roles:h,operatorKBList:j},(function(t){var a=t.data,s=!1,n=!1;if(a&&p&&a.id===p.id){var i,r=Object(m.a)(p.roles);try{for(r.s();!(i=r.n()).done;){var o=i.value;o&&"operator"===o.role&&(s=!0)}}catch(_){r.e(_)}finally{r.f()}var c,d=Object(m.a)(a.roles);try{for(d.s();!(c=d.n()).done;){var h=c.value;h&&"operator"===h.role&&(n=!0)}}catch(_){d.e(_)}finally{d.f()}!s&&n&&Zt(l),l({type:T,user:a})}Rt(e,u,l)}),(function(e){l({type:ke,title:"Error",error:e})}));case 11:case"end":return c.stop()}}),c)})));return function(e,t){return c.apply(this,arguments)}}()},deleteUser:function(e,t){return function(){var a=Object(xt.a)(jt.a.mark((function a(s,n){var i;return jt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s({type:we,busy:!0}),i=n().appReducer.user_filter,a.next=4,O.http_delete("/auth/organisation/user/"+encodeURIComponent(t)+"/"+encodeURIComponent(e),(function(t){Rt(e,i,s)}),(function(e){s({type:ke,title:"Error",error:e})}));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},setUserFilter:function(e){return{type:N,filter:e}},uploadProgram:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),a({type:q}),t.next=4,O.http_put("/knowledgebase/upload",e,(function(e){a({type:Y})}),(function(e){a({type:ke,title:"Error",error:e})}));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},wpUploadArchive:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r,o,c;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:we,busy:!0}),a({type:H}),n=s().appReducer.knowledge_base_list,i="",!n){t.next=23;break}r=Object(m.a)(n),t.prev=6,r.s();case 8:if((o=r.n()).done){t.next=15;break}if((c=o.value).kbId!==e.kbId){t.next=13;break}return i=c.securityId,t.abrupt("break",15);case 13:t.next=8;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(6),r.e(t.t0);case 20:return t.prev=20,r.f(),t.finish(20);case 23:return e.sid=i,t.next=26,O.http_post("/crawler/admin/upload/archive",e,(function(e){a({type:K})}),(function(e){a({type:ke,title:"Error",error:e})}));case 26:case"end":return t.stop()}}),t,null,[[6,17,20,23]])})));return function(e,a){return t.apply(this,arguments)}}()},getCrawlers:function(e,t){return function(){var a=Object(xt.a)(jt.a.mark((function a(s,n){return jt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Tt(e,t,s);case 2:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},updateCrawler:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,t.next=5,O.http_post("/crawler/crawler",e,(function(e){Tt(n,i,a)}),(function(e){a({type:ke,title:"Error",error:e})}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},deleteCrawlerDocuments:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,t.next=5,O.http_delete("/crawler/crawler/document/"+encodeURIComponent(n)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),(function(e){Tt(n,i,a)}),(function(e){a({type:ke,title:"Error",error:e})}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},deleteCrawler:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,t.next=5,O.http_delete("/crawler/crawler/"+encodeURIComponent(n)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),(function(e){Tt(n,i,a)}),(function(e){a({type:ke,title:"Error",error:e})}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getDomains:function(e,t){return function(){var a=Object(xt.a)(jt.a.mark((function a(s,n){return jt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Et(e,t,0,10,"",s);case 2:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},updateDomain:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,t.next=5,O.http_put("/knowledgebase/domain",e,(function(e){Et(n,i,0,10,"",a)}),(function(e){a({type:ke,title:"Error",error:e})}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},testDomain:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),t.next=3,O.http_put("/knowledgebase/domain/test",e,(function(e){a({type:ke,title:"Success",error:"Connected Successfully"})}),(function(e){a({type:ke,title:"Error",error:e})}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},deleteDomain:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,t.next=5,O.http_delete("/knowledgebase/domain/"+encodeURIComponent(n)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),(function(e){Et(n,i,0,10,"",a)}),(function(e){a({type:ke,title:"Error",error:e})}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getDocuments:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){var s,n,i,r,o,c;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:we,busy:!0}),s=a().appReducer.selected_organisation_id,n=a().appReducer.selected_knowledgebase_id,i=a().appReducer.document_filter,r=a().appReducer.prev_document_filter,o=a().appReducer.document_page_size,c=a().appReducer.document_previous,r!==i&&(t({type:$}),c=null),!s||!n){e.next=11;break}return e.next=11,Pt(s,n,c,o,i,t);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},setDocumentFilter:function(e){return{type:Q,filter:e}},deleteDocument:function(e,t){return function(){var a=Object(xt.a)(jt.a.mark((function a(s,n){var i,r,o,c,l,d,u;return jt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s({type:we,busy:!0}),i=n().appReducer.selected_organisation_id,r=n().appReducer.selected_knowledgebase_id,o=n().appReducer.document_filter,c=n().appReducer.prev_document_filter,l=n().appReducer.document_page_size,d=n().appReducer.document_previous,!(i&&r&&e)){a.next=12;break}return c!==o&&(s({type:$}),d=null),u="/document/document/"+encodeURIComponent(i)+"/"+encodeURIComponent(r)+"/"+btoa(unescape(encodeURIComponent(e)))+"/"+encodeURIComponent(t),a.next=12,O.http_delete(u,(function(e){Pt(i,r,d,l,o,s)}),(function(e){s({type:ke,title:"Error",error:e})}));case 12:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},setDocumentPage:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r,o,c,l,d,u,p;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.document_filter,o=s().appReducer.document_page_size,c=s().appReducer.document_page,l=s().appReducer.document_nav_list,d=s().appReducer.document_list,!(e!==c&&e>=0)){t.next=22;break}if(!(e>c)){t.next=17;break}if(!(d.length>0)){t.next=15;break}return u=d[d.length-1].url,a({type:Z,page:e,prev_url:u}),t.next=15,Pt(n,i,u,o,r,a);case 15:t.next=22;break;case 17:if(!(e<l.length)){t.next=22;break}return p=l[e],a({type:Z,page:e,prev_url:p}),t.next=22,Pt(n,i,p,o,r,a);case 22:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setDocumentPageSize:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),a({type:X,page_size:e}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.document_filter,t.next=7,Pt(n,i,null,e,r,a);case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},reprocessDocument:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s().appReducer.document_filter,i=s().appReducer.document_previous,r=s().appReducer.document_page_size,a({type:we,busy:!0}),t.next=6,O.http_post("/document/reprocess",{organisationId:e.organisationId,kbId:e.kbId,url:e.url},(function(t){Pt(e.organisationId,e.kbId,i,r,n,a)}),(function(e){a({type:ke,title:"Error",error:e})}));case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getMindItems:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){var s,n,i,r,o,c;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:we,busy:!0}),s=a().appReducer.selected_organisation_id,n=a().appReducer.selected_knowledgebase_id,i=a().appReducer.mind_item_filter,r=a().appReducer.prev_mind_item_filter,o=a().appReducer.mind_item_page_size,c=a().appReducer.mind_item_previous,r!==i&&(t({type:$}),c=null),!s||!n){e.next=11;break}return e.next=11,zt(s,n,c,i,o,t);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},setMindItemPage:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r,o,c,l,d,u,p;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.mind_item_filter,o=s().appReducer.mind_item_page_size,c=s().appReducer.mind_item_page,l=s().appReducer.mind_item_nav_list,d=s().appReducer.mind_item_list,!(e!==c&&e>=0)){t.next=22;break}if(!(e>c)){t.next=17;break}if(!(d.length>0)){t.next=15;break}return u=d[d.length-1].id,a({type:ae,page:e,prev_id:u}),t.next=15,zt(n,i,u,r,o,a);case 15:t.next=22;break;case 17:if(!(e<l.length)){t.next=22;break}return p=l[e],a({type:ae,page:e,prev_id:p}),t.next=22,zt(n,i,p,r,o,a);case 22:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setMindItemPageSize:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),a({type:te,page_size:e}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.mind_item_filter,t.next=7,zt(n,i,null,r,e,a);case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setMindItemFilter:function(e){return{type:ne,filter:e}},deleteMindItem:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r,o,c;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.mind_item_filter,o=s().appReducer.mind_item_page_size,c=s().appReducer.mind_item_previous,t.next=8,O.http_delete("/bot/ui-delete/"+encodeURIComponent(n)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),(function(e){zt(n,i,c,r,o,a)}),(function(e){a({type:ke,title:"Error",error:e})}));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},deleteAllMindItems:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){var s,n,i,r,o;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:we,busy:!0}),s=a().appReducer.selected_organisation_id,n=a().appReducer.selected_knowledgebase_id,i=a().appReducer.mind_item_filter,r=a().appReducer.mind_item_page_size,o=a().appReducer.mind_item_previous,e.next=8,O.http_delete("/bot/ui-delete-all/"+encodeURIComponent(s)+"/"+encodeURIComponent(n),(function(e){zt(s,n,o,i,r,t)}),(function(e){t({type:ke,title:"Error",error:e})}));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},saveMindItem:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r,o,c;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.mind_item_filter,o=s().appReducer.mind_item_page_size,c=s().appReducer.mind_item_previous,t.next=8,O.http_put("/bot/ui-save/"+encodeURIComponent(n)+"/"+encodeURIComponent(i),e,(function(e){zt(n,i,c,r,o,a)}),(function(e){a({type:ke,title:"Error",error:e})}));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},botQuery:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){var s,n,i,r,o,c;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:we,busy:!0}),s=a().appReducer.selected_organisation_id,n=a().appReducer.selected_knowledgebase_id,i=a().appReducer.bot_query_page_size,r=a().appReducer.bot_query_threshold,!((o=a().appReducer.bot_query).length>0)){e.next=12;break}return c={organisationId:s,kbId:n,query:o,numResults:i,scoreThreshold:r},e.next=10,O.http_put("/bot/query",c,(function(e){t({type:ie,bot_query_result_list:e.data})}),(function(e){t({type:ke,title:"Error",error:e})}));case 10:e.next=13;break;case 12:t({type:ie,bot_query_result_list:[]});case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},setBotQueryString:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:re,bot_query:e});case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getSynonyms:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){var s,n,i,r,o,c;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:we,busy:!0}),s=a().appReducer.selected_organisation_id,n=a().appReducer.selected_knowledgebase_id,i=a().appReducer.synonym_filter,r=a().appReducer.prev_synonym_filter,o=a().appReducer.synonym_page_size,c=a().appReducer.synonym_prev_id,r!==i&&(t({type:de}),c=null),!s||!n){e.next=11;break}return e.next=11,Ut(s,n,c,i,o,t);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},setSynonymPage:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r,o,c,l,d,u,p;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.synonym_filter,o=s().appReducer.synonym_page_size,c=s().appReducer.synonym_page,l=s().appReducer.synonym_nav_list,d=s().appReducer.synonym_list,!(e!==c&&e>=0)){t.next=22;break}if(!(e>c)){t.next=17;break}if(!(d.length>0)){t.next=15;break}return u=d[d.length-1].id,a({type:le,page:e,prev_id:u}),t.next=15,Ut(n,i,u,r,o,a);case 15:t.next=22;break;case 17:if(!(e<l.length)){t.next=22;break}return p=l[e],a({type:le,page:e,prev_id:p}),t.next=22,Ut(n,i,p,r,o,a);case 22:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setSynonymPageSize:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),a({type:ce,page_size:e}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.synonym_filter,t.next=7,Ut(n,i,null,r,e,a);case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},deleteSynonym:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r,o,c;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.synonym_prev_id,o=s().appReducer.synonym_filter,c=s().appReducer.synonym_page_size,t.next=8,O.http_delete("/language/delete-synonym/"+encodeURIComponent(n)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),(function(e){Ut(n,i,r,o,c,a)}),(function(e){a({type:ke,title:"Error",error:e})}));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},saveSynonym:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r,o,c;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.synonym_prev_id,o=s().appReducer.synonym_filter,c=s().appReducer.synonym_page_size,O.http_put("/language/save-synonym/"+encodeURIComponent(n)+"/"+encodeURIComponent(i),e,(function(e){Ut(n,i,r,o,c,a)}),(function(e){a({type:ke,title:"Error",error:e})}));case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setSynonymFilter:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:ue,synonym_filter:e});case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getSemantics:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){var s,n,i,r,o,c;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:we,busy:!0}),s=a().appReducer.selected_organisation_id,n=a().appReducer.selected_knowledgebase_id,i=a().appReducer.semantic_filter,r=a().appReducer.prev_semantic_filter,o=a().appReducer.semantic_page_size,c=a().appReducer.semantic_prev_word,r!==i&&(t({type:me}),c=null),!s||!n){e.next=11;break}return e.next=11,Ft(s,n,c,i,o,t);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},setSemanticPage:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r,o,c,l,d,u,p;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.semantic_filter,o=s().appReducer.semantic_page_size,c=s().appReducer.semantic_page,l=s().appReducer.semantic_nav_list,d=s().appReducer.semantic_list,!(e!==c&&e>=0)){t.next=22;break}if(!(e>c)){t.next=17;break}if(!(d.length>0)){t.next=15;break}return u=d[d.length-1].word,a({type:be,page:e,prev_word:u}),t.next=15,Ft(n,i,u,r,o,a);case 15:t.next=22;break;case 17:if(!(e<l.length)){t.next=22;break}return p=l[e],a({type:be,page:e,prev_word:p}),t.next=22,Ft(n,i,p,r,o,a);case 22:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setSemanticPageSize:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),a({type:he,page_size:e}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.semantic_filter,t.next=7,Ft(n,i,null,r,e,a);case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},deleteSemantic:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r,o,c;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.semantic_filter,o=s().appReducer.semantic_prev_word,c=s().appReducer.semantic_page_size,t.next=8,O.http_delete("/language/delete-semantic/"+encodeURIComponent(n)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),(function(e){Ft(n,i,o,r,c,a)}),(function(e){a({type:ke,title:"Error",error:e})}));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},findSemantics:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){var s,n,i,r,o;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a().appReducer.selected_organisation_id,n=a().appReducer.selected_knowledgebase_id,i=a().appReducer.semantic_filter,r=a().appReducer.semantic_page_size,o=a().appReducer.semantic_prev_word,e.next=7,Ft(s,n,o,i,r,t);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},saveSemantic:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r,o;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.semantic_filter,o=s().appReducer.semantic_page_size,"",O.http_put("/language/save-semantic/"+encodeURIComponent(n)+"/"+encodeURIComponent(i),e,(function(e){Ft(n,i,"",r,o,a)}),(function(e){a({type:ke,title:"Error",error:e})}));case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setSemanticFilter:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:ge,semantic_filter:e});case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getSemanticDisplayCategories:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){var s,n;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a().appReducer.selected_organisation_id,n=a().appReducer.selected_knowledgebase_id,e.next=4,qt(s,n,t);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},saveSemanticDisplayCategory:function(e,t,a){return function(){var s=Object(xt.a)(jt.a.mark((function s(n,i){var r,o;return jt.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return r=i().appReducer.selected_organisation_id,o=i().appReducer.selected_knowledgebase_id,s.next=4,O.http_put("/language/semantic-display-category/",{organisationId:r,kbId:o,prevDisplayName:e,displayName:t,semanticList:a},(function(e){qt(r,o,n)}),(function(e){n({type:ke,title:"Error",error:e})}));case 4:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}()},deleteSemanticDisplayCategory:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,t.next=4,O.http_delete("/language/semantic-display-category/"+encodeURIComponent(n)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),(function(e){qt(n,i,a)}),(function(e){a({type:ke,title:"Error",error:e})}));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},deleteSynSet:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r,o,c;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.synset_page,o=s().appReducer.synset_page_size,c=s().appReducer.synset_filter,t.next=8,O.http_delete("/language/delete-syn-set/"+encodeURIComponent(n)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),(function(e){Ht(n,i,r,o,c,a)}),(function(e){a({type:ke,title:"Error",error:e})}));case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},findSynSets:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){var s,n,i,r,o;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a().appReducer.selected_organisation_id,n=a().appReducer.selected_knowledgebase_id,i=a().appReducer.synset_page,r=a().appReducer.synset_page_size,o=a().appReducer.synset_filter,e.next=7,Ht(s,n,i,r,o,t);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},saveSynSet:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r,o,c;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.synset_page,o=s().appReducer.synset_page_size,c=s().appReducer.synset_filter,O.http_put("/language/save-syn-set/"+encodeURIComponent(n)+"/"+encodeURIComponent(i),e,(function(e){Ht(n,i,r,o,c,a)}),(function(e){a({type:ke,title:"Error",error:e})}));case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setSynSetFilter:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:je,synset_filter:e});case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setSynSetPage:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r,o;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.synset_page_size,o=s().appReducer.synset_filter,a({type:ve,page:e}),t.next=8,Ht(n,i,e,r,o,a);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setSynSetPageSize:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i,r,o;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),a({type:ye,page_size:e}),n=s().appReducer.selected_organisation_id,i=s().appReducer.selected_knowledgebase_id,r=s().appReducer.synset_page,o=s().appReducer.synset_filter,t.next=8,Ht(n,i,r,e,o,a);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},setReportDate:function(e){return{type:Te,report_date:e}},getReports:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){var s,n,i,r,o,c;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a().appReducer.selected_organisation_id,n=a().appReducer.selected_knowledgebase_id,i=a().appReducer.report_num_items,r=new Date(a().appReducer.report_date),o=r.getFullYear(),c=r.getMonth()+1,e.next=8,Jt(s,n,o,c,i,t);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},processOperatorMessage:function(e){return{type:Ee,message:e}},setOperatorConnected:function(e){return{type:Le,connected:e}},addConversation:function(e,t){return{type:Pe,operatorId:e,item:t}},markConversationItemUsed:function(e,t){return{type:Be,operatorId:e,id:t}},operatorReady:function(e,t){return{type:ze,operatorId:e,ready:t}},setOperatorAnswer:function(e,t,a){return{type:Ae,operatorId:e,id:t,answer:a}},setOperatorQuestion:function(e,t,a){return{type:Ue,operatorId:e,id:t,question:a}},clearPreviousAnswer:function(e){return{type:Fe,operatorId:e}},clearUser:function(e){return{type:We,operatorId:e}},addOperator:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a().appReducer.operators.length<5&&t({type:Me});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},removeOperator:function(e){return{type:qe,id:e}},stopClientTyping:function(e){return{type:Ye,operator_id:e}},sendOperatorMessage:function(e,t){return function(){var a=Object(xt.a)(jt.a.mark((function a(s,n){return jt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.http_post(e,t,(function(e){}),(function(e){s({type:ke,title:"Error",error:e})}));case 2:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},getLogs:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){var s,n,i,r,o,c;return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new Date(a().appReducer.log_date),n=s.getFullYear(),i=s.getMonth()+1,r=s.getDate(),o=s.getHours(),c=a().appReducer.log_hours,e.next=8,Gt(n,i,r,o,c,t);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},setLogDate:function(e){return{type:Je,log_date:e}},setLogHours:function(e){return{type:Ve,log_hours:e}},setLogType:function(e){return{type:Ge,log_type:e}},setLogService:function(e){return{type:Qe,log_service:e}},setLogRefresh:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:Ze,log_refresh:e});case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},restartService:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){var n,i;return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s().appReducer.session,i=s().appReducer.selected_organisation_id,t.next=4,O.http_get("/stats/restart-service/"+encodeURIComponent(n.id)+"/"+encodeURIComponent(i)+"/"+encodeURIComponent(e),(function(e){}),(function(e){a({type:ke,title:"Error",error:e})}));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getEdgeDevices:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$t(a().appReducer.selected_organisation_id,t);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},deleteEdgeDevice:function(e,t){return function(){var a=Object(xt.a)(jt.a.mark((function a(s,n){return jt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s({type:we,busy:!0}),a.next=3,O.http_delete("/edge/"+encodeURIComponent(e)+"/"+encodeURIComponent(t),(function(t){$t(e,s)}),(function(e){s({type:ke,title:"Error",error:e})}));case 3:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},updateEdgeDevice:function(e,t,a,s){return function(){var n=Object(xt.a)(jt.a.mark((function n(i,r){var o;return jt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i({type:we,busy:!0}),o={edgeId:t,organisationId:e,name:a,created:s},n.next=4,O.http_put("/edge/",o,(function(t){$t(e,i)}),(function(e){i({type:ke,title:"Error",error:e})}));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},updateEdgeDeviceCommand:function(e,t,a,s,n){return function(){var i=Object(xt.a)(jt.a.mark((function i(r,o){var c;return jt.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r({type:we,busy:!0}),c={edgeId:t,organisationId:e,command:a,parameters:s,created:n,executed:0,result:""},i.next=4,O.http_put("/edge/command",c,(function(a){ta(e,t,r)}),(function(e){r({type:ke,title:"Error",error:e})}));case 4:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}()},deleteEdgeDeviceCommand:function(e,t,a){return function(){var s=Object(xt.a)(jt.a.mark((function s(n,i){return jt.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n({type:we,busy:!0}),s.next=3,O.http_delete("/edge/command/"+encodeURIComponent(e)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(a),(function(a){ta(e,t,n)}),(function(e){n({type:ke,title:"Error",error:e})}));case 3:case"end":return s.stop()}}),s)})));return function(e,t){return s.apply(this,arguments)}}()},getHtml5Notifications:function(){return function(){var e=Object(xt.a)(jt.a.mark((function e(t,a){return jt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zt(t);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},restore:function(e){return function(){var t=Object(xt.a)(jt.a.mark((function t(a,s){return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:we,busy:!0}),t.next=3,O.http_put("/backup/restore",{data:e},(function(e){a({type:we,busy:!1})}),(function(e){a({type:ke,title:"Error",error:e})}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}},ra=a(0),oa={background:{margin:"5px",backgroundColor:"#fefefe",padding:"15px",height:"55px",fontFamily:"Tahoma",fontWeight:"500",color:"#888",borderRadius:"4px"},logo_box:{position:"absolute",left:"10px",top:"10px"},logo:{float:"left",width:"200px"},projectTitle:{fontSize:"1.1em",float:"left",marginLeft:"50px",marginTop:"25px"},homeImageContainer:{float:"left"},themeSelect:{marginRight:"20px",marginTop:"4px",float:"left"},themeSelectLoggedIn:{marginTop:"-10px",marginRight:"10px",float:"left"},homeImage:{width:"32px"},signOutImageContainer:{paddingTop:"5px"},signOutImage:{width:"22px"},bookButton:{float:"right",marginRight:"20px"},bookImage:{width:"32px"},versionText:{fontSize:"0.8em",marginLeft:"-20px"}},ca=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={title:e.title,signed_in:e.signed_in,showDocumentation:window.location.toString().indexOf("/#/documentation")<0},s}return Object(f.a)(a,[{key:"componentDidMount",value:function(){"light"===this.props.theme?document.getElementById("ss-body").className="light":document.getElementById("ss-body").className="dark"}},{key:"goWeb",value:function(){window.location=window.ENV.web_base}},{key:"signOut",value:function(){this.props.signOut(),window.location="/#/"}},{key:"getLogo",value:function(){return"dark"===this.props.theme?"../images/simsage-logo-white-no-strapline.svg":"../images/simsage-logo-no-strapline.svg"}},{key:"flipTheme",value:function(){"light"!==this.props.theme?(this.props.setTheme("light"),document.getElementById("ss-body").className="light"):(this.props.setTheme("dark"),document.getElementById("ss-body").className="dark")}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ra.jsxs)("div",{className:t+" menu-padding no-select",children:[Object(ra.jsx)("div",{style:oa.logo_box,children:Object(ra.jsx)("img",{alt:"SimSage",title:"Search less; find more.",style:oa.logo,src:this.getLogo(),onClick:function(){return e.goWeb()}})}),Object(ra.jsxs)(mt.a,{container:!0,spacing:1,children:[Object(ra.jsx)(mt.a,{item:!0,xs:2}),Object(ra.jsx)(mt.a,{item:!0,xs:4,children:Object(ra.jsx)("span",{style:oa.projectTitle,children:this.state.title})}),Object(ra.jsx)(mt.a,{item:!0,xs:4}),Object(ra.jsxs)(mt.a,{item:!0,xs:2,children:[Object(ra.jsx)("div",{style:this.state.signed_in?oa.themeSelectLoggedIn:oa.themeSelect,children:Object(ra.jsx)(gt.a,{checked:"light"===this.props.theme,onChange:function(){return e.flipTheme()},title:"change the SimSage theme from dark to light or vice versa",color:"primary",name:"checkedTheme",inputProps:{"aria-label":"primary checkbox"}})}),!this.state.signed_in&&Object(ra.jsxs)("span",{style:oa.homeImageContainer,children:[Object(ra.jsx)("img",{src:"light"===t?"../images/home.svg":"../images/home-light.svg",alt:"home",title:"home",onClick:function(){return e.goWeb()},style:oa.homeImage}),Object(ra.jsxs)("div",{style:oa.versionText,children:["version ",window.ENV.version]})]}),this.state.signed_in&&Object(ra.jsx)("span",{style:oa.signOutImageContainer,children:Object(ra.jsx)("img",{src:"light"===t?"../images/sign-out.svg":"../images/sign-out-light.svg",alt:"sign-out",title:"sign-out",onClick:function(){e.signOut()},style:oa.signOutImage})})]})]})]})}}]),a}(s.Component),la=Object(o.b)((function(e){return{theme:e.appReducer.theme}}),(function(e){return Object(u.b)(ia,e)}))(ca),da=a(615),ua=a(597),pa=a(596),ha=a(595),ba=a(617),ma=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={open:!1,title:e.title,message:e.message,callback:e.callback,has_error:!1},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleOk",value:function(){this.setState({open:!1}),this.state.callback&&this.state.callback()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&e.message&&this.setState({open:e.message.length>0,message:e.message,title:e.title})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"error-dialog.js: Something went wrong."}):Object(ra.jsxs)(da.a,{className:"error-dialog",ref:"dialog","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.open,fullWidth:!0,maxWidth:"md",onClose:function(){return e.handleOk()},children:[Object(ra.jsx)(ha.a,{id:"alert-dialog-title",className:this.props.theme,children:Object(ra.jsx)(ba.a,{error:!0,children:this.state.title})}),Object(ra.jsx)(pa.a,{className:this.props.theme,children:Object(ra.jsx)("div",{children:this.state.message})}),Object(ra.jsx)(ua.a,{className:this.props.theme,children:Object(ra.jsx)(ct.a,{variant:"contained",type:"submit",color:"primary",onClick:function(){return e.handleOk()},children:"Ok"})})]})}}]),a}(n.a.Component),ga=a(600),fa={center:{textAlign:"center"},hr:{color:"#e0e0e0",background:"#e0e0e0",width:"30%",height:"1px",marginLeft:"auto",marginRight:"auto",marginTop:"20px",marginBottom:"20px"},hr_dark:{color:"#444",background:"#444",width:"30%",height:"1px",marginLeft:"auto",marginRight:"auto",marginTop:"20px",marginBottom:"20px"},spinner:{position:"relative",top:"-8px",left:"40px",width:"32px"},spinnerInvisible:{display:"none",position:"relative",top:"-8px",left:"40px",width:"32px"},page:{textAlign:"center",fontSize:"1.0em",fontFamily:"Tahoma"},recaptcha:{display:"flex",justifyContent:"center",width:"100%"},helpText:{marginTop:"10px",fontSize:"0.9em",color:"#888",marginBottom:"2px"},license:{marginTop:"20px"},busy:{display:"block",position:"fixed",left:0,top:0,width:"100%",height:"100%",zIndex:"9999",borderRadius:"10px",opacity:"0.8",backgroundSize:"100px",background:"url('../images/busy.gif') 50% 50% no-repeat rgb(255,255,255)"},textBox:{width:"250px",borderRadius:"3px",marginBottom:"10px"}},ja=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={email:"",password:""},s}return Object(f.a)(a,[{key:"componentDidMount",value:function(){!function(){try{_(v())}catch(e){}}(),this.props.notBusy()}},{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"handleClick",value:function(){this.props.signIn(this.state.email,this.state.password,(function(){window.location="/#/home"}))}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.handleClick()}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ra.jsxs)(ot.a,{theme:"light"===t?ht:bt,children:[Object(ra.jsx)(ga.a,{}),Object(ra.jsx)(la,{title:"administration",signed_in:!1}),Object(ra.jsx)(ma,{title:this.props.error_title,theme:this.props.theme,message:this.props.error,callback:function(){return e.props.closeError()}}),this.props.busy&&Object(ra.jsx)("div",{style:fa.busy}),Object(ra.jsxs)(mt.a,{container:!0,spacing:1,children:[Object(ra.jsx)(mt.a,{item:!0,xs:12,children:Object(ra.jsx)("div",{style:"light"===t?fa.hr:fa.hr_dark})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:6,style:fa.center,children:Object(ra.jsx)(lt.a,{disabled:this.props.busy,variant:"standard",style:fa.textBox,autoFocus:!0,placeholder:"Enter your email",label:"email",onChange:function(t){return e.setState({email:t.target.value})},onKeyPress:this.onKeyPress.bind(this)})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:6,style:fa.center,children:Object(ra.jsx)(lt.a,{disabled:this.props.busy,style:fa.textBox,type:"password",placeholder:"Enter your Password",label:"Password",onChange:function(t){return e.setState({password:t.target.value})},onKeyPress:this.onKeyPress.bind(this)})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:6,style:fa.center,children:Object(ra.jsx)(ct.a,{variant:"contained",color:"primary",className:"button-style",disabled:this.props.busy,onClick:function(){return e.handleClick()},children:"Sign-in"})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:12,children:Object(ra.jsx)("div",{style:"light"===t?fa.hr:fa.hr_dark})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:6,style:fa.center,children:Object(ra.jsx)("div",{style:fa.helpText,className:"no-select",children:"forgotten your password?"})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:6,style:fa.center,children:Object(ra.jsx)(ct.a,{variant:"contained",onClick:function(){return window.location="/#/reset-password-request"},disabled:this.props.busy,className:"button-style",children:"Reset my Password"})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:12}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:6,style:fa.center,children:Object(ra.jsx)("div",{style:fa.license,children:Object(ra.jsx)(ct.a,{variant:"contained",onClick:function(){return window.location="/#/foss-license"},disabled:this.props.busy,className:"button-style",children:"open source licenses"})})}),Object(ra.jsx)(mt.a,{item:!0,xs:3})]})]})}}]),a}(s.Component),xa=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,busy:e.appReducer.busy,theme:e.appReducer.theme}}),(function(e){return Object(u.b)(ia,e)}))(ja),va={center:{textAlign:"center"}},ya=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={email:"",error_title:"",error_msg:"",has_error:!1},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleClick",value:function(e){var t=this;this.state.email.length>0?S.passwordResetRequest(this.state.email,(function(e){t.showError("Success","we've emailed you a link for resetting your password.")}),(function(e){t.showError("Error",e)})):this.showError("Error","Input field value is missing")}},{key:"showError",value:function(e,t){this.setState({error_title:e,error_msg:t})}},{key:"closeError",value:function(){this.setState({error_msg:""})}},{key:"render",value:function(){var e=this;if(this.state.has_error)return Object(ra.jsx)("h1",{children:"ResetPasswordRequest: Something went wrong."});var t=this.props.theme;return Object(ra.jsxs)(ot.a,{theme:"light"===t?ht:bt,children:[Object(ra.jsx)(ga.a,{}),Object(ra.jsx)(la,{title:"administration",loggedIn:!1}),Object(ra.jsx)(ma,{title:this.state.error_title,theme:this.props.theme,message:this.state.error_msg,callback:this.closeError.bind(this)}),Object(ra.jsxs)(mt.a,{container:!0,spacing:3,children:[Object(ra.jsx)(mt.a,{item:!0,xs:12}),Object(ra.jsx)(mt.a,{item:!0,xs:12}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:6,style:va.center,children:Object(ra.jsx)("div",{className:"sign-in-help-text no-select",children:"Please enter your email address and we'll email you a link to reset your password."})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:6,style:va.center,children:Object(ra.jsx)(lt.a,{autoFocus:!0,placeholder:"Enter your email Address",label:"Email Address",onChange:function(t){return e.setState({email:t.target.value})}})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:6,style:va.center,children:Object(ra.jsx)(ct.a,{variant:"contained",color:"primary",className:"button-style",onClick:function(t){return e.handleClick(t)},children:"Submit"})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:12}),Object(ra.jsx)(mt.a,{item:!0,xs:12}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:6,style:va.center,children:Object(ra.jsx)("div",{className:"sign-in-help-text no-select",children:"Click here to return to sign-in"})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:6,style:va.center,children:Object(ra.jsx)("div",{children:Object(ra.jsx)(ct.a,{variant:"contained",onClick:function(){return window.location="/#/"},className:"button-style",children:"Return to Sign-in"})})}),Object(ra.jsx)(mt.a,{item:!0,xs:3})]})]})}}]),a}(s.Component),_a=Object(o.b)((function(e){return{theme:e.appReducer.theme}}),(function(e){return Object(u.b)(ia,e)}))(ya),Oa=a(312),wa={input:{width:"350px"},page:{textAlign:"center",fontSize:"1.0em",fontFamily:"Tahoma"},spacer:{height:"10px"}},ka=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;Object(g.a)(this,a),s=t.call(this,e);var n=Oa.parse(e.location.search),i="",r="";return n.email&&(i=n.email),n.resetid&&(r=n.resetid),s.state={email:i,reset_id:r,password:"",error_title:"",error_msg:"",has_error:!1},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleClick",value:function(e){var t=this;this.state.email.length>0&&this.state.reset_id.length>0&&this.state.password.length>5?S.resetPassword(this.state.email,this.state.password,this.state.reset_id,(function(e){t.showError("Success","Password reset.  You can now sign-in using your new password."),t.setState({reset_id:"",email:"",password:""})}),(function(e){t.showError("Error",e)})):this.showError("Error","Input field value(s) missing or incorrect.")}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.handleClick(e)}},{key:"showError",value:function(e,t){this.setState({error_title:e,error_msg:t})}},{key:"closeError",value:function(){this.setState({error_msg:""})}},{key:"render",value:function(){var e=this;if(this.state.has_error)return Object(ra.jsx)("h1",{children:"ResetPasswordResponse: Something went wrong."});var t=this.props.theme;return Object(ra.jsxs)(ot.a,{theme:"light"===t?ht:bt,children:[Object(ra.jsx)(ga.a,{}),Object(ra.jsx)(la,{title:"",loggedIn:!1}),Object(ra.jsx)(ma,{title:this.state.error_title,theme:this.props.theme,message:this.state.error_msg,callback:this.closeError.bind(this)}),Object(ra.jsxs)(mt.a,{container:!0,spacing:1,children:[Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:6,children:Object(ra.jsx)(lt.a,{placeholder:"Enter your email Address",label:"Email Address",style:wa.input,value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:6,children:Object(ra.jsx)(lt.a,{placeholder:"Enter the reset-id we sent you",label:"Reset Id",style:wa.input,value:this.state.reset_id,onChange:function(t){return e.setState({reset_id:t.target.value})}})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:12,children:Object(ra.jsx)("br",{})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:6,children:Object(ra.jsx)(lt.a,{type:"password",placeholder:"Enter your new Password",label:"Enter your new Password",autoFocus:!0,style:wa.input,onChange:function(t){return e.setState({password:t.target.value})},onKeyPress:this.onKeyPress.bind(this)})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:12,children:Object(ra.jsx)("div",{style:wa.spacer,children:"\xa0"})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:6,children:Object(ra.jsx)("div",{children:Object(ra.jsx)(ct.a,{variant:"contained",className:"button-style",onClick:function(t){return e.handleClick(t)},children:"Reset Password"})})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:12,children:Object(ra.jsx)("br",{})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:6,children:Object(ra.jsx)("div",{className:"sign-in-help-text no-select",children:"Click here to return to sign-in"})}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:3}),Object(ra.jsx)(mt.a,{item:!0,xs:6,children:Object(ra.jsx)("div",{children:Object(ra.jsx)(ct.a,{variant:"contained",className:"button-style",onClick:function(){return window.location="/#/"},children:"Return to Sign-in"})})}),Object(ra.jsx)(mt.a,{item:!0,xs:3})]})]})}}]),a}(s.Component),Sa=Object(o.b)((function(e){return{theme:e.appReducer.theme}}),(function(e){return Object(u.b)(ia,e)}))(ka),Ca={bottomLink:{textAlign:"center",marginTop:"50px"}},Ia=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={error_title:"",error_msg:"",has_error:!1},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"showError",value:function(e,t){this.setState({error_title:e,error_msg:t})}},{key:"closeError",value:function(){this.setState({error_msg:""})}},{key:"render",value:function(){if(this.state.has_error)return Object(ra.jsx)("h1",{children:"license: Something went wrong."});var e=this.props.theme;return Object(ra.jsxs)(ot.a,{theme:"light"===e?ht:bt,children:[Object(ra.jsx)(ga.a,{}),Object(ra.jsx)(la,{title:"Open Source Licenses",loggedIn:!1}),Object(ra.jsx)(ma,{title:this.state.error_title,theme:this.props.theme,message:this.state.error_msg,callback:this.closeError.bind(this)}),Object(ra.jsxs)("div",{className:"license-container no-select",children:[Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Apache ActiveMQ"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2005-2019 The Apache Software Foundation "}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Apache Avro"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2010-2019 The Apache Software Foundation "}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Apache Cassandra"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2009-2021 The Apache Software Foundation "}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Apache Hadoop"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2019 The Apache Software Foundation "}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Apache http-client"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 1999-2007 The Apache Software Foundation"}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Apache http-mime"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 1999-2020 The Apache Software Foundation"}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Apache Parquet"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2020 The Apache Software Foundation "}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Apache PDFBox"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2020 The Apache Software Foundation "}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Apache Spark"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2014- The Apache Software Foundation "}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Apache Tika"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2020 The Apache Software Foundation"}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"commons-io"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2002-2020 The Apache Software Foundation"}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"commons-fileupload"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2002-2020 The Apache Software Foundation"}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"DataStax Driver"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 DataStax, Inc."}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Google API"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2012 Google Inc."}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Google Drive"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2018, Google Inc."}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Google OAuth"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2018, Google Inc."}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Jackson"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2007- Tatu Saloranta, tatu.saloranta@iki.fi"}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"javax-mail"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 1997-2011 Oracle and/or its affiliates."}),Object(ra.jsx)("div",{className:"license",children:"CDDL 1.1"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"javax WebSocket Client"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2012-2014 Oracle and/or its affiliates. "}),Object(ra.jsx)("div",{className:"license",children:"CDDL 1.1, GPL 2.0"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"jBcrypt"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2006 Damien Miller <djm@mindrot.org>"}),Object(ra.jsx)("div",{className:"license",children:"Mozilla public license 2.0"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"JCIFS-ng"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2016 AgNO3 Gmbh & Co. KG"}),Object(ra.jsx)("div",{className:"license",children:"GNU Lesser General public license 2.1"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"JEP"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright (c) 2004 - 2020 JEP AUTHORS"}),Object(ra.jsx)("div",{className:"license",children:"zlib/libpng License"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"JNA"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2011 Timothy Wall"}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"JEP"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2004 - 2020 JEP AUTHORS"}),Object(ra.jsx)("div",{className:"license",children:"zlib/libpng License"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Joda-time"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2001-2005 Stephen Colebourne"}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"jSoup"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2009 - 2021 Jonathan Hedley (https://jsoup.org/)"}),Object(ra.jsx)("div",{className:"license",children:"MIT License"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"junit"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2002-2020 JUnit"}),Object(ra.jsx)("div",{className:"license",children:"Eclipse Public License 1.0"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Kotlin"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2016-2020 JetBrains s.r.o."}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Kotlin Coroutines Core"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2016-2020 JetBrains s.r.o."}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Microsoft SQL JDBC"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2020 Microsoft Corporation"}),Object(ra.jsx)("div",{className:"license",children:"MIT license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Microsoft msal4j"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2020 Microsoft Corporation"}),Object(ra.jsx)("div",{className:"license",children:"MIT license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"MariaDB JDBC"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2021, MariaDB"}),Object(ra.jsx)("div",{className:"license",children:"LGPL 2.1"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"OpenJDK 11.0.9.1"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 1995, 2021, Oracle and/or its affiliates."}),Object(ra.jsx)("div",{className:"license",children:"GPLv2 with linking exception"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Postgres SQL JDBC"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 1997, PostgreSQL Global Development Group"}),Object(ra.jsx)("div",{className:"license",children:"BSD-2 Clause"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"snakeyaml"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2008-2013 Andrey Somov"}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"snappy java"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2011 Taro L. Saito"}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"spaCy"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2016-2020 ExplosionAI GmbH, 2016 spaCy GmbH, 2015 Matthew Honnibal"}),Object(ra.jsx)("div",{className:"license",children:"MIT license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Spring"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2002-2021 Pivotal, Inc."}),Object(ra.jsx)("div",{className:"license",children:"Apache 2.0 license"})]}),Object(ra.jsxs)("div",{className:"license-section",children:[Object(ra.jsx)("div",{className:"title",children:"Tyrus WebSocket Client"}),Object(ra.jsx)("div",{className:"copyright",children:"Copyright \xa9 2014-2015 Oracle and/or its affiliates. "}),Object(ra.jsx)("div",{className:"license",children:"Eclipse Public License 2.0"})]})]}),Object(ra.jsx)("br",{clear:"both"}),Object(ra.jsx)("div",{style:Ca.bottomLink,children:Object(ra.jsx)(ct.a,{variant:"contained",onClick:function(){return window.location="/#/"},className:"button-style",children:"Return to Sign-in"})}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{})]})}}]),a}(s.Component),Ra=Object(o.b)((function(e){return{theme:e.appReducer.theme}}),(function(e){return Object(u.b)(ia,e)}))(Ia),Da={page:{fontSize:"0.9em",fontFamily:"Tahoma"},content:{marginTop:"10px",marginLeft:"50px"},link:{margin:"10px",texcolor:"#c0c0c0"},bottomLink:{textAlign:"center",marginTop:"50px",marginBottom:"50px"},text:{lineHeight:"22px",fontSize:"1.2em",fontColor:"#222"}},Ta=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={error_title:"",error_msg:"",has_error:!1},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"showError",value:function(e,t){this.setState({error_title:e,error_msg:t})}},{key:"closeError",value:function(){this.setState({error_msg:""})}},{key:"render",value:function(){if(this.state.has_error)return Object(ra.jsx)("h1",{children:"license-agreement: Something went wrong."});var e=this.props.theme;return Object(ra.jsxs)(ot.a,{theme:"light"===e?ht:bt,children:[Object(ra.jsx)(ga.a,{}),Object(ra.jsxs)("div",{children:[Object(ra.jsx)(la,{title:"",loggedIn:!1}),Object(ra.jsx)(ma,{title:this.state.error_title,theme:this.props.theme,message:this.state.error_msg,callback:this.closeError.bind(this)}),Object(ra.jsx)("br",{clear:"both"}),Object(ra.jsxs)("div",{style:Da.content,children:[Object(ra.jsx)("h1",{children:"SIMSAGE\u2122 TERMS OF USE"}),Object(ra.jsx)("br",{}),"Welcome to SimSage\u2122, an innovative, semantic, software-based Artificial Intelligence service that assists organisations to automate their web-page interactions with Customers. SimSage\u2122\u2019s capabilities include automating Customer enquiries requests for information, particularly by supplementing, or replacing Frequently Asked Questions (FAQs).",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"These Terms of Use, as amended from time to time (Terms) explain the terms on which SimSage\u2122  Limited (NZCN 6798094) of 86 Tinakori Road, Wellington, New Zealand (SimSage\u2122) provides customers with access to certain services through the www.simsage.nz website (Website). Please read them carefully.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"By registering to use the Services and clicking \u201cI accept\u201d, You acknowledge that You have read and understood these Terms and if You are acting on behalf of any person for whom You are using the Services, that You have full authority to act and are deemed to have agreed to these Terms on behalf of that person for whom you use the Services.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"SimSage\u2122 reserves the right to change these Terms at any time, effective on posting the modified terms on the Website, and SimSage\u2122 will make every effort to communicate these changes to You via email or notification via the Website. It is likely the Terms will change over time, particularly as the Services evolve to reflect our development of the Services and user feedback. It is Your obligation to ensure that You have read, understood and agree to the most recent Terms available on the Website.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)("h2",{children:"1. The Website and the Services"}),Object(ra.jsx)("br",{}),"1.1 The Website is owned and managed by SimSage Limited (NZCN 6798094) of 86 Tinakori Road, Wellington, New Zealand.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"1.2 In consideration of You paying the Fees, SimSage\u2122 shall provide You with the services described on the Website (Services). To avoid doubt, SimSage\u2122\u2019s obligations are limited to providing the Services and do not in any way include acting on Your behalf. Nothing in these Terms is intended to, or shall be deemed to, establish any partnership or joint venture between You and SimSage\u2122, appoint either party as the agent of the other, nor authorise either party to make or enter into any commitments for, or on behalf of, the other party.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"1.3 SimSage\u2122 may from time to time add, modify, suspend or cease (temporarily or permanently) providing any element of the Services upon notice to You, such notice to be effective on the earlier of SimSage\u2122 posting on the Website or via email to You.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"1.4 If there is unplanned service downtime in respect of the Services or the Website, SimSage\u2122 shall use its reasonable endeavours (but has no obligation) to notify You in advance provided that SimSage\u2122 is able to do so and such notice will be effective on the earlier of SimSage\u2122 posting on the Website or notifying You via email.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"1.5 Access to the Website and the Services may be granted to You, at SimSage\u2122\u2019s discretion and on terms and for a period agreed in writing (and if no time period is specified, for one month only), on a trial or \u2018free\u2019 basis (Trial). You acknowledge and agree that these Terms shall apply to the Trial, and in addition, during the Trial:",Object(ra.jsx)("br",{}),"1.5.1 access to the Services will be provided to You at no cost;",Object(ra.jsx)("br",{}),"1.5.2 such access is solely for the purpose of offering You a preview demonstration of the functionality and features of the Services;",Object(ra.jsx)("br",{}),"1.5.3 the functionality of the Services may be limited or restricted; and",Object(ra.jsx)("br",{}),"1.5.4 SimSage\u2122 may withdraw or suspend Your access to the Services at any time, and at the end of the one month Trial period (or such other Trial period agreed in writing), Your continued access to the Website and/or Services will be subject to payment of Fees or charges in accordance with clause 4.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)("h2",{children:"2 Register to use the Services"}),Object(ra.jsx)("br",{}),"2.1 To use the Services You must first register with SimSage\u2122 by completing the online registration form on the Website.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"2.2 SimSage\u2122 will send You a confirmation email (Confirmation Email) once it has accepted and confirmed Your registration. Your contract to use the Services on these Terms (Contract) starts on the date of the Confirmation Email.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"2.3 SimSage\u2122 reserves the right to conduct verification and security procedures in respect of all information provided by You to SimSage\u2122. If SimSage\u2122 believes the information provided by You to register and use any of the Services breaches (or may breach) any of these Terms, SimSage\u2122 at its sole discretion may take any action it deems appropriate, including without limitation, to terminate Your Contract (with no return of any Fees already paid).",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"2.4 These Terms apply to any Authorised Personnel who You authorize to access and use the Website and the Services through Your account. You acknowledge and agree:",Object(ra.jsx)("br",{}),"2.4.1 all Authorised Personnel must use the corporate  email address allocated to them by You when creating an Authorised Personnel profile;",Object(ra.jsx)("br",{}),'2.4.2 SimSage\u2122 may allocate Your "Admin" or "Member" accounts with varying levels of access, and You shall comply (and ensure each Authorised Personnel complies) with any SimSage\u2122 directions for setting up and using such accounts; and',Object(ra.jsx)("br",{}),"2.4.3 You are directly liable to SimSage\u2122 at all times for the acts or omissions of Your Authorised Personnel.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"2.5 You shall keep, and ensure Your Authorised Personnel keep, Your and Your Authorised Personnel\u2019s usernames and passwords (Logins) safe and secure to ensure they are not used without Your permission. You must immediately notify SimSage\u2122 if You believe there has been unauthorised use or access to Your Logins and/or Your profile on the Website. You shall be solely responsible and liable for any breach of these Terms arising out of, or resulting from, using Your Logins to access the Services and/or the Website (whether such use is authorised by You or not).",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"2.6 SimSage\u2122 may, at any time on notice, require You to sign any further documents to confirm Your acceptance of, or give full effect to, these Terms.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)("h2",{children:"3 Your obligations - general"}),Object(ra.jsx)("br",{}),"3.1 The obligations in this clause 3 apply to all users of SimSage\u2122, the Services and/or the Website. Additional obligations   are set out below.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"3.2 You shall at all times use the Services and the Website in accordance with these Terms.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"3.3 You shall ensure Your use of the Services and/or the Website, including submitting any information, data, images, videos, audio, files, links to external websites, communication between Authorised Personnel, and all other material of any format (Submissions), in each case:",Object(ra.jsx)("br",{}),"3.3.1 complies with all applicable laws;",Object(ra.jsx)("br",{}),"3.3.2 does not infringe any intellectual property or other proprietary rights of any third party;",Object(ra.jsx)("br",{}),"3.3.3 does not, or could not reasonably be deemed to:",Object(ra.jsx)("br",{}),Object(ra.jsxs)("ul",{children:[Object(ra.jsx)("li",{children:"be offensive, illegal, inappropriate or in any way promote racism, bigotry, hatred or physical harm of any kind against any group or individual;"}),Object(ra.jsx)("li",{children:"harass or advocate harassment of another person;"}),Object(ra.jsx)("li",{children:"display pornographic or sexually explicit material;"}),Object(ra.jsx)("li",{children:"promote conduct that is abusive, threatening, obscene, or defamatory;"}),Object(ra.jsx)("li",{children:"promote any illegal activities, or provide instructional information about illegal activities, including violating someone else\u2019s privacy; or"}),Object(ra.jsx)("li",{children:"provide or create computer viruses, other malware or denial of service attacks;"}),Object(ra.jsx)("li",{children:"promote or contain information that is inaccurate, false or misleading;"}),Object(ra.jsx)("li",{children:"engage in promoting contests, sweepstakes and pyramid schemes;"}),Object(ra.jsx)("li",{children:"exploit people in a sexual or violent manner;"}),Object(ra.jsx)("li",{children:"invade or violate any third party\u2019s right to privacy; and"}),Object(ra.jsx)("li",{children:'transmit "junk mail", or "chain letters", or unsolicited mass mailing, messaging or "spamming";'})]}),"and You hereby indemnify SimSage\u2122 for all losses, liabilities, costs and expenses (including legal costs) suffered or incurred by SimSage\u2122 (and/or its parent company) which arise directly or indirectly from Your breach of this clause 3.2.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"3.4 SimSage\u2122 does not vet, verify the accuracy, correctness and completeness, edit or modify any Submission or any other information, data and materials created, used and/or published by You or on Your behalf on Your Website to determine whether they may result in any liability to any third party. You warrant that You have the right to use all such information and material.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"3.5 Notwithstanding clause 3.3, SimSage\u2122 reserves the right to refuse to publish any Submissions, or to remove or edit a Submission (in whole or in part and at any time), if SimSage\u2122 believes Your use of the Services and/or the Website breaches these Terms.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"3.6 You shall not at any time:",Object(ra.jsx)("br",{}),"3.6.1 use the Services and/or the Website to impersonate (or in a way that impersonates) another User or person; and",Object(ra.jsx)("br",{}),"3.6.2 use the information made available to You through Your use of the Services and/or the Website for any purpose other than for procuring benefit out of the Services and/or the Website; and",Object(ra.jsx)("br",{}),"3.6.3 do anything whatsoever which (or which is likely to) impair, interfere with, damage, or cause harm or distress to any person using the Services and/or the Website or in respect of the network.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"3.7 SimSage\u2122 takes breaches of this clause 3 very seriously and reserves the right to take any action that SimSage\u2122 deems necessary, including suspending or terminating Your use of the Services and/or access to the Website. SimSage\u2122 may also commence legal proceedings if there is illegal use of the Services and/or the Website, or disclose information to any third party who is claiming that any material posted or uploaded by You to our Website violates their intellectual property or other proprietary rights or their right to privacy. You shall promptly notify SimSage\u2122 if You are aware of any breach (or any suspected breach) of this clause 3 by Your Authorised Personnel.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)("h2",{children:"4 Fees"}),Object(ra.jsx)("br",{}),"4.1 The fees to access the Services are set out on the Website (Fees). Except where You are using any Services that are specifically noted on the Website as \u201cFree\u201d, or participating in a Trial in accordance with clause 1.5, You may only access the Services by paying the Fees noted on the Website..",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"4.2 Unless stated otherwise on the Website or agreed by SimSage\u2122 in writing, the Fees shall be payable by You, in the manner as set out on the Website.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"4.3 All Fees are inclusive of GST and all other taxes or duties, and are non-refundable for any reason whatsoever.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"4.4 The Fees or any rate of charge may be increased by SimSage\u2122 upon not less than 30 days prior written notice to You, which notice may be provided through the Website.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)("h2",{children:"5 Warranties"}),Object(ra.jsx)("br",{}),"5.1 You: You warrant that (a) You have the right and capacity to enter into, and be bound by, these Terms;  (b) You shall comply with all applicable laws relating to Your use of the Services and/or the Website; and (c)  You shall comply with SimSage\u2122\u2019s requirements and reasonable directions relating to the Services and Website as notified by SimSage\u2122 from time to time.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),'5.2 SimSage\u2122: The provision of, access to, and use of, the Services and the Website is on an "as is " basis and at Your own risk. SimSage\u2122 gives no warranty about the Services and/or the Website, and in particular, SimSage\u2122 does not warrant that:',Object(ra.jsx)("br",{}),"5.2.1 the Services will meet Your requirements or that it will be suitable for any particular purpose. It is Your sole responsibility to determine that the Services meet Your needs and/or the needs of Your business and are suitable for the purposes for which they are used; or",Object(ra.jsx)("br",{}),"5.2.2 the use of the Services will be uninterrupted or error free. Among other things, the operation and availability of the systems used for accessing the Services, including public telephone services, computer networks and the Internet, can be unpredictable and may from time to time interfere with or prevent access to the Services. SimSage\u2122 is not in any way responsible for any such interference or prevention of Your access or use of the Services. To avoid doubt, all implied conditions or warranties are excluded to the maximum extent permitted by law, including (without limitation) warranties of merchantability, non-infringement of intellectual property, accuracy, completeness, fitness for a particular purpose, and any warranties arising by statute or otherwise in law or from course of dealing, course of performance, or use of trade.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"5.3 Third party websites: SimSage\u2122 may display or provide links or other interaction with third party websites and third party advertising banners on the Website (Third Party Websites). In particular, the Services may also provide You with the opportunity to connect and publish Your Information through Third Party Websites and other third party services such as social and business networking sites. Use of any such Third Party Websites and services shall be at Your sole risk and subject to the terms and conditions of the Third Party Website provider.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)("h2",{children:"6 Limitation of liability"}),Object(ra.jsx)("br",{}),"6.1 To the maximum extent permitted by law, SimSage\u2122 excludes all liability and responsibility to You (or any other person) in contract, tort (including negligence), or otherwise, for any loss (including loss of information, Data, profits and savings) or damage resulting, directly or indirectly, from any use of, or reliance on, the Services and/or Website.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"6.2 If You suffer loss or damage as a result of SimSage\u2122's negligence or failure to comply with these Terms, any claim by You against SimSage\u2122 arising from SimSage\u2122's negligence or failure will be limited in respect of any one incident, or series of connected incidents, to the Fees paid by You in the previous month. You are directly liable to SimSage\u2122 at all times for the acts or omissions of Your Authorised Personnel, in accordance with clause 2.4.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"6.3 If You are not satisfied with the Services, Your sole and exclusive remedy is to terminate these Terms in accordance with clause 7.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)("h2",{children:"7 Termination"}),Object(ra.jsx)("br",{}),"7.1 Trial policy:\u2028If SimSage\u2122 agrees in writing, in accordance with clause 1.5, to provide You with a trial usage period when You first sign up for access to the Services, You can evaluate the Services under the specified trial usage conditions, with no obligation to continue to use the Services. If You choose to continue using the Services thereafter, any payment applicable in accordance with clause 7 will be billed to You from the day You first added Your billing details into the Services.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"7.2 Prepaid Subscriptions:\u2028SimSage\u2122 will not provide any refund for any remaining prepaid period for a prepaid Fee subscription.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"7.3 No-fault termination:\u2028These Terms will continue for the period covered by the Fee paid or payable under clause 7.1. At the end of each billing period, these Terms will automatically continue for another period of the same duration as that period, provided You continue to pay the prescribed Fee when due, unless either party terminates these Terms by giving at least 30 days\u2019 notice to the other party before the end of the relevant payment period. If You terminate these Terms, You shall be liable to pay all relevant Fees on a pro-rata basis for each day of the then current period up to and including the day of termination of these Terms.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"7.4 Breach:\u2028If You:",Object(ra.jsx)("br",{}),"7.4.1 breach any of these Terms (including by non-payment of any Fees) and (i) if the breach is capable of being remedied, do not remedy the breach within 14 days after receiving notice of the breach; and (ii) if the breach is not capable of being remedied (which includes any payment of Fees that are more than 30 days overdue); or",Object(ra.jsx)("br",{}),"7.4.2 You or Your business become insolvent or Your business goes into liquidation or has a receiver or manager appointed of any of its assets or if You become insolvent, or make any arrangement with Your creditors, or become subject to any similar insolvency event in any jurisdiction, SimSage\u2122 may, at its sole discretion:",Object(ra.jsx)("br",{}),"7.4.3 Terminate this Agreement and Your use of the Services;",Object(ra.jsx)("br",{}),"7.4.4 Suspend for any definite or indefinite period of time, Your use of the Services;",Object(ra.jsx)("br",{}),"7.4.5 Suspend or terminate access to all or any Data; and/or",Object(ra.jsx)("br",{}),"7.4.6 Take any of these actions in relation to any other person/s whom You have authorised to have access to Your information or Data.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"7.5 Accrued Rights:\u2028Termination of these Terms is without prejudice to any rights or obligations of the parties which have accrued up to and including the date of termination, and shall not affect the provisions of these Terms which expressly, or by their nature, are intended to continue, including this clause 7 (Termination), and clauses 5 (Warranties), 6 (Limitation of Liability), 8 (Intellectual Property Rights). On termination of this Agreement You will:",Object(ra.jsx)("br",{}),"7.5.1 remain liable for any accrued Fees and amounts which become due for payment before or after termination; and",Object(ra.jsx)("br",{}),"7.5.2 immediately cease to use the Services.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)("h2",{children:"8 Intellectual property rights"}),Object(ra.jsx)("br",{}),"8.1 Title to, and all intellectual property rights in, the Services, the Website, including all software forming part of the Website (Software), and any documentation relating to the Services, is and remains the property of SimSage\u2122 (or its licensors). Nothing in these Terms will transfer from SimSage\u2122 to You any right, title or interest in the Services, the Website, the Software and associated documentation, all of which remain exclusively with SimSage\u2122 (or its licensors). All rights in and to the Software and the Website not expressly granted to You are reserved by SimSage\u2122 (and its licensors).",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"8.2 You may print off one copy and may download extracts of any pages from the Website solely for use by You; and You may draw the attention of other Users to Submissions or materials posted on the Website. You must not use any part of the Submissions of other Users and all materials on the Website for any purpose other than accessing the Website or obtaining a benefit from the Services in accordance with these Terms.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"8.3 You shall not, and shall procure that Authorised Personnel shall not modify, translate, create or attempt to create derivative copies of or copy the Software and/or the Website in whole or in part; reverse engineer, decompile, disassemble or otherwise reduce the object code of the Software and/or the Website to source code form; distribute, sub-licence, assign, share, timeshare, sell, rent, lease, transmit, grant a security interest in or otherwise transfer the Software, the Website and/or Your right to use the Software or the Website.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"8.4 You:",Object(ra.jsx)("br",{}),"8.4.1 Warrant that You own or have the right or licence to use the intellectual property rights in the Your Information, all information and materials provided by You to SimSage\u2122; and",Object(ra.jsx)("br",{}),"8.4.2 indemnify SimSage\u2122 against all losses, liabilities, costs and expenses (including but not limited to legal costs) arising from or incurred by reason of any infringement of any intellectual property right by the use or possession of Your Information, and all other information and material provided by You to SimSage\u2122.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)("h2",{children:"9 Data protection & privacy policy"}),Object(ra.jsx)("br",{}),"9.1 You and SimSage\u2122 shall comply with the Privacy Act 1993 (and all other successor legislation and regulations) in performing their obligations under these Terms.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"9.2 SimSage\u2122 processes personal information (as defined in the Privacy Act 1993) which it collects in the course of providing the Services in accordance with its Privacy Policy which is accessible on the Website. You should read that policy at www.SimSage.nz/privacy/. You will be deemed to have accepted that policy when You accept these Terms.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"9.3 For personal information which is processed by SimSage\u2122 on Your behalf as part of the Services, SimSage\u2122 will act strictly in accordance with Your instructions by following the processing and security obligations contained in these Terms. You confirm that You are solely responsible for ensuring that any such processing and security obligations comply with all applicable privacy and data protection laws. You hereby indemnify SimSage\u2122 against all losses, liabilities, costs and expenses (including but not limited to legal costs) arising from or incurred by reason of Your failure to comply with this clause 9.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)("h2",{children:"10 General"}),Object(ra.jsx)("br",{}),"10.1 No Assignment: You may not assign or transfer any rights to any other person without SimSage\u2122's prior written consent. SimSage\u2122 may assign or transfer its rights and/or obligations under these Terms without requiring Your consent.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"10.2 Waiver: If either party waives any breach of these Terms, this will not constitute a waiver of any other breach. No waiver will be effective unless made in writing.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"10.3 Delays: Neither party will be liable for any delay or failure in performing its obligations under these Terms if the delay or failure is due to any cause outside its reasonable control. This clause does not apply to any obligation to pay money.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"10.4 Severability: If any provision of these Terms is invalid, unenforceable or conflicts with applicable law, that provision is replaced with a provision which, as far as possible, accomplishes the original purpose of that provision. The remainder of these Terms will be binding on the parties.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"10.5 Notices: Unless specified otherwise in these Terms, any notice given under these Terms by one party to the other must be in writing by email and will be deemed to have been given on transmission. Notices to SimSage\u2122 must be sent to support@simsage.nz  or to any other email address notified by email to You by SimSage\u2122. Notices to You will be sent to the email address which You provided when registering for the Services. SimSage\u2122 reserves the right to change these Terms at any time, effective on posting the modified terms on the Website, and SimSage\u2122 will make every effort to communicate these changes to You via email or notification via the Website.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"10.6 Rights of Third Parties: A person who is not a party to these Terms has no right to benefit under or to enforce any term of these Terms.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"10.7 Acknowledgement: You acknowledge that in entering into these Terms, You have not relied on any representations, undertakings or promises given by or implied from anything said or written (whether on the Website, the internet or in negotiation between the parties) except as expressly set out in these Terms.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"10.8 Entire agreement: These Terms, together with our Privacy Policy and the terms of any other notices or instructions given to You under these Terms, supersede and extinguish all prior agreements, representations (whether oral or written), and understandings and constitute the entire agreement between You and SimSage\u2122 relating to the Services, the Website and the other matters addressed in these Terms.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),"10.9 Governing law and jurisdiction: These Terms are governed by, and shall be construed in accordance with, New Zealand law and shall be subject to the exclusive jurisdiction of the New Zealand courts.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{})]}),Object(ra.jsx)("div",{style:Da.bottomLink,children:Object(ra.jsx)(ct.a,{variant:"contained",onClick:function(){return window.close()},className:"button-style",children:"close"})})]})]})}}]),a}(s.Component),Na=Object(o.b)((function(e){return{theme:e.appReducer.theme}}),(function(e){return Object(u.b)(ia,e)}))(Ta),Ea={title:{fontSize:"16px"},text:{fontSize:"12px"},previewImage:{maxHeight:"100px"},prevFragment:{display:"inline-block",width:"20px",background:"black",color:"white",borderRadius:"5px",textAlign:"center",marginRight:"5px",cursor:"pointer"},nextFragment:{display:"inline-block",width:"20px",background:"black",color:"white",borderRadius:"5px",textAlign:"center",cursor:"pointer"},prevFragmentDisabled:{display:"inline-block",width:"20px",background:"grey",color:"white",borderRadius:"5px",textAlign:"center",marginRight:"5px",cursor:"default"},nextFragmentDisabled:{display:"inline-block",width:"20px",background:"grey",color:"white",borderRadius:"5px",textAlign:"center",cursor:"default"},author:{fontSize:"10px",fontWeight:"600"},url:{marginLeft:"10px",fontSize:"10px",color:"blue",cursor:"pointer"},spacer:{height:"20px"}},La=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,item:s.props.item},s}return Object(f.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({item:e.item})}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"prevFragment",value:function(){var e=this.state.item;e&&e.textIndex>0&&(e.textIndex-=1,this.setState({item:e}))}},{key:"nextFragment",value:function(){var e=this.state.item;e&&e.textIndex+1<e.textList.length&&(e.textIndex+=1,this.setState({item:e}))}},{key:"getPreviewSource",value:function(e){return"http://localhost:8080/api/document/preview/"+this.props.organisationId+"/"+this.props.kbId+"/"+this.props.clientId+"/"+e.urlId+"/-1"}},{key:"getBinarySource",value:function(e){return"http://localhost:8080/api/document/binary/"+this.props.organisationId+"/"+this.props.kbId+"/"+this.props.clientId+"/"+e.urlId}},{key:"render",value:function(){var e=this;if(this.state.has_error)return Object(ra.jsx)("h1",{children:"single-search-result: Something went wrong."});var t=this.state.item;return Object(ra.jsxs)(mt.a,{container:!0,spacing:1,style:Ea.gridWidth,children:[Object(ra.jsx)(mt.a,{item:!0,xs:12,children:Object(ra.jsx)("div",{style:Ea.title,children:Object(ra.jsx)("a",{href:this.getPreviewSource(t),target:"_blank",children:t.title})})}),Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsxs)("div",{children:[t.textIndex>0&&Object(ra.jsx)("span",{style:Ea.prevFragment,onClick:function(){return e.prevFragment()},children:"<"}),0===t.textIndex&&Object(ra.jsx)("span",{style:Ea.prevFragmentDisabled,children:"<"}),t.textIndex+1<t.textList.length&&Object(ra.jsx)("span",{style:Ea.nextFragment,onClick:function(){return e.nextFragment()},children:">"}),t.textIndex+1>=t.textList.length&&Object(ra.jsx)("span",{style:Ea.nextFragmentDisabled,children:">"})]})}),Object(ra.jsx)(mt.a,{item:!0,xs:9,children:Object(ra.jsx)("div",{style:Ea.text,dangerouslySetInnerHTML:{__html:a.highlight(t.textList[t.textIndex])}})}),Object(ra.jsx)(mt.a,{item:!0,xs:2,children:Object(ra.jsx)("div",{style:Ea.previewImage,children:Object(ra.jsx)("img",{src:this.getPreviewSource(t),alt:t.title,style:Ea.previewImage,title:t.title})})}),Object(ra.jsxs)(mt.a,{item:!0,xs:12,children:[Object(ra.jsx)("span",{style:Ea.author,children:t.author}),Object(ra.jsx)("span",{style:Ea.url,onClick:function(){e.props.openDocument&&e.props.openDocument(t.url)},children:t.url})]}),Object(ra.jsx)(mt.a,{item:!0,xs:12,children:Object(ra.jsx)("div",{style:Ea.spacer})})]})}}],[{key:"highlight",value:function(e){return e&&e.replace&&(e=(e=(e=(e=(e=e.replace(/{hl1:}/g,"<span class='hl1'>")).replace(/{hl2:}/g,"<span class='hl2'>")).replace(/{:hl1}/g,"</span>")).replace(/{:hl2}/g,"</span>")).replace(/\n/g,"<br />")),e}}]),a}(n.a.Component),Pa=window.ENV.api_base,Ba={searchPage:{margin:"50px"},searchBar:{display:"inline-block"},busyBox:{marginTop:"10px",marginLeft:"10px",marginRight:"5px",width:"32px",float:"left",display:"inline-block"},searchTextBox:{marginBottom:16,width:"400px",float:"left"},searchText:{width:"400px"},searchButtonBox:{float:"left",marginLeft:"20px",marginTop:"14px"},botResponseBubble:{marginLeft:"20px",background:"blue",color:"white",borderRadius:"5px",width:"600px",padding:"10px",marginBottom:"10px"},urlList:{marginTop:"10px"},url:{fontSize:"12px",cursor:"pointer"},searchResultsBox:{padding:"10px",borderRadius:"4px",width:"700px",border:"0.5px solid #ccc"}},za=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,busy:!1,searchText:"",page:0,has_searched:!1,search_result_list:[],shard_list:[],bot_response:"",bot_links:[]},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.state.searchText.length>0&&this.doSearch()}},{key:"doSearch",value:function(){var e=this;if(!e.state.busy&&this.state.searchText.length>0){e.setState({busy:!0});var t={organisationId:this.props.organisationId,kbList:[this.props.kbId],scoreThreshold:.8125,clientId:this.props.clientId,semanticSearch:!0,query:"("+this.state.searchText+")",queryText:this.state.searchText,numResults:1,page:this.state.page,pageSize:10,shardSizeList:this.state.shard_list,fragmentCount:3,maxWordDistance:20,spellingSuggest:!1,contextLabel:"",contextMatchBoost:.01,sourceId:""};a.http_post("/ops/query",t,(function(t){if(t&&t.data&&"message"===t.data.messageType){var a=t.data,s=a.shardSizeList?a.shardSizeList:[],n=a.resultList?a.resultList:[],i=a.text?a.text:"",r=a.urlList?a.urlList:[];e.setState({shard_list:s,search_result_list:n,has_searched:!0,bot_response:i,bot_links:r,busy:!1})}else e.setState({busy:!1})}),(function(t){e.setState({busy:!1}),e.props.onError&&e.props.onError("Error",t)}))}}},{key:"openDocument",value:function(e){alert("open document "+e)}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"simsage-search.js: Something went wrong."}):Object(ra.jsxs)("div",{style:Ba.searchPage,children:[Object(ra.jsxs)("div",{style:Ba.searchBar,children:[Object(ra.jsx)("div",{style:Ba.busyBox,children:Object(ra.jsx)("span",{style:{display:this.state.busy?"":"none",width:"32px"},children:"\u231b"})}),Object(ra.jsx)("div",{style:Ba.searchTextBox,children:Object(ra.jsx)(lt.a,{autoFocus:!0,onChange:function(t){return e.setState({searchText:t.target.value})},onKeyPress:function(t){return e.handleSearchTextKeydown(t)},label:"search",disabled:this.state.busy,style:Ba.searchText,value:this.state.searchText})}),Object(ra.jsx)("div",{style:Ba.searchButtonBox,children:Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",disabled:this.state.busy,onClick:function(){return e.doSearch()},children:"Search"})})]}),""!==this.state.bot_response&&Object(ra.jsxs)("div",{style:Ba.botResponseBubble,children:[Object(ra.jsx)("div",{children:this.state.bot_response}),Object(ra.jsx)("div",{style:Ba.urlList,children:this.state.bot_links.map((function(t,a){return Object(ra.jsx)("div",{style:Ba.url,onClick:function(){return e.openDocument(t)},children:t},a)}))})]}),this.state.search_result_list&&this.state.search_result_list.length>0&&Object(ra.jsx)("div",{children:Object(ra.jsx)("div",{style:Ba.searchResultsBox,children:this.state.search_result_list.map((function(t,a){return Object(ra.jsx)(La,{item:t,organisationId:e.props.organisationId,kbId:e.props.kbId,clientId:e.props.clientId,openDocument:function(t){return e.openDocument(t)}},a)}))})}),this.state.search_result_list&&0===this.state.search_result_list.length&&this.state.has_searched&&""===this.state.bot_response&&Object(ra.jsx)("div",{children:"no results"})]})}}],[{key:"get_error",value:function(e){if("string"===typeof e&&0===e.indexOf("{")){var t=JSON.parse(e);return t&&t.response&&t.response.data&&t.response.data.error?t.response.data.error:e}return e&&e.response&&e.response.data&&e.response.data.error?e.response.data.error:e}},{key:"getHeaders",value:function(){return{headers:{"API-Version":"1","Content-Type":"application/json"}}}},{key:"http_post",value:function(e,t,s,n){x.a.post(Pa+e,t,a.getHeaders()).then((function(e){s&&s(e)})).catch((function(e){n&&(void 0===e.response?n("Servers not responding or cannot contact Servers"):n(a.get_error(e)))}))}}]),a}(s.Component),Aa=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(ra.jsx)("div",{children:Object(ra.jsx)(za,{organisationId:"c276f883-e0c8-43ae-9119-df8b7df9c574",kbId:"46ff0c75-7938-492c-ab50-442496f5de51",clientId:"37542428-7bf3-45a0-beb4-5179e6931379",onError:function(e,t){return alert(e+":"+t)}})})}}]),a}(s.Component),Ua=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={open:!1,title:e.title,message:e.message,callback:e.callback,has_error:!1},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleOk",value:function(){this.setState({open:!1}),this.state.callback&&this.state.callback(!0)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.message.length>0,message:e.message,callback:e.callback,title:e.title})}},{key:"cancel",value:function(){this.state.callback&&this.state.callback(!1)}},{key:"ok",value:function(){this.state.callback&&this.state.callback(!0)}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"message-dialog.js: Something went wrong."}):Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.open,fullWidth:!0,maxWidth:"md",onClose:function(){return e.cancel()},children:[Object(ra.jsx)(ha.a,{id:"alert-dialog-title",className:this.props.theme,children:this.state.title}),Object(ra.jsx)(pa.a,{className:this.props.theme,children:Object(ra.jsx)("div",{children:Object(ra.jsx)("div",{dangerouslySetInnerHTML:{__html:this.state.message}})})}),Object(ra.jsxs)(ua.a,{className:this.props.theme,children:[Object(ra.jsx)(ct.a,{color:"primary",onClick:function(){return e.cancel()},children:"Cancel"}),Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",onClick:function(){return e.ok()},children:"OK"})]})]})}}]),a}(s.Component),Wa=Ua,Fa=a(268),Ma=a(594),qa=a(619),Ya="500px",Ha={control:{float:"left",width:"calc(controlWidth - 20px)"},downShift:{marginTop:"-15px",float:"left",width:Ya},popover:{width:Ya},pullDownBox:{float:"right",marginTop:"10px",marginRight:"-22px"},pullDownImage:{width:"18px"}},Ka=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,id:e.id,label:e.label?e.label:"",onSelect:e.onSelect,onFilter:e.onFilter,value:e.value?e.value:"",isOpen:!1,selectedIndex:-1,minTextSize:e.minTextSize>=0?e.minTextSize:2,suggestion_list:[]},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"componentDidMount",value:function(){}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState({id:e.id,label:e.label?e.label:"",value:e.value?e.value:"",minTextSize:e.minTextSize>=0?e.minTextSize:2,onSelect:e.onSelect,onFilter:e.onFilter})}},{key:"getLookupData",value:function(e){var t=this;e.length>=this.state.minTextSize&&this.state.onFilter&&this.state.onFilter(e,(function(a){t.setState({suggestion_list:a,value:e,isOpen:a.length>0})}))}},{key:"showAllData",value:function(e){var t=this;this.state.onFilter&&(this.state.isOpen&&!e?this.closeControl():this.state.onFilter("",(function(e){t.setState({suggestion_list:e,isOpen:e.length>0})})))}},{key:"closeControl",value:function(){var e=this.state.value,t=!1;this.state.onFilter("",(function(a){for(var s in a)a[s].label===e&&(t=!0)})),t?this.setState({suggestion_list:[],isOpen:!1}):(this.setState({suggestion_list:[],isOpen:!1,value:""}),this.state.onSelect&&this.state.onSelect("",""))}},{key:"select",value:function(e){var t=this.state.suggestion_list;if(t&&t.length>0&&this.state.onSelect)for(var a=0;a<t.length;a++)t[a].label===e&&(this.state.onSelect(e,t[a].data),this.setState({isOpen:!1,selection_list:[],value:e}))}},{key:"handleKey",value:function(e){var t=this.state.selectedIndex,a=this.state.suggestion_list;0===a.length?this.setState({selectedIndex:-1}):13===e.keyCode?t>=0&&t<a.length&&this.select(a[t].label):38===e.keyCode?t>0?this.setState({selectedIndex:t-1}):this.setState({selectedIndex:0}):40===e.keyCode&&(t<0?this.setState({selectedIndex:0}):t+1>=a.length?this.setState({selectedIndex:a.length-1}):this.setState({selectedIndex:t+1}))}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"auto-complete.js: Something went wrong."}):Object(ra.jsx)("div",{style:Ha.control,children:Object(ra.jsx)("div",{style:Ha.downShift,children:Object(ra.jsx)(Fa.a,{id:this.state.id,onSelect:function(t){return e.select(t)},children:function(t){var s=t.getItemProps,n=t.selectedItem;return Object(ra.jsxs)("div",{children:[Object(ra.jsx)(lt.a,{placeholder:e.state.label,inputProps:{fontSize:"30px"},value:e.state.value,onClick:function(){return e.showAllData(!0)},onBlur:function(){return e.closeControl()},spellCheck:!1,onKeyDown:function(t){e.state.isOpen?e.handleKey(t):e.showAllData(!0)},onChange:function(t){e.setState({value:t.target.value}),e.getLookupData(t.target.value)},fullWidth:!0}),!e.state.isOpen&&Object(ra.jsx)("div",{style:Ha.pullDownBox,children:Object(ra.jsx)("img",{src:"../images/pulldown.svg",style:Ha.pullDownImage,onClick:function(){return e.showAllData(!1)},alt:"auto complete"})}),e.state.isOpen&&Object(ra.jsx)("div",{style:Ha.pullDownBox,children:Object(ra.jsx)("img",{src:"../images/pulldown-rotated.svg",style:Ha.pullDownImage,onClick:function(){return e.showAllData(!1)},alt:"auto complete"})}),e.state.isOpen&&Object(ra.jsx)(Ma.a,{square:!0,style:{position:"absolute",zIndex:"999",marginTop:8,paddingBottom:"20px",width:"500px",color:S.getThemeColour(e.props.theme),background:S.getThemeBackground(e.props.theme),minHeight:"30px",maxHeight:"300px",overflowX:"auto",overflowY:"auto"},children:e.state.suggestion_list.map((function(t,i){return a.renderSuggestion({suggestion:t,index:i,itemProps:s({item:t.label,value:t.label,data:t.data}),highlightedIndex:e.state.selectedIndex,selectedItem:n})}))})]})}})})})}}],[{key:"renderSuggestion",value:function(e){var t=e.suggestion,a=e.index,n=e.itemProps,i=e.highlightedIndex===a,r=(e.selectedItem||"").indexOf(t.label)>-1;return Object(s.createElement)(qa.a,Object(d.a)(Object(d.a)({},n),{},{key:t.label,selected:i,component:"div",style:{height:"22px",fontSize:"16px",fontWeight:r?500:400}}),t.label)}}]),a}(s.Component),Ja=a(603),Va=a(607),Ga=a(606),Qa=a(604),Za=a(605),Xa=a(616),$a=a(613),es=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,open:e.open,onSave:e.onSave,onError:e.onError,id:s.props.id,name:s.props.name,enabled:s.props.enabled},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){this.state.onSave&&this.state.onSave({id:this.state.id,name:this.state.name,enabled:this.state.enabled})}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open,onSave:e.onSave,onError:e.onError,id:e.id,name:e.name,enabled:e.enabled})}},{key:"render",value:function(){var e=this;if(this.state.has_error)return Object(ra.jsx)("h1",{children:"organisation-edit.js: Something went wrong."});var t=this.props.theme;return Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0,disableEscapeKeyDown:!0,open:this.state.open,maxWidth:"lg",onClose:function(){return e.handleCancel()},children:[Object(ra.jsx)(ha.a,{id:"alert-dialog-title",className:t,children:"Edit Organisation"}),Object(ra.jsx)(pa.a,{className:t,children:Object(ra.jsxs)(mt.a,{container:!0,spacing:2,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:2,children:Object(ra.jsx)("div",{children:"name"})}),Object(ra.jsx)(mt.a,{item:!0,xs:7,children:Object(ra.jsx)(lt.a,{autoFocus:!0,onChange:function(t){return e.setState({name:t.target.value})},placeholder:"name",variant:"standard",fullWidth:!0,value:this.state.name})}),Object(ra.jsx)(mt.a,{item:!0,xs:2}),Object(ra.jsx)(mt.a,{item:!0,xs:4}),Object(ra.jsxs)(mt.a,{item:!0,xs:6,children:[Object(ra.jsx)($a.a,{checked:this.state.enabled,onChange:function(t){e.setState({enabled:t.target.checked})},value:"enable this organisation?",inputProps:{"aria-label":"primary checkbox"}}),"organisation enabled?"]}),Object(ra.jsx)(mt.a,{item:!0,xs:2})]})}),Object(ra.jsxs)(ua.a,{className:t,children:[Object(ra.jsx)(ct.a,{color:"primary",onClick:function(){return e.handleCancel()},children:"Cancel"}),Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",onClick:function(){return e.handleSave()},children:"Save"})]})]})}}]),a}(s.Component),ts={uploadContainer:{float:"left",width:"400px",minWidth:"400px",padding:"1px",marginLeft:"10px",fontWeight:700,fontSize:"10pt",cursor:"pointer"},formWidth:{marginTop:"-20px"},uploadControl:{marginTop:"10px"},imageButton:{float:"left",marginRight:"20px",paddingTop:"10px",cursor:"pointer"},restoreImage:{width:"25px"},busyImage:{width:"28px",height:"28px",marginTop:"-10px",float:"left"},uploadInput:{float:"left"},uploadWheel:{marginLeft:"5px",marginTop:"14px",height:"28px",float:"left"}},as=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={filename:"",fileType:"",data:"",organisationId:e.organisationId,onError:e.onError},s}return Object(f.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({organisationId:e.organisationId,onError:e.onError})}},{key:"_handleImageChange",value:function(e){e.preventDefault();var t=this,a=new FileReader,s=e.target.files[0],n=s.name,i=s.type;a.onloadend=function(){t.setState({filename:n,fileType:i,data:a.result})},a.readAsDataURL(s)}},{key:"upload",value:function(){if(this.state.data){var e={organisationId:this.state.organisationId,data:this.state.data};this.props.doUpload&&this.props.doUpload(e)}}},{key:"render",value:function(){var e=this;return Object(ra.jsx)("div",{children:Object(ra.jsx)("form",{onSubmit:function(t){return e._handleSubmit(t)},style:ts.uploadContainer,children:Object(ra.jsxs)("div",{style:ts.formWidth,children:[this.state.data&&this.state.data.length>0&&"text/plain"===this.state.fileType&&Object(ra.jsx)("div",{style:ts.imageButton,onClick:function(){return e.upload()},children:Object(ra.jsx)("img",{style:ts.restoreImage,src:"../images/restore.svg",title:'Click here to restore data from "'+this.state.filename+'"',alt:"restore data from file"})}),Object(ra.jsx)("input",{style:ts.uploadControl,type:"file",onChange:function(t){return e._handleImageChange(t)}})]})})})}}]),a}(n.a.Component),ss={pageWidth:{width:"900px"},text:{border:"1px solid #808080",borderRadius:"4px",padding:"4px"},label:{color:"#555"},tableHeaderStyle:{background:"#51B274",fontSize:"0.95em",color:"#fff"},tableLight:{},tableDark:{background:"#d0d0d0"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},editBox:{width:"500px",marginBottom:"15px"},roleBlock:{padding:"5px",marginTop:"20px",float:"left",width:"400px",border:"1px solid #888",borderRadius:"4px",marginLeft:"10px"},roleLabel:{fontSize:"0.8em",color:"#aaa"},roleArea:{padding:"20px"},roleChip:{margin:"2px"},addImage:{width:"25px"},textFieldBox:{float:"left"},imageBox:{float:"left"},imageSize:{marginTop:"20px",width:"20px"},dlImageSize:{width:"24px"},searchBox:{boxShadow:"none"},floatLeftLabel:{float:"left",marginRight:"6px",marginTop:"4px",fontSize:"0.9em",fontWeight:"500"},floatLeft:{float:"left"},searchFloatLeft:{float:"left"},findBox:{padding:"10px",marginBottom:"5px",float:"right"},search:{marginTop:"2px",marginLeft:"15px",width:"18px",color:"#000"},copiedStyle:{fontSize:"10px",marginLeft:"25px",marginTop:"-22px",position:"absolute",float:"left",zIndex:"99"},organisationIdLabel:{width:"170px",float:"left",height:"24px"},copyImageSpan:{float:"left",marginTop:"-5px",marginLeft:"10px"},clipboardImage:{width:"24px",height:"24px;"}},ns=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={edit_organisation:!1,edit_organisation_id:"",name:"",max_tpm:0,analytics_window_size_in_months:12,enabled:!0,bot_enabled:!0,analytics_enabled:!0,operator_enabled:!0,language_enabled:!0,copied_visible:"",view_organisation_id:!1,organisation:null,page_size:5,page:0},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"addNewOrganisation",value:function(){this.setState({edit_organisation:!0,organisation:null,id:"",name:"",enabled:!0})}},{key:"refreshSecurityId",value:function(){this.setState({edit_security_id:k.createGuid()})}},{key:"editOrganisation",value:function(e){e&&this.setState({edit_organisation:!0,organisation:e,id:e.id,name:e.name,enabled:!k.defined(e.enabled)||e.enabled})}},{key:"deleteOrganisationAsk",value:function(e){var t=this;e&&this.props.openDialog&&(this.props.openDialog('are you sure you want to remove "'+e.name+'" ?',"Remove Organisation",(function(e){t.deleteOrganisation(e)})),this.setState({organisation:e}))}},{key:"deleteOrganisation",value:function(e){e&&this.props.deleteOrganisation(this.state.organisation.id),this.props.closeDialog&&this.props.closeDialog()}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getOrganisationList()}},{key:"getOrganisations",value:function(){var e=[],t=this.state.page*this.state.page_size,a=t+this.state.page_size;for(var s in this.props.organisation_list)s>=t&&s<a&&this.props.organisation_list.hasOwnProperty(s)&&e.push(this.props.organisation_list[s]);return e}},{key:"save",value:function(e){e?e.name.length>0?(this.props.updateOrganisation({id:k.defined(e.id)?e.id:"",name:e.name,enabled:e.enabled}),this.setState({edit_organisation:!1,organisation:null})):this.props.setError("Incomplete Data","Please complete all fields.  Must have a name."):this.setState({edit_organisation:!1,organisation:null})}},{key:"backupAll",value:function(){window.open(w.get_backup_url(this.props.selected_organisation_id,"all"),"_blank")}},{key:"backup",value:function(e){window.open(w.get_backup_url(e,"specific"),"_blank")}},{key:"restore",value:function(e){e&&e.data&&e.data.length>0&&this.props.restore(e.data)}},{key:"downloadHtml",value:function(e,t){window.open(w.get_html_url(e,t.id),"_blank")}},{key:"viewIds",value:function(e){this.setState({view_organisation_id:!0,organisation:e})}},{key:"startCopiedVisible",value:function(e){var t=this;this.setState({copied_visible:e}),window.setTimeout((function(){t.setState({copied_visible:""})}),1e3)}},{key:"render",value:function(){var e=this,t=this.props.theme,a=zi.hasRole(this.props.user,["admin"]);return Object(ra.jsxs)("div",{children:[Object(ra.jsx)(es,{open:this.state.edit_organisation,id:this.state.id,theme:t,name:this.state.name,enabled:this.state.enabled,onError:function(t,a){return e.props.showError(t,a)},onSave:function(t){return e.save(t)}}),Object(ra.jsx)("div",{style:ss.searchBox,children:Object(ra.jsx)(mt.a,{item:!0,xs:12,children:Object(ra.jsxs)("div",{style:ss.findBox,children:[Object(ra.jsx)("div",{style:ss.floatLeftLabel,children:"filter"}),Object(ra.jsx)("div",{style:ss.searchFloatLeft,children:Object(ra.jsx)("input",{type:"text",value:this.props.user_filter,autoFocus:!0,style:ss.text,className:t,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setOrganisationFilter(t.target.value)}})}),Object(ra.jsx)("div",{style:ss.floatLeft,children:Object(ra.jsx)("img",{style:ss.search,onClick:function(){return e.props.getOrganisationList()},src:"../images/dark-magnifying-glass.svg",title:"filter",alt:"filter"})})]})})}),Object(ra.jsx)("br",{clear:"both"}),Object(ra.jsxs)(Ma.a,{style:ss.pageWidth,children:[Object(ra.jsxs)(Ja.a,{children:[Object(ra.jsx)(Qa.a,{children:Object(ra.jsxs)(Za.a,{className:"table-header",children:[Object(ra.jsx)(Ga.a,{className:"table-header table-width-70",children:"organisation"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"actions"})]})}),Object(ra.jsxs)(Va.a,{style:"light"===t?ss.tableLight:ss.tableDark,children:[this.getOrganisations().map((function(t){return Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:ss.label,children:t.name})}),Object(ra.jsxs)(Ga.a,{children:[Object(ra.jsx)("div",{style:ss.linkButton,onClick:function(){e.viewIds(t)},children:Object(ra.jsx)("img",{src:"../images/id.svg",style:ss.dlImageSize,title:"view knowledge base ids",alt:"ids"})}),Object(ra.jsx)("div",{style:ss.linkButton,onClick:function(){return e.editOrganisation(t)},children:Object(ra.jsx)("img",{src:"../images/edit.svg",style:ss.dlImageSize,title:"edit organisation",alt:"edit"})}),Object(ra.jsx)("div",{style:ss.linkButton,onClick:function(){return e.deleteOrganisationAsk(t)},children:Object(ra.jsx)("img",{src:"../images/delete.svg",style:ss.dlImageSize,title:"remove organisation",alt:"remove"})}),a&&Object(ra.jsx)("div",{style:ss.linkButton,onClick:function(){return e.backup(t.id)},children:Object(ra.jsx)("img",{src:"../images/backup.svg",style:ss.dlImageSize,title:"backup this organisation",alt:"backup "+t.name})})]})]},t.id)})),Object(ra.jsx)(Za.a,{children:Object(ra.jsxs)(Ga.a,{colSpan:2,children:[a&&Object(ra.jsx)("div",{style:ss.imageButton,onClick:function(){return e.backupAll()},children:Object(ra.jsx)("img",{style:ss.addImage,src:"../images/backup.svg",title:"backup all organisations",alt:"backup all organisations"})}),Object(ra.jsx)("div",{style:ss.imageButton,onClick:function(){return e.addNewOrganisation()},children:Object(ra.jsx)("img",{style:ss.addImage,src:"../images/add.svg",title:"add new organisation",alt:"add new organisation"})}),Object(ra.jsx)("br",{}),a&&Object(ra.jsx)(as,{doUpload:function(t){return e.restore(t)},organisationId:this.props.selected_organisation_id,onError:function(t){return e.props.setError("Error",t)}})]})})]})]}),Object(ra.jsx)(Xa.a,{rowsPerPageOptions:[5,10,25],component:"div",count:this.props.organisation_list.length,rowsPerPage:this.state.page_size,page:this.state.page,style:"light"===t?ss.tableLight:ss.tableDark,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.changePage(a)},onChangeRowsPerPage:function(t){return e.changePageSize(t.target.value)}})]}),Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.view_organisation_id,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"md",onClose:function(){return e.setState({view_details:!1})},children:[Object(ra.jsxs)(ha.a,{className:t,children:[null!=this.state.organisation?this.state.organisation.name:""," organisation-id"]}),Object(ra.jsx)(pa.a,{className:t,children:Object(ra.jsxs)("div",{children:[Object(ra.jsx)("div",{style:ss.organisationIdLabel,children:"organisation id"}),Object(ra.jsx)("div",{style:ss.floatLeft,children:this.state.organisation?this.state.organisation.id:""}),Object(ra.jsxs)("span",{style:ss.copyImageSpan,title:"copy organisation id",children:[Object(ra.jsx)("img",{src:"light"===t?"../images/clipboard-copy.svg":"../images/clipboard-copy-dark.svg",style:ss.clipboardImage,alt:"copy",onClick:function(){k.writeToClipboard(e.state.organisation?e.state.organisation.id:"")&&e.startCopiedVisible(e.state.organisation.id)}}),null!=this.state.organisation&&this.state.copied_visible===this.state.organisation.id&&Object(ra.jsx)("div",{style:ss.copiedStyle,children:"copied"})]}),Object(ra.jsx)("br",{clear:"both"})]})}),Object(ra.jsx)(ua.a,{className:t,children:Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",onClick:function(){return e.setState({view_organisation_id:!1})},children:"Close"})})]})]})}}]),a}(n.a.Component),is=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,user:e.appReducer.user,theme:e.appReducer.theme,organisation_list:e.appReducer.organisation_list}}),(function(e){return Object(u.b)(ia,e)}))(ns),rs=a(620),os={pageWidth:{width:"900px"},label:{color:"#555"},tableLight:{},tableDark:{background:"#d0d0d0"},text:{border:"1px solid #808080",borderRadius:"4px",padding:"4px"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},disabledLinkButton:{float:"left",padding:"10px",color:"#eee"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},editBox:{width:"500px"},roleBlock:{padding:"5px",marginTop:"20px",float:"left",width:"400px",border:"1px solid #888",borderRadius:"4px",marginLeft:"10px"},roleLabel:{fontSize:"0.8em",color:"#aaa"},roleArea:{padding:"20px"},roleChip:{margin:"2px"},addImage:{width:"25px"},dlImageSize:{width:"24px"},dlImageSizeDisabled:{width:"24px",opacity:"0.2"},searchBox:{boxShadow:"none"},floatLeftLabel:{float:"left",marginRight:"6px",marginTop:"4px",fontSize:"0.9em",fontWeight:"500"},floatLeft:{float:"left"},searchFloatLeft:{float:"left"},findBox:{padding:"10px",marginBottom:"5px",float:"right"},search:{marginTop:"2px",marginLeft:"15px",width:"18px",color:"#000"}},cs=["admin","operator","crawler","manager"],ls=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={edit_user:!1,user:null,edit_user_id:"",edit_first_name:"",edit_surname:"",edit_email:"",edit_password:"",edit_roles:[],edit_kb_list:[],page_size:5,page:0},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"numUsers",value:function(e,t){var s=0;for(var n in this.props.user_list){var i=this.props.user_list[n],r=a.formatRoles(this.props.selected_organisation_id,i.roles);(t||r.length>0)&&(s+=1)}return s}},{key:"getUsers",value:function(e){var t=[],s=this.state.page*this.state.page_size,n=s+this.state.page_size,i=0;for(var r in this.props.user_list){var o=this.props.user_list[r],c=a.formatRoles(this.props.selected_organisation_id,o.roles);(e||c.length>0)&&(i>=s&&i<n&&t.push(o),i+=1)}return t}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"getAvailableRoles",value:function(){var e,t=[],a=zi.hasRole(this.props.user,["admin"]),s=Object(m.a)(cs);try{for(s.s();!(e=s.n()).done;){var n,i=e.value,r=!1,o=Object(m.a)(this.state.edit_roles);try{for(o.s();!(n=o.n()).done;){i===n.value&&(r=!0)}}catch(c){o.e(c)}finally{o.f()}r||("admin"===i&&a||"admin"!==i)&&t.push(i)}}catch(c){s.e(c)}finally{s.f()}return t}},{key:"addNewUser",value:function(){this.setState({edit_user:!0,user:null,edit_user_id:"",edit_first_name:"",edit_surname:"",edit_email:"",edit_password:"",edit_roles:[],edit_kb_list:[]})}},{key:"editUser",value:function(e){var t=this;if(e){var a,s=e.roles.filter((function(e){return e.organisationId===t.props.selected_organisation_id})),n=[],i=Object(m.a)(s);try{for(i.s();!(a=i.n()).done;){var r=a.value;n.push(r.role)}}catch(b){i.e(b)}finally{i.f()}var o=[];if(e.operatorKBList){var c,l=Object(m.a)(e.operatorKBList);try{for(l.s();!(c=l.n()).done;){var d,u=c.value,p=Object(m.a)(this.props.knowledge_base_list);try{for(p.s();!(d=p.n()).done;){var h=d.value;h.kbId===u.kbId&&o.push(h)}}catch(b){p.e(b)}finally{p.f()}}}catch(b){l.e(b)}finally{l.f()}}this.setState({edit_user:!0,user:e,edit_user_id:e.id,edit_first_name:e.firstName,edit_surname:e.surname,edit_email:e.email,edit_password:"",edit_roles:n,edit_kb_list:o})}}},{key:"fillNames",value:function(){function e(e){return e.length>0?e.slice(0,1).toUpperCase()+e.slice(1):e}if(this.state.edit_email.length>0&&this.state.edit_email.indexOf("@")>0){var t=this.state.edit_email.split("@")[0].split("."),a="",s="";0===this.state.edit_first_name.length&&(a=e(t[0])),0===this.state.edit_surname.length&&t.length>1&&(s=e(t[1])),a.length>0&&s.length>0?this.setState({edit_first_name:a,edit_surname:s}):a.length>0?this.setState({edit_first_name:a}):s.length>0&&this.setState({edit_surname:s})}}},{key:"removeRoleFromUser",value:function(e){var t,a=[],s=Object(m.a)(this.state.edit_roles);try{for(s.s();!(t=s.n()).done;){var n=t.value;e!==n&&a.push(n)}}catch(i){s.e(i)}finally{s.f()}this.setState({edit_roles:a})}},{key:"addRoleToUser",value:function(e){var t=JSON.parse(JSON.stringify(this.state.edit_roles));t.push(e),this.setState({edit_roles:t})}},{key:"deleteUserAsk",value:function(e,t){var a=this;e&&this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0?(this.props.openDialog("are you sure you want to remove "+e.firstName+" "+e.surname+"?","Remove User",(function(e){a.deleteUser(e)})),this.setState({user:e})):this.props.setError("No Organisation","Please select an organisation from the drop-down box.")}},{key:"deleteUser",value:function(e){e&&this.props.deleteUser(this.props.selected_organisation_id,this.state.user.id),this.props.closeDialog&&this.props.closeDialog()}},{key:"editCancel",value:function(){this.setState({edit_user:!1,user:null}),this.state.closeDialog&&this.state.closeDialog()}},{key:"editOk",value:function(){this.state.edit_first_name.length>0&&this.state.edit_surname.length>0&&this.state.edit_email.length>0&&(this.state.edit_user_id.length>0||this.state.edit_password.length>0)?a.hasOperatorRole(this.state.edit_roles)&&0===this.state.edit_kb_list.length?this.props.setError("Incomplete Data","An operator must have at least one knowledge base associated with it."):(this.props.updateUser(this.props.selected_organisation_id,this.state.edit_user_id,this.state.edit_first_name,this.state.edit_surname,this.state.edit_email,this.state.edit_password,this.state.edit_roles,this.state.edit_kb_list),this.setState({edit_user:!1,user:null})):this.props.setError("Incomplete Data","Please complete all fields.  Must have email-address, first-name, surname, and at least one role.  New Accounts must have a password.")}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getUsers()}},{key:"removeKBFromUser",value:function(e){var t,a=[],s=Object(m.a)(this.state.edit_kb_list);try{for(s.s();!(t=s.n()).done;){var n=t.value;e.kbId!==n.kbId&&a.push(n)}}catch(i){s.e(i)}finally{s.f()}this.setState({edit_kb_list:a})}},{key:"addKBToUser",value:function(e){var t=JSON.parse(JSON.stringify(this.state.edit_kb_list));t.push(e),this.setState({edit_kb_list:t})}},{key:"getAvailableKnowledgeBases",value:function(){var e,t=[],a=Object(m.a)(this.props.knowledge_base_list);try{for(a.s();!(e=a.n()).done;){var s,n=e.value,i=!1,r=Object(m.a)(this.state.edit_kb_list);try{for(r.s();!(s=r.n()).done;){var o=s.value;n.kbId===o.kbId&&(i=!0)}}catch(c){r.e(c)}finally{r.f()}i||t.push(n)}}catch(c){a.e(c)}finally{a.f()}return t}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0}},{key:"render",value:function(){var e=this,t=this.props.theme,s=zi.hasRole(this.props.user,["admin"]),n=zi.hasRole(this.props.user,["manager"]);return Object(ra.jsx)("div",{children:this.isVisible()&&Object(ra.jsxs)("div",{children:[Object(ra.jsx)("div",{style:os.searchBox,children:Object(ra.jsx)(mt.a,{item:!0,xs:12,children:Object(ra.jsxs)("div",{style:os.findBox,children:[Object(ra.jsx)("div",{style:os.floatLeftLabel,children:"filter"}),Object(ra.jsx)("div",{style:os.searchFloatLeft,children:Object(ra.jsx)("input",{type:"text",value:this.props.user_filter,autoFocus:!0,style:os.text,className:t,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setUserFilter(t.target.value)}})}),Object(ra.jsx)("div",{style:os.floatLeft,children:Object(ra.jsx)("img",{style:os.search,onClick:function(){return e.props.getUsers()},src:"../images/dark-magnifying-glass.svg",title:"filter",alt:"filter"})})]})})}),Object(ra.jsx)("br",{clear:"both"}),Object(ra.jsx)(Ma.a,{style:os.pageWidth,children:Object(ra.jsxs)(Ja.a,{children:[Object(ra.jsx)(Qa.a,{children:Object(ra.jsxs)(Za.a,{className:"table-header",children:[Object(ra.jsx)(Ga.a,{className:"table-header",children:"user name"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"first name"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"surname"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"roles"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"actions"})]})}),Object(ra.jsxs)(Va.a,{style:"light"===t?os.tableLight:os.tableDark,children:[this.getUsers(s).map((function(t){var i=zi.canEdit(t,s,n),r=zi.canDelete(t,e.props.user,s,n);return Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:os.label,children:t.email})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:os.label,children:t.firstName})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:os.label,children:t.surname})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:os.label,children:a.formatRoles(e.props.selected_organisation_id,t.roles)})}),Object(ra.jsxs)(Ga.a,{children:[!i&&Object(ra.jsx)("div",{style:os.disabledLinkButton,title:"cannot edit this user",children:Object(ra.jsx)("img",{src:"../images/edit.svg",style:os.dlImageSizeDisabled,title:"cannot edit this user",alt:"cannot edit this user"})}),i&&Object(ra.jsx)("div",{style:os.linkButton,title:"Edit this user",onClick:function(){return e.editUser(t)},children:Object(ra.jsx)("img",{src:"../images/edit.svg",style:os.dlImageSize,title:"edit user",alt:"edit"})}),!r&&Object(ra.jsx)("div",{style:os.disabledLinkButton,title:"cannot remove this user",children:Object(ra.jsx)("img",{src:"../images/delete.svg",style:os.dlImageSizeDisabled,title:"cannot remove this user",alt:"cannot remove this user"})}),r&&Object(ra.jsx)("div",{style:os.linkButton,title:"Remove this user",onClick:function(){return e.deleteUserAsk(t,s)},children:Object(ra.jsx)("img",{src:"../images/delete.svg",style:os.dlImageSize,title:s?"remove user":"remove user roles",alt:"remove"})})]})]},t.id)})),Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{children:this.props.selected_organisation_id.length>0&&(s||n)&&Object(ra.jsx)("div",{style:os.imageButton,onClick:function(){return e.addNewUser()},children:Object(ra.jsx)("img",{style:os.addImage,src:"../images/add.svg",title:"add new user",alt:"add new user"})})})]}),Object(ra.jsx)(Za.a,{children:Object(ra.jsx)(Ga.a,{colSpan:5,children:Object(ra.jsx)(Xa.a,{rowsPerPageOptions:[5,10,25],component:"div",count:this.numUsers(this.props.selected_organisation_id,s),rowsPerPage:this.state.page_size,page:this.state.page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.changePage(a)},onChangeRowsPerPage:function(t){return e.changePageSize(t.target.value)}})})})]})]})}),Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.edit_user,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"md",onClose:function(){return e.setState({edit_user:!1,user:null})},children:[Object(ra.jsx)(ha.a,{className:this.props.theme,children:this.state.edit_user_id?"Edit User":"Add New User"}),Object(ra.jsxs)(pa.a,{className:this.props.theme,children:[Object(ra.jsx)(lt.a,{autoFocus:!0,style:os.editBox,placeholder:"email",label:"email",value:this.state.edit_email,onBlur:function(){return e.fillNames()},onChange:function(t){return e.setState({edit_email:t.target.value})}}),Object(ra.jsx)(lt.a,{style:os.editBox,placeholder:"first name",label:"first name",value:this.state.edit_first_name,onChange:function(t){return e.setState({edit_first_name:t.target.value})}}),Object(ra.jsx)(lt.a,{style:os.editBox,placeholder:"surname",label:"surname",value:this.state.edit_surname,onChange:function(t){return e.setState({edit_surname:t.target.value})}}),Object(ra.jsx)(lt.a,{style:os.editBox,placeholder:"password",label:"password",type:"password",value:this.state.edit_password,onChange:function(t){return e.setState({edit_password:t.target.value})}}),Object(ra.jsxs)("div",{children:[Object(ra.jsxs)("div",{style:os.roleBlock,children:[Object(ra.jsx)("div",{style:os.roleLabel,children:"user roles"}),Object(ra.jsx)("div",{style:os.roleArea,children:this.state.edit_roles.map((function(t){return Object(ra.jsx)(rs.a,{color:"secondary",style:os.roleChip,onClick:function(){return e.removeRoleFromUser(t)},label:t,variant:"outlined"},t)}))})]}),Object(ra.jsxs)("div",{style:os.roleBlock,children:[Object(ra.jsx)("div",{style:os.roleLabel,children:"available roles"}),Object(ra.jsx)("div",{style:os.roleArea,children:this.getAvailableRoles().map((function(t){return Object(ra.jsx)(rs.a,{color:"primary",style:os.roleChip,onClick:function(){return e.addRoleToUser(t)},label:t,variant:"outlined"},t)}))})]})]}),a.hasOperatorRole(this.state.edit_roles)&&Object(ra.jsxs)("div",{children:[Object(ra.jsxs)("div",{style:os.roleBlock,children:[Object(ra.jsx)("div",{style:os.roleLabel,children:"operator's knowledge bases"}),Object(ra.jsx)("div",{style:os.roleArea,children:this.state.edit_kb_list.map((function(t){return Object(ra.jsx)(rs.a,{color:"secondary",style:os.roleChip,onClick:function(){return e.removeKBFromUser(t)},label:t.name,variant:"outlined"},t.kbId)}))})]}),Object(ra.jsxs)("div",{style:os.roleBlock,children:[Object(ra.jsx)("div",{style:os.roleLabel,children:"operator available knowledge bases"}),Object(ra.jsx)("div",{style:os.roleArea,children:this.getAvailableKnowledgeBases().map((function(t){return Object(ra.jsx)(rs.a,{color:"primary",style:os.roleChip,onClick:function(){return e.addKBToUser(t)},label:t.name,variant:"outlined"},t.kbId)}))})]})]})]}),Object(ra.jsxs)(ua.a,{className:this.props.theme,children:[Object(ra.jsx)(ct.a,{color:"primary",onClick:function(){return e.editCancel()},children:"Cancel"}),Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",onClick:function(){return e.editOk()},children:"Save"})]})]})]})})}}],[{key:"formatRoles",value:function(e,t){var a,s="",n=Object(m.a)(t);try{for(n.s();!(a=n.n()).done;){var i=a.value;i.organisationId!==e&&"admin"!==i.role||("admin"===i.role&&-1===s.indexOf("admin")||"admin"!==i.role)&&(s.length>0&&(s+=", "),s+=i.role)}}catch(r){n.e(r)}finally{n.f()}return s}},{key:"hasOperatorRole",value:function(e){if(e){var t,a=Object(m.a)(e);try{for(a.s();!(t=a.n()).done;){if("operator"===t.value)return!0}}catch(s){a.e(s)}finally{a.f()}}return!1}}]),a}(n.a.Component),ds=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,user_list:e.appReducer.user_list,user_filter:e.appReducer.user_filter,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,knowledge_base_list:e.appReducer.knowledge_base_list,user:e.appReducer.user}}),(function(e){return Object(u.b)(ia,e)}))(ls),us=a(612),ps=a(608),hs="#eed000",bs="#c0c0c0",ms={tableStyle:{marginTop:"10px",fontFamily:"Open Sans, sans-serif",fontSize:"12px",width:"90%"},tHeader:{height:"22px",marginBottom:"5px"},tCol:{height:"22px",marginBottom:"5px"},tCell:{backgroundColor:"#c0c0c0"},legenda:{float:"left",marginTop:"20px"},activeText:{backgroundColor:hs,color:"#444",float:"left",width:"100px",fontFamily:"Open Sans, sans-serif",fontSize:"12px",fontWeight:"900",borderRadius:"2px",textAlign:"center",padding:"5px"},inactiveText:{backgroundColor:bs,color:"#444",float:"left",width:"100px",fontFamily:"Open Sans, sans-serif",fontSize:"12px",fontWeight:"900",borderRadius:"2px",textAlign:"center",padding:"5px",marginLeft:"10px"},button1:{float:"left",padding:"5px",marginLeft:"100px",marginTop:"-10px"},button2:{float:"left",padding:"5px",marginLeft:"10px",marginTop:"-10px"},labelTop:{marginTop:"10px",fontSize:"0.9em",fontWeight:"600"}},gs=["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],fs=["mon","tue","wed","thu","fri","sat","sun"],js="mon-0,tue-0,wed-0,thu-0,fri-0,sat-0,sun-0,mon-1,tue-1,wed-1,thu-1,fri-1,sat-1,sun-1,mon-2,tue-2,wed-2,thu-2,fri-2,sat-2,sun-2,mon-3,tue-3,wed-3,thu-3,fri-3,sat-3,sun-3,mon-4,tue-4,wed-4,thu-4,fri-4,sat-4,sun-4,mon-5,tue-5,wed-5,thu-5,fri-5,sat-5,sun-5,mon-6,tue-6,wed-6,thu-6,fri-6,sat-6,sun-6,mon-7,tue-7,wed-7,thu-7,fri-7,sat-7,sun-7,mon-8,tue-8,wed-8,thu-8,fri-8,sat-8,sun-8,mon-9,tue-9,wed-9,thu-9,fri-9,sat-9,sun-9,mon-10,tue-10,wed-10,thu-10,fri-10,sat-10,sun-10,mon-11,tue-11,wed-11,thu-11,fri-11,sat-11,sun-11,mon-12,tue-12,wed-12,thu-12,fri-12,sat-12,sun-12,mon-13,tue-13,wed-13,thu-13,fri-13,sat-13,sun-13,mon-14,tue-14,wed-14,thu-14,fri-14,sat-14,sun-14,mon-15,tue-15,wed-15,thu-15,fri-15,sat-15,sun-15,mon-16,tue-16,wed-16,thu-16,fri-16,sat-16,sun-16,mon-17,tue-17,wed-17,thu-17,fri-17,sat-17,sun-17,mon-18,tue-18,wed-18,thu-18,fri-18,sat-18,sun-18,mon-19,tue-19,wed-19,thu-19,fri-19,sat-19,sun-19,mon-20,tue-20,wed-20,thu-20,fri-20,sat-20,sun-20,mon-21,tue-21,wed-21,thu-21,fri-21,sat-21,sun-21,mon-22,tue-22,wed-22,thu-22,fri-22,sat-22,sun-22,mon-23,tue-23,wed-23,thu-23,fri-23,sat-23,sun-23",xs=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={onSave:e.onSave,time:e.time,time_map:s.setupTimeMap(e.time),has_error:!1},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){var e="";for(var t in this.state.time_map)1===this.state.time_map[t]&&(e.length>0&&(e+=","),e+=t);this.state.onSave&&this.state.onSave(e)}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(null!==e){var t=this.setupTimeMap(e.time);this.setState({time:e.time,onSave:e.onSave,time_map:t})}}},{key:"setupTimeMap",value:function(e){var t={};return e&&e.split(",").map((function(e){return t[e]=1,t[e]})),t}},{key:"gs",value:function(e){return 1===this.state.time_map[e]?{backgroundColor:hs}:{backgroundColor:bs}}},{key:"clearAll",value:function(){this.setState({time_map:this.setupTimeMap(""),time:""}),this.state.onSave&&this.state.onSave("")}},{key:"selectAll",value:function(){this.setState({time_map:this.setupTimeMap(js),time:js}),this.state.onSave&&this.state.onSave(js)}},{key:"select",value:function(e){var t=this.state.time_map;if("all"===e)for(var a=function(e){fs.map((function(a){var s=a+"-"+e;return 1===t[s]?t[s]=0:t[s]=1,t[s]}))},s=0;s<24;s++)a(s);else if(e.indexOf("-")>0)1===t[e]?t[e]=0:t[e]=1;else if(fs.indexOf(e)>=0)for(var n=0;n<24;n++){var i=e+"-"+n;1===t[i]?t[i]=0:t[i]=1}else fs.map((function(a){var s=a+"-"+e;return 1===t[s]?t[s]=0:t[s]=1,t[s]}));this.setState({time_map:t}),this.handleSave()}},{key:"timeStr",value:function(){var e=(new Date).toGMTString(),t=e.split(",")[0],a=e.split(" ")[4].split(":");return t+", "+(a[0]+":"+a[1])}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"time-select.js: Something went wrong."}):Object(ra.jsxs)("div",{children:[Object(ra.jsxs)("div",{style:ms.labelTop,children:["all times in GMT (now ",this.timeStr(),")"]}),Object(ra.jsx)("table",{style:ms.tableStyle,children:Object(ra.jsxs)("tbody",{children:[Object(ra.jsxs)("tr",{children:[Object(ra.jsx)("td",{onClick:function(){return e.select("all")}}),gs.map((function(t,a){return Object(ra.jsx)("td",{onClick:function(){return e.select(""+a)},style:ms.tHeader,children:t},"time-"+a)}))]}),Object(ra.jsxs)("tr",{children:[Object(ra.jsx)("td",{onClick:function(){return e.select("mon")},style:ms.tCol,children:"Monday"}),gs.map((function(t,a){return Object(ra.jsx)("td",{onClick:function(){return e.select("mon-"+a)},style:e.gs("mon-"+a)},"mon-"+a)}))]}),Object(ra.jsxs)("tr",{children:[Object(ra.jsx)("td",{onClick:function(){return e.select("tue")},style:ms.tCol,children:"Tuesday"}),gs.map((function(t,a){return Object(ra.jsx)("td",{onClick:function(){return e.select("tue-"+a)},style:e.gs("tue-"+a)},"tue-"+a)}))]}),Object(ra.jsxs)("tr",{children:[Object(ra.jsx)("td",{onClick:function(){return e.select("wed")},style:ms.tCol,children:"Wednesday"}),gs.map((function(t,a){return Object(ra.jsx)("td",{onClick:function(){return e.select("wed-"+a)},style:e.gs("wed-"+a)},"wed-"+a)}))]}),Object(ra.jsxs)("tr",{children:[Object(ra.jsx)("td",{onClick:function(){return e.select("thu")},style:ms.tCol,children:"Thursday"}),gs.map((function(t,a){return Object(ra.jsx)("td",{onClick:function(){return e.select("thu-"+a)},style:e.gs("thu-"+a)},"thu-"+a)}))]}),Object(ra.jsxs)("tr",{children:[Object(ra.jsx)("td",{onClick:function(){return e.select("fri")},style:ms.tCol,children:"Friday"}),gs.map((function(t,a){return Object(ra.jsx)("td",{onClick:function(){return e.select("fri-"+a)},style:e.gs("fri-"+a)},"fri-"+a)}))]}),Object(ra.jsxs)("tr",{children:[Object(ra.jsx)("td",{onClick:function(){return e.select("sat")},style:ms.tCol,children:"Saturday"}),gs.map((function(t,a){return Object(ra.jsx)("td",{onClick:function(){return e.select("sat-"+a)},style:e.gs("sat-"+a)},"sat-"+a)}))]}),Object(ra.jsxs)("tr",{children:[Object(ra.jsx)("td",{onClick:function(){return e.select("sun")},style:ms.tCol,children:"Sunday"}),gs.map((function(t,a){return Object(ra.jsx)("td",{onClick:function(){return e.select("sun-"+a)},style:e.gs("sun-"+a)},"sun-"+a)}))]})]})}),Object(ra.jsx)("br",{}),Object(ra.jsxs)("div",{style:ms.legenda,children:[Object(ra.jsx)("div",{style:ms.activeText,children:"active"}),Object(ra.jsx)("div",{style:ms.inactiveText,children:"inactive"}),Object(ra.jsx)("div",{style:ms.button1,children:Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",onClick:function(){return e.clearAll()},children:"clear all"})}),Object(ra.jsx)("div",{style:ms.button2,children:Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",onClick:function(){return e.selectAll()},children:"select all"})})]})]})}}]),a}(s.Component),vs="mon-0,tue-0,wed-0,thu-0,fri-0,sat-0,sun-0,mon-1,tue-1,wed-1,thu-1,fri-1,sat-1,sun-1,mon-2,tue-2,wed-2,thu-2,fri-2,sat-2,sun-2,mon-3,tue-3,wed-3,thu-3,fri-3,sat-3,sun-3",ys={pageWidth:{width:"900px"},tableLight:{},tableDark:{background:"#d0d0d0"},label:{color:"#555"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},editBox:{width:"500px",marginBottom:"15px"},sidBox:{width:"350px",marginBottom:"15px"},roleBlock:{padding:"5px",marginTop:"20px",float:"left",width:"400px",border:"1px solid #888",borderRadius:"4px",marginLeft:"10px"},roleLabel:{fontSize:"0.8em",color:"#aaa"},roleArea:{padding:"20px"},roleChip:{margin:"2px"},addImage:{width:"25px"},textFieldBox:{float:"left"},imageBox:{float:"left"},imageSize:{marginTop:"20px",width:"20px"},dlImageSize:{width:"24px"},timeTabContent:{marginLeft:"40px"},paddingBottom:{display:"inline-block",marginBottom:"130px"},floatLeft:{float:"left"},copiedStyle:{fontSize:"10px",marginLeft:"25px",marginTop:"-22px",position:"absolute",float:"left",zIndex:"99"},lineHeight:{height:"30px"},organisationIdLabel:{width:"170px",float:"left",height:"24px"},copyImageSpan:{float:"left",marginTop:"-5px",marginLeft:"10px"},clipboardImage:{width:"24px",height:"24px;"}},_s=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={selectedTab:"general",edit_knowledgebase:!1,edit_knowledgebase_id:"",knowledgeBase:null,edit_kb_id:"",edit_name:"",edit_email:"",edit_security_id:"",edit_enabled:!0,edit_max_queries_per_day:"0",edit_analytics_window_size_in_months:"0",edit_operator_enabled:!0,edit_capacity_warnings:!0,edit_created:0,edit_index_optimization_schedule:vs,view_ids:!1,copied_visible:"",kb:null,page_size:5,page:0},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"addNewKnowledgeBase",value:function(){this.setState({edit_knowledgebase:!0,knowledgeBase:null,edit_knowledgebase_id:"",edit_name:"",edit_email:"",edit_enabled:!0,edit_max_queries_per_day:"0",edit_analytics_window_size_in_months:"0",edit_operator_enabled:!0,edit_capacity_warnings:!0,edit_created:0,edit_security_id:k.createGuid(),edit_index_optimization_schedule:vs})}},{key:"refreshSecurityId",value:function(){this.setState({edit_security_id:k.createGuid()})}},{key:"editKnowledgeBase",value:function(e){e&&this.setState({edit_knowledgebase:!0,knowledgeBase:e,edit_knowledgebase_id:e.kbId,edit_name:e.name,edit_email:e.email,edit_security_id:e.securityId,edit_enabled:e.enabled,edit_max_queries_per_day:e.maxQueriesPerDay,edit_analytics_window_size_in_months:e.analyticsWindowInMonths,edit_operator_enabled:e.operatorEnabled,edit_capacity_warnings:e.capacityWarnings,edit_index_optimization_schedule:e.indexOptimizationSchedule,edit_created:e.created})}},{key:"optimizeIndexesAsk",value:function(e){var t=this;e&&(this.props.openDialog('are you sure you want to optimize the indexes for "'+e.name+'" ?',"Optimize Knowledge base",(function(e){t.optimizeIndexes(e)})),this.setState({knowledgeBase:e}))}},{key:"optimizeIndexes",value:function(e){e&&this.props.optimizeIndexes(this.props.selected_organisation_id,this.state.knowledgeBase.kbId),this.props.closeDialog&&this.props.closeDialog()}},{key:"reIndexAsk",value:function(e){var t=this;e&&(this.props.openDialog('are you sure you want to re-index "'+e.name+'" ?',"re-index Knowledge base",(function(e){t.reIndex(e)})),this.setState({knowledgeBase:e}))}},{key:"reIndex",value:function(e){e&&this.props.reIndex(this.props.selected_organisation_id,this.state.knowledgeBase.kbId),this.props.closeDialog&&this.props.closeDialog()}},{key:"deleteKnowledgeBaseAsk",value:function(e){var t=this;e&&(this.props.openDialog('are you sure you want to remove "'+e.name+'" ?',"Remove Knowledge base",(function(e){t.deleteKnowledgeBase(e)})),this.setState({knowledgeBase:e}))}},{key:"deleteKnowledgeBase",value:function(e){e&&this.props.deleteKnowledgeBase(this.props.selected_organisation_id,this.state.knowledgeBase.kbId),this.props.closeDialog&&this.props.closeDialog()}},{key:"editCancel",value:function(){this.setState({edit_knowledgebase:!1,knowledgeBase:null})}},{key:"editOk",value:function(){this.state.edit_name.length>0?(this.props.updateKnowledgeBase(this.props.selected_organisation_id,this.state.edit_knowledgebase_id,this.state.edit_name,this.state.edit_email,this.state.edit_security_id,this.state.edit_enabled,this.state.edit_max_queries_per_day,this.state.edit_analytics_window_size_in_months,this.state.edit_operator_enabled,this.state.edit_capacity_warnings,this.state.edit_created,this.state.edit_index_optimization_schedule),this.setState({edit_knowledgebase:!1,knowledgeBase:null})):this.props.setError("Incomplete Data","Please complete all fields.")}},{key:"viewIds",value:function(e){this.setState({view_ids:!0,kb:e})}},{key:"downloadHtml",value:function(e,t){window.open(O.get_html_url(e,this.props.selected_organisation_id,t.kbId),"_blank")}},{key:"getKnowledgeBases",value:function(){var e=[],t=this.state.page*this.state.page_size,a=t+this.state.page_size;for(var s in this.props.knowledge_base_list)s>=t&&s<a&&e.push(this.props.knowledge_base_list[s]);return e}},{key:"updateSchedule",value:function(e){null!==e&&this.setState({edit_index_optimization_schedule:e})}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0}},{key:"startCopiedVisible",value:function(e){var t=this;this.setState({copied_visible:e}),window.setTimeout((function(){t.setState({copied_visible:""})}),1e3)}},{key:"indexOptimizationClass",value:function(e){return e?e.needsIndexOptimization||0===e.indexOptimizationTime?"indexes-out-of-date":"indexes-up-to-date":""}},{key:"indexOptimizationText",value:function(e){return e?e.needsIndexOptimization||0===e.indexOptimizationTime?'the indexes for "'+e.name+'" are out of date.':'the indexes for "'+e.name+'" are up to date.':""}},{key:"indexOptimizationStatus",value:function(e){if(e){var t="not optimized";return e.indexOptimizationTime>0&&(t=k.unixTimeConvert(e.indexOptimizationTime)),t}return""}},{key:"render",value:function(){var e=this,t=this.props.theme,a=this.state.selectedTab,s=zi.hasRole(this.props.user,["admin"]);return Object(ra.jsxs)("div",{children:[this.isVisible()&&Object(ra.jsxs)("div",{children:[Object(ra.jsxs)(Ma.a,{style:ys.pageWidth,children:[Object(ra.jsxs)(Ja.a,{children:[Object(ra.jsx)(Qa.a,{children:Object(ra.jsxs)(Za.a,{className:"table-header",children:[Object(ra.jsx)(Ga.a,{className:"table-header table-width-20",children:"knowledge base"}),Object(ra.jsx)(Ga.a,{className:"table-header table-width-20",children:"email queries to"}),Object(ra.jsx)(Ga.a,{className:"table-header table-width-20",children:"last index optimization"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"actions"})]})}),Object(ra.jsxs)(Va.a,{style:"light"===t?ys.tableLight:ys.tableDark,children:[this.getKnowledgeBases().map((function(t){return Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:ys.label,children:t.name})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:ys.label,children:t.email})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:ys.label,className:e.indexOptimizationClass(t),title:e.indexOptimizationText(t),children:e.indexOptimizationStatus(t)})}),Object(ra.jsxs)(Ga.a,{children:[Object(ra.jsx)("div",{style:ys.linkButton,onClick:function(){return e.viewIds(t)},children:Object(ra.jsx)("img",{src:"../images/id.svg",style:ys.dlImageSize,title:"view knowledge base ids",alt:"ids"})}),Object(ra.jsx)("div",{style:ys.linkButton,onClick:function(){return e.editKnowledgeBase(t)},children:Object(ra.jsx)("img",{src:"../images/edit.svg",style:ys.dlImageSize,title:"edit knowledge base",alt:"edit"})}),s&&Object(ra.jsx)("div",{style:ys.linkButton,onClick:function(){return e.reIndexAsk(t)},children:Object(ra.jsx)("img",{src:"../images/re-index.png",style:ys.dlImageSize,title:"re-index all documents",alt:"re-index"})}),Object(ra.jsx)("div",{style:ys.linkButton,onClick:function(){return e.optimizeIndexesAsk(t)},children:Object(ra.jsx)("img",{src:"../images/optimize.svg",style:ys.dlImageSize,title:"optimize indexes now",alt:"optimize"})}),Object(ra.jsx)("div",{style:ys.linkButton,onClick:function(){return e.deleteKnowledgeBaseAsk(t)},children:Object(ra.jsx)("img",{src:"../images/delete.svg",style:ys.dlImageSize,title:"remove knowledge base",alt:"remove"})})]})]},t.kbId)})),Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{children:this.props.selected_organisation_id.length>0&&Object(ra.jsx)("div",{style:ys.imageButton,onClick:function(){return e.addNewKnowledgeBase()},children:Object(ra.jsx)("img",{style:ys.addImage,src:"../images/add.svg",title:"add new user",alt:"add new user"})})})]})]})]}),Object(ra.jsx)(Xa.a,{rowsPerPageOptions:[5,10,25],style:"light"===t?ys.tableLight:ys.tableDark,component:"div",count:this.props.knowledge_base_list.length,rowsPerPage:this.state.page_size,page:this.state.page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.changePage(a)},onChangeRowsPerPage:function(t){return e.changePageSize(t.target.value)}})]}),Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.edit_knowledgebase,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"lg",onClose:function(){return e.setState({edit_knowledgebase:!1,knowledgeBase:null})},children:[Object(ra.jsx)(ha.a,{className:this.props.theme,children:this.state.edit_knowledgebase_id?"Edit Knowledge Base":"Add New Knowledge Base"}),Object(ra.jsxs)(pa.a,{className:this.props.theme,children:[Object(ra.jsxs)(us.a,{value:this.state.selectedTab,onChange:function(t,a){return e.setState({selectedTab:a})},children:[Object(ra.jsx)(ps.a,{label:"general",value:"general",style:ys.tab}),Object(ra.jsx)(ps.a,{label:"index optimization schedule",value:"schedule",style:ys.tab})]}),Object(ra.jsx)("br",{}),"general"===a&&Object(ra.jsxs)(mt.a,{container:!0,spacing:2,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:3,children:Object(ra.jsx)("div",{children:"name"})}),Object(ra.jsx)(mt.a,{item:!0,xs:6,children:Object(ra.jsx)(lt.a,{autoFocus:!0,style:ys.editBox,placeholder:"knowledge base name",value:this.state.edit_name,onChange:function(t){return e.setState({edit_name:t.target.value})}})}),Object(ra.jsx)(mt.a,{item:!0,xs:2}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:3,children:Object(ra.jsx)("div",{children:"email questions to"})}),Object(ra.jsx)(mt.a,{item:!0,xs:6,children:Object(ra.jsx)(lt.a,{style:ys.editBox,placeholder:"email questions to",value:this.state.edit_email,onChange:function(t){return e.setState({edit_email:t.target.value})}})}),Object(ra.jsx)(mt.a,{item:!0,xs:2}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:3,children:Object(ra.jsx)("div",{children:"security id"})}),Object(ra.jsx)(mt.a,{item:!0,xs:6,children:Object(ra.jsx)(lt.a,{style:ys.sidBox,disabled:!0,placeholder:"security id",label:"security id",value:this.state.edit_security_id,onChange:function(t){return e.setState({edit_security_id:t.target.value})}})}),Object(ra.jsx)(mt.a,{item:!0,xs:2,children:Object(ra.jsx)("div",{style:ys.imageBox,children:Object(ra.jsx)("img",{title:"generate new security id",alt:"refresh",src:"light"===t?"../images/refresh.svg":"../images/refresh-dark.svg",onClick:function(){return e.refreshSecurityId()},style:ys.imageSize})})}),Object(ra.jsx)(mt.a,{item:!0,xs:2}),Object(ra.jsxs)(mt.a,{item:!0,xs:5,children:[Object(ra.jsx)($a.a,{checked:this.state.edit_enabled,onChange:function(t){e.setState({edit_enabled:t.target.checked})},value:"enable this knowledge-base?",inputProps:{"aria-label":"primary checkbox"}}),"knowledge-base enabled?"]}),Object(ra.jsxs)(mt.a,{item:!0,xs:5,children:[Object(ra.jsx)($a.a,{checked:this.state.edit_operator_enabled,onChange:function(t){e.setState({edit_operator_enabled:t.target.checked})},value:"enable operator access?",inputProps:{"aria-label":"primary checkbox"}}),"operator enabled?"]}),Object(ra.jsx)(mt.a,{item:!0,xs:2}),Object(ra.jsxs)(mt.a,{item:!0,xs:5,children:[Object(ra.jsx)($a.a,{checked:this.state.edit_capacity_warnings,onChange:function(t){e.setState({edit_capacity_warnings:t.target.checked})},value:"enable capacity warnings?",inputProps:{"aria-label":"primary checkbox"}}),"capacity-warnings on?"]}),Object(ra.jsx)(mt.a,{item:!0,xs:5}),Object(ra.jsx)(mt.a,{item:!0,xs:2}),Object(ra.jsx)(mt.a,{item:!0,xs:7,children:Object(ra.jsx)("div",{children:"maximum number of queries per day (0 is no limits)"})}),Object(ra.jsx)(mt.a,{item:!0,xs:2,children:Object(ra.jsx)(lt.a,{onChange:function(t){return e.setState({edit_max_queries_per_day:t.target.value})},placeholder:"max transactions per month",variant:"standard",fullWidth:!0,value:this.state.edit_max_queries_per_day})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:2}),Object(ra.jsx)(mt.a,{item:!0,xs:7,children:Object(ra.jsx)("div",{children:"maximum analytics retention period in months (0 is no limits)"})}),Object(ra.jsx)(mt.a,{item:!0,xs:2,children:Object(ra.jsx)(lt.a,{onChange:function(t){return e.setState({edit_analytics_window_size_in_months:t.target.value})},placeholder:"max analytics retention period in months",variant:"standard",fullWidth:!0,value:this.state.edit_analytics_window_size_in_months})}),Object(ra.jsx)(mt.a,{item:!0,xs:1})]}),"schedule"===a&&Object(ra.jsxs)("div",{style:ys.timeTabContent,children:[Object(ra.jsx)(xs,{time:this.state.edit_index_optimization_schedule,onSave:function(t){return e.updateSchedule(t)}}),Object(ra.jsx)("div",{style:ys.paddingBottom})]})]}),Object(ra.jsxs)(ua.a,{className:this.props.theme,children:[Object(ra.jsx)(ct.a,{color:"primary",onClick:function(){return e.editCancel()},children:"Cancel"}),Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",onClick:function(){return e.editOk()},children:"Save"})]})]})]}),Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.view_ids,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"md",onClose:function(){return e.setState({view_ids:!1})},children:[Object(ra.jsxs)(ha.a,{className:this.props.theme,children:[null!=this.state.kb?this.state.kb.name:""," IDS"]}),Object(ra.jsx)(pa.a,{className:this.props.theme,children:Object(ra.jsxs)("div",{children:[Object(ra.jsxs)("div",{style:ys.lineHeight,children:[Object(ra.jsx)("div",{style:ys.organisationIdLabel,children:"organisation id"}),Object(ra.jsx)("div",{style:ys.floatLeft,children:this.props.selected_organisation_id?this.props.selected_organisation_id:""}),Object(ra.jsxs)("span",{style:ys.copyImageSpan,title:"copy organisation id",children:[Object(ra.jsx)("img",{src:"light"===t?"../images/clipboard-copy.svg":"../images/clipboard-copy-dark.svg",style:ys.clipboardImage,alt:"copy",onClick:function(){k.writeToClipboard(e.props.selected_organisation_id?e.props.selected_organisation_id:"")&&e.startCopiedVisible(e.props.selected_organisation_id)}}),this.props.selected_organisation_id&&this.state.copied_visible===this.props.selected_organisation_id&&Object(ra.jsx)("div",{style:ys.copiedStyle,children:"copied"})]}),Object(ra.jsx)("br",{clear:"both"})]}),Object(ra.jsxs)("div",{style:ys.lineHeight,children:[Object(ra.jsx)("div",{style:ys.organisationIdLabel,children:"knowledge base id"}),Object(ra.jsx)("div",{style:ys.floatLeft,children:this.state.kb?this.state.kb.kbId:""}),Object(ra.jsxs)("span",{style:ys.copyImageSpan,title:"copy knowledge base id",children:[Object(ra.jsx)("img",{src:"light"===t?"../images/clipboard-copy.svg":"../images/clipboard-copy-dark.svg",style:ys.clipboardImage,alt:"copy",onClick:function(){k.writeToClipboard(e.state.kb?e.state.kb.kbId:"")&&e.startCopiedVisible(e.state.kb.kbId)}}),this.state.kb&&this.state.copied_visible===this.state.kb.kbId&&Object(ra.jsx)("div",{style:ys.copiedStyle,children:"copied"})]}),Object(ra.jsx)("br",{clear:"both"})]}),Object(ra.jsxs)("div",{style:ys.lineHeight,children:[Object(ra.jsx)("div",{style:ys.organisationIdLabel,children:"security id"}),Object(ra.jsx)("div",{style:ys.floatLeft,children:this.state.kb?this.state.kb.securityId:""}),Object(ra.jsxs)("span",{style:ys.copyImageSpan,title:"copy security id",children:[Object(ra.jsx)("img",{src:"light"===t?"../images/clipboard-copy.svg":"../images/clipboard-copy-dark.svg",style:ys.clipboardImage,alt:"copy",onClick:function(){k.writeToClipboard(e.state.kb?e.state.kb.securityId:"")&&e.startCopiedVisible(e.state.kb.securityId)}}),this.state.kb&&this.state.copied_visible===this.state.kb.securityId&&Object(ra.jsx)("div",{style:ys.copiedStyle,children:"copied"})]}),Object(ra.jsx)("br",{clear:"both"})]})]})}),Object(ra.jsx)(ua.a,{className:this.props.theme,children:Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",onClick:function(){return e.setState({view_ids:!1})},children:"Close"})})]})]})}}]),a}(s.Component),Os=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,knowledge_base_list:e.appReducer.knowledge_base_list,user:e.appReducer.user}}),(function(e){return Object(u.b)(ia,e)}))(_s),ws={pageWidth:{width:"900px"},tableLight:{},tableDark:{background:"#d0d0d0"},label:{color:"#555"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},editBox:{width:"500px",marginBottom:"15px"},addImage:{width:"25px"},dlImageSize:{width:"24px"},floatLeft:{float:"left"},copiedStyle:{fontSize:"10px",marginLeft:"25px",marginTop:"-22px",position:"absolute",float:"left",zIndex:"99"},lineHeight:{height:"30px"},organisationIdLabel:{width:"170px",float:"left",height:"24px"},copyImageSpan:{float:"left",marginTop:"-5px",marginLeft:"10px"},clipboardImage:{width:"24px",height:"24px;"}},ks=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={edit_edge_device:!1,edgeDevice:null,edit_edge_id:"",edit_name:"",edit_created:0,view_ids:!1,view_ids_edge_device:null,copied_visible:"",view_ids_edge_map:{},page_size:5,page:0},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"addEdgeDevice",value:function(){this.setState({edit_edge_device:!0,edgeDevice:null,edit_edge_id:"",edit_name:"",edit_created:0})}},{key:"editEdgeDevice",value:function(e){e&&this.setState({edit_edge_device:!0,edgeDevice:e,edit_edge_id:e.edgeId,edit_name:e.name,edit_created:e.created})}},{key:"deleteEdgeDeviceAsk",value:function(e){var t=this;e&&(this.props.openDialog('are you sure you want to remove "'+e.name+'" ?',"Remove Edge device?",(function(e){t.deleteEdgeDevice(e)})),this.setState({edgeDevice:e}))}},{key:"deleteEdgeDevice",value:function(e){e&&this.props.deleteEdgeDevice(this.props.selected_organisation_id,this.state.edgeDevice.edgeId),this.props.closeDialog&&this.props.closeDialog()}},{key:"editCancel",value:function(){this.setState({edit_edge_device:!1,edgeDevice:null})}},{key:"editOk",value:function(){this.state.edit_name.length>0?(this.props.updateEdgeDevice(this.props.selected_organisation_id,this.state.edit_edge_id,this.state.edit_name,this.state.edit_created),this.setState({edit_edge_device:!1,edgeDevice:null})):this.props.setError("Incomplete Data","Please complete all fields.")}},{key:"viewIds",value:function(e){var t={};e.details&&e.details.length>2&&(t=JSON.parse(e.details)),this.setState({view_ids:!0,view_ids_edge_device:e,view_ids_edge_map:t})}},{key:"startCopiedVisible",value:function(e){var t=this;this.setState({copied_visible:e}),window.setTimeout((function(){t.setState({copied_visible:""})}),1e3)}},{key:"getEdgeDevices",value:function(){var e=[],t=this.state.page*this.state.page_size,a=t+this.state.page_size;if(this.props.edge_device_list)for(var s in this.props.edge_device_list)s>=t&&s<a&&e.push(this.props.edge_device_list[s]);return e}},{key:"get_edge_details",value:function(e){var t="";if(e){if(e.details&&e.details.length>2){var a=JSON.parse(e.details);a.ipv4&&(t+="ip v4: "+a.ipv4)}0!==e.lastModified&&(t.length>0&&(t+=", "),t+="last seen: "+S.unixTimeConvert(e.lastModified))}return""===t?"device not active":t}},{key:"pretty_key",value:function(e){if(e){if("date"===e)return"last seen";if(e.indexOf("_k")>0)return e.replace("_k"," size").replace(/_/g," ");if(e.indexOf("v4")>0)return e.replace("v4"," v4").replace(/_/g," ");if(e.indexOf("v6")>0)return e.replace("v6"," v6").replace(/_/g," ")}return e.replace(/_/g," ")}},{key:"pretty_value",value:function(e,t){if(e&&t){if("date"===e)return S.unixTimeConvert(1e3*t);if(e.indexOf("_k")>0)return S.formatSizeUnits(1e3*parseInt(t))}return t}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ra.jsx)("div",{children:this.isVisible()&&Object(ra.jsxs)("div",{children:[Object(ra.jsxs)(Ma.a,{style:ws.pageWidth,children:[Object(ra.jsxs)(Ja.a,{children:[Object(ra.jsx)(Qa.a,{children:Object(ra.jsxs)(Za.a,{style:ws.tableHeaderStyle,children:[Object(ra.jsx)(Ga.a,{style:ws.tableHeaderStyle,children:"Edge device"}),Object(ra.jsx)(Ga.a,{style:ws.tableHeaderStyle,children:"remote details"}),Object(ra.jsx)(Ga.a,{style:ws.tableHeaderStyle,children:"actions"})]})}),Object(ra.jsxs)(Va.a,{style:"light"===t?ws.tableLight:ws.tableDark,children:[this.getEdgeDevices().map((function(t){return Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:ws.label,children:t.name})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:ws.label,children:e.get_edge_details(t)})}),Object(ra.jsxs)(Ga.a,{children:[Object(ra.jsx)("div",{style:ws.linkButton,onClick:function(){return e.viewIds(t)},children:Object(ra.jsx)("img",{src:"../images/id.svg",style:ws.dlImageSize,title:"view Edge device ids and details",alt:"ids"})}),Object(ra.jsx)("div",{style:ws.linkButton,onClick:function(){return e.editEdgeDevice(t)},children:Object(ra.jsx)("img",{src:"../images/edit.svg",style:ws.dlImageSize,title:"edit Edge device",alt:"edit"})}),Object(ra.jsx)("div",{style:ws.linkButton,onClick:function(){return e.deleteEdgeDeviceAsk(t)},children:Object(ra.jsx)("img",{src:"../images/delete.svg",style:ws.dlImageSize,title:"remove Edge device",alt:"remove"})})]})]},t.edgeId)})),Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{children:this.props.selected_organisation_id.length>0&&Object(ra.jsx)("div",{style:ws.imageButton,onClick:function(){return e.addEdgeDevice()},children:Object(ra.jsx)("img",{style:ws.addImage,src:"../images/add.svg",title:"add new Edge device",alt:"add new Edge device"})})})]})]})]}),Object(ra.jsx)(Xa.a,{rowsPerPageOptions:[5,10,25],style:"light"===t?ws.tableLight:ws.tableDark,component:"div",count:this.props.edge_device_list?this.props.edge_device_list.length:0,rowsPerPage:this.state.page_size,page:this.state.page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.changePage(a)},onChangeRowsPerPage:function(t){return e.changePageSize(t.target.value)}})]}),Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.edit_edge_device,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"lg",onClose:function(){return e.setState({edit_edge_device:!1,edgeDevice:null})},children:[Object(ra.jsx)(ha.a,{className:this.props.theme,children:this.state.edit_edge_id?"Edit Edge device":"Add New Edge device"}),Object(ra.jsx)(pa.a,{className:this.props.theme,children:Object(ra.jsxs)(mt.a,{container:!0,spacing:2,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:3,children:Object(ra.jsx)("div",{children:"name"})}),Object(ra.jsx)(mt.a,{item:!0,xs:6,children:Object(ra.jsx)(lt.a,{autoFocus:!0,style:ws.editBox,placeholder:"Edge device name",value:this.state.edit_name,onChange:function(t){return e.setState({edit_name:t.target.value})}})}),Object(ra.jsx)(mt.a,{item:!0,xs:2})]})}),Object(ra.jsxs)(ua.a,{className:this.props.theme,children:[Object(ra.jsx)(ct.a,{color:"primary",onClick:function(){return e.editCancel()},children:"Cancel"}),Object(ra.jsx)(ct.a,{variant:"outlined",color:"secondary",onClick:function(){return e.editOk()},children:"Save"})]})]}),Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.view_ids,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"md",onClose:function(){return e.setState({view_ids:!1})},children:[Object(ra.jsxs)(ha.a,{className:this.props.theme,children:[null!=this.state.view_ids_edge_device?this.state.view_ids_edge_device.name:""," details"]}),Object(ra.jsx)(pa.a,{className:this.props.theme,children:Object(ra.jsxs)("div",{children:[Object(ra.jsxs)("div",{style:ws.lineHeight,children:[Object(ra.jsx)("div",{style:ws.organisationIdLabel,children:"organisation id"}),Object(ra.jsx)("div",{style:ws.floatLeft,children:this.props.selected_organisation_id?this.props.selected_organisation_id:""}),Object(ra.jsxs)("span",{style:ws.copyImageSpan,title:"copy organisation id",children:[Object(ra.jsx)("img",{src:"light"===t?"../images/clipboard-copy.svg":"../images/clipboard-copy-dark.svg",style:ws.clipboardImage,alt:"copy",onClick:function(){S.writeToClipboard(e.props.selected_organisation_id?e.props.selected_organisation_id:"")&&e.startCopiedVisible(e.props.selected_organisation_id)}}),this.props.selected_organisation_id&&this.state.copied_visible===this.props.selected_organisation_id&&Object(ra.jsx)("div",{style:ws.copiedStyle,children:"copied"})]}),Object(ra.jsx)("br",{clear:"both"})]}),Object(ra.jsxs)("div",{style:ws.lineHeight,children:[Object(ra.jsx)("div",{style:ws.organisationIdLabel,children:"Edge device id"}),Object(ra.jsx)("div",{style:ws.floatLeft,children:this.state.view_ids_edge_device?this.state.view_ids_edge_device.edgeId:""}),Object(ra.jsxs)("span",{style:ws.copyImageSpan,title:"copy Edge device id",children:[Object(ra.jsx)("img",{src:"light"===t?"../images/clipboard-copy.svg":"../images/clipboard-copy-dark.svg",style:ws.clipboardImage,alt:"copy",onClick:function(){S.writeToClipboard(e.state.view_ids_edge_device?e.state.view_ids_edge_device.edgeId:"")&&e.startCopiedVisible(e.state.view_ids_edge_device.edgeId)}}),this.state.view_ids_edge_device&&this.state.copied_visible===this.state.view_ids_edge_device.edgeId&&Object(ra.jsx)("div",{style:ws.copiedStyle,children:"copied"})]}),Object(ra.jsx)("br",{clear:"both"})]}),Object.keys(this.state.view_ids_edge_map).map((function(t){return Object(ra.jsxs)("div",{style:ws.lineHeight,children:[Object(ra.jsx)("div",{style:ws.organisationIdLabel,children:e.pretty_key(t)}),Object(ra.jsx)("div",{style:ws.floatLeft,children:e.pretty_value(t,e.state.view_ids_edge_map[t])})]},t)}))]})}),Object(ra.jsx)(ua.a,{className:this.props.theme,children:Object(ra.jsx)(ct.a,{variant:"outlined",color:"secondary",onClick:function(){return e.setState({view_ids:!1})},children:"Close"})})]})]})})}}]),a}(s.Component),Ss=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,edge_device_list:e.appReducer.edge_device_list}}),(function(e){return Object(u.b)(ia,e)}))(ks),Cs={pageWidth:{width:"900px"},tableLight:{},tableDark:{background:"#d0d0d0"},label:{color:"#555"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},editBox:{width:"100%",marginBottom:"15px"},addImage:{width:"25px"},dlImageSize:{width:"24px"},commandItem:{fontWeight:"600",marginBottom:"20px"},resultItem:{fontSize:"10px"}},Is=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={edit_edge_device_cmd:!1,created:0,edit_command:"",edit_parameters:"",edc:null,view_results:!1,command:"",results:[],page_size:5,page:0},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"addEdgeDeviceCommand",value:function(){this.setState({edit_edge_device_cmd:!0,edc:null,created:0,edit_command:"",edit_parameters:""})}},{key:"editEdgeDeviceCommand",value:function(e){e&&this.setState({edit_edge_device_cmd:!0,edgeDeviceCommand:e,created:e.created,edit_command:e.command,edit_parameters:e.parameters})}},{key:"deleteEdgeDeviceCommandAsk",value:function(e){var t=this;e&&(this.props.openDialog('are you sure you want to remove "'+e.command+'" ?',"Remove Edge device command?",(function(e){t.deleteEdgeDeviceCommand(e)})),this.setState({edc:e}))}},{key:"deleteEdgeDeviceCommand",value:function(e){e&&this.state.edc&&this.props.deleteEdgeDeviceCommand(this.props.selected_organisation_id,this.props.selected_edge_device_id,this.state.edc.created),this.props.closeDialog&&this.props.closeDialog()}},{key:"editCancel",value:function(){this.setState({edit_edge_device_cmd:!1,edc:null})}},{key:"editOk",value:function(){this.state.edit_command.trim().length>0?(this.props.updateEdgeDeviceCommand(this.props.selected_organisation_id,this.props.selected_edge_device_id,this.state.edit_command,this.state.edit_parameters,this.state.created),this.setState({edit_edge_device_cmd:!1,edc:null,created:0,edit_command:"",edit_parameters:""})):this.props.setError("Incomplete Data","Please complete all fields.")}},{key:"getEdgeDeviceCommands",value:function(){var e=[],t=this.state.page*this.state.page_size,a=t+this.state.page_size;if(this.props.edge_device_command_list)for(var s in this.props.edge_device_command_list)s>=t&&s<a&&e.push(this.props.edge_device_command_list[s]);return e}},{key:"getExecutedStatus",value:function(e){return e>0?S.unixTimeConvert(e):"queued"}},{key:"isVisible",value:function(){return this.props.selected_edge_device_id&&this.props.selected_edge_device_id.length>0&&this.props.selected_edge_device&&this.props.selected_edge_device.length>0}},{key:"viewResult",value:function(e){e&&e.result&&this.setState({view_results:!0,results:e.result.split("\n"),command:e.command+" "+e.parameters})}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ra.jsx)("div",{children:this.isVisible()&&Object(ra.jsxs)("div",{children:[Object(ra.jsxs)(Ma.a,{style:Cs.pageWidth,children:[Object(ra.jsxs)(Ja.a,{children:[Object(ra.jsx)(Qa.a,{children:Object(ra.jsxs)(Za.a,{style:Cs.tableHeaderStyle,children:[Object(ra.jsx)(Ga.a,{style:Cs.tableHeaderStyle,children:"Edge command"}),Object(ra.jsx)(Ga.a,{style:Cs.tableHeaderStyle,children:"created"}),Object(ra.jsx)(Ga.a,{style:Cs.tableHeaderStyle,children:"executed"}),Object(ra.jsx)(Ga.a,{style:Cs.tableHeaderStyle,children:"actions"})]})}),Object(ra.jsxs)(Va.a,{style:"light"===t?Cs.tableLight:Cs.tableDark,children:[this.getEdgeDeviceCommands().map((function(t){return Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:Cs.label,children:t.command})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:Cs.label,children:S.unixTimeConvert(t.created)})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:Cs.label,children:e.getExecutedStatus(t.executed)})}),Object(ra.jsxs)(Ga.a,{children:[0===t.executed&&Object(ra.jsx)("div",{style:Cs.linkButton,onClick:function(){return e.editEdgeDeviceCommand(t)},children:Object(ra.jsx)("img",{src:"../images/edit.svg",style:Cs.dlImageSize,title:"edit Edge device",alt:"edit"})}),0===t.executed&&Object(ra.jsx)("div",{style:Cs.linkButton,onClick:function(){return e.deleteEdgeDeviceCommandAsk(t)},children:Object(ra.jsx)("img",{src:"../images/delete.svg",style:Cs.dlImageSize,title:"remove Edge device",alt:"remove"})}),t.executed>0&&Object(ra.jsx)("div",{style:Cs.linkButton,onClick:function(){return e.viewResult(t)},children:Object(ra.jsx)("img",{src:"../images/edit.svg",style:Cs.dlImageSize,title:"view command result",alt:"view"})})]})]},t.created)})),Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{children:this.props.selected_edge_device_id.length>0&&Object(ra.jsx)("div",{style:Cs.imageButton,onClick:function(){return e.addEdgeDeviceCommand()},children:Object(ra.jsx)("img",{style:Cs.addImage,src:"../images/add.svg",title:"add new Edge device command",alt:"add new Edge device command"})})})]})]})]}),Object(ra.jsx)(Xa.a,{rowsPerPageOptions:[5,10,25],style:"light"===t?Cs.tableLight:Cs.tableDark,component:"div",count:this.props.edge_device_command_list?this.props.edge_device_command_list.length:0,rowsPerPage:this.state.page_size,page:this.state.page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.changePage(a)},onChangeRowsPerPage:function(t){return e.changePageSize(t.target.value)}})]}),Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.edit_edge_device_cmd,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"lg",onClose:function(){return e.setState({edit_edge_device_cmd:!1})},children:[Object(ra.jsx)(ha.a,{className:this.props.theme,children:this.state.created?"Edit Edge device command":"Add New Edge device command"}),Object(ra.jsx)(pa.a,{className:this.props.theme,children:Object(ra.jsxs)(mt.a,{container:!0,spacing:2,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsx)("div",{children:"command"})}),Object(ra.jsx)(mt.a,{item:!0,xs:8,children:Object(ra.jsx)(lt.a,{autoFocus:!0,style:Cs.editBox,placeholder:"command",value:this.state.edit_command,onChange:function(t){return e.setState({edit_command:t.target.value})}})}),Object(ra.jsx)(mt.a,{item:!0,xs:2}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsx)("div",{children:"parameters"})}),Object(ra.jsx)(mt.a,{item:!0,xs:8,children:Object(ra.jsx)(lt.a,{style:Cs.editBox,placeholder:"command parameters",value:this.state.edit_parameters,onChange:function(t){return e.setState({edit_parameters:t.target.value})}})}),Object(ra.jsx)(mt.a,{item:!0,xs:2})]})}),Object(ra.jsxs)(ua.a,{className:this.props.theme,children:[Object(ra.jsx)(ct.a,{color:"primary",onClick:function(){return e.editCancel()},children:"Cancel"}),Object(ra.jsx)(ct.a,{variant:"outlined",color:"secondary",onClick:function(){return e.editOk()},children:"Save"})]})]}),Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.view_results,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"md",onClose:function(){return e.setState({view_results:!1})},children:[Object(ra.jsx)(ha.a,{className:this.props.theme,children:"results"}),Object(ra.jsx)(pa.a,{className:this.props.theme,children:Object(ra.jsxs)("div",{children:[Object(ra.jsx)("div",{style:Cs.commandItem,children:this.state.command}),this.state.results.map((function(e,t){return Object(ra.jsx)("div",{style:Cs.resultItem,children:e},t)})),Object(ra.jsx)("div",{style:Cs.lineHeight,children:Object(ra.jsx)("br",{clear:"both"})})]})}),Object(ra.jsx)(ua.a,{className:this.props.theme,children:Object(ra.jsx)(ct.a,{variant:"outlined",color:"secondary",onClick:function(){return e.setState({view_results:!1})},children:"Close"})})]})]})})}}]),a}(s.Component),Rs=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_edge_device_id:e.appReducer.selected_edge_device_id,selected_edge_device:e.appReducer.selected_edge_device,edge_device_list:e.appReducer.edge_device_list,edge_device_command_list:e.appReducer.edge_device_command_list}}),(function(e){return Object(u.b)(ia,e)}))(Is),Ds={label:{marginTop:"20px",marginBottom:"20px"},tableLight:{},tableDark:{background:"#d0d0d0"},gridWidth:{width:"900px"},hr:{border:"0.5px solid #f0f0f0",width:"100%"},hr_dark:{border:"0.5px solid #444",width:"100%"},snapshotItem:{marginBottom:"5px"},refreshImage:{float:"right",width:"24px",cursor:"pointer"},addImage:{float:"right",marginTop:"-8px",width:"24px",cursor:"pointer"},addImageDisabled:{float:"right",marginTop:"-8px",width:"24px",backgroundColor:"#aaaaaa",borderRadius:"12px",cursor:"pointer"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},downloadImage:{width:"24px"},tableWidth:{width:"100%"}},Ts=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={date_time:0},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"componentDidMount",value:function(){}},{key:"programUploaded",value:function(){}},{key:"programConverted",value:function(e){e&&(window.open().document.body.innerHTML+=e.replace(/\n/g,"<br />"))}},{key:"inventorizeDump",value:function(e){window.open(w.get_inventorize_dump_url(this.props.selected_organisation_id,this.props.selected_knowledgebase_id,e),"_blank")}},{key:"inventorizeDumpSpreadsheet",value:function(e){window.open(w.get_inventorize_dump_spreadhseet_url(this.props.selected_organisation_id,this.props.selected_knowledgebase_id,e),"_blank")}},{key:"deleteInventorizeAsk",value:function(e){var t=this;this.setState({date_time:e}),this.props.openDialog("are you sure you want to remove the report dated <b>"+S.unixTimeConvert(e)+"</b>?","Remove Inventory Report",(function(e){t.deleteReport(e)}))}},{key:"deleteReport",value:function(e){e&&this.props.deleteInventoryItem(this.state.date_time),this.props.closeDialog&&this.props.closeDialog()}},{key:"mindDump",value:function(){window.open(w.get_mind_dump_url(this.props.selected_organisation_id,this.props.selected_knowledgebase_id),"_blank")}},{key:"queryLogDump",value:function(){window.open(w.get_query_log_url(this.props.selected_organisation_id,this.props.selected_knowledgebase_id),"_blank")}},{key:"restore",value:function(e){var t=this;e&&(this.setState({uploading:!0}),S.restore(e,(function(){t.setState({uploading:!1,message_title:"Success",message:"data restored",message_callback:function(){t.setState({message:"",message_title:""})}})}),(function(e){t.props.setError("Error",e)})))}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ra.jsx)("div",{children:Object(ra.jsxs)(mt.a,{container:!0,spacing:1,style:Ds.gridWidth,children:[this.isVisible()&&Object(ra.jsx)(mt.a,{item:!0,xs:12,children:Object(ra.jsx)("div",{style:"light"===t?Ds.hr:Ds.hr_dark})}),this.isVisible()&&Object(ra.jsx)(mt.a,{item:!0,xs:12,children:Object(ra.jsxs)("div",{style:Ds.label,children:["Manage snapshots of your document inventory.",this.props.inventorize_busy&&Object(ra.jsx)("span",{children:"  SimSage is busy creating a new snapshot."}),this.props.selected_organisation_id.length>0&&Object(ra.jsx)("img",{src:"../images/refresh.svg",alt:"refresh",title:"refresh the inventory list",onClick:function(){e.props.getInventoryList(),e.props.getInventoryBusy()},style:Ds.refreshImage})]})}),this.isVisible()&&Object(ra.jsx)(mt.a,{item:!0,xs:12,children:Object(ra.jsx)(Ma.a,{children:Object(ra.jsxs)(Ja.a,{style:Ds.tableWidth,children:[Object(ra.jsx)(Qa.a,{children:Object(ra.jsxs)(Za.a,{className:"table-header",children:[Object(ra.jsx)(Ga.a,{className:"table-header table-width-70",children:"created"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"action"})]})}),Object(ra.jsxs)(Va.a,{style:"light"===t?Ds.tableLight:Ds.tableDark,children:[this.props.inventorize_list&&this.props.inventorize_list.timeList&&this.props.inventorize_list.timeList.map((function(t){return Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{children:Object(ra.jsxs)("div",{style:Ds.snapshotItem,children:["content snapshot ",S.unixTimeConvert(t)]})}),Object(ra.jsxs)(Ga.a,{children:[Object(ra.jsx)("div",{style:Ds.linkButton,onClick:function(){return e.inventorizeDump(t)},children:Object(ra.jsx)("img",{src:"../images/parquet.png",style:Ds.downloadImage,title:"download as parquet-file",alt:"download parquet"})}),Object(ra.jsx)("div",{style:Ds.linkButton,onClick:function(){return e.inventorizeDumpSpreadsheet(t)},children:Object(ra.jsx)("img",{src:"../images/xlsx.svg",style:Ds.downloadImage,title:"download as spreadsheet-xlsx",alt:"download spreadsheet"})}),Object(ra.jsx)("div",{style:Ds.linkButton,onClick:function(){return e.deleteInventorizeAsk(t)},children:Object(ra.jsx)("img",{src:"../images/delete.svg",style:Ds.downloadImage,title:"remove report",alt:"remove"})})]})]},t)})),Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{}),Object(ra.jsxs)(Ga.a,{children:[this.props.selected_organisation_id.length>0&&!this.props.inventorize_busy&&Object(ra.jsx)("div",{style:Ds.imageButton,onClick:function(){e.props.createInventory(),e.props.forceInventoryBusy()},children:Object(ra.jsx)("img",{style:Ds.addImage,src:"../images/add.svg",title:"create a new snapshot",alt:"create new snapshot"})}),this.props.selected_organisation_id.length>0&&this.props.inventorize_busy&&Object(ra.jsx)("div",{style:Ds.imageButton,children:Object(ra.jsx)("img",{style:Ds.addImageDisabled,src:"../images/add.svg",title:"SimSage is currently busy processing an inventory.  Please try again later.",alt:"create new snapshot"})})]})]})]})]})})})]})})}}]),a}(n.a.Component),Ns=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id,inventorize_list:e.appReducer.inventorize_list,knowledge_base_list:e.appReducer.knowledge_base_list,inventorize_busy:e.appReducer.inventorize_busy}}),(function(e){return Object(u.b)(ia,e)}))(Ts),Es=a(610),Ls=a(621),Ps=[{key:"none",value:"please select crawler type"},{key:"file",value:"file crawler"},{key:"web",value:"web crawler"},{key:"office365",value:"office 365 crawler"},{key:"dropbox",value:"dropbox crawler"},{key:"wordpress",value:"WordPress external crawler"},{key:"gdrive",value:"Google-drive crawler"},{key:"nfs",value:"nfs external crawler"},{key:"database",value:"database crawler"},{key:"restfull",value:"REST-full crawler"}],Bs=[{value:0,label:"File list"},{value:33,label:"GDPR compliance"},{value:66,label:"Semantic Search"},{value:100,label:"Language NLU"}];function zs(e){return e<10?"file":e<50?"gdpr":e<80?"search":"lang"}var As={customWidth:{width:"48%"},textField:{width:"98%"},formContent:{marginTop:"20px",width:"98%"},exportButton:{}},Us=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,message_callback:null,message:"",message_title:"",organisation_id:k.defined(e.organisation_id)?e.organisation_id:"",kb_id:k.defined(e.kb_id)?e.kb_id:"",sourceId:k.defined(e.sourceId)?e.sourceId:"0",nodeId:k.defined(e.nodeId)?e.nodeId:"0",maxItems:k.defined(e.maxItems)?e.maxItems:"0",maxBotItems:k.defined(e.maxBotItems)?e.maxBotItems:"0",name:k.defined(e.name)?e.name:"",filesPerSecond:k.defined(e.filesPerSecond)?e.filesPerSecond:"0",crawlerType:k.defined(e.crawlerType)&&e.crawlerType.length>0?e.crawlerType:"none",deleteFiles:e.deleteFiles,allowAnonymous:e.allowAnonymous,enablePreview:e.enablePreview,processingLevel:e.processingLevel,customRender:e.customRender,edge_device_list:s.props.edge_device_list,edgeDeviceId:k.defined(e.edgeDeviceId)&&e.edgeDeviceId.length>0?e.edgeDeviceId:"none",qaMatchStrength:k.defined(e.qaMatchStrength)&&e.qaMatchStrength?e.qaMatchStrength:.8125,numResults:k.defined(e.numResults)&&e.numResults?e.numResults:5,numFragments:k.defined(e.numFragments)&&e.numFragments?e.numFragments:3},s}return Object(f.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({filesPerSecond:e.filesPerSecond,crawlerType:k.defined(e.crawlerType)?e.crawlerType:"none",deleteFiles:e.deleteFiles,allowAnonymous:e.allowAnonymous,enablePreview:e.enablePreview,organisation_id:e.organisation_id,kb_id:e.kb_id,sourceId:e.sourceId,nodeId:e.nodeId,maxItems:e.maxItems,maxBotItems:e.maxBotItems,processingLevel:e.processingLevel,customRender:e.customRender,edgeDeviceId:k.defined(e.edgeDeviceId)?e.edgeDeviceId:"none",qaMatchStrength:k.defined(e.qaMatchStrength)?e.qaMatchStrength:.8125,numResults:k.defined(e.numResults)?e.numResults:5,numFragments:k.defined(e.numFragments)?e.numFragments:3,name:e.name,onSave:e.onSave,edge_device_list:e.edge_device_list,onError:e.onError}))}},{key:"construct_data",value:function(e){var t=k.defined(e.crawlerType)?e.crawlerType:this.state.crawlerType,a=(k.defined(e.allowAnonymous)?e.allowAnonymous:this.state.allowAnonymous)||"web"===t,s=k.defined(e.edgeDeviceId)?e.edgeDeviceId:this.state.edgeDeviceId;return"none"!==s&&this.canHaveEdgeDevice()||(s=""),{filesPerSecond:k.defined(e.filesPerSecond)?e.filesPerSecond:this.state.filesPerSecond,organisationId:k.defined(e.organisationId)?e.organisationId:this.state.organisationId,crawlerType:t,deleteFiles:k.defined(e.deleteFiles)?e.deleteFiles:this.state.deleteFiles,allowAnonymous:a,enablePreview:k.defined(e.enablePreview)?e.enablePreview:this.state.enablePreview,processingLevel:k.defined(e.processingLevel)?e.processingLevel:this.state.processingLevel,name:k.defined(e.name)?e.name:this.state.name,sourceId:k.defined(e.sourceId)?e.sourceId:this.state.sourceId,nodeId:k.defined(e.nodeId)?e.nodeId:this.state.nodeId,maxItems:k.defined(e.maxItems)?e.maxItems:this.state.maxItems,maxBotItems:k.defined(e.maxBotItems)?e.maxBotItems:this.state.maxBotItems,customRender:k.defined(e.customRender)?e.customRender:this.state.customRender,edgeDeviceId:s,qaMatchStrength:k.defined(e.qaMatchStrength)?e.qaMatchStrength:this.state.qaMatchStrength,numResults:k.defined(e.numResults)?e.numResults:this.state.numResults,numFragments:k.defined(e.numFragments)?e.numFragments:this.state.numFragments}}},{key:"setError",value:function(e,t){this.props.onError&&this.props.onError(e,t)}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"testCrawler",value:function(){var e=this,t=this.state.name;k.testCrawler(this.state.organisation_id,this.state.kb_id,this.state.sourceId,(function(){e.setState({message_callback:function(){e.setState({message_title:"",message:""})},message_title:"Crawler Test",message:'Success!  crawler "'+t+'" can communicate with its intended end-point.'})}),(function(t){console.log(t),e.setError("Error Testing Crawler",t)}))}},{key:"canHaveEdgeDevice",value:function(){var e=this.state.crawlerType;return"office365"!==e&&"wordpress"!==e&&"gdrive"!==e}},{key:"processingLevelToMark",value:function(){return"FILES"===this.state.processingLevel?0:"GDPR"===this.state.processingLevel?33:"SEARCH"===this.state.processingLevel?66:100}},{key:"setProcessingLevelFromMark",value:function(e){var t="NLU";0===e?t="FILES":33===e?t="GDPR":66===e&&(t="SEARCH"),this.state.onSave&&this.state.onSave(this.construct_data({processingLevel:t}))}},{key:"filteredEdgeDevices",value:function(){var e=[{key:"none",value:"n/a"}];if(this.props.edge_device_list){var t,a=Object(m.a)(this.props.edge_device_list);try{for(a.s();!(t=a.n()).done;){var s=t.value;s.organisationId===this.state.organisation_id&&s.edgeId&&e.push({key:s.edgeId,value:s.name})}}catch(n){a.e(n)}finally{a.f()}}return e}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"crawler-general.js: Something went wrong."}):Object(ra.jsxs)("div",{style:As.formContent,children:[Object(ra.jsx)(Wa,{callback:function(t){return e.state.message_callback(t)},open:this.state.message.length>0,theme:this.props.theme,message:this.state.message,title:this.state.message_title}),Object(ra.jsxs)(mt.a,{container:!0,spacing:2,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:10,children:Object(ra.jsx)(Es.a,{disableUnderline:!0,value:this.state.crawlerType,disabled:""+this.state.sourceId!=="0",style:As.customWidth,onChange:function(t){e.change_callback({crawlerType:t.target.value})},children:Ps.map((function(e){return Object(ra.jsx)(qa.a,{value:e.key,children:e.value},e.key)}))})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"Crawler Name",autoFocus:!0,label:"Crawler Name",value:this.state.name,style:As.textField,onChange:function(t){e.change_callback({name:t.target.value})}})}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"files per second throttle",label:"files per second throttle",value:this.state.filesPerSecond,style:As.textField,onChange:function(t){e.change_callback({filesPerSecond:t.target.value})}})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"Maximum number of files (0 for no limits)",label:"Maximum number of files (0 for no limits)",value:this.state.maxItems,style:As.textField,onChange:function(t){e.change_callback({maxItems:t.target.value})}})}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"Maximum number of QA (Bot) entries (0 for no limits)",label:"Maximum number of QA (Bot) entries (0 for no limits)",value:this.state.maxBotItems,style:As.textField,onChange:function(t){e.change_callback({maxBotItems:t.target.value})}})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"node-id (0 for single node systems)",label:"node-id (0 for single node systems)",value:this.state.nodeId,style:As.textField,onChange:function(t){e.change_callback({nodeId:t.target.value})}})}),("database"===this.state.crawlerType||"restfull"===this.state.crawlerType)&&Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsxs)("div",{style:{float:"left"},title:"Restful and DB crawlers have optional custom-rendering flags.",children:[Object(ra.jsx)($a.a,{checked:this.state.customRender&&("database"===this.state.crawlerType||"restfull"===this.state.crawlerType),onChange:function(t){e.change_callback({customRender:t.target.checked&&("database"===e.state.crawlerType||"restfull"===e.state.crawlerType)})},value:"custom render?",inputProps:{"aria-label":"primary checkbox"}}),"custom render?"]})}),"database"!==this.state.crawlerType&&"restfull"!==this.state.crawlerType&&Object(ra.jsx)(mt.a,{item:!0,xs:5}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsxs)("div",{style:{float:"left"},title:"At the end of a run through your data we can optionally check if files have been removed by seeing which files weren't seen during a run.  Check this option if you want files that no longer exist removed automatically from SimSage.",children:[Object(ra.jsx)($a.a,{checked:this.state.deleteFiles,onChange:function(t){e.change_callback({deleteFiles:t.target.checked})},value:"delete files?",inputProps:{"aria-label":"primary checkbox"}}),"remove un-seen files?"]})}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsxs)("div",{style:{float:"left"},title:"Our default web-search and bot-interfaces require anonymous access to the data gathered by this source.  Check this box if you want anonymous users to view the data in it. (always enabled for web-sources).",children:[Object(ra.jsx)($a.a,{checked:this.state.allowAnonymous||"web"===this.state.crawlerType,disabled:"web"===this.state.crawlerType,onChange:function(t){e.change_callback({allowAnonymous:t.target.checked})},value:"allow anonymous access to these files?",inputProps:{"aria-label":"primary checkbox"}}),"allow anonymous access to these files?"]})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)("div",{style:{float:"left",width:"80%"},title:"Select what kind of processing you want done to these files",children:Object(ra.jsx)(Ls.a,{defaultValue:this.processingLevelToMark(),valueLabelFormat:zs,getAriaValueText:zs,"aria-labelledby":"crawler-level",onChange:function(t,a){return e.setProcessingLevelFromMark(a)},step:null,valueLabelDisplay:"auto",marks:Bs})})}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsxs)("div",{style:{float:"left"},title:"Check this box if you preview images generated for each document.  Document search must be enabled for this to work.",children:[Object(ra.jsx)($a.a,{checked:this.state.enablePreview&&("SEARCH"===this.state.processingLevel||"NLU"===this.state.processingLevel),disabled:"SEARCH"!==this.state.processingLevel&&"NLU"!==this.state.processingLevel,onChange:function(t){e.change_callback({enablePreview:t.target.checked})},value:"enable document image previews?",inputProps:{"aria-label":"primary checkbox"}}),"enable document image previews?"]})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:12}),Object(ra.jsx)(mt.a,{item:!0,xs:12}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"number of search results",label:"number of search results",value:this.state.numResults,style:As.textField,onChange:function(t){e.change_callback({numResults:t.target.value})}})}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"number of fragments per search result",label:"number of fragments per search result",value:this.state.numFragments,style:As.textField,onChange:function(t){e.change_callback({numFragments:t.target.value})}})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"Q&A threshold (0.8125 default)",label:"Q&A threshold (0.8125 default)",value:this.state.qaMatchStrength,style:As.textField,onChange:function(t){e.change_callback({qaMatchStrength:t.target.value})}})}),this.canHaveEdgeDevice()&&Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsx)("div",{style:{cursor:"default",marginTop:"14px"},title:"you can connect this source to a SimSage Edge device if you have one.  Select it here.",children:"Edge device"})}),this.canHaveEdgeDevice()&&Object(ra.jsx)(mt.a,{item:!0,xs:4,children:Object(ra.jsx)("div",{style:{marginTop:"10px"},children:Object(ra.jsx)(Es.a,{disableUnderline:!0,value:""!==this.state.edgeDeviceId?this.state.edgeDeviceId:"none",onChange:function(t){e.change_callback({edgeDeviceId:t.target.value})},children:this.filteredEdgeDevices().map((function(e){return Object(ra.jsx)(qa.a,{value:e.key,children:e.value},e.key)}))})})}),!this.canHaveEdgeDevice()&&Object(ra.jsx)(mt.a,{item:!0,xs:5}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:this.state.sourceId&&this.state.sourceId>0&&"nfs"!==this.state.crawlerType&&"database"!==this.state.crawlerType&&"restfull"!==this.state.crawlerType&&"gdrive"!==this.state.crawlerType&&Object(ra.jsx)("div",{children:Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",style:As.exportButton,onClick:function(){return e.testCrawler()},children:"Test Connection"})})}),Object(ra.jsx)(mt.a,{item:!0,xs:6})]})]})}}]),a}(s.Component),Ws={formContent:{marginTop:"20px",marginLeft:"20px"},textField:{marginRight:"10px",width:"670px"}},Fs=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,username:S.defined(e.username)?e.username:"",password:S.defined(e.password)?e.password:"",server:S.defined(e.server)?e.server:"",domain:S.defined(e.domain)?e.domain:"",fqdn:S.defined(e.fqdn)?e.fqdn:"",shareName:S.defined(e.shareName)?e.shareName:"",sharePath:S.defined(e.sharePath)?e.sharePath:"",specific_json:e.specific_json},s}return Object(f.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({username:e.username,password:e.password,domain:e.domain,fqdn:e.fqdn,server:e.server,shareName:e.shareName,sharePath:e.sharePath,specific_json:e.specific_json,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.state.specific_json),{},{username:S.defined(e.username)?e.username:this.state.username,password:S.defined(e.password)?e.password:this.state.password,domain:S.defined(e.domain)?e.domain:this.state.domain,fqdn:S.defined(e.fqdn)?e.fqdn:this.state.fqdn,server:S.defined(e.server)?e.server:this.state.server,shareName:S.defined(e.shareName)?e.shareName:this.state.shareName,sharePath:S.defined(e.sharePath)?e.sharePath:this.state.sharePath})}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"crawler-file.js: Something went wrong."}):Object(ra.jsxs)("div",{style:Ws.formContent,children:[Object(ra.jsx)(lt.a,{placeholder:"user name",label:"user name",value:this.state.username,onChange:function(t){e.change_callback({username:t.target.value})},style:Ws.textField}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)(lt.a,{placeholder:"password",label:"password",type:"password",value:this.state.password,onChange:function(t){e.change_callback({password:t.target.value})},style:Ws.textField}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)(lt.a,{label:"domain (leave blank for default or no domain)",placeholder:"domain name",value:this.state.domain,onChange:function(t){e.change_callback({domain:t.target.value})},style:Ws.textField}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)(lt.a,{label:"Fully Qualified Domain Name",placeholder:"e.g.  simsage.ai  (this will form your user's email addresses, eg. account-name@simsage.ai)",value:this.state.fqdn,onChange:function(t){e.change_callback({fqdn:t.target.value})},style:Ws.textField}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)(lt.a,{placeholder:"server (hostname or ip-address)",label:"server",value:this.state.server,onChange:function(t){e.change_callback({server:t.target.value})},style:Ws.textField}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)(lt.a,{placeholder:"share name",label:"share name",value:this.state.shareName,onChange:function(t){e.change_callback({shareName:t.target.value})},style:Ws.textField}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)(lt.a,{placeholder:"path inside share (optional)",label:"path inside share",value:this.state.sharePath,onChange:function(t){e.change_callback({sharePath:t.target.value})},style:Ws.textField}),Object(ra.jsx)("br",{})]})}}]),a}(s.Component),Ms={formContent:{marginTop:"20px",width:"98%"},textField:{width:"98%"}},qs=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,onError:e.onError,onSave:e.onSave,baseUrlList:S.defined(e.baseUrlList)?e.baseUrlList:"",webCss:S.defined(e.webCss)?e.webCss:"",webCssIgnore:S.defined(e.webCssIgnore)?e.webCssIgnore:"",validExtensions:S.defined(e.validExtensions)?e.validExtensions:"",validExtensionsIgnore:S.defined(e.validExtensionsIgnore)?e.validExtensionsIgnore:"",articleIncludeWordsCsv:S.defined(e.articleIncludeWordsCsv)?e.articleIncludeWordsCsv:"",articleExcludeWordsCsv:S.defined(e.articleExcludeWordsCsv)?e.articleExcludeWordsCsv:"",specific_json:e.specific_json},s}return Object(f.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({baseUrlList:e.baseUrlList,webCss:S.defined(e.webCss)?e.webCss:"",validExtensions:S.defined(e.validExtensions)?e.validExtensions:"",webCssIgnore:S.defined(e.webCssIgnore)?e.webCssIgnore:"",validExtensionsIgnore:S.defined(e.validExtensionsIgnore)?e.validExtensionsIgnore:"",articleIncludeWordsCsv:S.defined(e.articleIncludeWordsCsv)?e.articleIncludeWordsCsv:"",articleExcludeWordsCsv:S.defined(e.articleExcludeWordsCsv)?e.articleExcludeWordsCsv:"",specific_json:e.specific_json,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.state.specific_json),{},{baseUrlList:S.defined(e.baseUrlList)?e.baseUrlList:this.state.baseUrlList,webCss:S.defined(e.webCss)?e.webCss:this.state.webCss,webCssIgnore:S.defined(e.webCssIgnore)?e.webCssIgnore:this.state.webCssIgnore,validExtensions:S.defined(e.validExtensions)?e.validExtensions:this.state.validExtensions,validExtensionsIgnore:S.defined(e.validExtensionsIgnore)?e.validExtensionsIgnore:this.state.validExtensionsIgnore,articleIncludeWordsCsv:S.defined(e.articleIncludeWordsCsv)?e.articleIncludeWordsCsv:this.state.articleIncludeWordsCsv,articleExcludeWordsCsv:S.defined(e.articleExcludeWordsCsv)?e.articleExcludeWordsCsv:this.state.articleExcludeWordsCsv})}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"crawler-web.js: Something went wrong."}):Object(ra.jsx)("div",{style:Ms.formContent,children:Object(ra.jsxs)(mt.a,{container:!0,spacing:2,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:10,children:Object(ra.jsx)(lt.a,{placeholder:"http/s base name list (preferably https), one per line",multiline:!0,autoFocus:!0,variant:"outlined",rows:"3",label:"http/s base name list (preferably https), one per line",value:this.state.baseUrlList,onChange:function(t){e.change_callback({baseUrlList:t.target.value})},style:Ms.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{label:"file extensions to include (csv list)",variant:"outlined",value:this.state.validExtensions,onChange:function(t){e.change_callback({validExtensions:t.target.value})},style:Ms.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{label:"file extensions to exclude (csv list)",variant:"outlined",value:this.state.validExtensionsIgnore,onChange:function(t){e.change_callback({validExtensionsIgnore:t.target.value})},style:Ms.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"css/html root fragments to include csv",multiline:!0,variant:"outlined",rows:"3",label:"css/html root fragments to include csv (e.g. div.class or id)",value:this.state.webCss,onChange:function(t){e.change_callback({webCss:t.target.value})},style:Ms.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"css/html root fragments to exclude csv",multiline:!0,variant:"outlined",rows:"3",label:"css/html root fragments to exclude csv (e.g. div.class or id)",value:this.state.webCssIgnore,onChange:function(t){e.change_callback({webCssIgnore:t.target.value})},style:Ms.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"csv words, include articles by words [optional]",multiline:!0,variant:"outlined",rows:"3",label:"csv words, include articles by words [optional]",value:this.state.articleIncludeWordsCsv,onChange:function(t){e.change_callback({articleIncludeWordsCsv:t.target.value})},style:Ms.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"csv words, exclude articles by words [optional]",multiline:!0,variant:"outlined",rows:"3",label:"csv words, exclude articles by words [optional]",value:this.state.articleExcludeWordsCsv,onChange:function(t){e.change_callback({articleExcludeWordsCsv:t.target.value})},style:Ms.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:1})]})})}}]),a}(s.Component),Ys=[{key:"none",value:"please select database type"},{key:"mysql",value:"MySQL"},{key:"postgresql",value:"Postgresql"},{key:"microsoftsql",value:"Microsoft SQL"}],Hs={formContent:{marginTop:"20px",width:"98%"},fieldWidth:{width:"100%"},dbType:{float:"right",marginTop:"6px",marginRight:"10px"}},Ks=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,username:e.username?e.username:"",password:e.password?e.password:"",jdbc:e.jdbc?e.jdbc:"",type:k.defined(e.type)?e.type:"none",query:e.query?e.query:"",pk:e.pk?e.pk:"",template:e.template?e.template:"",text:e.text?e.text:"",content_url:e.content_url?e.content_url:"",customRender:e.customRender,specific_json:e.specific_json},s}return Object(f.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({username:e.username,password:e.password,jdbc:e.jdbc,type:k.defined(e.type)?e.type:"none",query:e.query,pk:e.pk,template:e.template,text:e.text,content_url:e.content_url,customRender:e.customRender,specific_json:e.specific_json,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.state.specific_json),{},{username:k.defined(e.username)?e.username:this.state.username,password:k.defined(e.password)?e.password:this.state.password,jdbc:k.defined(e.jdbc)?e.jdbc:this.state.jdbc,type:k.defined(e.type)?e.type:this.state.type,query:k.defined(e.query)?e.query:this.state.query,pk:k.defined(e.pk)?e.pk:this.state.pk,template:k.defined(e.template)?e.template:this.state.template,text:k.defined(e.text)?e.text:this.state.text,content_url:k.defined(e.content_url)?e.content_url:this.state.content_url})}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"crawler-database.js: Something went wrong."}):Object(ra.jsx)("div",{style:Hs.formContent,children:Object(ra.jsxs)(mt.a,{container:!0,spacing:1,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"the user name for accessing this database",label:"user name",variant:"outlined",value:this.state.username,onChange:function(t){e.change_callback({username:t.target.value})},style:Hs.fieldWidth})}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"password",label:"password (enter a value to change it)",type:"password",variant:"outlined",value:this.state.password,onChange:function(t){e.change_callback({password:t.target.value})},style:Hs.fieldWidth})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:10,children:Object(ra.jsx)(lt.a,{placeholder:"jdbc connection string, e.g. jdbc:microsoft:sqlserver://HOST:1433;DatabaseName=DATABASE",label:"jdbc connection string",variant:"outlined",value:this.state.jdbc,onChange:function(t){e.change_callback({jdbc:t.target.value})},style:Hs.fieldWidth})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsx)("div",{style:Hs.dbType,children:"Database"})}),Object(ra.jsx)(mt.a,{item:!0,xs:3,children:Object(ra.jsx)(Es.a,{disableUnderline:!0,value:this.state.type,style:Hs.fieldWidth,onChange:function(t){e.change_callback({type:t.target.value})},children:Ys.map((function(e){return Object(ra.jsx)(qa.a,{value:e.key,children:e.value},e.key)}))})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"the name of the primary key field for this SELECT",label:"primary key name",variant:"outlined",value:this.state.pk,onChange:function(t){e.change_callback({pk:t.target.value})},style:Hs.fieldWidth})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:10,children:Object(ra.jsx)(lt.a,{placeholder:"SQL query, a valid SELECT statement, no other allowed",label:"sql query",variant:"outlined",multiline:!0,rows:3,value:this.state.query,onChange:function(t){e.change_callback({query:t.target.value})},style:Hs.fieldWidth})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:10,children:Object(ra.jsx)(lt.a,{placeholder:"document http/https reference SQL fields in square brackets [FIELD-NAME]",label:"document http/https reference (non custom-renders)",variant:"outlined",multiline:!1,disabled:this.state.customRender,value:this.state.content_url,onChange:function(t){e.change_callback({content_url:t.target.value})},style:Hs.fieldWidth})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:10,children:Object(ra.jsx)(lt.a,{placeholder:"sql text index template, an text template referencing SQL fields in square brackets [FIELD-NAME]",label:"sql text index template (custom-render only)",variant:"outlined",multiline:!0,disabled:!this.state.customRender,rows:7,value:this.state.text,onChange:function(t){e.change_callback({text:t.target.value})},style:Hs.fieldWidth})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:10,children:Object(ra.jsx)(lt.a,{placeholder:"sql html render template, an html template referencing SQL fields in square brackets [FIELD-NAME]",label:"sql html render template (custom-render only)",variant:"outlined",multiline:!0,disabled:!this.state.customRender,rows:7,value:this.state.template,onChange:function(t){e.change_callback({template:t.target.value})},style:Hs.fieldWidth})}),Object(ra.jsx)(mt.a,{item:!0,xs:1})]})})}}]),a}(s.Component),Js=[{key:"none",display:null,field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"author",display:null,field1:"{author}",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"created",display:null,field1:"{created}",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"last modified",display:null,field1:"{lastmod}",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"title",display:null,field1:"{title}",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"image from binary-blob",display:null,field1:"binary-blob-image",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"image from base64",display:null,field1:"base64-image",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"image from url",display:null,field1:"url-image",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"category",display:"",field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"two level category",display:"",field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"number range",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"monetary x 100 range",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"monetary range",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"star rating",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"select if true",display:"",field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"created date range",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"last modified date ranges",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"csv string",display:"",field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""}],Vs={formContent:{marginTop:"20px",width:"98%"},text:{border:"1px solid #808080",borderRadius:"4px",height:"32px",padding:"4px"},instructionLabel:{fontSize:"10px",marginLeft:"20px"},table:{marginTop:"10px",marginLeft:"20px",borderSpacing:"0",border:"1px solid #aaaaaa",borderRadius:"5px"},tableHead:{backgroundColor:"#aaaaaa",color:"#ffffff"},db_field:{verticalAlign:"top",width:"250px"},display:{width:"250px"},displayFieldWidth:{},tdDisplayFieldWidth:{verticalAlign:"top",width:"200px"},tdSort:{verticalAlign:"top"},sortLabel:{fontSize:"10px"},tdSort2:{float:"left",height:"32px",marginLeft:"15px"},metadata_dropdown_box:{marginLeft:"10px",width:"220px",padding:"5px",verticalAlign:"top",marginTop:"8px"},mdDropbox:{float:"left",marginLeft:"10px",width:"220px",padding:"5px",verticalAlign:"top"},metadata_field:{width:"200px",padding:"5px"},sort_field:{width:"100px",padding:"5px"},action_field:{width:"100px",padding:"5px"},metadata_dropdown:{marginLeft:"5px",width:"200px"},imageButton:{padding:"10px",color:"#888",cursor:"pointer"},addImage:{width:"25px",cursor:"pointer",color:"green"},deleteBox:{marginTop:"-14px",color:"#888",float:"left",cursor:"pointer"},upDownArrow:{float:"left",marginTop:"-16px",padding:"2px",fontSize:"26px",cursor:"pointer"},deleteImage:{width:"24px"},dbFieldWidth:{border:"1px solid #808080",borderRadius:"4px",height:"32px",padding:"4px",width:"250px"},tdMetadataFieldName:{verticalAlign:"top"},mdFieldWidth:{width:"200px"},tdAction:{float:"left",marginTop:"8px",verticalAlign:"top"}},Gs=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,specificJson:e.specificJson?e.specificJson:{}},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({specificJson:e.specificJson?e.specificJson:{},onSave:e.onSave,onError:e.onError}))}},{key:"get_md_list",value:function(){return this.state&&this.state.specificJson&&this.state.specificJson.metadata_list?this.state.specificJson.metadata_list:[]}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.props.specificJson),{},{metadata_list:k.defined(e)?e:this.get_md_list()})}},{key:"set_db",value:function(e,t,a){var s=this.get_md_list();t>=0&&t<s.length&&(s[t].db1=a,this.setState({specificJson:this.construct_data(s)}),this.state.onSave&&this.state.onSave(this.construct_data(s)))}},{key:"set_db_extra",value:function(e,t,a){var s=this.get_md_list();t>=0&&t<s.length&&(s[t].db2=a,this.setState({specificJson:this.construct_data(s)}),this.state.onSave&&this.state.onSave(this.construct_data(s)))}},{key:"set_md_type",value:function(e,t,a){var s=this.get_md_list();if(t>=0&&t<s.length){var n,i=null,r=Object(m.a)(Js);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.key===a){i=o;break}}}catch(c){r.e(c)}finally{r.f()}null!=i&&(s[t]=JSON.parse(JSON.stringify(i)),this.setState({specificJson:this.construct_data(s)}),this.state.onSave&&this.state.onSave(this.construct_data(s)))}}},{key:"setDisplayName",value:function(e,t,a){var s=this.get_md_list();t>=0&&t<s.length&&(s[t].display=a,this.setState({specificJson:this.construct_data(s)}),this.state.onSave&&this.state.onSave(this.construct_data(s)))}},{key:"setUserMetadataName1",value:function(e,t,a){var s=this.get_md_list();t>=0&&t<s.length&&(s[t].field1=a,this.setState({specificJson:this.construct_data(s)}),this.state.onSave&&this.state.onSave(this.construct_data(s)))}},{key:"setSort",value:function(e,t,a){var s=this.get_md_list();t>=0&&t<s.length&&(s[t].sort=a?"true":"false",this.setState({specificJson:this.construct_data(s)}),this.state.onSave&&this.state.onSave(this.construct_data(s)))}},{key:"setValue",value:function(e,t,a,s){var n=this.get_md_list();t>=0&&t<n.length&&(n[t][a]=s,this.setState({specificJson:this.construct_data(n)}),this.state.onSave&&this.state.onSave(this.construct_data(n)))}},{key:"setDefaultSort",value:function(e,t,a,s){var n=this.get_md_list();if(t>=0&&t<n.length){for(var i in n[t].sort_default=s?a:"",n)""+i!==""+t&&n.hasOwnProperty(i)&&(n[i].sort_default="");this.setState({specificJson:this.construct_data(n)}),this.state.onSave&&this.state.onSave(this.construct_data(n))}}},{key:"deleteMetadataItem",value:function(e){var t=[],a=""+e,s=this.get_md_list();for(var n in s)n!==a&&t.push(s[n]);this.setState({specificJson:this.construct_data(t)}),this.state.onSave&&this.state.onSave(this.construct_data(t))}},{key:"addNewMetadataMapping",value:function(){var e=this.get_md_list();e.push(JSON.parse(JSON.stringify(Js[0]))),this.setState({specificJson:this.construct_data(e)}),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"checkMetadataName",value:function(e){return e.key>="a"&&e.key<="z"||e.key>="A"&&e.key<="Z"||e.key>="0"&&e.key<="9"||"-"===e.key||(e.preventDefault(),e.stopPropagation(),!1)}},{key:"move_row_up",value:function(e,t){if(t>0){var a=this.get_md_list(),s=a[t-1];a[t-1]=e,a[t]=s,this.setState({specificJson:this.construct_data(a)}),this.state.onSave&&this.state.onSave(this.construct_data(a))}}},{key:"move_row_down",value:function(e,t){var a=this.get_md_list();if(t+1<a.length){var s=a[t+1];a[t+1]=e,a[t]=s,this.setState({specificJson:this.construct_data(a)}),this.state.onSave&&this.state.onSave(this.construct_data(a))}}},{key:"needs_metadata_field",value:function(e){return"category"===e.key||"number range"===e.key||"two level category"===e.key||"monetary x 100 range"===e.key||"monetary range"===e.key||"star rating"===e.key||"created date range"===e.key||"last modified date ranges"===e.key||"select if true"===e.key||"csv string"===e.key}},{key:"render",value:function(){var e=this;if(this.state.has_error)return Object(ra.jsx)("h1",{children:"crawler-metadata-mapper.js: Something went wrong."});var t=this,a=this.get_md_list().length,s=this.props.theme;return Object(ra.jsxs)("div",{style:Vs.formContent,children:[Object(ra.jsx)("div",{style:Vs.instructionLabel,children:"All rows in order of UI.  Use 'actions' arrows to re-arrange existing rows."}),Object(ra.jsxs)("table",{style:Vs.table,children:[Object(ra.jsx)("thead",{children:Object(ra.jsxs)("tr",{style:Vs.tableHead,children:[Object(ra.jsx)("td",{style:Vs.metadata_dropdown_box,children:"data-type"}),Object(ra.jsx)("td",{style:Vs.db_field,children:"source field"}),Object(ra.jsx)("td",{style:Vs.display,children:"UI display-name"}),Object(ra.jsx)("td",{style:Vs.metadata_field,children:"metadata name"}),Object(ra.jsx)("td",{style:Vs.sort_field,children:"sortable"}),Object(ra.jsx)("td",{style:Vs.action_field,children:"actions"})]})}),Object(ra.jsxs)("tbody",{children:[Object(ra.jsx)("tr",{children:Object(ra.jsx)("td",{colSpan:3,children:"\xa0"})}),this.get_md_list().map((function(e,n){return Object(ra.jsxs)("tr",{children:[Object(ra.jsx)("td",{style:Vs.mdDropbox,children:Object(ra.jsx)(Es.a,{disableUnderline:!0,value:e.key,style:Vs.metadata_dropdown,title:"select what kind of metadata field to use",onChange:function(a){t.set_md_type(e,n,a.target.value)},children:Js.map((function(e,t){return Object(ra.jsx)(qa.a,{value:e.key,children:e.key},t)}))})}),"two level category"!==e.key&&Object(ra.jsx)("td",{style:Vs.db_field,children:Object(ra.jsx)("input",{type:"text",className:s,placeholder:"source [field-name]",title:"the source-name field to use for this category",value:e.db1,onChange:function(a){t.set_db(e,n,a.target.value)},style:Vs.dbFieldWidth})}),"two level category"===e.key&&Object(ra.jsxs)("td",{style:Vs.db_field,children:[Object(ra.jsx)("input",{type:"text",placeholder:"level 1 [field-name]",className:s,value:e.db1,title:"the first source field to use for this double category",onChange:function(a){t.set_db(e,n,a.target.value)},style:Vs.dbFieldWidth}),Object(ra.jsx)("input",{type:"text",placeholder:"level 2 [field-name]",className:s,value:e.db2,title:"the second source field to use for this double category",onChange:function(a){t.set_db_extra(e,n,a.target.value)},style:Vs.dbFieldWidth})]}),Object(ra.jsx)("td",{style:Vs.tdDisplayFieldWidth,children:null!==e.display&&Object(ra.jsx)("span",{children:Object(ra.jsx)("input",{type:"text",className:s,style:Vs.text,placeholder:"UI display-name",title:"name displayed in the UI for this item",value:e.display,onChange:function(a){t.setDisplayName(e,n,a.target.value)}})})}),Object(ra.jsxs)("td",{style:Vs.tdMetadataFieldName,children:[t.needs_metadata_field(e)&&Object(ra.jsx)("div",{style:Vs.mdFieldWidth,children:Object(ra.jsx)("input",{type:"text",className:s,style:Vs.text,placeholder:"metadata name",value:e.field1,title:"metadata names should only contain 0..9, a..z, and A..Z",onKeyDown:function(e){return t.checkMetadataName(e)},onChange:function(a){t.setUserMetadataName1(e,n,a.target.value)}})}),"true"===e.sort&&Object(ra.jsx)("div",{children:Object(ra.jsx)("input",{type:"text",className:s,style:Vs.text,placeholder:"sort descending UI text",value:e.sort_desc,title:"The text to display for this field if a descending sort is selected of this type",onChange:function(a){t.setValue(e,n,"sort_desc",a.target.value)}})}),"true"===e.sort&&Object(ra.jsx)("div",{children:Object(ra.jsx)("input",{type:"text",className:s,style:Vs.text,placeholder:"sort ascending UI text",value:e.sort_asc,title:"The text to display for this field if an ascending sort is selected of this type",onChange:function(a){t.setValue(e,n,"sort_asc",a.target.value)}})}),"true"===e.sort&&Object(ra.jsx)("br",{})]}),Object(ra.jsxs)("td",{style:Vs.tdSort,children:[""!==e.sort&&Object(ra.jsx)("div",{style:Vs.tdSort2,title:"enable this category as an item used for sorting in the UI",children:Object(ra.jsx)($a.a,{checked:"true"===e.sort,onChange:function(a){t.setSort(e,n,a.target.checked)},value:"enable result sorting over this field?",inputProps:{"aria-label":"primary checkbox"}})}),"true"===e.sort&&Object(ra.jsxs)("div",{style:Vs.tdSort2,title:"set this descending field as the default sort field for the UI",children:["\u2190",Object(ra.jsx)($a.a,{checked:"desc"===e.sort_default,onChange:function(a){t.setDefaultSort(e,n,"desc",a.target.checked)},inputProps:{"aria-label":"primary checkbox"}})]}),"true"===e.sort&&Object(ra.jsxs)("div",{style:Vs.tdSort2,title:"set this ascending field as the default sort field for the UI",children:["\u2190",Object(ra.jsx)($a.a,{checked:"asc"===e.sort_default,onChange:function(a){t.setDefaultSort(e,n,"asc",a.target.checked)},inputProps:{"aria-label":"primary checkbox"}})]})]}),Object(ra.jsxs)("td",{style:Vs.tdAction,children:[Object(ra.jsx)("span",{style:Vs.deleteBox,onClick:function(){return t.deleteMetadataItem(n)},title:"remove this metadata item",children:Object(ra.jsx)("img",{src:"light"===s?"../images/delete.svg":"../images/delete-dark.svg",style:Vs.deleteImage,title:"remove this metadata mapping",alt:"remove this metadata mapping"})}),n>0&&Object(ra.jsx)("span",{style:Vs.upDownArrow,title:"move row up (change UI ordering)",onClick:function(){t.move_row_up(e,n)},children:"\u21e7"}),n+1<a&&Object(ra.jsx)("span",{style:Vs.upDownArrow,title:"move row down (change UI ordering)",onClick:function(){t.move_row_down(e,n)},children:"\u21e9"})]})]},n)})),Object(ra.jsx)("tr",{children:Object(ra.jsx)("td",{colSpan:5,children:"\xa0"})}),Object(ra.jsxs)("tr",{children:[Object(ra.jsx)("td",{colSpan:5}),Object(ra.jsx)("td",{children:Object(ra.jsx)("div",{style:Vs.imageButton,onClick:function(){return e.addNewMetadataMapping()},children:Object(ra.jsx)("img",{style:Vs.addImage,src:"light"===s?"../images/add.svg":"../images/add-dark.svg",title:"add new metadata mapping",alt:"add new metadata mapping"})})})]}),Object(ra.jsx)("tr",{children:Object(ra.jsx)("td",{colSpan:5,children:"\xa0"})})]})]})]})}}]),a}(s.Component),Qs={formContent:{marginTop:"20px",width:"98%"},textField:{width:"95%"},dlText:{marginTop:"-2px",width:"150px",float:"left"},manualBox:{float:"right",marginRight:"100px"},manualImage:{float:"left",width:"40px"}},Zs=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,tenantId:e.tenantId?e.tenantId:"",clientId:e.clientId?e.clientId:"",clientSecret:e.clientSecret?e.clientSecret:"",redirectUrl:e.redirectUrl?e.redirectUrl:"",crawlOneDrive:!!S.defined(e.crawlOneDrive)&&e.crawlOneDrive,crawlAllOfOneDrive:!!S.defined(e.crawlAllOfOneDrive)&&e.crawlAllOfOneDrive,oneDriveUsersToCrawl:e.oneDriveUsersToCrawl?e.oneDriveUsersToCrawl:"",crawlSharePoint:!!S.defined(e.crawlSharePoint)&&e.crawlSharePoint,crawlRootSite:!!S.defined(e.crawlRootSite)&&e.crawlRootSite,sharePointSitesToCrawl:e.sharePointSitesToCrawl?e.sharePointSitesToCrawl:"",crawlExchange:!!S.defined(e.crawlExchange)&&e.crawlExchange,crawlAllOfExchange:!!S.defined(e.crawlAllOfExchange)&&e.crawlAllOfExchange,exchangeUsersToCrawl:e.exchangeUsersToCrawl?e.exchangeUsersToCrawl:"",specific_json:e.specific_json},s}return Object(f.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({tenantId:e.tenantId,clientId:e.clientId,clientSecret:e.clientSecret,redirectUrl:e.redirectUrl,crawlOneDrive:e.crawlOneDrive,crawlAllOfOneDrive:e.crawlAllOfOneDrive,oneDriveUsersToCrawl:e.oneDriveUsersToCrawl,crawlSharePoint:e.crawlSharePoint,crawlRootSite:e.crawlRootSite,sharePointSitesToCrawl:e.sharePointSitesToCrawl,crawlExchange:e.crawlExchange,crawlAllOfExchange:e.crawlAllOfExchange,exchangeUsersToCrawl:e.exchangeUsersToCrawl,specific_json:e.specific_json,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.state.specific_json),{},{tenantId:S.defined(e.tenantId)?e.tenantId:this.state.tenantId,clientId:S.defined(e.clientId)?e.clientId:this.state.clientId,clientSecret:S.defined(e.clientSecret)?e.clientSecret:this.state.clientSecret,redirectUrl:S.defined(e.redirectUrl)?e.redirectUrl:this.state.redirectUrl,crawlOneDrive:S.defined(e.crawlOneDrive)?e.crawlOneDrive:this.state.crawlOneDrive,crawlAllOfOneDrive:S.defined(e.crawlAllOfOneDrive)?e.crawlAllOfOneDrive:this.state.crawlAllOfOneDrive,oneDriveUsersToCrawl:S.defined(e.oneDriveUsersToCrawl)?e.oneDriveUsersToCrawl:this.state.oneDriveUsersToCrawl,crawlSharePoint:S.defined(e.crawlSharePoint)?e.crawlSharePoint:this.state.crawlSharePoint,crawlRootSite:S.defined(e.crawlRootSite)?e.crawlRootSite:this.state.crawlRootSite,sharePointSitesToCrawl:S.defined(e.sharePointSitesToCrawl)?e.sharePointSitesToCrawl:this.state.sharePointSitesToCrawl,crawlExchange:S.defined(e.crawlExchange)?e.crawlExchange:this.state.crawlExchange,crawlAllOfExchange:S.defined(e.crawlAllOfExchange)?e.crawlAllOfExchange:this.state.crawlAllOfExchange,exchangeUsersToCrawl:S.defined(e.exchangeUsersToCrawl)?e.exchangeUsersToCrawl:this.state.exchangeUsersToCrawl})}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"crawler-office365.js: Something went wrong."}):Object(ra.jsx)("div",{style:Qs.formContent,children:Object(ra.jsxs)(mt.a,{container:!0,spacing:1,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"tenant id",label:"tenant id",autoFocus:!0,value:this.state.tenantId,onChange:function(t){e.change_callback({tenantId:t.target.value})},style:Qs.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)("div",{style:Qs.manualBox,children:Object(ra.jsxs)("a",{href:"../resources/simsage-office365-setup.pdf",id:"dlOffice365",target:"_blank",title:"download the SimSage Office 365 setup guide",children:[Object(ra.jsx)("div",{style:Qs.dlText,children:"download Microsoft Azure configuration instructions"}),Object(ra.jsx)("img",{src:"../images/pdf-icon.png",alt:"offce 365 setup guide",style:Qs.manualImage})]})})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"client id",label:"client id",value:this.state.clientId,onChange:function(t){e.change_callback({clientId:t.target.value})},style:Qs.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"client secret",label:"client secret",value:this.state.clientSecret,onChange:function(t){e.change_callback({clientSecret:t.target.value})},style:Qs.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"redirect url: the SimSage interface url to return-to after MS sign-in completes.",label:"redirect url",value:this.state.redirectUrl,onChange:function(t){e.change_callback({redirectUrl:t.target.value})},style:Qs.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:6}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsxs)("div",{style:{float:"left"},title:"Check this box if you want OneDrive of your Office365 to be included",children:[Object(ra.jsx)($a.a,{checked:this.state.crawlOneDrive,onChange:function(t){e.change_callback({crawlOneDrive:t.target.checked})},value:"enable OneDrive?",inputProps:{"aria-label":"primary checkbox"}}),"enable OneDrive?"]})}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsxs)("div",{style:{float:"left"},title:"Check this box if you want ALL of OneDrive to be included",children:[Object(ra.jsx)($a.a,{checked:this.state.crawlAllOfOneDrive,disabled:!this.state.crawlOneDrive,onChange:function(t){e.change_callback({crawlAllOfOneDrive:t.target.checked})},value:"crawl all of OneDrive?",inputProps:{"aria-label":"primary checkbox"}}),"crawl all of OneDrive?"]})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:10,children:Object(ra.jsx)(lt.a,{placeholder:"specific one-drive accounts (comma separated email addresses)",label:"specific one-drive accounts (comma separated email addresses)",disabled:this.state.crawlAllOfOneDrive||!this.state.crawlOneDrive,variant:"outlined",multiline:!0,rows:2,value:this.state.oneDriveUsersToCrawl,onChange:function(t){e.change_callback({oneDriveUsersToCrawl:t.target.value})},style:Qs.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsxs)("div",{style:{float:"left"},title:"Check this box if you want SharePoint of your Office365 to be included",children:[Object(ra.jsx)($a.a,{checked:this.state.crawlSharePoint,onChange:function(t){e.change_callback({crawlSharePoint:t.target.checked})},value:"enable SharePoint indexing?",inputProps:{"aria-label":"primary checkbox"}}),"enable SharePoint indexing?"]})}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsxs)("div",{style:{float:"left"},title:"Check this box if you want the root SharePoint site to be indexed",children:[Object(ra.jsx)($a.a,{checked:this.state.crawlRootSite,disabled:!this.state.crawlSharePoint,onChange:function(t){e.change_callback({crawlRootSite:t.target.checked})},value:"crawl SharePoint root site?",inputProps:{"aria-label":"primary checkbox"}}),"crawl SharePoint root site?"]})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:10,children:Object(ra.jsx)(lt.a,{placeholder:"other SharePoint sites (comma separated ids)",label:"other SharePoint sites (comma separated ids)",disabled:!this.state.crawlSharePoint,variant:"outlined",multiline:!0,rows:2,value:this.state.sharePointSitesToCrawl,onChange:function(t){e.change_callback({sharePointSitesToCrawl:t.target.value})},style:Qs.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsxs)("div",{style:{float:"left"},title:"Check this box if you want Exchange of your Office365 to be included",children:[Object(ra.jsx)($a.a,{checked:this.state.crawlExchange,onChange:function(t){e.change_callback({crawlExchange:t.target.checked})},value:"enable Exchange?",inputProps:{"aria-label":"primary checkbox"}}),"enable Exchange?"]})}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsxs)("div",{style:{float:"left"},title:"Check this box if you want ALL of Exchange to be included",children:[Object(ra.jsx)($a.a,{checked:this.state.crawlAllOfExchange,disabled:!this.state.crawlExchange,onChange:function(t){e.change_callback({crawlAllOfExchange:t.target.checked})},value:"crawl all of Exchange?",inputProps:{"aria-label":"primary checkbox"}}),"crawl all of Exchange?"]})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:10,children:Object(ra.jsx)(lt.a,{placeholder:"specific exchange accounts (comma separated email addresses)",label:"specific exchange accounts (comma separated email addresses)",disabled:this.state.crawlAllOfExchange||!this.state.crawlExchange,variant:"outlined",multiline:!0,rows:2,value:this.state.exchangeUsersToCrawl,onChange:function(t){e.change_callback({exchangeUsersToCrawl:t.target.value})},style:Qs.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:1})]})})}}]),a}(s.Component),Xs={formContent:{marginTop:"20px",marginLeft:"20px"},textField:{marginRight:"10px",width:"700px"},dlText:{marginTop:"-2px",width:"150px",float:"left"},manualBox:{float:"right",marginRight:"100px"},manualImage:{float:"left",width:"40px"}},$s=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,clientToken:e.clientToken?e.clientToken:"",folderList:e.folderList?e.folderList:"",specific_json:e.specific_json},s}return Object(f.a)(a,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({tenantId:e.tenantId,clientToken:S.defined(e.clientToken)?e.clientToken:"",folderList:S.defined(e.folderList)?e.folderList:"",specific_json:e.specific_json,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.state.specific_json),{},{clientToken:S.defined(e.clientToken)?e.clientToken:this.state.clientToken,folderList:S.defined(e.folderList)?e.folderList:this.state.folderList})}},{key:"change_callback",value:function(e){if(this.setState(e),this.state.onSave){var t=this.construct_data(e);this.state.onSave(t)}}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"crawler-dropbox.js: Something went wrong."}):Object(ra.jsxs)("div",{style:Xs.formContent,children:[Object(ra.jsx)(lt.a,{placeholder:"client token",label:"client token",value:this.state.clientToken,onChange:function(t){e.change_callback({clientToken:t.target.value})},style:Xs.textField}),Object(ra.jsx)("div",{style:Xs.manualBox,children:Object(ra.jsxs)("a",{href:"../resources/simsage-dropbox-setup.pdf",id:"dlDropbox",target:"_blank",title:"download the SimSage Dropbox setup guide",children:[Object(ra.jsx)("div",{style:Xs.dlText,children:"download Dropbox configuration instructions"}),Object(ra.jsx)("img",{src:"../images/pdf-icon.png",alt:"dropbox setup guide",style:Xs.manualImage})]})}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)(lt.a,{placeholder:"specific folders to crawl (separated by commas), leave empty to crawl all.",label:"specific folders to crawl (separated by commas), leave empty to crawl all.",multiline:!0,rows:5,value:this.state.folderList,onChange:function(t){e.change_callback({folderList:t.target.value})},style:Xs.textField}),Object(ra.jsx)("br",{})]})}}]),a}(s.Component),en={uploadContainer:{float:"left",width:"90%",minWidth:"90%",padding:"1px",marginLeft:"10px",background:"white",display:"inline-block",fontWeight:700,fontSize:"10pt",cursor:"pointer"},formWidth:{marginTop:"-20px",float:"left"},uploadControl:{marginTop:"10px",float:"left"},imageButton:{float:"left",marginLeft:"10px",paddingTop:"10px",color:"#888",cursor:"pointer"},restoreImage:{width:"25px"},busyImage:{width:"28px",height:"28px",marginTop:"-10px",float:"left"},uploadInput:{float:"left"},uploadWheel:{marginLeft:"5px",marginTop:"14px",height:"28px",float:"left"}},tn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={filename:"",fileType:"",data:"",organisationId:e.organisationId,kbId:e.kbId,sourceId:e.sourceId,onError:e.onError},s}return Object(f.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({organisationId:e.organisationId,kbId:e.kbId,sourceId:e.sourceId,onError:e.onError})}},{key:"_handleImageChange",value:function(e){e.preventDefault();var t=this,a=new FileReader,s=e.target.files[0],n=s.name,i=s.type;a.onloadend=function(){t.setState({filename:n,fileType:i,data:a.result})},a.readAsDataURL(s)}},{key:"upload",value:function(){if(this.state.data){var e={organisationId:this.state.organisationId,kbId:this.state.kbId,sid:"",sourceId:this.state.sourceId,data:this.state.data};this.props.doUpload&&this.props.doUpload(e)}}},{key:"render",value:function(){var e=this;return Object(ra.jsx)("div",{children:Object(ra.jsx)("form",{onSubmit:function(t){return e._handleSubmit(t)},style:en.uploadContainer,children:Object(ra.jsxs)("div",{style:en.formWidth,children:[Object(ra.jsx)("input",{style:en.uploadControl,type:"file",onChange:function(t){return e._handleImageChange(t)}}),this.state.data&&this.state.data.length>0&&"application/zip"===this.state.fileType&&Object(ra.jsx)("span",{style:en.imageButton,onClick:function(){return e.upload()},children:Object(ra.jsx)("img",{style:en.restoreImage,src:"../images/restore.svg",title:'Click here to upload WordPress Archive "'+this.state.filename+'"',alt:"restore data from file"})})]})})})}}]),a}(n.a.Component),an={formContent:{marginTop:"50px",marginLeft:"50px",fontSize:"0.9em"},exportWP:{marginTop:"50px"},exportButton:{marginTop:"10px"},importWP:{marginTop:"50px",float:"left"},importText:{marginBottom:"20px"},restoreWP:{marginTop:"50px"}},sn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,organisation_id:e.organisation_id,kb_id:e.kb_id,source_id:e.source_id,onSave:e.onSave,onError:e.onError},s}return Object(f.a)(a,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState({onSave:e.onSave,onError:e.onError})}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave({crawlerType:"wordpress"})}},{key:"exportArchive",value:function(){window.open(w.get_export_archive_url(this.state.organisation_id,this.state.kb_id,this.state.source_id),"_blank")}},{key:"restore",value:function(e){e&&e.data&&e.data.length>0&&this.props.wpUploadArchive({organisationId:this.state.organisation_id,kbId:this.state.kb_id,sid:"",sourceId:this.state.source_id,data:e.data})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"crawler-wordpress.js: Something went wrong."}):Object(ra.jsxs)("div",{style:an.formContent,children:["The WordPress crawler is an external entity controlled by the SimSage WordPress plugin.",Object(ra.jsx)("br",{}),"As such there are no properties to configure here, nor is there a schedule for SimSage to work to.",Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),this.state.source_id>0&&Object(ra.jsxs)("div",{style:an.exportWP,children:[Object(ra.jsx)("div",{children:"export the contents of this source as a WordPress GZip Archive"}),Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",style:an.exportButton,onClick:function(){return e.exportArchive()},children:"Export WordPress Archive"})]}),this.state.source_id>0&&Object(ra.jsxs)("div",{style:an.importWP,children:[Object(ra.jsx)("div",{style:an.importText,children:"import the contents of  WordPress GZip Archive into this source"}),Object(ra.jsx)(tn,{doUpload:function(t){return e.restore(t)},organisationId:this.state.organisation_id,kbId:this.state.kb_id,sourceId:this.state.source_id,onError:function(t){return e.props.setError("Error",t)}})]})]})}}]),a}(s.Component),nn={formContent:{marginTop:"20px",marginLeft:"20px",width:"95%"},textField:{width:"100%"},dlText:{marginTop:"-2px",width:"250px",float:"left"},manualBox:{width:"100%"},manualImage:{float:"left",width:"40px"}},rn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,gdrive_projectId:e.gdrive_projectId?e.gdrive_projectId:"",gdrive_clientId:e.gdrive_clientId?e.gdrive_clientId:"",gdrive_clientSecret:e.gdrive_clientSecret?e.gdrive_clientSecret:"",gdrive_clientName:e.gdrive_clientName?e.gdrive_clientName:"",gdrive_clientPort:e.gdrive_clientPort?e.gdrive_clientPort:"",specific_json:e.specific_json},s}return Object(f.a)(a,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({tenantId:e.tenantId,gdrive_projectId:S.defined(e.gdrive_projectId)?e.gdrive_projectId:"",gdrive_clientId:S.defined(e.gdrive_clientId)?e.gdrive_clientId:"",gdrive_clientSecret:S.defined(e.gdrive_clientSecret)?e.gdrive_clientSecret:"",gdrive_clientName:S.defined(e.gdrive_clientName)?e.gdrive_clientName:"",gdrive_clientPort:S.defined(e.gdrive_clientPort)?e.gdrive_clientPort:"",specific_json:e.specific_json,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.state.specific_json),{},{gdrive_projectId:S.defined(e.gdrive_projectId)?e.gdrive_projectId:this.state.gdrive_projectId,gdrive_clientId:S.defined(e.gdrive_clientId)?e.gdrive_clientId:this.state.gdrive_clientId,gdrive_clientSecret:S.defined(e.gdrive_clientSecret)?e.gdrive_clientSecret:this.state.gdrive_clientSecret,gdrive_clientName:S.defined(e.gdrive_clientName)?e.gdrive_clientName:this.state.gdrive_clientName,gdrive_clientPort:S.defined(e.gdrive_clientPort)?e.gdrive_clientPort:this.state.gdrive_clientPort})}},{key:"change_callback",value:function(e){if(this.setState(e),this.state.onSave){var t=this.construct_data(e);this.state.onSave(t)}}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"crawler-gdrive.js: Something went wrong."}):Object(ra.jsx)("div",{style:nn.formContent,children:Object(ra.jsxs)(mt.a,{container:!0,spacing:2,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:7,children:Object(ra.jsx)(lt.a,{placeholder:"client Id",label:"client Id",variant:"outlined",value:this.state.gdrive_clientId,onChange:function(t){e.change_callback({gdrive_clientId:t.target.value})},style:nn.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:3,children:Object(ra.jsx)("div",{style:nn.manualBox,children:Object(ra.jsxs)("a",{href:"../resources/simsage-google-drive-setup.pdf",id:"dlGDrive",target:"_blank",title:"download the SimSage Google-drive setup guide",children:[Object(ra.jsx)("div",{style:nn.dlText,children:"download Google-drive configuration instructions"}),Object(ra.jsx)("img",{src:"../images/pdf-icon.png",alt:"google-drive setup guide",style:nn.manualImage})]})})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"client Secret",label:"client Secret",variant:"outlined",value:this.state.gdrive_clientSecret,onChange:function(t){e.change_callback({gdrive_clientSecret:t.target.value})},style:nn.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"project Id",label:"project Id",variant:"outlined",value:this.state.gdrive_projectId,onChange:function(t){e.change_callback({gdrive_projectId:t.target.value})},style:nn.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"client Name",label:"client Name",variant:"outlined",value:this.state.gdrive_clientName,onChange:function(t){e.change_callback({gdrive_clientName:t.target.value})},style:nn.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"local web port",label:"local web port",variant:"outlined",value:this.state.gdrive_clientPort,onChange:function(t){e.change_callback({gdrive_clientPort:t.target.value})},style:nn.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:1})]})})}}]),a}(s.Component),on={formContent:{marginTop:"20px",marginLeft:"20px",width:"90%"},textField:{width:"100%"},dlText:{marginTop:"-2px",width:"250px",float:"left"},manualBox:{width:"100%"},manualImage:{float:"left",width:"40px"},roleBlock:{padding:"5px",border:"1px solid #888",borderRadius:"4px"},roleLabel:{fontSize:"0.8em",color:"#aaa"},roleArea:{padding:"20px"},roleChip:{margin:"2px"}},cn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,nfs_local_folder:e.nfs_local_folder?e.nfs_local_folder:"",nfs_userList:S.defined(e.nfs_userList)?e.nfs_userList:"",specific_json:e.specific_json},s}return Object(f.a)(a,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState({nfs_local_folder:S.defined(e.nfs_local_folder)?e.nfs_local_folder:"",nfs_userList:S.defined(e.nfs_userList)?e.nfs_userList:"",specific_json:e.specific_json,onSave:e.onSave,onError:e.onError})}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.state.specific_json),{},{nfs_local_folder:S.defined(e.nfs_local_folder)?e.nfs_local_folder:this.state.nfs_local_folder,nfs_userList:S.defined(e.nfs_userList)?e.nfs_userList:this.state.nfs_userList})}},{key:"change_callback",value:function(e){if(this.setState(e),this.state.onSave){var t=this.construct_data(e);this.state.onSave(t)}}},{key:"getSelectedUsers",value:function(){var e,t={},a=Object(m.a)(this.state.nfs_userList.split(","));try{for(a.s();!(e=a.n()).done;){var s=e.value;s&&(t[s]=!0)}}catch(c){a.e(c)}finally{a.f()}var n,i=[],r=Object(m.a)(this.props.availableUserList);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.id&&t[o.id]&&i.push(o)}}catch(c){r.e(c)}finally{r.f()}return i}},{key:"getAvailableUsers",value:function(){var e,t={},a=Object(m.a)(this.state.nfs_userList.split(","));try{for(a.s();!(e=a.n()).done;){var s=e.value;s&&(t[s]=!0)}}catch(c){a.e(c)}finally{a.f()}var n,i=[],r=Object(m.a)(this.props.availableUserList);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.id&&!t[o.id]&&i.push(o)}}catch(c){r.e(c)}finally{r.f()}return i}},{key:"removeUser",value:function(e){var t,a=[],s=Object(m.a)(this.state.nfs_userList.split(","));try{for(s.s();!(t=s.n()).done;){var n=t.value;n&&n!==e.id&&a.push(n)}}catch(i){s.e(i)}finally{s.f()}this.change_callback({nfs_userList:a.join()})}},{key:"addUser",value:function(e){var t=this.state.nfs_userList;t=t.length>0?t+","+e.id:e.id,this.change_callback({nfs_userList:t})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"crawler-nfs.js: Something went wrong."}):Object(ra.jsx)("div",{style:on.formContent,children:Object(ra.jsxs)(mt.a,{container:!0,spacing:2,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:10,children:Object(ra.jsx)(lt.a,{placeholder:"local folder",label:"Local Folder",variant:"outlined",value:this.state.nfs_local_folder,onChange:function(t){e.change_callback({nfs_local_folder:t.target.value})},style:on.textField})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsxs)("div",{style:on.roleBlock,children:[Object(ra.jsx)("div",{style:on.roleLabel,children:"users with access"}),Object(ra.jsx)("div",{style:on.roleArea,children:this.getSelectedUsers().map((function(t){return Object(ra.jsx)(rs.a,{color:"secondary",style:on.roleChip,onClick:function(){return e.removeUser(t)},label:t.firstName+" "+t.surname,variant:"outlined"},t.id)}))})]})}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsxs)("div",{style:on.roleBlock,children:[Object(ra.jsx)("div",{style:on.roleLabel,children:"available users"}),Object(ra.jsx)("div",{style:on.roleArea,children:this.getAvailableUsers().map((function(t){return Object(ra.jsx)(rs.a,{color:"primary",style:on.roleChip,onClick:function(){return e.addUser(t)},label:t.firstName+" "+t.surname,variant:"outlined"},t.id)}))})]})}),Object(ra.jsx)(mt.a,{item:!0,xs:1})]})})}}]),a}(s.Component),ln={formContent:{marginTop:"20px",width:"98%"},fieldWidth:{width:"100%"},dbType:{float:"right",marginTop:"6px",marginRight:"10px"}},dn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,pk:e.pk?e.pk:"",url:e.url?e.url:"",template:e.template?e.template:"",text:e.text?e.text:"",content_url:e.content_url?e.content_url:"",customRender:!!e.customRender&&e.customRender,specific_json:e.specific_json},s}return Object(f.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState(this.construct_data({pk:e.pk,url:e.url,template:e.template,text:e.text,content_url:e.content_url?e.content_url:"",customRender:!!e.customRender&&e.customRender,specific_json:e.specific_json,onSave:e.onSave,onError:e.onError}))}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.state.specific_json),{},{url:k.defined(e.url)?e.url:this.state.url,template:k.defined(e.template)?e.template:this.state.template,text:k.defined(e.text)?e.text:this.state.text,content_url:k.defined(e.content_url)?e.content_url:this.state.content_url,pk:k.defined(e.pk)?e.pk:this.state.pk})}},{key:"change_callback",value:function(e){this.setState(e),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"crawler-restfull.js: Something went wrong."}):Object(ra.jsx)("div",{style:ln.formContent,children:Object(ra.jsxs)(mt.a,{container:!0,spacing:1,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:10,children:Object(ra.jsx)(lt.a,{placeholder:"url",label:"url",variant:"outlined",value:this.state.url,onChange:function(t){e.change_callback({url:t.target.value})},style:ln.fieldWidth})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:5,children:Object(ra.jsx)(lt.a,{placeholder:"the name of the primary key in the record",label:"primary key name",variant:"outlined",value:this.state.pk,onChange:function(t){e.change_callback({pk:t.target.value})},style:ln.fieldWidth})}),Object(ra.jsx)(mt.a,{item:!0,xs:6}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:10,children:Object(ra.jsx)(lt.a,{placeholder:"document http/https reference SQL fields in square brackets [FIELD-NAME]",label:"document http/https reference (non custom-renders)",variant:"outlined",multiline:!1,disabled:this.state.customRender,value:this.state.content_url,onChange:function(t){e.change_callback({content_url:t.target.value})},style:ln.fieldWidth})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:10,children:Object(ra.jsx)(lt.a,{placeholder:"REST text index template, an text template referencing REST fields in square brackets [FIELD-NAME]",label:"REST text index template",variant:"outlined",disabled:!this.state.customRender,multiline:!0,rows:7,value:this.state.text,onChange:function(t){e.change_callback({text:t.target.value})},style:ln.fieldWidth})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:10,children:Object(ra.jsx)(lt.a,{placeholder:"REST html render template, an html template referencing REST fields in square brackets [FIELD-NAME]",label:"REST html render template",variant:"outlined",disabled:!this.state.customRender,multiline:!0,rows:7,value:this.state.template,onChange:function(t){e.change_callback({template:t.target.value})},style:ln.fieldWidth})}),Object(ra.jsx)(mt.a,{item:!0,xs:1})]})})}}]),a}(s.Component),un=[{key:"none",display:null,field1:null,db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"author list",display:"",field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"created date range",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"last modified date ranges",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"document type",display:"",field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"people list",display:"",field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"location list",display:"",field1:"",db1:"",db2:"",sort:"",sort_default:"",sort_asc:"",sort_desc:""},{key:"money range",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""},{key:"number range",display:"",field1:"",db1:"",db2:"",sort:"false",sort_default:"",sort_asc:"",sort_desc:""}],pn={formContent:{marginTop:"20px",width:"98%"},text:{border:"1px solid #808080",borderRadius:"4px",height:"32px",padding:"4px"},instructionLabel:{fontSize:"10px",marginLeft:"20px"},table:{marginTop:"10px",marginLeft:"20px",borderSpacing:"0",border:"1px solid #aaaaaa",borderRadius:"5px"},tableHead:{backgroundColor:"#aaaaaa",color:"#ffffff"},db_field:{verticalAlign:"top",width:"250px"},display:{width:"250px"},displayFieldWidth:{},tdDisplayFieldWidth:{verticalAlign:"top",width:"200px"},tdSort:{verticalAlign:"top"},sortLabel:{fontSize:"10px"},tdSort2:{float:"left",height:"32px",marginLeft:"15px"},metadata_dropdown_box:{marginLeft:"10px",width:"220px",padding:"5px",verticalAlign:"top",marginTop:"8px"},mdDropbox:{float:"left",marginLeft:"10px",width:"220px",padding:"5px",verticalAlign:"top"},metadata_field:{width:"200px",padding:"5px"},sort_field:{width:"100px",padding:"5px"},action_field:{width:"100px",padding:"5px"},metadata_dropdown:{marginLeft:"5px",width:"200px"},imageButton:{padding:"10px",color:"#888",cursor:"pointer"},addImage:{width:"25px",cursor:"pointer",color:"green"},deleteBox:{marginTop:"-14px",color:"#888",float:"left",cursor:"pointer"},upDownArrow:{float:"left",marginTop:"-16px",padding:"2px",fontSize:"26px",cursor:"pointer"},deleteImage:{width:"24px"},dbFieldWidth:{width:"250px"},tdMetadataFieldName:{verticalAlign:"top"},mdFieldWidth:{width:"200px"},tdAction:{float:"left",marginTop:"8px",verticalAlign:"top"}},hn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,onSave:e.onSave,onError:e.onError,specific_json:e.specific_json?e.specific_json:{}},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState({specific_json:e.specific_json,onSave:e.onSave,onError:e.onError})}},{key:"construct_data",value:function(e){return Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:k.defined(e)?e:this.get_md_list()})}},{key:"set_db",value:function(e,t,a){var s=this.get_md_list();t>=0&&t<s.length&&(s[t].db1=a,this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:s})}),this.state.onSave&&this.state.onSave(this.construct_data(s)))}},{key:"set_db_extra",value:function(e,t,a){var s=this.get_md_list();t>=0&&t<s.length&&(s[t].db2=a,this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:s})}),this.state.onSave&&this.state.onSave(this.construct_data(s)))}},{key:"set_md_type",value:function(e,t,a){var s=this.get_md_list();if(t>=0&&t<s.length){var n,i=null,r=Object(m.a)(un);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.key===a){i=o;break}}}catch(c){r.e(c)}finally{r.f()}null!=i&&(s[t]=JSON.parse(JSON.stringify(i)),this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:s})}),this.state.onSave&&this.state.onSave(this.construct_data(s)))}}},{key:"setDisplayName",value:function(e,t,a){var s=this.get_md_list();t>=0&&t<s.length&&(s[t].display=a,this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:s})}),this.state.onSave&&this.state.onSave(this.construct_data(s)))}},{key:"setUserMetadataName1",value:function(e,t,a){var s=this.get_md_list();t>=0&&t<s.length&&(s[t].field1=a,this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:s})}),this.state.onSave&&this.state.onSave(this.construct_data(s)))}},{key:"setSort",value:function(e,t,a){var s=this.get_md_list();t>=0&&t<s.length&&(s[t].sort=a?"true":"false",this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:s})}),this.state.onSave&&this.state.onSave(this.construct_data(s)))}},{key:"setValue",value:function(e,t,a,s){var n=this.get_md_list();t>=0&&t<n.length&&(n[t][a]=s,this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:n})}),this.state.onSave&&this.state.onSave(this.construct_data(n)))}},{key:"setDefaultSort",value:function(e,t,a,s){var n=this.get_md_list();if(t>=0&&t<n.length){for(var i in n[t].sort_default=s?a:"",n)""+i!==""+t&&n.hasOwnProperty(i)&&(n[i].sort_default="");this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:n})}),this.state.onSave&&this.state.onSave(this.construct_data(n))}}},{key:"deleteMetadataItem",value:function(e){var t=[],a=""+e,s=this.get_md_list();for(var n in s)n!==a&&t.push(s[n]);this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:t})}),this.state.onSave&&this.state.onSave(this.construct_data(t))}},{key:"addNewMetadataMapping",value:function(){var e=this.get_md_list();e.push(JSON.parse(JSON.stringify(un[0]))),this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:e})}),this.state.onSave&&this.state.onSave(this.construct_data(e))}},{key:"checkMetadataName",value:function(e){return e.key>="a"&&e.key<="z"||e.key>="A"&&e.key<="Z"||e.key>="0"&&e.key<="9"||"-"===e.key||(e.preventDefault(),e.stopPropagation(),!1)}},{key:"move_row_up",value:function(e,t){if(t>0){var a=this.get_md_list(),s=a[t-1];a[t-1]=e,a[t]=s,this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:a})}),this.state.onSave&&this.state.onSave(this.construct_data(a))}}},{key:"move_row_down",value:function(e,t){var a=this.get_md_list();if(t+1<a.length){var s=a[t+1];a[t+1]=e,a[t]=s,this.setState({specific_json:Object(d.a)(Object(d.a)({},this.props.specific_json),{},{metadata_list:a})}),this.state.onSave&&this.state.onSave(this.construct_data(a))}}},{key:"get_md_list",value:function(){return this.state&&this.state.specific_json&&this.state.specific_json.metadata_list?this.state.specific_json.metadata_list:[]}},{key:"needs_metadata_field",value:function(e){return null!==e.field1}},{key:"render",value:function(){var e=this;if(this.state.has_error)return Object(ra.jsx)("h1",{children:"crawler-metadata-mapper.js: Something went wrong."});var t=this,a=this.props.theme,s=this.get_md_list().length;return Object(ra.jsxs)("div",{style:pn.formContent,children:[Object(ra.jsx)("div",{style:pn.instructionLabel,children:"All rows in order of UI.  Use 'actions' arrows to re-arrange existing rows."}),Object(ra.jsxs)("table",{style:pn.table,children:[Object(ra.jsx)("thead",{children:Object(ra.jsxs)("tr",{style:pn.tableHead,children:[Object(ra.jsx)("td",{style:pn.metadata_dropdown_box,children:"data-type"}),Object(ra.jsx)("td",{style:pn.display,children:"UI display-name"}),Object(ra.jsx)("td",{style:pn.metadata_field,children:"metadata name"}),Object(ra.jsx)("td",{style:pn.sort_field,children:"sortable"}),Object(ra.jsx)("td",{style:pn.action_field,children:"actions"})]})}),Object(ra.jsxs)("tbody",{className:this.state.theme,children:[Object(ra.jsx)("tr",{children:Object(ra.jsx)("td",{colSpan:3,children:"\xa0"})}),this.get_md_list().map((function(e,n){return Object(ra.jsxs)("tr",{children:[Object(ra.jsx)("td",{style:pn.mdDropbox,children:Object(ra.jsx)(Es.a,{disableUnderline:!0,value:e.key,style:pn.metadata_dropdown,title:"select what kind of metadata field to use",onChange:function(a){t.set_md_type(e,n,a.target.value)},children:un.map((function(e,t){return Object(ra.jsx)(qa.a,{value:e.key,children:e.key},t)}))})}),Object(ra.jsx)("td",{style:pn.tdDisplayFieldWidth,children:null!==e.display&&Object(ra.jsx)("span",{children:Object(ra.jsx)("input",{type:"text",className:a,style:pn.text,placeholder:"UI display-name",title:"name displayed in the UI for this item",value:e.display,onChange:function(a){t.setDisplayName(e,n,a.target.value)}})})}),Object(ra.jsxs)("td",{style:pn.tdMetadataFieldName,children:[t.needs_metadata_field(e)&&Object(ra.jsx)("div",{style:pn.mdFieldWidth,children:Object(ra.jsx)("input",{type:"text",className:a,style:pn.text,placeholder:"metadata name",value:e.field1,title:"metadata names should only contain 0..9, a..z, and A..Z",onKeyDown:function(e){return t.checkMetadataName(e)},onChange:function(a){t.setUserMetadataName1(e,n,a.target.value)}})}),"true"===e.sort&&Object(ra.jsx)("div",{children:Object(ra.jsx)("input",{type:"text",placeholder:"sort descending UI text",className:a,style:pn.text,value:e.sort_desc,title:"The text to display for this field if a descending sort is selected of this type",onChange:function(a){t.setValue(e,n,"sort_desc",a.target.value)}})}),"true"===e.sort&&Object(ra.jsx)("div",{children:Object(ra.jsx)("input",{type:"text",className:a,style:pn.text,placeholder:"sort ascending UI text",value:e.sort_asc,title:"The text to display for this field if an ascending sort is selected of this type",onChange:function(a){t.setValue(e,n,"sort_asc",a.target.value)}})}),"true"===e.sort&&Object(ra.jsx)("br",{})]}),Object(ra.jsxs)("td",{style:pn.tdSort,children:[""!==e.sort&&Object(ra.jsxs)("div",{style:pn.tdSort2,title:"enable this category as an item used for sorting in the UI",children:[Object(ra.jsx)($a.a,{checked:"true"===e.sort,onChange:function(a){t.setSort(e,n,a.target.checked)},value:"enable result sorting over this field?",inputProps:{"aria-label":"primary checkbox"}}),Object(ra.jsx)("span",{style:pn.sortLabel,children:"sort"})]}),"true"===e.sort&&Object(ra.jsxs)("div",{style:pn.tdSort2,title:"set this descending field as the default sort field for the UI",children:["\u2190",Object(ra.jsx)($a.a,{checked:"desc"===e.sort_default,onChange:function(a){t.setDefaultSort(e,n,"desc",a.target.checked)},inputProps:{"aria-label":"primary checkbox"}})]}),"true"===e.sort&&Object(ra.jsxs)("div",{style:pn.tdSort2,title:"set this ascending field as the default sort field for the UI",children:["\u2190",Object(ra.jsx)($a.a,{checked:"asc"===e.sort_default,onChange:function(a){t.setDefaultSort(e,n,"asc",a.target.checked)},inputProps:{"aria-label":"primary checkbox"}})]})]}),Object(ra.jsxs)("td",{style:pn.tdAction,children:[Object(ra.jsx)("span",{style:pn.deleteBox,onClick:function(){return t.deleteMetadataItem(n)},title:"remove this metadata item",children:Object(ra.jsx)("img",{src:"light"===a?"../images/delete.svg":"../images/delete-dark.svg",style:pn.deleteImage,title:"remove this metadata mapping",alt:"remove this metadata mapping"})}),n>0&&Object(ra.jsx)("span",{style:pn.upDownArrow,title:"move row up (change UI ordering)",onClick:function(){t.move_row_up(e,n)},children:"\u21e7"}),n+1<s&&Object(ra.jsx)("span",{style:pn.upDownArrow,title:"move row down (change UI ordering)",onClick:function(){t.move_row_down(e,n)},children:"\u21e9"})]})]},n)})),Object(ra.jsx)("tr",{children:Object(ra.jsx)("td",{colSpan:4,children:"\xa0"})}),Object(ra.jsxs)("tr",{children:[Object(ra.jsx)("td",{colSpan:4}),Object(ra.jsx)("td",{children:Object(ra.jsx)("div",{style:pn.imageButton,onClick:function(){return e.addNewMetadataMapping()},children:Object(ra.jsx)("img",{style:pn.addImage,src:"light"===a?"../images/add.svg":"../images/add-dark.svg",title:"add new metadata mapping",alt:"add new metadata mapping"})})})]}),Object(ra.jsx)("tr",{children:Object(ra.jsx)("td",{colSpan:4,children:"\xa0"})})]})]})]})}}]),a}(s.Component),bn={formContent:{overflowY:"scroll",height:"550px"},tab:{backgroundColor:"#f8f8f8",color:"#000"},tab_dark:{backgroundColor:"#808080",color:"#f8f8f8"},timeTabContent:{marginLeft:"20px"}},mn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={open:e.open,onSave:e.onSave,onUpdate:e.onUpdate,onError:e.onError,error_title:e.error_title,error_msg:e.error_msg,selectedTab:"general",schedule:"",organisation_id:e.organisation_id,kb_id:e.kb_id,crawler:e.crawler,has_error:!1},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&this.setState({open:e.open,title:e.title,onSave:e.onSave,onUpdate:e.onUpdate,onError:e.onError,error_title:e.error_title,error_msg:e.error_msg,organisation_id:e.organisation_id,kb_id:e.kb_id,crawler:e.crawler})}},{key:"setError",value:function(e,t){this.props.onError&&this.props.onError(e,t)}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null),this.setState({open:!1})}},{key:"isValidMetadata",value:function(e,t){var a={},s=0,n=0,i=0;S.defined(e)||(e=[]);var r,o=Object(m.a)(e);try{for(o.s();!(r=o.n()).done;){var c=r.value,l=c.field1;if(!l||0===l.length)return this.setError("invalid metadata field","metadata field missing metadata-field-name"),!1;var d=c.db1;if(t&&(!d||0===d.length))return this.setError("invalid database field",'database field missing for database-field-name "'+l+'"'),!1;if("two level category"===c.key){var u=c.db2;if(!u||0===u.length)return this.setError("invalid database field",'database field missing for database-field-name "'+l+'"'),!1}var p=c.display;if(null!==p&&0===p.length)return this.setError("invalid display-name",'database field missing display-name "'+l+'"'),!1;a[l]?a[l]+=1:a[l]=1,"true"===c.sort&&(s+=1,0===c.sort_asc.trim().length&&(n+=1),0===c.sort_desc.trim().length&&(n+=1),""!==c.sort_default.trim()&&(i+=1))}}catch(b){o.e(b)}finally{o.f()}for(var h in a){if(a.hasOwnProperty(h))if(a[h]>1)return this.setError("invalid metadata",'metadata name "'+h+'" is used more than once.'),!1}if(s>0){if(n>0)return this.setError("invalid metadata","sort-by fields cannot be empty"),!1;if(1!==i)return this.setError("invalid metadata","you must specify the default UI sort field"),!1}return!0}},{key:"validFQDN",value:function(e){if(e&&e.length>0){for(var t=0;t<e.length;t++){var a=e.charAt(t);if("."!==a&&!(a>="a"&&a<="z"||a>="A"&&a<="Z"||a>="0"&&a<="9"))return!1}return e.indexOf(".")>0&&e.indexOf(".")+1<e.length}return!1}},{key:"handleSave",value:function(){var e=this.state.crawler,t={};e&&e.specificJson&&("string"===typeof e.specificJson||e.specificJson instanceof String)&&(t=JSON.parse(e.specificJson)),e.qaMatchStrength<0||e.qaMatchStrength>1?this.setError("invalid parameters","Q&A threshold must be between 0.0 and 1.0."):0===e.name.length?this.setError("invalid parameters","you must supply a crawler name."):"none"===e.crawlerType?this.setError("invalid parameters","you must select a crawler-type."):t?"file"!==e.crawlerType||t.username&&0!==t.username.length&&t.server&&0!==t.server.length&&this.validFQDN(t.fqdn)&&t.shareName&&0!==t.shareName.length?"web"!==e.crawlerType||t.baseUrlList&&0!==t.baseUrlList.length&&t.baseUrlList&&(t.baseUrlList.startsWith("http://")||t.baseUrlList.startsWith("https://"))?"database"!==e.crawlerType||t.jdbc&&0!==t.jdbc.length&&t.type&&0!==t.type.length&&t.type&&"none"!==t.type&&t.query&&0!==t.query.length&&t.pk&&0!==t.pk.length&&t.template&&0!==t.template.length&&t.text&&0!==t.text.length?"restfull"!==e.crawlerType||t.url&&0!==t.url.length&&t.pk&&0!==t.pk.length&&(!e.customRender||t.template&&0!==t.template.length&&t.text&&0!==t.text.length)&&(e.customRender||t.content_url&&0!==t.content_url.length)?"database"===e.crawlerType&&t.metadata_list&&t.metadata_list.length>0&&!this.isValidMetadata(t.metadata_list,!0)||("office365"!==e.crawlerType||t.tenantId&&0!==t.tenantId.length&&t.clientId&&0!==t.clientId.length&&t.redirectUrl&&0!==t.redirectUrl.length&&t.clientSecret&&0!==t.clientSecret.length?"dropbox"!==e.crawlerType||t.clientToken&&0!==t.clientToken.length?"gdrive"!==e.crawlerType||t.gdrive_clientId&&0!==t.gdrive_clientId.length&&t.gdrive_projectId&&0!==t.gdrive_projectId.length&&t.gdrive_clientSecret&&0!==t.gdrive_clientSecret.length&&t.gdrive_clientName&&0!==t.gdrive_clientName.length&&t.gdrive_clientPort&&0!==t.gdrive_clientPort.length?"nfs"!==e.crawlerType||0!==t.nfs_local_folder.length&&0!==t.nfs_userList.length?"web"!==e.crawlerType&&"file"!==e.crawlerType&&"database"!==e.crawlerType&&"office365"!==e.crawlerType&&"dropbox"!==e.crawlerType&&"nfs"!==e.crawlerType&&"wordpress"!==e.crawlerType&&"gdrive"!==e.crawlerType&&"restfull"!==e.crawlerType?this.setError("invalid parameters","you must select a crawler-type first."):isNaN(e.filesPerSecond)?this.setError("invalid parameters","files-per-second must be a number"):this.isValidMetadata(t.metadata_list,!1)&&this.state.onSave&&(this.state.onSave(e),this.setState({selectedTab:"general"})):this.setError("invalid parameters","nfs: you must supply values for all fields, and select one user as a minimum."):this.setError("invalid parameters","you must supply values for all fields, and select one user as a minimum."):this.setError("invalid parameters","you must supply a client-token, and select a user as a minimum."):this.setError("invalid parameters","you must supply tenant-id, client-id, client-secret, and redirect-url as a minimum.")):!e.customRender||t.template&&0!==t.template.length&&t.text&&0!==t.text.length?this.setError("invalid parameters","you must supply a primary-key, a url, and a content-url as a minimum."):this.setError("invalid parameters","you must supply a primary-key, a url, a text-template, and an HTML-template as a minimum."):this.setError("invalid parameters","you must supply a jdbc connection string, database-type, a query, a primary-key, a text-template, and a SQL-template as a minimum."):this.setError("invalid parameters","you must supply a base url of type http:// or https://"):this.setError("invalid parameters","you must supply crawler-type, name, username, server and share path as a minimum."):this.setError("invalid parameters","crawler specific data not set")}},{key:"updateSchedule",value:function(e){if(null!==e){var t=this.state.crawler;t.schedule=e,this.setState({crawler:t}),this.state.onUpdate&&this.state.onUpdate(t)}}},{key:"update_general_data",value:function(e){e.specificJson=this.state.crawler.specificJson,e.schedule=this.state.crawler.schedule,this.setState({crawler:e}),this.state.onUpdate&&this.state.onUpdate(e)}},{key:"update_specific_json",value:function(e){var t=this.state.crawler;t.specificJson=JSON.stringify(e),this.setState({crawler:t}),this.state.onUpdate&&this.state.onUpdate(t)}},{key:"render",value:function(){var e=this;if(this.state.has_error)return Object(ra.jsx)("h1",{children:"crawler-dialog.js: Something went wrong."});var t=this.props.theme,a=this.state.selectedTab,s=this.state.crawler,n=s.crawlerType,i=JSON.parse(s.specificJson?s.specificJson:"{}"),r="light"===t?bn.tab:bn.tab_dark;return Object(ra.jsx)("div",{children:Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.open,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"lg",onClose:this.handleCancel.bind(this),children:[Object(ra.jsx)(ha.a,{id:"alert-dialog-title",className:this.props.theme,children:this.state.title}),Object(ra.jsx)("div",{className:this.props.theme,children:Object(ra.jsxs)("div",{children:[Object(ra.jsxs)(us.a,{value:this.state.selectedTab,onChange:function(t,a){return e.setState({selectedTab:a})},children:[Object(ra.jsx)(ps.a,{label:"general",value:"general",style:r}),"file"===n&&Object(ra.jsx)(ps.a,{label:"file-crawler",value:"file crawler",style:r}),"web"===n&&Object(ra.jsx)(ps.a,{label:"web-crawler",value:"web crawler",style:r}),"database"===n&&Object(ra.jsx)(ps.a,{label:"database-crawler",value:"database crawler",style:r}),"restfull"===n&&Object(ra.jsx)(ps.a,{label:"restful-crawler",value:"RESTful crawler",style:r}),"wordpress"!==n&&Object(ra.jsx)(ps.a,{label:"metadata",value:"metadata",style:r}),"office365"===n&&Object(ra.jsx)(ps.a,{label:"office 365-crawler",value:"office365 crawler",style:r}),"dropbox"===n&&Object(ra.jsx)(ps.a,{label:"dropbox-crawler",value:"dropbox crawler",style:r}),"wordpress"===n&&Object(ra.jsx)(ps.a,{label:"wordpress-crawler",value:"wordpress crawler",style:r}),"gdrive"===n&&Object(ra.jsx)(ps.a,{label:"gdrive-crawler",value:"google drive crawler",style:r}),"nfs"===n&&Object(ra.jsx)(ps.a,{label:"nfs-crawler",value:"nfs crawler",style:r}),"wordpress"!==n&&Object(ra.jsx)(ps.a,{label:"schedule",value:"schedule",style:r})]}),Object(ra.jsxs)("div",{style:bn.formContent,children:["general"===a&&Object(ra.jsx)(Us,{theme:t,sourceId:s.sourceId,nodeId:s.nodeId,organisation_id:s.organisationId,kb_id:s.kbId,name:s.name,filesPerSecond:s.filesPerSecond,crawlerType:n,deleteFiles:s.deleteFiles,allowAnonymous:s.allowAnonymous,enablePreview:s.enablePreview,processingLevel:s.processingLevel,maxItems:s.maxItems,maxBotItems:s.maxBotItems,schedule:s.schedule,customRender:s.customRender,edgeDeviceId:s.edgeDeviceId,qaMatchStrength:s.qaMatchStrength,numResults:s.numResults,numFragments:s.numFragments,edge_device_list:this.props.edge_device_list,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_general_data(t)}}),"file crawler"===a&&Object(ra.jsx)(Fs,{theme:t,username:i.username,password:i.password,server:i.server,domain:i.domain,fqdn:i.fqdn,shareName:i.shareName,sharePath:i.sharePath,specific_json:i,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_specific_json(t)}}),"web crawler"===a&&Object(ra.jsx)(qs,{theme:t,baseUrlList:i.baseUrlList,webCss:i.webCss,webCssIgnore:i.webCssIgnore,validExtensions:i.validExtensions,validExtensionsIgnore:i.validExtensionsIgnore,articleIncludeWordsCsv:i.articleIncludeWordsCsv,articleExcludeWordsCsv:i.articleExcludeWordsCsv,specific_json:i,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_specific_json(t)}}),"database crawler"===a&&Object(ra.jsx)(Ks,{theme:t,username:i.username,password:i.password,jdbc:i.jdbc,type:i.type,query:i.query,pk:i.pk,metadata_list:i.metadata_list,template:i.template,text:i.text,content_url:i.content_url,specific_json:i,customRender:s.customRender,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_specific_json(t)}}),"RESTful crawler"===a&&Object(ra.jsx)(dn,{theme:t,pk:i.pk,url:i.url,template:i.template,text:i.text,content_url:i.content_url,specific_json:i,customRender:s.customRender,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_specific_json(t)}}),"metadata"===a&&("database"===n||"restfull"===n)&&Object(ra.jsx)(Gs,{theme:t,specificJson:i,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_specific_json(t)}}),"metadata"===a&&"restfull"!==n&&"database"!==n&&"wordpress"!==n&&Object(ra.jsx)(hn,{theme:t,specific_json:i,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_specific_json(t)}}),"office365 crawler"===a&&Object(ra.jsx)(Zs,{theme:t,tenantId:i.tenantId,clientId:i.clientId,clientSecret:i.clientSecret,redirectUrl:i.redirectUrl,crawlOneDrive:i.crawlOneDrive,crawlAllOfOneDrive:i.crawlAllOfOneDrive,oneDriveUsersToCrawl:i.oneDriveUsersToCrawl,crawlSharePoint:i.crawlSharePoint,crawlRootSite:i.crawlRootSite,sharePointSitesToCrawl:i.sharePointSitesToCrawl,crawlExchange:i.crawlExchange,crawlAllOfExchange:i.crawlAllOfExchange,exchangeUsersToCrawl:i.exchangeUsersToCrawl,specific_json:i,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_specific_json(t)}}),"dropbox crawler"===a&&Object(ra.jsx)($s,{theme:t,clientToken:i.clientToken,folderList:i.folderList,specific_json:i,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_specific_json(t)}}),"google drive crawler"===a&&Object(ra.jsx)(rn,{theme:t,gdrive_projectId:i.gdrive_projectId,gdrive_clientId:i.gdrive_clientId,gdrive_clientSecret:i.gdrive_clientSecret,gdrive_clientName:i.gdrive_clientName,gdrive_clientPort:i.gdrive_clientPort,specific_json:i,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_specific_json(t)}}),"nfs crawler"===a&&Object(ra.jsx)(cn,{theme:t,nfs_local_folder:i.nfs_local_folder,nfs_userList:i.nfs_userList,specific_json:i,availableUserList:this.props.user_list,onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_specific_json(t)}}),"wordpress crawler"===a&&Object(ra.jsx)(sn,{theme:t,source_id:s.sourceId,organisation_id:this.props.organisation_id,kb_id:this.props.kb_id,specific_json:i,wpUploadArchive:function(t){return e.props.wpUploadArchive(t)},onError:function(t,a){return e.setError(t,a)},onSave:function(t){return e.update_specific_json(t)}}),"schedule"===a&&"wordpress"!==n&&Object(ra.jsx)("div",{style:bn.timeTabContent,children:Object(ra.jsx)(xs,{time:s.schedule,onSave:function(t){return e.updateSchedule(t)}})})]})]})}),Object(ra.jsxs)(ua.a,{className:this.props.theme,children:[Object(ra.jsx)(ct.a,{color:"primary",onClick:function(){return e.handleCancel()},children:"cancel"}),Object(ra.jsx)(ct.a,{color:"secondary",onClick:function(){return e.handleSave()},children:"save"})]})]})})}}]),a}(s.Component),gn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;Object(g.a)(this,a),s=t.call(this,e);var n=e.crawler?JSON.stringify(e.crawler):"";return"{}"===n&&(n=""),s.state={has_error:!1,open:e.open,data:n,onSave:e.onSave,onError:e.onError},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){this.state.onSave&&this.state.onSave(this.state.data)}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.crawler?JSON.stringify(e.crawler):"";"{}"===t&&(t=""),this.setState({open:e.open,data:t,onSave:e.onSave,onError:e.onError})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"mind-edit.js: Something went wrong."}):Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0,disableEscapeKeyDown:!0,open:this.state.open,fullWidth:!0,maxWidth:"lg",onClose:function(){return e.handleCancel()},children:[Object(ra.jsx)(ha.a,{id:"alert-dialog-title",className:this.props.theme,children:this.props.export_upload?"Import Crawler":"Export Crawler"}),Object(ra.jsx)(pa.a,{className:this.props.theme,children:Object(ra.jsxs)(mt.a,{container:!0,spacing:1,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsx)("div",{children:"data"})}),Object(ra.jsx)(mt.a,{item:!0,xs:9,children:Object(ra.jsx)(lt.a,{autoFocus:!0,onChange:function(t){return e.setState({data:t.target.value})},placeholder:"crawler data",variant:"filled",spellCheck:!1,fullWidth:!0,multiline:!0,rows:10,value:this.state.data})}),Object(ra.jsx)(mt.a,{item:!0,xs:1})]})}),Object(ra.jsxs)(ua.a,{className:this.props.theme,children:[this.props.export_upload&&Object(ra.jsxs)("div",{children:[Object(ra.jsx)(ct.a,{color:"primary",onClick:function(){return e.handleCancel()},children:"Cancel"}),Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",onClick:function(){return e.handleSave()},children:"Import"})]}),!this.props.export_upload&&Object(ra.jsx)("div",{children:Object(ra.jsx)(ct.a,{color:"primary",onClick:function(){return e.handleCancel()},children:"Close"})})]})]})}}]),a}(s.Component),fn={id:"",sourceId:"0",crawlerType:"",name:"",deleteFiles:!0,allowAnonymous:!0,enablePreview:!0,schedule:"",filesPerSecond:"0",specificJson:"{}",processingLevel:"SEARCH",nodeId:"0",maxItems:"0",maxBotItems:"0",customRender:!1},jn={pageWidth:{width:"900px"},tab:{backgroundColor:"#f8f8f8",color:"#000"},tableLight:{},tableDark:{background:"#d0d0d0"},addImage:{width:"25px",cursor:"pointer",color:"green"},knowledgeSelect:{padding:"5px",marginBottom:"40px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff"},label:{marginTop:"20px",color:"#555"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},linkButtonDisabled:{float:"left",padding:"10px",color:"#aaa",cursor:"not-allowed"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},download:{cursor:"pointer",fontSize:"0.9em",fontWeight:"600",height:"24px"},downloadType:{fontSize:"0.9em",height:"24px"},downloadImage:{width:"24px"},labelHeader:{marginTop:"20px",marginBottom:"5px",fontSize:"0.8em"}},xn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={page_size:5,page:0,open:!1,export_open:!1,export_upload:!1,title:"",selected_crawler:{},crawler_ask:null,message_callback:null,message:"",message_title:""},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"getCrawlers",value:function(){var e=[],t=this.state.page*this.state.page_size,a=t+this.state.page_size;for(var s in this.props.crawler_list)s>=t&&s<a&&e.push(this.props.crawler_list[s]);return e}},{key:"addNewCrawler",value:function(){this.setState({open:!0,selected_crawler:fn,title:"Create New Crawler"})}},{key:"onUpdate",value:function(e){this.setState({selected_crawler:e})}},{key:"editCrawler",value:function(e){e&&this.setState({open:!0,selected_crawler:Object(d.a)(Object(d.a)({},fn),e),title:"Edit Crawler"})}},{key:"deleteCrawlerAsk",value:function(e){var t=this;this.setState({crawler_ask:e}),this.props.openDialog("are you sure you want to remove the crawler named <b>"+e.name+"</b>?","Remove Crawler",(function(e){t.deleteCrawler(e)}))}},{key:"deleteCrawler",value:function(e){e&&this.state.crawler_ask&&this.state.crawler_ask.sourceId&&this.props.deleteCrawler(this.state.crawler_ask.sourceId),this.props.closeDialog&&this.props.closeDialog()}},{key:"saveCrawler",value:function(e){e&&(e.organisationId=this.props.selected_organisation_id,e.kbId=this.props.selected_knowledgebase_id,this.props.updateCrawler(e)),this.setState({open:!1})}},{key:"deleteDocuments",value:function(e){var t=this;this.setState({message_callback:function(a){return t.confirmDocumentsDelete(a,e)},message_title:'remove all documents for "'+e.name+'"?',message:"Are you sure you want to remove ALL DOCUMENTS for <b>"+e.name+"</b>?"})}},{key:"confirmDocumentsDelete",value:function(e,t){this.setState({message:"",message_title:""}),e&&t&&this.props.deleteCrawlerDocuments(t.sourceId)}},{key:"canDeleteDocuments",value:function(e){return"wordpress"!==e.crawlerType}},{key:"exportCrawler",value:function(e){this.setState({selected_crawler:e,export_upload:!1,export_open:!0})}},{key:"importCrawler",value:function(){this.setState({selected_crawler:{},export_upload:!0,export_open:!0})}},{key:"saveExport",value:function(e){if(e&&this.state.export_upload){var t=JSON.parse(e);delete t.sourceId,this.saveCrawler(t)}this.setState({export_open:!1,selected_crawler:{}})}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ra.jsxs)("div",{children:[Object(ra.jsx)(mn,{open:this.state.open,title:this.state.title,theme:t,organisation_id:this.props.selected_organisation_id,kb_id:this.props.selected_knowledgebase_id,user_list:this.props.user_list,onSave:function(t){return e.saveCrawler(t)},onUpdate:function(t){return e.onUpdate(t)},onError:function(t,a){return e.props.setError(t,a)},error_title:this.props.error_title,error_msg:this.props.error,wpUploadArchive:function(t){return e.props.wpUploadArchive(t)},crawler:this.state.selected_crawler,edge_device_list:this.props.edge_device_list}),Object(ra.jsx)(gn,{open:this.state.export_open,theme:t,upload:this.state.export_upload,crawler:this.state.selected_crawler,export_upload:this.state.export_upload,onSave:function(t){return e.saveExport(t)},onError:function(t,a){return e.props.setError(t,a)}}),Object(ra.jsx)(Wa,{callback:function(t){return e.state.message_callback(t)},open:this.state.message.length>0,theme:this.props.theme,message:this.state.message,title:this.state.message_title}),this.props.selected_knowledgebase_id.length>0&&Object(ra.jsxs)(Ma.a,{style:jn.pageWidth,children:[Object(ra.jsxs)(Ja.a,{children:[Object(ra.jsx)(Qa.a,{children:Object(ra.jsxs)(Za.a,{className:"table-header",children:[Object(ra.jsx)(Ga.a,{className:"table-header",children:"name"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"type"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"status"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"crawled / indexed"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"actions"})]})}),Object(ra.jsxs)(Va.a,{style:"light"===t?jn.tableLight:jn.tableDark,children:[this.getCrawlers().map((function(t){return Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:jn.label,children:t.name})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:jn.label,children:t.crawlerType})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:jn.label,children:t.isCrawling?"busy":"idle"})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:jn.label,children:t.numCrawledDocuments+" / "+t.numIndexedDocuments})}),Object(ra.jsxs)(Ga.a,{children:[Object(ra.jsx)("div",{style:jn.linkButton,onClick:function(){return e.editCrawler(t)},children:Object(ra.jsx)("img",{src:"../images/edit.svg",style:jn.downloadImage,title:"edit crawler",alt:"edit"})}),Object(ra.jsx)("div",{style:jn.linkButton,onClick:function(){return e.deleteDocuments(t)},children:Object(ra.jsx)("img",{src:"../images/delete-files.svg",style:jn.downloadImage,title:"remove a crawler's documents",alt:"remove documents"})}),Object(ra.jsx)("div",{style:jn.linkButton,onClick:function(){return e.deleteCrawlerAsk(t)},children:Object(ra.jsx)("img",{src:"../images/delete.svg",style:jn.downloadImage,title:"remove crawler",alt:"remove"})}),Object(ra.jsx)("div",{style:jn.linkButton,onClick:function(){return e.exportCrawler(t)},children:Object(ra.jsx)("img",{src:"../images/download.svg",style:jn.downloadImage,title:"get crawler JSON for export",alt:"export"})})]})]},t.sourceId)})),Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{}),Object(ra.jsxs)(Ga.a,{children:[this.props.selected_organisation_id.length>0&&Object(ra.jsx)("div",{style:jn.imageButton,onClick:function(){return e.addNewCrawler()},children:Object(ra.jsx)("img",{style:jn.addImage,src:"../images/add.svg",title:"add new crawler",alt:"add new crawler"})}),this.props.selected_organisation_id.length>0&&Object(ra.jsx)("div",{style:jn.imageButton,onClick:function(){return e.importCrawler()},children:Object(ra.jsx)("img",{style:jn.addImage,src:"../images/upload.svg",title:"upload crawler JSON",alt:"import"})})]})]})]})]}),Object(ra.jsx)(Xa.a,{rowsPerPageOptions:[5,10,25],style:"light"===t?jn.tableLight:jn.tableDark,component:"div",count:this.props.crawler_list.length,rowsPerPage:this.state.page_size,page:this.state.page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.changePage(a)},onChangeRowsPerPage:function(t){return e.changePageSize(t.target.value)}})]})]})}}]),a}(s.Component),vn=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,selected_organisation_id:e.appReducer.selected_organisation_id,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id,user_list:e.appReducer.user_list,user_filter:e.appReducer.user_filter,crawler_list:e.appReducer.crawler_list,edge_device_list:e.appReducer.edge_device_list}}),(function(e){return Object(u.b)(ia,e)}))(xn),yn={tableStyle:{width:"900px"},tableLight:{},tableDark:{background:"#d0d0d0"},gridWidth:{width:"900px"},text:{border:"1px solid #808080",borderRadius:"4px",padding:"4px"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",width:"900px",color:"#fff",minWidth:"100px"},tableColumnStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"100px"},knowledgeSelect:{padding:"5px",marginBottom:"40px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},urlLabel:{padding:"10px",color:"#555",maxWidth:"200px"},label:{padding:"10px",color:"#555"},statusImage:{width:"16px"},hr:{border:"0.1px solid #f0f0f0",width:"100%"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},addImage:{width:"25px"},linkButton:{float:"left",padding:"10px",cursor:"pointer"},linkButtonDisabled:{float:"left",padding:"10px",cursor:"not-allowed"},dlImageSize:{width:"24px",marginRight:"10px"},search:{marginTop:"2px",marginLeft:"15px",width:"18px",color:"#000"},floatLeftLabel:{float:"left",marginRight:"6px",marginTop:"4px",fontSize:"0.9em",fontWeight:"500"},floatLeft:{float:"left"},searchFloatLeft:{float:"left"},manualUploadSection:{marginTop:"50px"},findBox:{padding:"10px",marginBottom:"5px",float:"right"}},_n=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={document:null,crawler_map:{}},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"componentDidMount",value:function(){var e,t={},a=Object(m.a)(this.props.crawler_list);try{for(a.s();!(e=a.n()).done;){var s=e.value;t[s.sourceId]=s.crawlerType}}catch(n){a.e(n)}finally{a.f()}this.setState({crawler_map:t})}},{key:"deleteDocumentAsk",value:function(e){var t=this;e&&(this.props.openDialog('are you sure you want to remove "'+e.url+'" ?',"Remove Document",(function(e){t.deleteDocument(e)})),this.setState({document:e}))}},{key:"deleteDocument",value:function(e){e&&k.defined(this.state.document)&&this.props.deleteDocument(this.state.document.url,this.state.document.sourceId),this.props.closeDialog&&this.props.closeDialog()}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getDocuments()}},{key:"documentUploaded",value:function(){var e=this;this.setState({message_title:"done",message:"document uploaded",message_callback:function(){e.setState({message:""})}})}},{key:"getDocuments",value:function(){return this.props.document_list}},{key:"getActive",value:function(e,t){if("crawled"===t){if(e.crawled>0)return 1}else if("converted"===t){if(e.converted>0)return 1;if(e.converted<0)return 2}else if("parsed"===t){if(e.converted>0&&e.converted<=e.parsed)return 1;if(e.parsed<0)return 2}else if("indexed"===t){if(e.converted>0&&e.parsed>0&&e.parsed<=e.indexed)return 1;if(e.indexed<0)return 2}else if("previewed"===t){if(e.previewed>0)return 1;if(e.previewed<0)return 2}return 0}},{key:"getStatus",value:function(e,t){var a=this.getActive(e,t);return 1===a?"../images/dot-green.svg":0===a?"../images/dot-orange.svg":"../images/dot-grey.svg"}},{key:"getStatusText",value:function(e,t,a){var s=this.getActive(e,t);return 1===s?"document "+t:0===s?"document not "+t:a+" disabled for this document-source"}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"canDeleteDocument",value:function(e){return"wordpress"!==this.state.crawler_map[e.sourceId]}},{key:"render",value:function(){var e=this,t=this.props.theme,s=zi.hasRole(this.props.user,["admin"]);return Object(ra.jsxs)(mt.a,{container:!0,spacing:1,style:yn.gridWidth,children:[this.isVisible()&&Object(ra.jsx)(mt.a,{item:!0,xs:12,children:Object(ra.jsxs)("div",{style:yn.findBox,children:[Object(ra.jsx)("div",{style:yn.floatLeftLabel,children:"filter"}),Object(ra.jsx)("div",{style:yn.searchFloatLeft,children:Object(ra.jsx)("input",{type:"text",value:this.props.document_filter,autoFocus:!0,style:yn.text,className:t,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setDocumentFilter(t.target.value)}})}),Object(ra.jsx)("div",{style:yn.floatLeft,children:Object(ra.jsx)("img",{style:yn.search,onClick:function(){return e.props.getDocuments()},src:"../images/dark-magnifying-glass.svg",title:"filter",alt:"filter"})})]})}),this.isVisible()&&Object(ra.jsxs)(Ma.a,{style:yn.tableStyle,children:[Object(ra.jsxs)(Ja.a,{children:[Object(ra.jsx)(Qa.a,{children:Object(ra.jsxs)(Za.a,{className:"table-header",children:[Object(ra.jsx)(Ga.a,{className:"table-header",children:"url"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"source"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"last modified"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"status"}),s&&Object(ra.jsx)(Ga.a,{className:"table-header",children:"actions"})]})}),Object(ra.jsx)(Va.a,{style:"light"===t?yn.tableLight:yn.tableDark,children:this.getDocuments().map((function(t){return Object(ra.jsxs)(Za.a,{children:[Object(ra.jsxs)(Ga.a,{children:[a.isWeb(t.url)&&Object(ra.jsx)("div",{style:yn.urlLabel,children:Object(ra.jsx)("a",{href:t.url,title:t.url,rel:"noopener noreferrer",target:"_blank",children:a.adjustUrl(t.url)})}),!a.isWeb(t.url)&&Object(ra.jsx)("div",{style:yn.label,children:a.adjustUrl(t.url)})]}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:yn.label,children:t.origin})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:yn.label,children:k.unixTimeConvert(t.lastModified)})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsxs)("div",{style:yn.label,children:[Object(ra.jsx)("img",{src:e.getStatus(t,"crawled"),style:yn.statusImage,alt:"crawler",title:e.getStatusText(t,"crawled","crawling")}),Object(ra.jsx)("img",{src:e.getStatus(t,"converted"),style:yn.statusImage,alt:"converted",title:e.getStatusText(t,"converted","converting")}),Object(ra.jsx)("img",{src:e.getStatus(t,"parsed"),style:yn.statusImage,alt:"parsed",title:e.getStatusText(t,"parsed","parsing")}),Object(ra.jsx)("img",{src:e.getStatus(t,"indexed"),style:yn.statusImage,alt:"indexed",title:e.getStatusText(t,"indexed","indexing")}),Object(ra.jsx)("img",{src:e.getStatus(t,"previewed"),style:yn.statusImage,alt:"previewed",title:e.getStatusText(t,"previewed","preview generation")})]})}),s&&Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:yn.linkButton,onClick:function(){return e.deleteDocumentAsk(t)},children:Object(ra.jsx)("img",{src:"../images/delete.svg",style:yn.dlImageSize,title:"remove document",alt:"remove"})})})]},t.url)}))})]}),Object(ra.jsx)(Xa.a,{style:"light"===t?yn.tableLight:yn.tableDark,rowsPerPageOptions:[5,10,25],component:"div",count:this.props.num_documents,rowsPerPage:this.props.document_page_size,page:this.props.document_page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.props.setDocumentPage(a)},onChangeRowsPerPage:function(t){return e.props.setDocumentPageSize(t.target.value)}})]}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{})]})}}],[{key:"isWeb",value:function(e){return e.toLowerCase().startsWith("http://")||e.toLowerCase().startsWith("https://")}},{key:"adjustUrl",value:function(e){if(e&&e.length>50){var t=Math.floor(25);return e.substring(0,t)+" ... "+e.substring(e.length-t)}return e}}]),a}(n.a.Component),On=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,user:e.appReducer.user,document_list:e.appReducer.document_list,document_filter:e.appReducer.document_filter,document_page:e.appReducer.document_page,document_page_size:e.appReducer.document_page_size,document_nav_list:e.appReducer.document_nav_list,num_documents:e.appReducer.num_documents,crawler_list:e.appReducer.crawler_list,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(ia,e)}))(_n),wn=[".jpg",".jpeg",".png",".gif",".svg"],kn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;Object(g.a)(this,a),s=t.call(this,e);var n=e.mindItem&&e.mindItem.expression?e.mindItem.expression:"",i="",r="";return n.indexOf("||")>=0?(i=n.split("||")[0],r=n.split("||")[1]):i=n,s.state={has_error:!1,open:e.open,mindItem:e.mindItem,onSave:e.onSave,onError:e.onError,question1:i,question2:r,answer:a.getAnswerText(e.mindItem),links:a.getLinks(e.mindItem)},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){if(this.state.onSave){var e=this.state.mindItem;e.expression=this.state.question1,this.state.question2.trim().length>0&&(e.expression=e.expression+" || "+this.state.question2),e.actionList=a.createActions(this.state.answer,this.state.links),this.state.onSave(e)}}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.mindItem&&e.mindItem.expression?e.mindItem.expression:"",s="",n="";t.indexOf("||")>=0?(s=t.split("||")[0],n=t.split("||")[1]):s=t,this.setState({open:e.open,mindItem:e.mindItem,onSave:e.onSave,onError:e.onError,question1:s,question2:n,answer:a.getAnswerText(e.mindItem),links:a.getLinks(e.mindItem)})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"mind-edit.js: Something went wrong."}):Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0,disableEscapeKeyDown:!0,open:this.state.open,fullWidth:!0,maxWidth:"lg",onClose:function(){return e.handleCancel()},children:[Object(ra.jsx)(ha.a,{id:"alert-dialog-title",className:this.props.theme,children:"Edit Mind Item"}),Object(ra.jsx)(pa.a,{className:this.props.theme,children:Object(ra.jsxs)(mt.a,{container:!0,spacing:1,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsx)("div",{children:"question"})}),Object(ra.jsx)(mt.a,{item:!0,xs:9,children:Object(ra.jsx)(lt.a,{autoFocus:!0,onChange:function(t){return e.setState({question1:t.target.value})},placeholder:"question",variant:"outlined",fullWidth:!0,value:this.state.question1})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsx)("div",{children:"alternative"})}),Object(ra.jsx)(mt.a,{item:!0,xs:9,children:Object(ra.jsx)(lt.a,{onChange:function(t){return e.setState({question2:t.target.value})},placeholder:"alternative question (optional)",variant:"outlined",fullWidth:!0,value:this.state.question2})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsx)("div",{children:"answer text"})}),Object(ra.jsx)(mt.a,{item:!0,xs:9,children:Object(ra.jsx)(lt.a,{onChange:function(t){return e.setState({answer:t.target.value})},placeholder:"answer, or function (e.g. 'exec show_help person1 person2 date1')",multiline:!0,rows:5,variant:"outlined",fullWidth:!0,value:this.state.answer})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsx)("div",{children:"links (csv)"})}),Object(ra.jsx)(mt.a,{item:!0,xs:9,children:Object(ra.jsx)(lt.a,{onChange:function(t){return e.setState({links:t.target.value})},placeholder:"links",multiline:!0,rows:5,variant:"outlined",fullWidth:!0,value:this.state.links})}),Object(ra.jsx)(mt.a,{item:!0,xs:1})]})}),Object(ra.jsxs)(ua.a,{className:this.props.theme,children:[Object(ra.jsx)(ct.a,{color:"primary",onClick:function(){return e.handleCancel()},children:"Cancel"}),Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",onClick:function(){return e.handleSave()},children:"Save"})]})]})}}],[{key:"createActions",value:function(e,t){var a=[];if(e.length>0)if(0===e.trim().indexOf("exec ")){var s,n=e.split("\n"),i=Object(m.a)(n);try{for(i.s();!(s=i.n()).done;){var r=s.value.trim().split(" ");if(r.length>1&&"exec"===r[0]){for(var o=[],c=2;c<r.length;c+=1)r[c].trim().length>0&&o.push(r[c].trim());a.push({action:r[1],parameters:o})}}}catch(v){i.e(v)}finally{i.f()}}else a.push({action:"browser.write",parameters:[e.replace(/\n/g,"<br />")]});var l,d=t.split(","),u=Object(m.a)(d);try{for(u.s();!(l=u.n()).done;){var p=l.value,h=p.trim();if(h.length>0){var b,g=p.toLowerCase(),f=!1,j=Object(m.a)(wn);try{for(j.s();!(b=j.n()).done;){var x=b.value;g.indexOf(x)>0&&(f=!0)}}catch(v){j.e(v)}finally{j.f()}f?a.push({action:"browser.image",parameters:[h]}):a.push({action:"browser.url",parameters:[h]})}}}catch(v){u.e(v)}finally{u.f()}return a}},{key:"getAnswerText",value:function(e){var t="";if(e&&e.actionList){var a,s=Object(m.a)(e.actionList);try{for(s.s();!(a=s.n()).done;){var n=a.value;if(n)if("browser.write"===n.action&&n.parameters){var i,r=Object(m.a)(n.parameters);try{for(r.s();!(i=r.n()).done;){t+=i.value.replace(/<br \/>/g,"\n")}}catch(d){r.e(d)}finally{r.f()}}else if("browser.image"!==n.action&&"browser.url"!==n.action&&"browser.say"!==n.action){t=t+"exec "+n.action;var o,c=Object(m.a)(n.parameters);try{for(c.s();!(o=c.n()).done;){var l=o.value;t+=" ",t+=l}}catch(d){c.e(d)}finally{c.f()}t+="\n"}}}catch(d){s.e(d)}finally{s.f()}}return t}},{key:"getLinks",value:function(e){var t="";if(e&&e.actionList){var a,s=Object(m.a)(e.actionList);try{for(s.s();!(a=s.n()).done;){var n=a.value;if(n&&"browser.image"===n.action&&n.parameters){t.length>0&&(t+=",\n");var i,r=Object(m.a)(n.parameters);try{for(r.s();!(i=r.n()).done;){t+=i.value.replace(/<br \/>/g,"\n")}}catch(l){r.e(l)}finally{r.f()}}if(n&&"browser.url"===n.action&&n.parameters){t.length>0&&(t+=",\n");var o,c=Object(m.a)(n.parameters);try{for(c.s();!(o=c.n()).done;){t+=o.value.replace(/<br \/>/g,"\n")}}catch(l){c.e(l)}finally{c.f()}}}}catch(l){s.e(l)}finally{s.f()}}return t}}]),a}(s.Component),Sn={uploadContainer:{margin:"10px",width:"450px",minWidth:"450px",height:"20px",borderRadius:"15px",padding:"12px",marginLeft:"10px",fontWeight:700,fontSize:"10pt",cursor:"pointer"},formWidth:{},uploadControl:{marginTop:"5px",float:"left"},uploadButton:{float:"left",height:"30px"},busyImage:{width:"28px",height:"28px",marginTop:"-10px",float:"left"},uploadInput:{float:"left"},uploadWheel:{marginLeft:"5px",marginTop:"14px",height:"28px",float:"left"}},Cn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={filename:"",file_type:"",filter:"",binary_data:null},s}return Object(f.a)(a,[{key:"_handleImageChange",value:function(e){e.preventDefault();var t=this,a=new FileReader,s=e.target.files[0],n=s.name,i=s.type;a.onloadend=function(){t.setState({filename:n,file_type:i,binary_data:a.result})},a.readAsDataURL(s)}},{key:"upload",value:function(){if(this.state.binary_data){var e={base64Text:this.state.binary_data,fileType:this.state.file_type,kbId:this.props.selected_knowledgebase_id,organisationId:this.props.selected_organisation_id};this.props.uploadProgram(e)}}},{key:"render",value:function(){var e=this;return Object(ra.jsx)("div",{children:Object(ra.jsx)("form",{onSubmit:function(t){return e._handleSubmit(t)},style:Sn.uploadContainer,children:Object(ra.jsxs)("div",{style:Sn.formWidth,children:[Object(ra.jsx)("input",{style:Sn.uploadControl,type:"file",onChange:function(t){return e._handleImageChange(t)}}),Object(ra.jsx)("div",{style:Sn.uploadButton,children:Object(ra.jsxs)("div",{style:Sn.uploadInput,children:[Object(ra.jsx)(ct.a,{variant:"contained",color:"primary",style:Sn.uploadButton,disabled:null===this.state.binary_data||this.props.uploading,onClick:this.upload.bind(this),children:"upload"}),this.props.uploading&&Object(ra.jsx)("div",{style:Sn.uploadWheel,children:Object(ra.jsx)("img",{src:"../images/busy2.gif",alt:"busy",style:Sn.busyImage})})]})})]})})})}}]),a}(s.Component),In=Object(o.b)((function(e){return{uploading:e.appReducer.uploading,selected_organisation_id:e.appReducer.selected_organisation_id,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(ia,e)}))(Cn),Rn={tableStyle:{minWidth:"900px",width:"900px"},tableLight:{},text:{border:"1px solid #808080",borderRadius:"4px",padding:"4px",width:"280px"},tableDark:{background:"#d0d0d0"},smallTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"20px"},actionTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"100px"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"400px",width:"600px"},searchTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"200px",width:"340px"},knowledgeSelect:{padding:"5px",marginBottom:"40px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},label:{padding:"10px",color:"#555"},queryMindLabel:{marginTop:"12px",padding:"10px",color:"#555",float:"right"},gridWidth:{width:"900px"},hr:{border:"0.1px solid #f0f0f0",width:"100%"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},addImage:{width:"25px"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},dlImageSize:{width:"24px"},search:{marginTop:"2px",marginLeft:"15px",width:"18px",color:"#000"},floatLeftLabel:{float:"left",marginRight:"6px",marginTop:"4px",fontSize:"0.9em",fontWeight:"500"},searchFloatLeft:{float:"left"},floatLeft:{float:"left"},manualUploadSection:{marginTop:"50px"},findBox:{padding:"10px",marginBottom:"5px",float:"right"},spacer:{marginTop:"20px"},uploader:{marginTop:"-20px",float:"left"},export:{float:"left"}},Dn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={mind_item:null,mind_edit:!1},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"componentDidMount",value:function(){}},{key:"deleteMindItemAsk",value:function(e){var t=this;e&&(this.props.openDialog("are you sure you want to remove id "+e.id+"?<br/><br/>("+e.expression+")","Remove Mind Entry",(function(e){t.deleteMindItem(e)})),this.setState({mind_item:e}))}},{key:"deleteMindItem",value:function(e){e&&k.defined(this.state.mind_item)&&this.props.deleteMindItem(this.state.mind_item.id),this.props.closeDialog&&this.props.closeDialog()}},{key:"deleteAllMindItemsAsk",value:function(){var e=this;this.props.openDialog("are you sure you want to remove all mind-items of this knowledge-base?","Remove All Mind Items",(function(t){e.deleteAllMindItems(t)}))}},{key:"deleteAllMindItems",value:function(e){e&&this.props.deleteAllMindItems(),this.props.closeDialog&&this.props.closeDialog()}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getMindItems()}},{key:"editMindItem",value:function(e){this.setState({mind_edit:!0,mind_item:e})}},{key:"newMindItem",value:function(){this.setState({mind_edit:!0,mind_item:{id:"",preContext:"",postContext:"",expression:"",actionList:[],metadata:""}})}},{key:"mindDump",value:function(){window.open(w.get_mind_dump_url(this.props.selected_organisation_id,this.props.selected_knowledgebase_id),"_blank")}},{key:"save",value:function(e){e?e.expression.length>0&&e.actionList.length>0?(this.props.saveMindItem(e),this.setState({mind_edit:!1})):this.props.setError("Error Saving Mind Entry","mind-item must have an expression and actions"):this.setState({mind_edit:!1})}},{key:"getMindItemList",value:function(){return this.props.mind_item_list?this.props.mind_item_list:[]}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ra.jsxs)("div",{children:[Object(ra.jsx)(kn,{open:this.state.mind_edit,theme:t,mindItem:this.state.mind_item,onSave:function(t){return e.save(t)},onError:function(t){return e.props.setError("Error",t)}}),this.isVisible()&&Object(ra.jsxs)("div",{style:Rn.findBox,children:[Object(ra.jsx)("div",{style:Rn.floatLeftLabel,children:"find items in the mind"}),Object(ra.jsx)("div",{style:Rn.searchFloatLeft,children:Object(ra.jsx)("input",{type:"text",value:this.props.mind_item_filter,autoFocus:!0,style:Rn.text,className:t,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setMindItemFilter(t.target.value)}})}),Object(ra.jsx)("div",{style:Rn.floatLeft,children:Object(ra.jsx)("img",{style:Rn.search,onClick:function(){return e.props.getMindItems()},src:"../images/dark-magnifying-glass.svg",title:"search",alt:"search"})})]}),Object(ra.jsx)("br",{clear:"both"}),this.isVisible()&&Object(ra.jsxs)(Ma.a,{children:[Object(ra.jsxs)(Ja.a,{style:Rn.tableStyle,children:[Object(ra.jsx)(Qa.a,{children:Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{className:"table-header",children:"id"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"expression"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"actions"})]})}),Object(ra.jsxs)(Va.a,{style:"light"===t?Rn.tableLight:Rn.tableDark,children:[this.getMindItemList().map((function(t){return Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:Rn.label,children:t.id})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:Rn.label,title:a.toAnswer(t),children:t.expression})}),Object(ra.jsxs)(Ga.a,{children:[Object(ra.jsx)("div",{style:Rn.linkButton,onClick:function(){return e.editMindItem(t)},children:Object(ra.jsx)("img",{src:"../images/edit.svg",style:Rn.dlImageSize,title:"edit mind-item",alt:"edit"})}),Object(ra.jsx)("div",{style:Rn.linkButton,onClick:function(){return e.deleteMindItemAsk(t)},children:Object(ra.jsx)("img",{src:"../images/delete.svg",style:Rn.dlImageSize,title:"remove mind-item",alt:"remove"})})]})]},t.id)})),Object(ra.jsx)(Za.a,{children:Object(ra.jsxs)(Ga.a,{colSpan:3,children:[this.props.selected_knowledgebase_id.length>0&&Object(ra.jsx)("div",{style:Rn.uploader,children:Object(ra.jsx)(In,{kbId:this.props.selected_knowledgebase_id,organisationId:this.props.selected_organisation_id,onUploadDone:function(){return e.programUploaded()},onError:function(t){return e.props.setError("Error",t)}})}),this.props.selected_knowledgebase_id.length>0&&Object(ra.jsx)("div",{style:Rn.export,children:Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",style:Rn.exportButton,onClick:function(){return e.mindDump()},children:"Export"})}),this.props.selected_knowledgebase_id.length>0&&Object(ra.jsx)("div",{style:Rn.imageButton,onClick:function(){return e.newMindItem()},children:Object(ra.jsx)("img",{style:Rn.addImage,src:"../images/add.svg",title:"new mind item",alt:"new mind item"})}),this.props.selected_knowledgebase_id.length>0&&Object(ra.jsx)("div",{style:Rn.imageButton,onClick:function(){return e.deleteAllMindItemsAsk()},children:Object(ra.jsx)("img",{style:Rn.addImage,src:"../images/delete.svg",title:"remove all mind items of this knowledgebase",alt:"remove all mind items"})})]})})]})]}),Object(ra.jsx)(Xa.a,{style:"light"===t?Rn.tableLight:Rn.tableDark,rowsPerPageOptions:[5,10,25],component:"div",count:this.props.num_mind_items,rowsPerPage:this.props.mind_item_page_size,page:this.props.mind_item_page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.props.setMindItemPage(a)},onChangeRowsPerPage:function(t){return e.props.setMindItemPageSize(t.target.value)}})]})]})}}],[{key:"toAnswer",value:function(e){var t="";if(e&&e.actionList){var a,s=Object(m.a)(e.actionList);try{for(s.s();!(a=s.n()).done;){var n=a.value;if(n&&"browser.write"===n.action&&n.parameters){var i,r=Object(m.a)(n.parameters);try{for(r.s();!(i=r.n()).done;){t+=i.value.replace(/<br \/>/g,"\n")}}catch(o){r.e(o)}finally{r.f()}}}}catch(o){s.e(o)}finally{s.f()}}return t}}]),a}(n.a.Component),Tn=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,mind_item_list:e.appReducer.mind_item_list,mind_item_filter:e.appReducer.mind_item_filter,mind_item_page:e.appReducer.mind_item_page,mind_item_page_size:e.appReducer.mind_item_page_size,num_mind_items:e.appReducer.num_mind_items,bot_query:e.appReducer.bot_query,bot_query_result_list:e.appReducer.bot_query_result_list,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(ia,e)}))(Dn),Nn={searchResult:{marginLeft:"80px"},searchMessage:{},searchFooter:{float:"left"},searchInsideNav:{marginTop:"5px",marginLeft:"2px",marginRight:"10px",float:"left"},insideNavButtonStyle:{width:"16px",float:"left",backgroundColor:"#d0d0d0",marginRight:"3px",padding:"2px",color:"#808080",borderRadius:"2px",cursor:"pointer",webkitUserSelect:"none",mozUserSelect:"none",msUserSelect:"none",userSelect:"none"},insideNavButtonStyleDisabled:{width:"16px",float:"left",backgroundColor:"#d0d0d030",marginRight:"3px",padding:"2px",color:"#80808030",borderRadius:"2px",cursor:"arrow",webkitUserSelect:"none",mozUserSelect:"none",msUserSelect:"none",userSelect:"none"},tinmanContainer:{float:"left",width:"80%"},tinmanLeft:{float:"left"},tinmanScore:{fontSize:"0.8em"},tinmanText:{fontSize:"0.9em"},tinmanImageSize:{width:"50px",height:"50px"},imageBox:{float:"left",marginTop:"20px"},imageHolder:{float:"left",marginRight:"5px"},imageSize:{maxWidth:"150px",maxHeight:"150px",borderRadius:"5px"},urlBox:{marginTop:"5px",float:"left"},urlStyle:{float:"left",fontSize:"0.8em",marginRight:"10px",marginLeft:"70px",cursor:"pointer"},graph_size:{width:"600px"},spacer:{height:"10px"}},En=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,item:e.item,openDocument:e.openDocument},s}return Object(f.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e&&this.setState({item:e.item,openDocument:e.openDocument})}},{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"render",value:function(){if(this.state.has_error)return Object(ra.jsx)("h1",{children:"bot-single-search-result: Something went wrong."});var e=this.state.item;return Object(ra.jsxs)(mt.a,{container:!0,spacing:0,style:Nn.gridWidth,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsx)("div",{style:Nn.tinmanScore,children:e.score.toFixed(2)})}),Object(ra.jsx)(mt.a,{item:!0,xs:11,children:Object(ra.jsx)("div",{style:Nn.tinmanText,dangerouslySetInnerHTML:{__html:a.highlight(e.display)}})}),Object(ra.jsx)(mt.a,{item:!0,xs:12,children:e.imageList.map((function(e){return Object(ra.jsx)("div",{style:Nn.imageHolder,children:Object(ra.jsx)("img",{alt:"search result",src:e,style:Nn.imageSize})},e)}))}),Object(ra.jsx)(mt.a,{item:!0,xs:12,children:e.urlList.map((function(e){return Object(ra.jsx)("div",{style:Nn.urlStyle,children:Object(ra.jsx)("a",{href:e,style:{color:k.getThemeColour()},rel:"noopener noreferrer",target:"_blank",children:e})},e)}))}),Object(ra.jsx)(mt.a,{item:!0,xs:12,children:Object(ra.jsx)("div",{style:Nn.spacer,children:"\xa0"})})]})}}],[{key:"highlight",value:function(e){return e&&e.replace&&(e=(e=(e=(e=(e=(e=(e=e.replace(/{hl1:}/g,"<span class='hl1'>")).replace(/{hl2:}/g,"<span class='hl2'>")).replace(/{hl3:}/g,"<span class='hl3'>")).replace(/{:hl1}/g,"</span>")).replace(/{:hl2}/g,"</span>")).replace(/{:hl3}/g,"</span>")).replace(/\n/g,"<br />")),e}},{key:"setupGraph",value:function(e,t,a){if(e&&e.length){for(var s=[],n=[],i=0;i<e.length;i++){var r=e[i];r[t]&&r[a]&&(s.push(r[t].toFixed(2)),n.push(r[a]))}return{labels:s,datasets:[{label:"data",fill:!1,lineTension:.1,backgroundColor:"rgba(192,75,75,0.4)",borderColor:"rgba(192,75,75,1)",pointBackgroundColor:"#fff",pointBorderColor:"rgba(192,75,75,1)",pointHoverBackgroundColor:"rgba(192,75,75,1)",pointHoverBorderColor:"rgba(220,220,220,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderWidth:1,pointHoverRadius:5,pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:n}]}}return{labels:[]}}},{key:"updateResults",value:function(e){e&&e.map((function(e,t){if(e){e.imageList=[],e.urlList=[],e.sayList=[],e.graphList=[];var a=[];if(e.actionList&&e.actionList.length>0){for(var s=e.actionList,n=0;n<s.length;n++){var i=s[n];if("browser.write"===i.action)for(var r=0;r<i.parameters.length;r++){var o=i.parameters[r];a.push(o)}else if("browser.say"===i.action)for(var c=0;c<i.parameters.length;c++){var l=i.parameters[c];e.sayList.push(l)}else if("browser.image"===i.action)for(var d=0;d<i.parameters.length;d++){var u=i.parameters[d];e.imageList.push(u)}else if("browser.url"===i.action)for(var p=0;p<i.parameters.length;p++){var h=i.parameters[p];e.urlList.push(h)}else{a.push(i.action),a.push("(");for(var b=0;b<i.parameters.length;b++){b>0&&a.push(",");var m=i.parameters[b];e.context&&void 0!==e.context[m]?a.push(e.context[m]):a.push(m)}a.push(")\n")}}if(e.display=a.join(" "),e.context){var g=[];Object.keys(e.context).forEach((function(t){var a=e.context[t];g.push(t+" = "+a)})),g.length>0&&(e.display+="context: {"+g.join(", ")+"}")}}else e.display="";e.key=k.createGuid(),e.index=0}return e}))}}]),a}(n.a.Component),Ln={busyBox:{float:"left",marginLeft:"10px",marginRight:"5px",marginTop:"15px",width:"32px"},searchTextBox:{marginBottom:16,width:"400px",float:"left"},searchButtonBox:{marginTop:"20px",marginLeft:"20px",float:"left"},searchResultsBox:{padding:"10px",borderRadius:"4px",border:"0.5px solid #ccc"}},Pn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={onError:e.onError,botQuery:e.botQuery,setBotQueryString:e.setBotQueryString,botQueryString:e.botQueryString,queryResultList:e.queryResultList,hasSearched:!1},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.onError(e,t),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({botQueryString:e.botQueryString,queryResultList:e.queryResultList,setBotQueryString:e.setBotQueryString,botQuery:e.botQuery,onError:e.onError})}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.doClickSearch()}},{key:"doClickSearch",value:function(){this.props.botQuery&&(this.setState({hasSearched:!0}),this.props.botQuery())}},{key:"getResultList",value:function(){var e=JSON.parse(JSON.stringify(this.props.queryResultList));return En.updateResults(e),e}},{key:"openDocument",value:function(e){var t=w.getSession(),a=w.toUrl("/document/"+encodeURIComponent(t)+"/"+encodeURIComponent(e));window.open(a,"_blank")}},{key:"render",value:function(){var e=this;return Object(ra.jsxs)("div",{children:[Object(ra.jsx)("div",{style:Ln.busyBox,children:Object(ra.jsx)("img",{alt:"busy",src:"../images/busy2.gif",style:{display:this.state.busy?"":"none",width:"32px"}})}),Object(ra.jsx)("div",{style:Ln.searchTextBox,children:Object(ra.jsx)(lt.a,{onChange:function(t){return e.props.setBotQueryString(t.target.value)},onKeyPress:function(t){return e.handleSearchTextKeydown(t)},label:"test the mind by asking it something",fullWidth:!0,value:this.props.botQueryString})}),Object(ra.jsx)("div",{style:Ln.searchButtonBox,children:Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",onClick:function(){return e.doClickSearch()},children:"Ask"})}),Object(ra.jsx)("div",{style:{clear:"both"}}),Object(ra.jsx)("br",{}),this.state.queryResultList&&this.state.queryResultList.length>0&&Object(ra.jsx)("div",{children:Object(ra.jsx)("div",{style:Ln.searchResultsBox,children:this.getResultList().map((function(t){return Object(ra.jsx)(En,{item:t,openDocument:function(t){return e.openDocument(t)}},t.key)}))})}),this.state.queryResultList&&0===this.state.queryResultList.length&&this.state.hasSearched&&Object(ra.jsx)("div",{children:"no results"})]})}}]),a}(s.Component),Bn={gridWidth:{width:"900px"},queryMindLabel:{marginTop:"12px",padding:"10px",color:"#555",float:"right"}},zn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={mind_item:null,mind_edit:!1},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"componentDidMount",value:function(){}},{key:"deleteMindItemAsk",value:function(e){var t=this;e&&(this.props.openDialog("are you sure you want to remove id "+e.id+"?<br/><br/>("+e.expression+")","Remove Mind Entry",(function(e){t.deleteMindItem(e)})),this.setState({mind_item:e}))}},{key:"deleteMindItem",value:function(e){e&&k.defined(this.state.mind_item)&&this.props.deleteMindItem(this.state.mind_item.id),this.props.closeDialog&&this.props.closeDialog()}},{key:"deleteAllMindItemsAsk",value:function(){var e=this;this.props.openDialog("are you sure you want to remove all mind-items of this knowledge-base?","Remove All Mind Items",(function(t){e.deleteAllMindItems(t)}))}},{key:"deleteAllMindItems",value:function(e){e&&this.props.deleteAllMindItems(),this.props.closeDialog&&this.props.closeDialog()}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getMindItems()}},{key:"editMindItem",value:function(e){this.setState({mind_edit:!0,mind_item:e})}},{key:"newMindItem",value:function(){this.setState({mind_edit:!0,mind_item:{id:k.createGuid(),preContext:"",postContext:"",expression:"",actionList:[],metadata:""}})}},{key:"mindDump",value:function(){window.open(w.get_mind_dump_url(this.props.selected_organisation_id,this.props.selected_knowledgebase_id),"_blank")}},{key:"save",value:function(e){e?e.expression.length>0&&e.actionList.length>0?(this.props.saveMindItem(e),this.setState({mind_edit:!1})):this.props.setError("Error Saving Mind Entry","mind-item must have an expression and actions"):this.setState({mind_edit:!1})}},{key:"getMindItemList",value:function(){return this.props.mind_item_list?this.props.mind_item_list:[]}},{key:"render",value:function(){var e=this;return Object(ra.jsx)("div",{children:Object(ra.jsx)(mt.a,{container:!0,spacing:1,style:Bn.gridWidth,children:this.props.selected_knowledgebase_id&&Object(ra.jsx)(mt.a,{item:!0,xs:12,children:Object(ra.jsx)(Pn,{onError:function(t,a){return e.props.setError(t,a)},botQuery:this.props.botQuery,botQueryString:this.props.bot_query,setBotQueryString:this.props.setBotQueryString,queryResultList:this.props.bot_query_result_list})})})})}}],[{key:"toAnswer",value:function(e){var t="";if(e&&e.actionList){var a,s=Object(m.a)(e.actionList);try{for(s.s();!(a=s.n()).done;){var n=a.value;if(n&&"browser.write"===n.action&&n.parameters){var i,r=Object(m.a)(n.parameters);try{for(r.s();!(i=r.n()).done;){t+=i.value.replace(/<br \/>/g,"\n")}}catch(o){r.e(o)}finally{r.f()}}}}catch(o){s.e(o)}finally{s.f()}}return t}}]),a}(n.a.Component),An=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,bot_query:e.appReducer.bot_query,bot_query_result_list:e.appReducer.bot_query_result_list,selected_organisation_id:e.appReducer.selected_organisation_id,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(ia,e)}))(zn),Un=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,open:e.open,synonym:e.synonym,onSave:e.onSave,onError:e.onError,words:e.synonym&&e.synonym.words?e.synonym.words:""},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){if(this.state.onSave){var e=this.state.synonym;e.words=this.state.words,this.state.onSave(e)}}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open,synonym:e.synonym,onSave:e.onSave,onError:e.onError,words:e.synonym&&e.synonym.words?e.synonym.words:""})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"synonym-edit.js: Something went wrong."}):Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.open,fullWidth:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"lg",onClose:function(){return e.handleCancel()},children:[Object(ra.jsx)(ha.a,{id:"alert-dialog-title",className:this.props.theme,children:"Edit Synonym"}),Object(ra.jsx)(pa.a,{className:this.props.theme,children:Object(ra.jsxs)(mt.a,{container:!0,spacing:1,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsx)("div",{children:"synonyms"})}),Object(ra.jsx)(mt.a,{item:!0,xs:9,children:Object(ra.jsx)(lt.a,{autoFocus:!0,onChange:function(t){return e.setState({words:t.target.value})},placeholder:"words",spellCheck:!1,multiline:!0,rows:5,variant:"outlined",fullWidth:!0,value:this.state.words})}),Object(ra.jsx)(mt.a,{item:!0,xs:1})]})}),Object(ra.jsxs)(ua.a,{className:this.props.theme,children:[Object(ra.jsx)(ct.a,{color:"primary",onClick:function(){return e.handleCancel()},children:"Cancel"}),Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",onClick:function(){return e.handleSave()},children:"Save"})]})]})}}]),a}(s.Component),Wn={tableStyle:{minWidth:"800px",width:"900px"},tableLight:{},tableDark:{background:"#d0d0d0"},smallTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"20px"},actionTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"100px"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"400px",width:"600px"},searchTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"200px",width:"340px"},knowledgeSelect:{padding:"5px",marginBottom:"40px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},label:{padding:"10px",color:"#555"},gridWidth:{width:"900px"},hr:{border:"0.1px solid #f0f0f0",width:"100%"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},addImage:{width:"25px"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},dlImageSize:{width:"24px"},search:{marginTop:"2px",marginLeft:"15px",width:"18px",color:"#000"},floatLeftLabel:{float:"left",marginRight:"6px",marginTop:"4px",fontSize:"0.9em",fontWeight:"500"},searchFloatLeft:{float:"left"},text:{border:"1px solid #808080",borderRadius:"4px",padding:"4px",width:"280px"},floatLeft:{float:"left"},manualUploadSection:{marginTop:"50px"},findBox:{padding:"10px",marginBottom:"5px",float:"right"}},Fn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={synonym:{},synonym_edit:!1,openDialog:e.openDialog,closeDialog:e.closeDialog,page_size:5,page:0},s}return Object(f.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog,closeDialog:e.closeDialog})}},{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"getSynonymList",value:function(){return this.props.synonym_list}},{key:"deleteSynonymAsk",value:function(e){var t=this;e&&(this.props.openDialog("are you sure you want to remove id "+e.id+"?<br/><br/>("+e.words+")","Remove Synonym",(function(e){t.deleteSynonym(e)})),this.setState({synonym:e}))}},{key:"deleteSynonym",value:function(e){e&&this.state.synonym&&this.props.deleteSynonym(this.state.synonym.id),this.props.closeDialog&&this.props.closeDialog(),this.setState({synonym_edit:!1,synonym:{}})}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getSynonyms()}},{key:"editSynonym",value:function(e){this.setState({synonym_edit:!0,synonym:e})}},{key:"newSynonym",value:function(){this.setState({synonym_edit:!0,synonym:{id:k.createGuid(),words:""}})}},{key:"save",value:function(e){e?e.words.length>0&&e.words.indexOf(",")>0?(this.props.saveSynonym(e),this.setState({synonym_edit:!1,synonym:{}})):this.props.setError("Error Saving Synonym","synonym cannot be empty and need more than one item"):this.setState({synonym_edit:!1,synonym:{}})}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ra.jsxs)("div",{children:[Object(ra.jsx)(Un,{open:this.state.synonym_edit,theme:t,synonym:this.state.synonym,onSave:function(t){return e.save(t)},onError:function(t){return e.props.setError("Error",t)}}),this.isVisible()&&Object(ra.jsxs)("div",{style:Wn.findBox,children:[Object(ra.jsx)("div",{style:Wn.floatLeftLabel,children:"find synonyms"}),Object(ra.jsx)("div",{style:Wn.searchFloatLeft,children:Object(ra.jsx)("input",{type:"text",value:this.props.synonym_filter,autoFocus:!0,style:Wn.text,className:t,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setSynonymFilter(t.target.value)}})}),Object(ra.jsx)("div",{style:Wn.floatLeft,children:Object(ra.jsx)("img",{style:Wn.search,onClick:function(){return e.props.getSynonyms()},src:"../images/dark-magnifying-glass.svg",title:"search",alt:"search"})})]}),Object(ra.jsx)("br",{clear:"both"}),this.isVisible()&&Object(ra.jsxs)(Ma.a,{children:[Object(ra.jsxs)(Ja.a,{style:Wn.tableStyle,children:[Object(ra.jsx)(Qa.a,{children:Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{className:"table-header",children:"id"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"synonyms"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"actions"})]})}),Object(ra.jsxs)(Va.a,{style:"light"===t?Wn.tableLight:Wn.tableDark,children:[this.getSynonymList().map((function(t){return Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:Wn.label,children:t.id})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:Wn.label,children:t.words})}),Object(ra.jsxs)(Ga.a,{children:[Object(ra.jsx)("div",{style:Wn.linkButton,onClick:function(){return e.editSynonym(t)},children:Object(ra.jsx)("img",{src:"../images/edit.svg",style:Wn.dlImageSize,title:"edit synonym",alt:"edit"})}),Object(ra.jsx)("div",{style:Wn.linkButton,onClick:function(){return e.deleteSynonymAsk(t)},children:Object(ra.jsx)("img",{src:"../images/delete.svg",style:Wn.dlImageSize,title:"remove synonym",alt:"remove"})})]})]},t.id)})),Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{children:this.isVisible()&&Object(ra.jsx)("div",{style:Wn.imageButton,onClick:function(){return e.newSynonym()},children:Object(ra.jsx)("img",{style:Wn.addImage,src:"../images/add.svg",title:"new synonym",alt:"new synonym"})})})]})]})]}),Object(ra.jsx)(Xa.a,{style:"light"===t?Wn.tableLight:Wn.tableDark,rowsPerPageOptions:[5,10,25],component:"div",count:this.props.num_synonyms,rowsPerPage:this.props.synonym_page_size,page:this.props.synonym_page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.props.setSynonymPage(a)},onChangeRowsPerPage:function(t){return e.props.setSynonymPageSize(t.target.value)}})]})]})}}]),a}(n.a.Component),Mn=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,synonym_list:e.appReducer.synonym_list,synonym_filter:e.appReducer.synonym_filter,synonym_page:e.appReducer.synonym_page,synonym_page_size:e.appReducer.synonym_page_size,num_synonyms:e.appReducer.num_synonyms,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(ia,e)}))(Fn),qn={labelAdjustment:{marginTop:"17px"}},Yn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,open:e.open,semantic:e.semantic,onSave:e.onSave,onError:e.onError,word:e.semantic&&e.semantic.word?e.semantic.word:"",semantic_str:e.semantic&&e.semantic.semantic?e.semantic.semantic:""},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){this.state.onSave&&this.state.onSave({word:this.state.word,prevWord:"",semantic:this.state.semantic_str})}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open,semantic:e.semantic,onSave:e.onSave,onError:e.onError,word:e.semantic&&e.semantic.word?e.semantic.word:"",semantic_str:e.semantic&&e.semantic.semantic?e.semantic.semantic:""})}},{key:"render",value:function(){var e=this;if(this.state.has_error)return Object(ra.jsx)("h1",{children:"semantic-edit.js: Something went wrong."});var t=this.props.theme;return Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.open,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"lg",onClose:function(){return e.handleCancel()},children:[Object(ra.jsx)(ha.a,{id:"alert-dialog-title",className:t,children:"Edit Semantic"}),Object(ra.jsx)(pa.a,{className:t,children:Object(ra.jsxs)(mt.a,{container:!0,spacing:1,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsx)("div",{style:qn.labelAdjustment,children:"word"})}),Object(ra.jsx)(mt.a,{item:!0,xs:9,children:Object(ra.jsx)(lt.a,{autoFocus:!0,onChange:function(t){return e.setState({word:t.target.value})},placeholder:"word",variant:"outlined",fullWidth:!0,value:this.state.word})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsx)("div",{style:qn.labelAdjustment,children:"semantic"})}),Object(ra.jsx)(mt.a,{item:!0,xs:9,children:Object(ra.jsx)(lt.a,{onChange:function(t){return e.setState({semantic_str:t.target.value})},placeholder:"semantic",variant:"outlined",fullWidth:!0,value:this.state.semantic_str})}),Object(ra.jsx)(mt.a,{item:!0,xs:1})]})}),Object(ra.jsxs)(ua.a,{className:t,children:[Object(ra.jsx)(ct.a,{color:"primary",onClick:function(){return e.handleCancel()},children:"Cancel"}),Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",onClick:function(){return e.handleSave()},children:"Save"})]})]})}}]),a}(s.Component),Hn={tableStyle:{minWidth:"900px",width:"900px"},tableLight:{},tableDark:{background:"#d0d0d0"},smallTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"20px"},actionTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"100px"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"400px",width:"600px"},searchTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"200px",width:"340px"},knowledgeSelect:{padding:"5px",marginBottom:"40px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},label:{padding:"10px",color:"#555"},gridWidth:{width:"900px"},hr:{border:"0.1px solid #f0f0f0",width:"100%"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},addImage:{width:"25px"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},dlImageSize:{width:"24px"},search:{marginTop:"2px",marginLeft:"15px",width:"18px",color:"#000"},floatLeftLabel:{float:"left",marginRight:"6px",marginTop:"4px",fontSize:"0.9em",fontWeight:"500"},searchFloatLeft:{float:"left"},text:{border:"1px solid #808080",borderRadius:"4px",padding:"4px",width:"280px"},floatLeft:{float:"left"},manualUploadSection:{marginTop:"50px"},findBox:{padding:"10px",marginBottom:"5px",float:"right"}},Kn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={semantic:{},prev_semantic:{word:"",semantic:""},semantic_edit:!1,openDialog:e.openDialog,closeDialog:e.closeDialog,page_size:5,page:0},s}return Object(f.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog,closeDialog:e.closeDialog})}},{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"getSemanticList",value:function(){return this.props.semantic_list}},{key:"deleteSemanticAsk",value:function(e){var t=this;e&&(this.props.openDialog("are you sure you want to remove "+e.word+" is a "+e.semantic+"?","Remove Semantic",(function(e){t.deleteSemantic(e)})),this.setState({semantic:e}))}},{key:"deleteSemantic",value:function(e){e&&this.state.semantic&&this.props.deleteSemantic(this.state.semantic.word),this.props.closeDialog&&this.props.closeDialog(),this.setState({semantic_edit:!1,semantic:{}})}},{key:"handleSearchTextKeydown",value:function(e){"Enter"===e.key&&this.props.getSemantics()}},{key:"editSemantic",value:function(e){this.setState({semantic_edit:!0,prev_semantic:{word:e.word,semantic:e.semantic},semantic:{word:e.word,semantic:e.semantic}})}},{key:"newSemantic",value:function(){this.setState({semantic_edit:!0,prev_semantic:{word:"",semantic:""},semantic:{word:"",semantic:""}})}},{key:"save",value:function(e){e?e.word.length>0&&e.semantic.length>0?(""!==this.state.prev_semantic.word&&this.state.prev_semantic.word!==e.word?e.prevWord=this.state.prev_semantic.word:e.prevWord="",this.props.saveSemantic(e),this.setState({semantic_edit:!1,semantic:{}}),this.state.closeDialog&&this.state.closeDialog()):this.props.setError("Error Saving Semantic","word and semantic must have a value"):this.setState({semantic_edit:!1,semantic:{}})}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ra.jsxs)("div",{children:[Object(ra.jsx)(Yn,{open:this.state.semantic_edit,theme:t,semantic:this.state.semantic,onSave:function(t){return e.save(t)},onError:function(t){return e.props.setError("Error",t)}}),this.isVisible()&&Object(ra.jsxs)("div",{style:Hn.findBox,children:[Object(ra.jsx)("div",{style:Hn.floatLeftLabel,children:"find semantics"}),Object(ra.jsx)("div",{style:Hn.searchFloatLeft,children:Object(ra.jsx)("input",{type:"text",value:this.props.semantic_filter,autoFocus:!0,style:Hn.text,className:t,onKeyPress:function(t){return e.handleSearchTextKeydown(t)},onChange:function(t){e.props.setSemanticFilter(t.target.value)}})}),Object(ra.jsx)("div",{style:Hn.floatLeft,children:Object(ra.jsx)("img",{style:Hn.search,onClick:function(){return e.props.getSemantics()},src:"../images/dark-magnifying-glass.svg",title:"search",alt:"search"})})]}),Object(ra.jsx)("br",{clear:"both"}),this.isVisible()&&Object(ra.jsxs)(Ma.a,{children:[Object(ra.jsxs)(Ja.a,{style:Hn.tableStyle,children:[Object(ra.jsx)(Qa.a,{children:Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{className:"table-header",children:"word"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"semantic"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"actions"})]})}),Object(ra.jsxs)(Va.a,{style:"light"===t?Hn.tableLight:Hn.tableDark,children:[this.getSemanticList().map((function(t){return Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:Hn.label,children:t.word})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:Hn.label,children:t.semantic})}),Object(ra.jsxs)(Ga.a,{children:[Object(ra.jsx)("div",{style:Hn.linkButton,onClick:function(){return e.editSemantic(t)},children:Object(ra.jsx)("img",{src:"../images/edit.svg",style:Hn.dlImageSize,title:"edit semantic",alt:"edit"})}),Object(ra.jsx)("div",{style:Hn.linkButton,onClick:function(){return e.deleteSemanticAsk(t)},children:Object(ra.jsx)("img",{src:"../images/delete.svg",style:Hn.dlImageSize,title:"remove semantic",alt:"remove"})})]})]},t.word+":"+t.semantic)})),Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{children:this.isVisible()&&Object(ra.jsx)("div",{style:Hn.imageButton,onClick:function(){return e.newSemantic()},children:Object(ra.jsx)("img",{style:Hn.addImage,src:"../images/add.svg",title:"new semantic",alt:"new semantic"})})})]})]})]}),Object(ra.jsx)(Xa.a,{style:"light"===t?Hn.tableLight:Hn.tableDark,rowsPerPageOptions:[5,10,25],component:"div",count:this.props.num_semantics,rowsPerPage:this.props.semantic_page_size,page:this.props.semantic_page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.props.setSemanticPage(a)},onChangeRowsPerPage:function(t){return e.props.setSemanticPageSize(t.target.value)}})]})]})}}]),a}(n.a.Component),Jn=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,semantic_list:e.appReducer.semantic_list,semantic_filter:e.appReducer.semantic_filter,semantic_page:e.appReducer.semantic_page,semantic_page_size:e.appReducer.semantic_page_size,num_semantics:e.appReducer.num_semantics,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(ia,e)}))(Kn),Vn={container:{float:"left",marginBottom:"10px"},textFieldStyle:{float:"left",width:"700px"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},addImage:{width:"25px"},deleteButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},deleteImageSize:{width:"24px"}},Gn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,open:e.open,synSet:e.synSet,onSave:e.onSave,onError:e.onError,word:k.defined(e.synSet)&&k.defined(e.synSet.word)?e.synSet.word:"",cloud_list:a.getWordCloudList(e.synSet)},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){if(this.state.onSave){var e=this.state.synSet;e.word=this.state.word.trim(),e.wordCloudCsvList=this.state.cloud_list,e.word.indexOf(" ")>=0?this.state.onError("syn-sets must be a single words without spaces."):this.state.onSave(e)}}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open,synSet:e.synSet,onSave:e.onSave,onError:e.onError,word:k.defined(e.synSet)&&k.defined(e.synSet.word)?e.synSet.word:"",cloud_list:a.getWordCloudList(e.synSet)})}},{key:"updateWC",value:function(e,t){var a=this.state.cloud_list;a[e]=t,this.setState({cloud_list:a})}},{key:"newSyn",value:function(){var e=this.state.cloud_list;e.push(""),this.setState({cloud_list:e})}},{key:"deleteSyn",value:function(e){for(var t=[],a=this.state.cloud_list,s=0;s<a.length;s++)s!==e&&t.push(a[s]);this.setState({cloud_list:t})}},{key:"render",value:function(){var e=this;return this.state.has_error?Object(ra.jsx)("h1",{children:"synset-edit.js: Something went wrong."}):Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.open,fullWidth:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"lg",onClose:function(){return e.handleCancel()},children:[Object(ra.jsxs)(ha.a,{id:"alert-dialog-title",className:this.props.theme,children:['Edit syn-set "',this.state.word,'"']}),Object(ra.jsx)(pa.a,{className:this.props.theme,children:Object(ra.jsxs)(mt.a,{container:!0,spacing:1,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:2,children:Object(ra.jsx)("div",{children:"syn-set"})}),Object(ra.jsx)(mt.a,{item:!0,xs:8,children:Object(ra.jsx)(lt.a,{style:Vn.textFieldStyle,onChange:function(t){return e.setState({word:t.target.value})},placeholder:"syn-set",variant:"outlined",fullWidth:!0,value:this.state.word})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:2,children:Object(ra.jsx)("div",{children:"word-clouds"})}),Object(ra.jsx)(mt.a,{item:!0,xs:8,children:this.state.cloud_list.map((function(t,a){return Object(ra.jsxs)("div",{id:a,children:[Object(ra.jsxs)("div",{style:Vn.container,children:[Object(ra.jsx)(lt.a,{style:Vn.textFieldStyle,onChange:function(t){return e.updateWC(a,t.target.value)},placeholder:"word-cloud for syn-set "+(a+1),multiline:!0,rows:2,variant:"outlined",fullWidth:!0,value:t}),a>1&&Object(ra.jsx)("div",{style:Vn.deleteButton,onClick:function(){return e.deleteSyn(a)},children:Object(ra.jsx)("img",{src:"light"===e.props.theme?"../images/delete.svg":"../images/delete-dark.svg",style:Vn.deleteImageSize,title:"remove syn",alt:"remove syn"})})]}),Object(ra.jsx)("div",{style:{clear:"both"}})]})}))}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:9}),Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsx)("div",{style:Vn.imageButton,onClick:function(){return e.newSyn()},children:Object(ra.jsx)("img",{style:Vn.addImage,src:"light"===this.props.theme?"../images/add.svg":"../images/add-dark.svg",title:"add a new syn item",alt:"add a new syn"})})}),Object(ra.jsx)(mt.a,{item:!0,xs:1})]})}),Object(ra.jsxs)(ua.a,{className:this.props.theme,children:[Object(ra.jsx)(ct.a,{color:"primary",onClick:function(){return e.handleCancel()},children:"Cancel"}),Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",onClick:function(){return e.handleSave()},children:"Save"})]})]})}}],[{key:"getWordCloudList",value:function(e){var t=[];for(k.defined(e)&&k.defined(e.wordCloudCsvList)&&(t=e.wordCloudCsvList);t.length<2;)t.push("");return t}}]),a}(s.Component),Qn={tableStyle:{minWidth:"800px",width:"900px"},tableLight:{},tableDark:{background:"#d0d0d0"},smallTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"20px"},actionTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"100px"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"400px",width:"600px"},searchTableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff",minWidth:"200px",width:"340px"},knowledgeSelect:{padding:"5px",marginBottom:"40px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},label:{padding:"10px",color:"#555"},gridWidth:{width:"900px"},hr:{border:"0.1px solid #f0f0f0",width:"100%"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},addImage:{width:"25px"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},dlImageSize:{width:"24px"},search:{marginTop:"2px",marginLeft:"15px",width:"18px",color:"#000"},floatLeftLabel:{float:"left",marginRight:"6px",marginTop:"4px",fontSize:"0.9em",fontWeight:"500"},searchFloatLeft:{float:"left"},text:{border:"1px solid #808080",borderRadius:"4px",padding:"4px",width:"280px"},floatLeft:{float:"left"},manualUploadSection:{marginTop:"50px"},findBox:{padding:"10px",marginBottom:"5px",float:"right"}},Zn=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={synSet:{},synSet_edit:!1,openDialog:e.openDialog,closeDialog:e.closeDialog},s}return Object(f.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog,closeDialog:e.closeDialog})}},{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"deleteSynSetAsk",value:function(e){var t=this;e&&(this.props.openDialog("are you sure you want to remove id "+e.word+"?","Remove SynSet",(function(e){t.deleteSynSet(e)})),this.setState({synSet:e}))}},{key:"deleteSynSet",value:function(e){e&&this.state.synSet&&this.props.deleteSynSet(this.state.synSet.lemma),this.props.closeDialog&&this.props.closeDialog(),this.setState({synSet_edit:!1,synSet:{}})}},{key:"handleSynSetFilterKeydown",value:function(e){"Enter"===e.key&&this.props.findSynSets()}},{key:"editSynSet",value:function(e){this.setState({synSet_edit:!0,synSet:e})}},{key:"newSynSet",value:function(){this.setState({synSet_edit:!0,synSet:{word:"",lemma:"",wordCloudCsvList:[]}})}},{key:"save",value:function(e){if(e)if(e.word.trim().length>0&&e.wordCloudCsvList.length>1){var t,a=e.wordCloudCsvList,s=!0,n=Object(m.a)(a);try{for(n.s();!(t=n.n()).done;){0===t.value.trim().length&&(s=!1)}}catch(i){n.e(i)}finally{n.f()}s?(this.props.saveSynSet(e),this.setState({synSet_edit:!1,synSet:{}})):this.props.setError("Error Saving SynSet","syn-set word-cloud items must not be empty.")}else this.props.setError("Error Saving SynSet","syn-set cannot be empty and need more than one item");else this.setState({synSet_edit:!1,synSet:{}})}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ra.jsxs)("div",{children:[Object(ra.jsx)(Gn,{open:this.state.synSet_edit,theme:t,synSet:this.state.synSet,onSave:function(t){return e.save(t)},onError:function(t){return e.props.setError("Error",t)}}),this.isVisible()&&Object(ra.jsxs)("div",{style:Qn.findBox,children:[Object(ra.jsx)("div",{style:Qn.floatLeftLabel,children:"filter syn-sets"}),Object(ra.jsx)("div",{style:Qn.searchFloatLeft,children:Object(ra.jsx)("input",{type:"text",value:this.props.synset_filter,autoFocus:!0,style:Qn.text,className:t,onKeyPress:function(t){return e.handleSynSetFilterKeydown(t)},onChange:function(t){e.props.setSynSetFilter(t.target.value)}})}),Object(ra.jsx)("div",{style:Qn.floatLeft,children:Object(ra.jsx)("img",{style:Qn.search,onClick:function(){return e.props.findSynSets()},src:"../images/dark-magnifying-glass.svg",title:"search",alt:"search"})})]}),Object(ra.jsx)("br",{clear:"both"}),this.isVisible()&&Object(ra.jsxs)(Ma.a,{children:[Object(ra.jsxs)(Ja.a,{style:Qn.tableStyle,children:[Object(ra.jsx)(Qa.a,{children:Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{className:"table-header",children:"syn-set"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"actions"})]})}),Object(ra.jsxs)(Va.a,{style:"light"===t?Qn.tableLight:Qn.tableDark,children:[this.props.synset_list.map((function(t){return Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:Qn.label,children:t.word})}),Object(ra.jsxs)(Ga.a,{children:[Object(ra.jsx)("div",{style:Qn.linkButton,onClick:function(){return e.editSynSet(t)},children:Object(ra.jsx)("img",{src:"../images/edit.svg",style:Qn.dlImageSize,title:"edit syn-set",alt:"edit"})}),Object(ra.jsx)("div",{style:Qn.linkButton,onClick:function(){return e.deleteSynSetAsk(t)},children:Object(ra.jsx)("img",{src:"../images/delete.svg",style:Qn.dlImageSize,title:"remove syn-set",alt:"remove"})})]})]},t.word)})),Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{children:this.isVisible()&&Object(ra.jsx)("div",{style:Qn.imageButton,onClick:function(){return e.newSynSet()},children:Object(ra.jsx)("img",{style:Qn.addImage,src:"../images/add.svg",title:"new syn-set",alt:"new syn-set"})})})]})]})]}),Object(ra.jsx)(Xa.a,{rowsPerPageOptions:[5,10,25],style:"light"===t?Qn.tableLight:Qn.tableDark,component:"div",count:this.props.synset_total_size,rowsPerPage:this.props.synset_page_size,page:this.props.synset_page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.props.setSynSetPage(a)},onChangeRowsPerPage:function(t){return e.props.setSynSetPageSize(t.target.value)}})]})]})}}]),a}(n.a.Component),Xn=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,synset_list:e.appReducer.synset_list,synset_filter:e.appReducer.synset_filter,synset_page:e.appReducer.synset_page,synset_page_size:e.appReducer.synset_page_size,synset_total_size:e.appReducer.synset_total_size,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id}}),(function(e){return Object(u.b)(ia,e)}))(Zn),$n=a(131),ei=a.n($n),ti=(a(187),{page:{float:"left"},pageWidth:{width:"900px"},logFiles:{marginTop:"20px",maxHeight:"80vh",minWidth:"900px",width:"110%",overflowX:"auto",overflowY:"auto",display:"inline-block",whiteSpace:"nowrap",resize:"both"},logLine:{fontSize:"0.65em",marginBottom:"4px"},item:{},selectedItem:{color:"#000"},dateSelect:{width:"200px"}}),ai=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,onError:e.onError,openDialog:e.openDialog,closeDialog:e.closeDialog,timer_value:0},s.messagesEndRef=n.a.createRef(),s.timer=null,s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog,closeDialog:e.closeDialog})}},{key:"componentWillUnmount",value:function(){null!=this.timer&&(window.clearTimeout(this.timer),this.timer=null)}},{key:"componentDidUpdate",value:function(e,t,a){var s=this;this.scrollToBottom();var n=this.props.log_refresh;n>0&&null==this.timer&&(this.timer=window.setTimeout((function(){s.timer=null,s.props.getLogs&&s.props.getLogs()}),1e3*n))}},{key:"scrollToBottom",value:function(){this.messagesEndRef.current.scrollIntoView({behavior:"smooth"})}},{key:"getClassForType",value:function(e){return"Debug"===e?"log-type-debug":"Info"===e?"log-type-info":"Error"===e?"log-type-error":"log-type-warn"}},{key:"getSelectedHourStyle",value:function(e){return e?"log-hour-selector-selected":"log-hour-selector"}},{key:"getHourTitle",value:function(e){return 1===e?"display the next one hour after the selected time":2===e?"display the next two hours after the selected time":4===e?"display the next four hours after the selected time":"display the next "+e+" hours after the selected time"}},{key:"setLogHours",value:function(e){this.props.setLogHours(e),this.props.getLogs()}},{key:"getSelectedServiceStyle",value:function(e){return e?"log-service-selector-selected":"log-service-selector"}},{key:"setLogService",value:function(e){this.props.setLogService(e),this.props.getLogs()}},{key:"getSelectedLogStyle",value:function(e){return e?"log-type-selector-selected":"log-type-selector"}},{key:"setLogType",value:function(e){this.props.setLogType(e),this.props.getLogs()}},{key:"getLogRefreshStyle",value:function(e){return e?"log-refresh-selector-selected":"log-refresh-selector"}},{key:"setLogRefresh",value:function(e){this.props.setLogRefresh(e),this.props.getLogs()}},{key:"getLogs",value:function(){if(this.props.log_list){for(var e=this.props.log_type,t=this.props.log_service,a=[],s=0;s<this.props.log_list.length;s++){var n=this.props.log_list[s];"All"!==e&&n.type!==e||"All"!==t&&n.service!==t||a.push(n)}return a}return[]}},{key:"render",value:function(){var e=this,t=new Date;this.props.log_date&&(t=new Date(this.props.log_date));var a=this.props.theme,s=this.props.log_hours,n=this.props.log_type,i=this.props.log_service,r=this.props.log_refresh;return Object(ra.jsxs)("div",{style:ti.page,children:[Object(ra.jsx)("div",{style:ti.dateSelect,children:Object(ra.jsx)(ei.a,{className:"light"===a?"wide-date-picker-input":"wide-date-picker-input-dark",selected:t,dateFormat:"yyyy/MM/dd HH:mm",timeFormat:"HH:mm",showTimeSelect:!0,timeIntervals:60,todayButton:"today",onChange:function(t){e.props.setLogDate(t),e.props.getLogs()}})}),Object(ra.jsxs)("div",{className:"log-selectors",children:[Object(ra.jsx)("span",{title:this.getHourTitle(1),className:this.getSelectedHourStyle(1===s),onClick:function(){return e.setLogHours(1)},children:"1 hour"}),Object(ra.jsx)("span",{title:this.getHourTitle(2),className:this.getSelectedHourStyle(2===s),onClick:function(){return e.setLogHours(2)},children:"2 hours"}),Object(ra.jsx)("span",{title:this.getHourTitle(4),className:this.getSelectedHourStyle(4===s),onClick:function(){return e.setLogHours(4)},children:"4 hours"}),Object(ra.jsx)("span",{title:this.getHourTitle(12),className:this.getSelectedHourStyle(12===s),onClick:function(){return e.setLogHours(12)},children:"12 hours"}),Object(ra.jsx)("span",{title:this.getHourTitle(24),className:this.getSelectedHourStyle(24===s),onClick:function(){return e.setLogHours(24)},children:"24 hours"}),Object(ra.jsx)("span",{title:this.getHourTitle(48),className:this.getSelectedHourStyle(48===s),onClick:function(){return e.setLogHours(48)},children:"48 hours"}),Object(ra.jsx)("span",{className:"log-spacer",children:"\xa0"}),Object(ra.jsx)("span",{title:"display all log-types",className:this.getSelectedLogStyle("All"===n),onClick:function(){return e.setLogType("All")},children:"all"}),Object(ra.jsx)("span",{title:"display only 'info' log-types",className:this.getSelectedLogStyle("Info"===n),onClick:function(){return e.setLogType("Info")},children:"info"}),Object(ra.jsx)("span",{title:"display only 'debug' log-types",className:this.getSelectedLogStyle("Debug"===n),onClick:function(){return e.setLogType("Debug")},children:"debug"}),Object(ra.jsx)("span",{title:"display only 'error' log-types",className:this.getSelectedLogStyle("Error"===n),onClick:function(){return e.setLogType("Error")},children:"error"}),Object(ra.jsx)("span",{title:"display only 'warning' log-types",className:this.getSelectedLogStyle("Warn"===n),onClick:function(){return e.setLogType("Warn")},children:"warn"}),Object(ra.jsx)("span",{className:"log-spacer",children:"\xa0"}),Object(ra.jsx)("span",{title:"do not automatically refresh the logs",className:this.getLogRefreshStyle(0===r),onClick:function(){return e.setLogRefresh(0)},children:"off"}),Object(ra.jsx)("span",{title:"automatically refresh this log every five seconds",className:this.getLogRefreshStyle(5===r),onClick:function(){return e.setLogRefresh(5)},children:"5 seconds"}),Object(ra.jsx)("span",{title:"automatically refresh this log every 10 seconds",className:this.getLogRefreshStyle(10===r),onClick:function(){return e.setLogRefresh(10)},children:"10 seconds"})]}),Object(ra.jsxs)("div",{className:"log-selectors",children:[Object(ra.jsx)("span",{title:"display logs from all services",className:this.getSelectedServiceStyle("All"===i),onClick:function(){return e.setLogService("All")},children:"all"}),Object(ra.jsx)("span",{title:"only display logs from the Auth service",className:this.getSelectedServiceStyle("Auth"===i),onClick:function(){return e.setLogService("Auth")},children:"auth"}),Object(ra.jsx)("span",{title:"only display logs from the Conversion service",className:this.getSelectedServiceStyle("Conversion"===i),onClick:function(){return e.setLogService("Conversion")},children:"conv"}),Object(ra.jsx)("span",{title:"only display logs from the Crawler service",className:this.getSelectedServiceStyle("Crawler"===i),onClick:function(){return e.setLogService("Crawler")},children:"crawl"}),Object(ra.jsx)("span",{title:"only display logs from the Document service",className:this.getSelectedServiceStyle("Document"===i),onClick:function(){return e.setLogService("Document")},children:"doc"}),Object(ra.jsx)("span",{title:"only display logs from the Index service",className:this.getSelectedServiceStyle("Index"===i),onClick:function(){return e.setLogService("Index")},children:"index"}),Object(ra.jsx)("span",{title:"only display logs from the Knowledgebase service",className:this.getSelectedServiceStyle("KB"===i),onClick:function(){return e.setLogService("KB")},children:"kb"}),Object(ra.jsx)("span",{title:"only display logs from the Language service",className:this.getSelectedServiceStyle("Language"===i),onClick:function(){return e.setLogService("Language")},children:"lang"}),Object(ra.jsx)("span",{title:"only display logs from the Mind service",className:this.getSelectedServiceStyle("Mind"===i),onClick:function(){return e.setLogService("Mind")},children:"mind"}),Object(ra.jsx)("span",{title:"only display logs from the Operator service",className:this.getSelectedServiceStyle("Operator"===i),onClick:function(){return e.setLogService("Operator")},children:"operator"}),Object(ra.jsx)("span",{title:"only display logs from the Search service",className:this.getSelectedServiceStyle("Search"===i),onClick:function(){return e.setLogService("Search")},children:"search"}),Object(ra.jsx)("span",{title:"only display logs from the Statistics service",className:this.getSelectedServiceStyle("Stats"===i),onClick:function(){return e.setLogService("Stats")},children:"stats"}),Object(ra.jsx)("span",{title:"only display logs from the Web service",className:this.getSelectedServiceStyle("Web"===i),onClick:function(){return e.setLogService("Web")},children:"web"})]}),Object(ra.jsxs)("div",{style:ti.logFiles,children:[this.getLogs().map((function(t){return Object(ra.jsxs)("div",{style:ti.logLine,id:t.created,children:[Object(ra.jsx)("span",{className:"log-type-width "+e.getClassForType(t.type),children:t.type}),Object(ra.jsx)("span",{className:"log-service-width",children:t.service}),Object(ra.jsx)("span",{className:"log-time-width",children:S.unixTimeConvert(t.created)}),Object(ra.jsx)("span",{children:t.message})]})})),Object(ra.jsx)("div",{ref:this.messagesEndRef})]})]})}}]),a}(n.a.Component),si=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id,selected_organisation_id:e.appReducer.selected_organisation_id,log_date:e.appReducer.log_date,log_list:e.appReducer.log_list,log_hours:e.appReducer.log_hours,log_type:e.appReducer.log_type,log_service:e.appReducer.log_service,log_refresh:e.appReducer.log_refresh,user:e.appReducer.user}}),(function(e){return Object(u.b)(ia,e)}))(ai),ni=a(107),ii=350,ri=400,oi={pageWidth:{width:"900px"},knowledgeSelect:{padding:"5px",marginBottom:"50px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},label:{marginTop:"20px",color:"#555"},barGraphs:{float:"left",margin:"20px",minWidth:"440px",width:"900px"},barGraph:{float:"left",width:"410px",height:"450px",margin:"10px"},downloadButton:{float:"right"},dateSelect:{float:"right",marginTop:"3px",marginRight:"5px"}},ci=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,onError:e.onError,openDialog:e.openDialog,closeDialog:e.closeDialog},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({openDialog:e.openDialog,closeDialog:e.closeDialog})}},{key:"componentDidMount",value:function(){}},{key:"downloadReport",value:function(){var e=new Date(this.props.report_date),t=e.getFullYear(),a=e.getMonth()+1,s=w.get_query_log_url(this.props.selected_organisation_id,this.props.selected_knowledgebase_id,t,a);window.open(s,"_blank")}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this,t=new Date(this.props.report_date),a=this.props.theme;return Object(ra.jsxs)("div",{style:oi.pageWidth,children:[this.isVisible()&&Object(ra.jsxs)("div",{children:[Object(ra.jsx)("br",{clear:"both"}),Object(ra.jsx)("div",{style:oi.downloadButton,children:Object(ra.jsx)(ct.a,{variant:"contained",color:"primary",onClick:function(){return e.downloadReport()},children:"download report"})}),Object(ra.jsx)("div",{style:oi.dateSelect,children:Object(ra.jsx)(ei.a,{className:"light"===a?"date-picker-input":"date-picker-input-dark",selected:t,dateFormat:"yyyy/MM",todayButton:"today",showMonthYearPicker:!0,onChange:function(t){e.props.setReportDate(t),e.props.getReports()}})}),Object(ra.jsx)("br",{clear:"both"})]}),Object(ra.jsxs)("div",{style:oi.barGraphs,children:[this.isVisible()&&this.props.general_statistics.map((function(e){return Object(ra.jsx)("div",{style:oi.barGraph,children:Object(ra.jsx)(ni.Bar,{data:e,options:vt.getGraphOptions(""),width:ri,height:ii})},e.id)})),this.isVisible()&&this.props.file_type_statistics.map((function(e){return Object(ra.jsx)("div",{style:oi.barGraph,children:Object(ra.jsx)(ni.Bar,{data:e,options:vt.getGraphOptions(""),width:ri,height:ii})},e.id)})),this.isVisible()&&this.props.query_word_frequency.map((function(e){return Object(ra.jsx)("div",{style:oi.barGraph,children:Object(ra.jsx)(ni.Bar,{data:e,options:vt.getGraphOptions("queries"),width:ri,height:ii})},e.id)})),this.isVisible()&&this.props.access_frequency.labels.length>0&&Object(ra.jsx)("div",{style:oi.barGraph,children:Object(ra.jsx)(ni.Line,{data:this.props.access_frequency,options:vt.getGraphOptions("access count"),width:ri,height:ii})})]})]})}}]),a}(n.a.Component),li=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,report_date:e.appReducer.report_date,access_frequency:e.appReducer.access_frequency,general_statistics:e.appReducer.general_statistics,query_word_frequency:e.appReducer.query_word_frequency,file_type_statistics:e.appReducer.file_type_statistics}}),(function(e){return Object(u.b)(ia,e)}))(ci),di=a(262),ui=a.n(di),pi=a(263),hi=a.n(pi),bi=a(132),mi=a.n(bi),gi=a(264),fi=a.n(gi),ji=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,links:""},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"handleSave",value:function(){if(this.props.onSave){var e=this.state.links.replace(/\n/g," ");e=(e=e.replace(/\r/g," ")).replace(/\t/g," "),this.props.onSave(!0,e)}}},{key:"handleCancel",value:function(){this.props.onSave&&this.props.onSave(!1,"")}},{key:"render",value:function(){var e=this;if(this.state.has_error)return Object(ra.jsx)("h1",{children:"operator-teach.js: Something went wrong."});var t=this.props.theme;return Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0,disableEscapeKeyDown:!0,open:this.props.open,fullWidth:!0,maxWidth:"lg",onClose:function(){return e.handleCancel()},children:[Object(ra.jsx)(ha.a,{id:"alert-dialog-title",className:t,children:"Teach SimSage?"}),Object(ra.jsx)(pa.a,{className:t,children:Object(ra.jsxs)(mt.a,{container:!0,spacing:1,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsx)("div",{children:"question"})}),Object(ra.jsx)(mt.a,{item:!0,xs:9,children:this.props.question}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsx)("div",{children:"answer"})}),Object(ra.jsx)(mt.a,{item:!0,xs:9,children:this.props.answer}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1,children:Object(ra.jsx)("div",{children:"links"})}),Object(ra.jsx)(mt.a,{item:!0,xs:9,children:Object(ra.jsx)(lt.a,{onChange:function(t){return e.setState({links:t.target.value})},placeholder:"links (images and page-links, separated by commas or spaces)",multiline:!0,rows:5,variant:"outlined",fullWidth:!0,value:this.state.links})}),Object(ra.jsx)(mt.a,{item:!0,xs:1})]})}),Object(ra.jsxs)(ua.a,{className:t,children:[Object(ra.jsx)(ct.a,{color:"primary",onClick:function(){return e.handleCancel()},children:"Cancel"}),Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",onClick:function(){return e.handleSave()},children:"Save"})]})]})}}]),a}(s.Component),xi={questionStyle:{display:"inline-block",fontWeight:"600"},answerStyle:{fontSize:"0.95em"}},vi=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={has_error:!1,open:e.open,onSave:e.onSave,onError:e.onError},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({open:e.open})}},{key:"handleSave",value:function(){this.state.onSave&&this.state.onSave(!0)}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(!1)}},{key:"render",value:function(){var e=this;if(this.state.has_error)return Object(ra.jsx)("h1",{children:"operator-previous-answer.js: Something went wrong."});var t=this.props.theme;return Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0,disableEscapeKeyDown:!0,open:this.state.open,fullWidth:!0,maxWidth:"lg",onClose:function(){return e.handleCancel()},children:[Object(ra.jsx)(ha.a,{id:"alert-dialog-title",className:t,children:"Use Previous Answer?"}),Object(ra.jsx)(pa.a,{className:t,children:Object(ra.jsxs)(mt.a,{container:!0,spacing:1,children:[Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:10,children:Object(ra.jsxs)("div",{children:["SimSage has a previous answer to the question: ",Object(ra.jsx)("div",{style:xi.questionStyle,children:this.props.question})]})}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:1}),Object(ra.jsx)(mt.a,{item:!0,xs:2,children:Object(ra.jsx)("div",{children:"SimSage's answer was:"})}),Object(ra.jsx)(mt.a,{item:!0,xs:8,children:Object(ra.jsx)("div",{style:xi.answerStyle,children:this.props.answer})}),Object(ra.jsx)(mt.a,{item:!0,xs:1})]})}),Object(ra.jsxs)(ua.a,{className:t,children:[Object(ra.jsx)(ct.a,{color:"primary",onClick:function(){return e.handleCancel()},children:"Cancel"}),Object(ra.jsx)(ct.a,{variant:"contained",color:"secondary",onClick:function(){return e.handleSave()},children:"Use this Answer"})]})]})}}]),a}(s.Component),yi={topButton:{marginLeft:"10px"},conversations:{marginTop:"10px",backgroundColor:"#fafafa",width:"75vw",height:"500px",borderRadius:"10px",overflowY:"auto"},avatarBackground:{backgroundColor:"#ccc"},simSageIcon:{color:"#66aa66"},simSageIconSelected:{color:"#dd6666"},personIcon:{color:"#666cc6"},personIconSelected:{color:"#dd6666"},kbName:{float:"right",marginLeft:"5px",marginTop:"4px",marginRight:"100px",fontSize:"0.9em"},typingDots:{width:"60px"}},_i=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).scrollToBottom=function(){s.messagesEndRef.current.scrollIntoView({behavior:"smooth"})},s.state={operator_reply:"",last_time:0},s.messagesEndRef=n.a.createRef(),s}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.setInterval((function(){return e.checkClientTyping()}),1e3)}},{key:"componentDidCatch",value:function(e,t){console.log(e,t),this.props.setError(e,t)}},{key:"componentDidUpdate",value:function(e,t,a){this.scrollToBottom()}},{key:"readyForChat",value:function(){var e={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,userId:this.props.user.id};this.props.sendOperatorMessage("/ops/ready",e),this.props.operatorReady(this.props.operator.id,!0)}},{key:"isTyping",value:function(){var e=this.state.last_time,t=S.getSystemTime();if(e<t&&(this.setState({last_time:t+2e3}),this.props.operator.client_id&&this.props.operator.id)){var a={fromId:this.props.operator.id,toId:this.props.operator.client_id,isTyping:!0};this.props.sendOperatorMessage("/ops/typing",a)}}},{key:"checkClientTyping",value:function(){this.props.operator&&this.props.operator.is_typing&&this.props.operator.typing_time<S.getSystemTime()&&this.props.stopClientTyping(this.props.operator.id)}},{key:"takeBreak",value:function(){var e={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,clientId:this.props.operator.client_id};this.props.sendOperatorMessage("/ops/take-break",e),this.props.operatorReady(this.props.operator.id,!1)}},{key:"nextUser",value:function(){var e={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,clientId:this.props.operator.client_id};this.props.sendOperatorMessage("/ops/next-user",e),this.props.clearUser(this.props.operator.id)}},{key:"banUserConfirm",value:function(){var e=this;this.props.operator.client_id&&this.props.operator.client_id.length>0&&this.props.openDialog("are you sure you want to ban this user?","Ban User",(function(t){e.banUser(t)}))}},{key:"banUser",value:function(e){if(e){var t={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,clientId:this.props.operator.client_id};this.props.sendOperatorMessage("/ops/ban-user",t),this.props.clearUser(this.props.operator.id)}this.props.closeDialog&&this.props.closeDialog()}},{key:"operatorReply",value:function(e){if(this.props.operator.client_id.length>0&&e.length>0){var t={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,clientId:this.props.operator.client_id,kbId:this.props.operator.client_kb_id,text:e};this.props.sendOperatorMessage("/ops/chat",t),this.props.addConversation(this.props.operator.id,{id:this.props.operator.conversation_list.length+1,primary:e,secondary:"You",used:!1,is_simsage:!0}),this.setState({operator_reply:""})}}},{key:"selectForLearn",value:function(e){e&&e.is_simsage?e.id===this.props.operator.answer_id?this.props.setOperatorAnswer(this.props.operator.id,"",""):this.props.setOperatorAnswer(this.props.operator.id,e.id,e.primary):e&&(e.id===this.props.operator.question_id?this.props.setOperatorQuestion(this.props.operator.id,"",""):this.props.setOperatorQuestion(this.props.operator.id,e.id,e.primary))}},{key:"teachSimSage",value:function(e,t){if(e&&this.props.operator.client_id.length>0&&this.props.operator.question.length>0&&this.props.operator.answer.length>0){var a={sessionId:this.props.session.id,operatorId:this.props.operator.id,organisationId:this.props.selected_organisation_id,clientId:this.props.operator.client_id,kbId:this.props.operator.client_kb_id,text:this.props.operator.question,answer:this.props.operator.answer,links:t};this.props.sendOperatorMessage("/ops/teach",a);var s,n=this.props.operator.conversation_list,i=Object(m.a)(n);try{for(i.s();!(s=i.n()).done;){var r=s.value;r.id!==this.props.operator.question_id&&r.id!==this.props.operator.answer_id||this.props.markConversationItemUsed(this.props.operator.id,r.id)}}catch(o){i.e(o)}finally{i.f()}}this.props.setOperatorAnswer(this.props.operator.id,"",""),this.props.setOperatorQuestion(this.props.operator.id,"","")}},{key:"usePreviousQuestion",value:function(e){e&&this.props.operator.prev_answer.length>0&&this.operatorReply(this.props.operator.prev_answer),this.props.clearPreviousAnswer(this.state.operator.id)}},{key:"getAvatarStyle",value:function(e){var t="";return"light"!==this.props.theme&&(t="-dark"),e.is_simsage?e.id===this.props.operator.answer_id||e.used?"operator-text-box-selected"+t:"operator-text-box"+t:e.id===this.props.operator.question_id||e.used?"user-text-selected"+t:"user-text"+t}},{key:"render",value:function(){var e=this,t=Ai.hasRole(this.props.user,["operator"]),a=this.props.operator.operator_ready&&this.props.operator_connected&&t,s=this.props.operator.operator_ready||!this.props.operator_connected,n=this.props.operator.client_id&&this.props.operator.client_id.length>0,i="light"===this.props.theme?"operator-buttons-top":"operator-buttons-top-dark";return Object(ra.jsxs)("div",{children:[Object(ra.jsx)(ji,{open:""!==this.props.operator.question_id&&""!==this.props.operator.answer_id,theme:this.props.theme,question:this.props.operator.question,onSave:function(t,a){return e.teachSimSage(t,a)},answer:this.props.operator.answer}),Object(ra.jsx)(vi,{open:""!==this.props.operator.current_question&&""!==this.props.operator.prev_answer,theme:this.props.theme,question:this.props.operator.current_question,onSave:function(t){return e.usePreviousQuestion(t)},answer:this.props.operator.prev_answer}),Object(ra.jsxs)("div",{className:i,children:[Object(ra.jsxs)("button",{className:"operator-button",disabled:s,title:s?"Disabled, click 'Break' top stop any conversations.":"Signal that you are ready to go and converse with customers.",onClick:function(){return e.readyForChat()},children:[Object(ra.jsx)(ui.a,{className:"operator-button-icon"}),Object(ra.jsx)("span",{className:"operator-button-text",children:"Ready"})]}),Object(ra.jsxs)("button",{className:"operator-button",disabled:!a,title:a?"take a break, stop participating in conversations while you have a break.":"Disabled, click Ready before you take a break.",onClick:function(){return e.takeBreak()},children:[Object(ra.jsx)(hi.a,{className:"operator-button-icon"}),Object(ra.jsx)("span",{className:"operator-button-text",children:"Break"})]}),Object(ra.jsxs)("button",{className:"operator-button operator-button-margin-left",disabled:!n,title:n?"The current conversation is abusive or bad spirited, ban this user from the system.":"Disabled, you aren't currently connected to any user.",onClick:function(){return e.banUserConfirm()},children:[Object(ra.jsx)(fi.a,{className:"operator-button-icon"}),Object(ra.jsx)("span",{className:"operator-button-text",children:"Ban User"})]}),Object(ra.jsxs)("button",{className:"operator-button operator-button-margin-left",disabled:!n,title:n?"We have finished the current conversation and are ready for a next one.":"Disabled, you aren't currently connected to any users.",onClick:function(){return e.nextUser()},children:[Object(ra.jsx)(mi.a,{className:"operator-button-icon"}),Object(ra.jsx)("span",{className:"operator-button-text",children:"End Chat"})]}),this.props.operator.client_kb_name&&this.props.operator.client_kb_name.length>0&&Object(ra.jsx)("div",{style:yi.kbName,children:this.props.operator.client_kb_name})]}),Object(ra.jsxs)("div",{className:"operator-conversation-area",children:[this.props.operator.conversation_list.map((function(t){return Object(ra.jsxs)("div",{className:t.is_simsage?"operator-box":"user-box",onClick:function(){a&&e.selectForLearn(t)},children:[Object(ra.jsxs)("div",{className:t.is_simsage?"operator-line":"user-line",children:[Object(ra.jsx)("span",{className:"user-label",children:t.is_simsage?"You":"User"}),Object(ra.jsx)("span",{className:"hyphen",children:"-"}),Object(ra.jsx)("span",{className:"time",children:S.unixTimeConvert(t.created)})]}),Object(ra.jsx)("div",{className:e.getAvatarStyle(t),children:t.primary})]},t.id)})),this.props.operator.is_typing&&Object(ra.jsx)("div",{children:Object(ra.jsx)("img",{src:"../images/dots.gif",style:yi.typingDots,alt:"typing"})}),Object(ra.jsx)("div",{ref:this.messagesEndRef})]}),Object(ra.jsxs)("div",{className:"operator-reply-area",children:[Object(ra.jsx)("span",{className:"operator-reply-text-box",children:Object(ra.jsx)(lt.a,{title:n?"Type your reply and press enter, or click the 'Reply' button.":"Disabled, you aren't in a chat with a user.",className:"operator-reply-text",onChange:function(t){return e.setState({operator_reply:t.target.value})},disabled:!n,onKeyPress:function(t){"Enter"===t.key&&e.operatorReply(e.state.operator_reply),e.isTyping()},label:"your reply",value:this.state.operator_reply})}),Object(ra.jsx)("span",{className:"operator-reply-button-box",children:Object(ra.jsx)("button",{disabled:!n,className:"operator-button",title:n?"Send the text you've typed to the user (or press enter in the reply field).":"Disabled, you aren't in a chat with a user.",onClick:function(){return e.operatorReply(e.state.operator_reply)},children:"Reply"})})]})]})}}]),a}(n.a.Component),Oi=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,session:e.appReducer.session,user:e.appReducer.user,operator_connected:e.appReducer.operator_connected,num_active_connections:e.appReducer.num_active_connections,selected_organisation_id:e.appReducer.selected_organisation_id}}),(function(e){return Object(u.b)(ia,e)}))(_i),wi=a(609),ki={tab:{backgroundColor:"#ebebeb",color:"#000"},add_button:{float:"right",marginTop:"-40px",marginRight:"200px"},add_button_size:{width:"32px",height:"32px"},add_text:{fontSize:"14px",marginTop:"4px",float:"right"},max_text:{fontSize:"14px",marginTop:"4px",float:"right",color:"darkgray"},kbName:{float:"right",marginTop:"-36px",right:"30px"},bot_image:{width:"24px",height:"24px"},bot_text:{float:"right",fontSize:"12px",marginTop:"4px",marginLeft:"10px"}},Si=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={selectedTab:1},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){console.log(e,t),this.props.setError(e,t)}},{key:"takeBreak",value:function(e){if(e&&e.id){var t={sessionId:this.props.session.id,operatorId:e.id,organisationId:this.props.selected_organisation_id,clientId:e.client_id};this.props.sendOperatorMessage("/ops/take-break",t),this.props.operatorReady(e.id,!1)}}},{key:"render",value:function(){var e=this,t="light"===this.props.theme?"":"-dark";return Object(ra.jsxs)("div",{children:[Object(ra.jsx)("div",{children:this.props.operators&&this.props.operators.map((function(a,s){return Object(ra.jsxs)("span",{className:s+1===e.state.selectedTab?"operator-tab-selected"+t:"operator-tab"+t,children:[Object(ra.jsx)("span",{title:"Conversation "+(s+1),onClick:function(){return e.setState({selectedTab:s+1})},children:"Conversation "+(s+1)}),s>0&&Object(ra.jsx)("span",{className:"operator-close-conversation-button",title:"Close and remove this conversation.",onClick:function(){e.takeBreak(a),e.setState({selectedTab:1}),e.props.removeOperator(a.id)},children:Object(ra.jsx)("span",{className:"operator-close-conversation-text",children:"\xd7"})},"tab_close"+(s+1))]},"tab"+(s+1))}))}),this.props.operators&&this.props.operators.length<5&&Object(ra.jsxs)("div",{style:ki.add_button,onClick:function(){return e.props.addOperator()},title:"add Chat",children:[Object(ra.jsx)(wi.a,{className:"active-users-icon"}),Object(ra.jsxs)("span",{style:ki.max_text,children:["(Max ",5," chats)"]}),Object(ra.jsx)("span",{style:ki.add_text,children:"Add Chat\xa0"})]}),Object(ra.jsxs)("div",{style:ki.kbName,children:[Object(ra.jsx)(mi.a,{className:"active-users-icon"})," ",Object(ra.jsxs)("span",{style:ki.bot_text,children:[this.props.num_active_connections," active users"]})]}),this.props.operators&&this.props.operators.map((function(t,a){return a+1===e.state.selectedTab?Object(ra.jsx)(Oi,{operator:t,isFirst:0===a,onCloseTab:function(){return e.setState({selectedTab:1})},openDialog:function(t,a,s){return e.props.openDialog(t,a,s)},closeDialog:function(){return e.props.closeDialog()}},"display"+(a+1)):Object(ra.jsx)("div",{},"display"+(a+1))}))]})}}]),a}(n.a.Component),Ci=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,theme:e.appReducer.theme,session:e.appReducer.session,user:e.appReducer.user,num_active_connections:e.appReducer.num_active_connections,selected_organisation_id:e.appReducer.selected_organisation_id,operators:e.appReducer.operators}}),(function(e){return Object(u.b)(ia,e)}))(Si),Ii={formContent:{overflowY:"scroll",height:"550px"},tab:{backgroundColor:"#f8f8f8",color:"#000"},tab_dark:{backgroundColor:"#808080",color:"#f8f8f8"},domainPage:{padding:"10px"},textField:{marginLeft:"10px",marginRight:"10px",width:"500px"},timeTabContent:{marginLeft:"20px"},testButton:{marginLeft:"20px",marginTop:"20px",marginRight:"20px"},edgeText:{marginLeft:"20px",marginRight:"10px"}},Ri=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state=Object(d.a)(Object(d.a)({open:e.open,onSave:e.onSave,onTest:e.onTest,onUpdate:e.onUpdate,onError:e.onError,error_title:e.error_title,error_msg:e.error_msg,selectedTab:"general",organisation_id:e.organisation_id,kb_id:e.kb_id,edge_device_list:s.props.edge_device_list},s.construct_data(e.domain)),{},{has_error:!1}),s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({has_error:!0}),console.log(e,t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){null!==e&&(e.domain?this.setState(Object(d.a)({open:e.open,title:e.title,onSave:e.onSave,onUpdate:e.onUpdate,onTest:e.onTest,onError:e.onError,error_title:e.error_title,error_msg:e.error_msg,organisation_id:e.organisation_id,kb_id:e.kb_id,edge_device_list:e.edge_device_list},this.construct_data(e.domain))):this.setState({open:e.open,title:e.title,onSave:e.onSave,onError:e.onError}))}},{key:"change_callback",value:function(e){this.setState(e)}},{key:"construct_data",value:function(e){return e?{organisationId:"",kbId:"",domainId:S.defined(e.domainId)?e.domainId:"",domainName:S.defined(e.domainName)?e.domainName:"",userName:S.defined(e.userName)?e.userName:"",password:S.defined(e.password)?e.password:"",serverIp:S.defined(e.serverIp)?e.serverIp:"",basePath:S.defined(e.basePath)?e.basePath:"",portNumber:S.defined(e.portNumber)?e.portNumber:389,sslOn:!!S.defined(e.sslOn)&&e.sslOn,schedule:S.defined(e.schedule)?e.schedule:"",edgeDeviceId:S.defined(e.edgeDeviceId)?e.edgeDeviceId:""}:{organisationId:"",kbId:"",domainId:"",domainName:"",userName:"",password:"",serverIp:"",basePath:"",portNumber:389,sslOn:!1,schedule:"",edgeDeviceId:""}}},{key:"gather_data",value:function(){return{organisationId:"",kbId:"",domainId:this.state.domainId,domainName:this.state.domainName,userName:this.state.userName,password:this.state.password,serverIp:this.state.serverIp,basePath:this.state.basePath,portNumber:this.state.portNumber,sslOn:this.state.sslOn,schedule:this.state.schedule,edgeDeviceId:this.state.edgeDeviceId}}},{key:"setError",value:function(e,t){this.props.onError&&this.props.onError(e,t)}},{key:"handleCancel",value:function(){this.state.onSave&&this.state.onSave(null),this.setState({open:!1})}},{key:"handleSave",value:function(){0!==this.state.userName.trim().length||0!==this.state.password.trim().length&&0!==this.state.domainName.trim().length&&0!==this.state.serverIp.trim().length&&0!==this.state.portNumber.trim().length&&0!==this.state.basePath.trim().length?this.state.onSave&&this.state.onSave(this.gather_data()):this.setError("invalid parameters","you must supply credentials, and domain details using all fields.")}},{key:"testConnection",value:function(){0!==this.state.userName.trim().length||0!==this.state.password.trim().length&&0!==this.state.domainName.trim().length&&0!==this.state.serverIp.trim().length&&0!==this.state.portNumber.trim().length&&0!==this.state.basePath.trim().length?this.state.onTest&&this.state.onTest(this.gather_data()):this.setError("invalid parameters","you must supply credentials, and domain details using all fields.")}},{key:"updateSchedule",value:function(e){null!==e&&(this.setState({schedule:e}),this.state.onUpdate&&this.state.onUpdate(Object(d.a)(Object(d.a)({},this.gather_data()),{},{schedule:e})))}},{key:"filteredEdgeDevices",value:function(){var e=[{key:"none",value:"n/a"}];if(this.props.edge_device_list){var t,a=Object(m.a)(this.props.edge_device_list);try{for(a.s();!(t=a.n()).done;){var s=t.value;s.organisationId===this.state.organisation_id&&s.edgeId&&e.push({key:s.edgeId,value:s.name})}}catch(n){a.e(n)}finally{a.f()}}return e}},{key:"render",value:function(){var e=this;if(this.state.has_error)return Object(ra.jsx)("h1",{children:"domain-dialog.js: Something went wrong."});var t=this.props.theme,a="light"===t?Ii.tab:Ii.tab_dark,s=this.state.selectedTab;return Object(ra.jsx)("div",{children:Object(ra.jsxs)(da.a,{"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",open:this.state.open,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"lg",onClose:this.handleCancel.bind(this),children:[Object(ra.jsx)(ha.a,{id:"alert-dialog-title",className:t,children:this.state.title}),Object(ra.jsx)("div",{className:t,children:Object(ra.jsxs)("div",{children:[Object(ra.jsxs)(us.a,{value:this.state.selectedTab,onChange:function(t,a){return e.setState({selectedTab:a})},children:[Object(ra.jsx)(ps.a,{label:"domain settings",value:"general",style:a}),Object(ra.jsx)(ps.a,{label:"schedule",value:"schedule",style:a})]}),Object(ra.jsxs)("div",{style:Ii.formContent,children:["general"===s&&Object(ra.jsxs)("div",{style:Ii.domainPage,children:[Object(ra.jsx)(lt.a,{autoFocus:!0,placeholder:"domain name",label:"domain name",value:this.state.domainName,onChange:function(t){e.change_callback({domainName:t.target.value})},style:Ii.textField}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)(lt.a,{placeholder:"user-name",label:"user-name",value:this.state.userName,onChange:function(t){e.change_callback({userName:t.target.value})},style:Ii.textField}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)(lt.a,{placeholder:"password (leave blank not to change)",label:"password (leave blank not to change)",type:"password",value:this.state.password,onChange:function(t){e.change_callback({password:t.target.value})},style:Ii.textField}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)(lt.a,{placeholder:"domain ip-address",label:"domain ip-address",value:this.state.serverIp,onChange:function(t){e.change_callback({serverIp:t.target.value})},style:Ii.textField}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)(lt.a,{placeholder:"domain base-path (e.g. dc=my-domain,dc=co,dc=uk)",label:"domain base-path (e.g. dc=my-domain,dc=co,dc=uk)",value:this.state.basePath,onChange:function(t){e.change_callback({basePath:t.target.value})},style:Ii.textField}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsx)(lt.a,{placeholder:"Active Directory port-number",label:"Active Directory port-number",value:this.state.portNumber,onChange:function(t){e.change_callback({portNumber:t.target.value})},style:Ii.textField}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsxs)("div",{children:[Object(ra.jsx)("span",{style:Ii.edgeText,children:"Edge device"}),Object(ra.jsx)("span",{children:Object(ra.jsx)(Es.a,{disableUnderline:!0,value:""!==this.state.edgeDeviceId?this.state.edgeDeviceId:"none",onChange:function(t){e.change_callback({edgeDeviceId:t.target.value})},children:this.filteredEdgeDevices().map((function(e){return Object(ra.jsx)(qa.a,{value:e.key,children:e.value},e.key)}))})})]}),Object(ra.jsx)("br",{}),Object(ra.jsx)("br",{}),Object(ra.jsxs)("div",{style:{float:"left"},title:"Check this box if you want the enable SSL communications with the Active Directory server.",children:[Object(ra.jsx)($a.a,{checked:this.state.sslOn,onChange:function(t){t.target.checked?e.change_callback({sslOn:t.target.checked}):e.change_callback({sslOn:!1})},value:"enable Active Directory SSL?",inputProps:{"aria-label":"primary checkbox"}}),"enable Active Directory SSL?"]}),Object(ra.jsx)("br",{clear:"both"}),Object(ra.jsx)(ct.a,{variant:"contained",color:"primary",style:Ii.testButton,onClick:function(){return e.testConnection()},children:"Test Connection"})]}),"schedule"===s&&Object(ra.jsx)("div",{style:Ii.timeTabContent,children:Object(ra.jsx)(xs,{time:this.state.schedule,onSave:function(t){return e.updateSchedule(t)}})})]})]})}),Object(ra.jsxs)(ua.a,{className:t,children:[Object(ra.jsx)(ct.a,{color:"primary",onClick:function(){return e.handleCancel()},children:"cancel"}),Object(ra.jsx)(ct.a,{color:"secondary",onClick:function(){return e.handleSave()},children:"save"})]})]})})}}]),a}(s.Component),Di={domainId:"",domainName:"",userName:"",password:"",serverIp:"",basePath:"",portNumber:389,sslOn:!1,schedule:""},Ti={pageWidth:{width:"900px"},tableLight:{},tableDark:{background:"#d0d0d0"},tab:{backgroundColor:"#f8f8f8",color:"#000"},addImage:{width:"25px",cursor:"pointer",color:"green"},knowledgeSelect:{padding:"5px",marginBottom:"40px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},tableHeaderStyle:{background:"#555",fontSize:"0.95em",color:"#fff"},label:{marginTop:"20px",color:"#555"},linkButton:{float:"left",padding:"10px",color:"#888",cursor:"pointer"},imageButton:{float:"right",padding:"10px",color:"#888",cursor:"pointer"},download:{cursor:"pointer",fontSize:"0.9em",fontWeight:"600",height:"24px"},downloadType:{fontSize:"0.9em",height:"24px"},downloadImage:{width:"24px"},labelHeader:{marginTop:"20px",marginBottom:"5px",fontSize:"0.8em"}},Ni=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={page_size:5,page:0,open:!1,title:"",selected_domain:{},domain_ask:null},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"changePage",value:function(e){this.setState({page:e})}},{key:"changePageSize",value:function(e){this.setState({page_size:e})}},{key:"getDomains",value:function(){var e=[],t=this.state.page*this.state.page_size,a=t+this.state.page_size;for(var s in this.props.domain_list)s>=t&&s<a&&e.push(this.props.domain_list[s]);return e}},{key:"addNewDomain",value:function(){this.setState({open:!0,selected_domain:Di,title:"Create New Domain"})}},{key:"onUpdate",value:function(e){this.setState({selected_domain:e})}},{key:"editDomain",value:function(e){e&&this.setState({open:!0,selected_domain:Object(d.a)(Object(d.a)({},Di),e),title:"Edit Domain"})}},{key:"deleteDomainAsk",value:function(e){var t=this;this.setState({domain_ask:e}),this.props.openDialog("are you sure you want to remove the domain named <b>"+e.domainName+"</b>?","Remove Domain",(function(e){t.deleteDomain(e)}))}},{key:"deleteDomain",value:function(e){e&&this.state.domain_ask&&this.state.domain_ask.domainId&&this.props.deleteDomain(this.state.domain_ask.domainId),this.props.closeDialog&&this.props.closeDialog()}},{key:"saveDomain",value:function(e){e&&(e.organisationId=this.props.selected_organisation_id,e.kbId=this.props.selected_knowledgebase_id,this.props.updateDomain(e)),this.setState({open:!1})}},{key:"testDomain",value:function(e){e&&(e.organisationId=this.props.selected_organisation_id,e.kbId=this.props.selected_knowledgebase_id,this.setState({selected_domain:e}),this.props.testDomain(e))}},{key:"isVisible",value:function(){return this.props.selected_organisation_id&&this.props.selected_organisation_id.length>0&&this.props.selected_organisation&&this.props.selected_organisation.length>0&&this.props.selected_knowledgebase_id&&this.props.selected_knowledgebase_id.length>0}},{key:"render",value:function(){var e=this,t=this.props.theme;return Object(ra.jsxs)("div",{children:[Object(ra.jsx)(Ri,{open:this.state.open,title:this.state.title,theme:t,organisation_id:this.props.selected_organisation_id,kb_id:this.props.selected_knowledgebase_id,edge_device_list:this.props.edge_device_list,onSave:function(t){return e.saveDomain(t)},onTest:function(t){return e.testDomain(t)},onUpdate:function(t){return e.onUpdate(t)},onError:function(t,a){return e.props.setError(t,a)},error_title:this.props.error_title,error_msg:this.props.error,domain:this.state.selected_domain}),this.isVisible()&&Object(ra.jsxs)(Ma.a,{style:Ti.pageWidth,children:[Object(ra.jsxs)(Ja.a,{children:[Object(ra.jsx)(Qa.a,{children:Object(ra.jsxs)(Za.a,{className:"table-header",children:[Object(ra.jsx)(Ga.a,{className:"table-header",children:"name"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"path"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"objects"}),Object(ra.jsx)(Ga.a,{className:"table-header",children:"actions"})]})}),Object(ra.jsxs)(Va.a,{style:"light"===t?Ti.tableLight:Ti.tableDark,children:[this.getDomains().map((function(t){return Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:Ti.label,children:t.domainName})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:Ti.label,children:t.basePath})}),Object(ra.jsx)(Ga.a,{children:Object(ra.jsx)("div",{style:Ti.label,children:t.numObjects})}),Object(ra.jsxs)(Ga.a,{children:[Object(ra.jsx)("div",{style:Ti.linkButton,onClick:function(){return e.editDomain(t)},children:Object(ra.jsx)("img",{src:"../images/edit.svg",style:Ti.downloadImage,title:"edit domain",alt:"edit"})}),Object(ra.jsx)("div",{style:Ti.linkButton,onClick:function(){return e.deleteDomainAsk(t)},children:Object(ra.jsx)("img",{src:"../images/delete.svg",style:Ti.downloadImage,title:"remove domain",alt:"remove"})})]})]},t.domainId)})),Object(ra.jsxs)(Za.a,{children:[Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{}),Object(ra.jsx)(Ga.a,{children:this.props.selected_organisation_id.length>0&&this.props.selected_knowledgebase_id.length>0&&Object(ra.jsx)("div",{style:Ti.imageButton,onClick:function(){return e.addNewDomain()},children:Object(ra.jsx)("img",{style:Ti.addImage,src:"../images/add.svg",title:"add new domain",alt:"add new domain"})})})]})]})]}),Object(ra.jsx)(Xa.a,{style:"light"===t?Ti.tableLight:Ti.tableDark,rowsPerPageOptions:[5,10,25],component:"div",count:this.props.domain_list.length,rowsPerPage:this.state.page_size,page:this.state.page,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(t,a){return e.changePage(a)},onChangeRowsPerPage:function(t){return e.changePageSize(t.target.value)}})]})]})}}]),a}(s.Component),Ei=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,selected_organisation_id:e.appReducer.selected_organisation_id,selected_organisation:e.appReducer.selected_organisation,selected_knowledgebase_id:e.appReducer.selected_knowledgebase_id,edge_device_list:e.appReducer.edge_device_list,domain_list:e.appReducer.domain_list,theme:e.appReducer.theme}}),(function(e){return Object(u.b)(ia,e)}))(Ni),Li=a(265),Pi=a.n(Li),Bi={page:{float:"left",minWidth:"1200px"},pageNav:{float:"left",marginTop:"56px",marginRight:"50px",borderRadius:"10px",padding:"5px"},pageContent:{float:"left",marginTop:"10px",minWidth:"700px"},selectedNavItem:{marginLeft:"10px",textAlign:"center",width:"180px",padding:"10px",cursor:"pointer",background:"#62C2D6",color:"#fff",border:"1px solid #666",borderRadius:"2px",marginBottom:"5px"},navItem:{marginLeft:"10px",textAlign:"center",width:"180px",padding:"10px",border:"1px solid #bbb",cursor:"pointer",background:"#f8f8f8",color:"#666",borderRadius:"2px",marginBottom:"5px"},navItemDark:{marginLeft:"10px",textAlign:"center",width:"180px",padding:"10px",border:"1px solid #bbb",cursor:"pointer",background:"#666",color:"#f8f8f8",borderRadius:"2px",marginBottom:"5px"},navItemDisabled:{marginLeft:"10px",textAlign:"center",width:"180px",padding:"10px",border:"1px solid #bbb",background:"#f8f8f8",color:"#e0e0e0",borderRadius:"2px",marginBottom:"5px",cursor:"not-allowed"},navItemDisabledDark:{marginLeft:"10px",textAlign:"center",width:"180px",padding:"10px",border:"1px solid #555",background:"#444",color:"#888",borderRadius:"2px",marginBottom:"5px",cursor:"not-allowed"},organisationSelect:{padding:"5px",marginBottom:"40px"},organisationLabel:{marginTop:"-10px"},knowledgeSelect:{padding:"5px",marginBottom:"50px"},divider:{height:"5px"},lhs:{float:"left",width:"150px",marginTop:"-10px",color:"#aaa"},rhs:{float:"left"},notificationParent:{position:"fixed",left:"4px",right:"1px",bottom:"4px"},notifications:{background:"#fafafa",marginRight:"40px",color:"#333",padding:"16px",zIndex:"101",boxShadow:"0 0 2px 2px",height:"120px",overflowY:"scroll"},notificationsHidden:{position:"fixed",left:"0",right:"0",bottom:"2px",padding:"16px",zIndex:"101"},displayAll:{float:"right",marginRight:"10px"},hideAllImage:{width:"16px"},showAllImage:{width:"16px",marginRight:"-12px"},info:{},infoDate:{display:"inline-block",width:"200px",marginLeft:"20px",fontSize:"0.8em"},infoType:{display:"inline-block",width:"100px",fontSize:"0.9em"},infoText:{display:"inline-block",width:"70%",fontSize:"0.9em"},busy:{display:"block",position:"fixed",left:0,top:0,width:"100%",height:"100%",zIndex:"9999",borderRadius:"10px",opacity:"0.8",backgroundSize:"100px",background:"url('../images/busy.gif') 50% 50% no-repeat rgb(255,255,255)"},busyDark:{display:"block",position:"fixed",left:0,top:0,width:"100%",height:"100%",zIndex:"9999",borderRadius:"10px",opacity:"0.3",backgroundSize:"100px",background:"url('../images/busy.gif') 50% 50% no-repeat rgb(1.0,1.0,1.0,0.10)"}},zi=function(e){Object(it.a)(a,e);var t=Object(rt.a)(a);function a(e){var s;return Object(g.a)(this,a),(s=t.call(this,e)).state={message_callback:null,message:"",message_title:""},s}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.props.setError(e,t),console.log(e,t)}},{key:"componentDidMount",value:function(){if(S.defined(w.getSession())){this.props.getOrganisationList(),a.hasRole(this.props.user,["admin"])||"organisations"!==this.props.selected_tab||this.props.setupManager();var e=a.hasRole(this.props.user,["admin","manager"]),t=a.hasRoleInOrganisation(this.props.user,this.props.selected_organisation_id,["operator"]),s=this,n=this.props.operator_wait_timeout_in_ms&&this.props.operator_wait_timeout_in_ms>=1e3?this.props.operator_wait_timeout_in_ms:1e4;(e||t)&&setInterval((function(){s.refreshOperator(s)}),n),t&&(this.props.html5_notifications&&0!==this.props.html5_notifications.length||this.props.getHtml5Notifications())}else window.location="/#/"}},{key:"refreshOperator",value:function(e){if(e.props.selected_organisation_id.length>0&&e.props.operators&&e.props.operators.length>0){var t,a=[],s=Object(m.a)(e.props.operators);try{for(s.s();!(t=s.n()).done;){var n=t.value;n.operator_ready&&a.push({operatorId:n.id,isTyping:n.is_typing,clientId:n.client_id})}}catch(r){s.e(r)}finally{s.f()}if(a.length>0){var i={sessionId:e.props.session.id,organisationId:e.props.selected_organisation_id,operatorList:a};this.props.sendOperatorMessage("/ops/refresh",i)}}}},{key:"getStyle",value:function(e,t){var a=this.props.theme;return t?"light"===a?Bi.navItemDisabled:Bi.navItemDisabledDark:this.props.selected_tab===e?Bi.selectedNavItem:"light"===a?Bi.navItem:Bi.navItemDark}},{key:"getNotifications",value:function(){if(this.props.notification_list.length>this.props.notification_list_display_size){var e=this.props.notification_list.length;return JSON.parse(JSON.stringify(this.props.notification_list.slice(e-this.props.notification_list_display_size,e))).reverse()}return JSON.parse(JSON.stringify(this.props.notification_list)).reverse()}},{key:"getOrganisationListFiltered",value:function(e,t){if(e&&e.length>0){var a,s=e.toLowerCase(),n=[],i=Object(m.a)(this.props.organisation_list);try{for(i.s();!(a=i.n()).done;){var r=a.value;r.name.toLowerCase().indexOf(s)>=0&&n.push({label:r.name,data:r.id})}}catch(u){i.e(u)}finally{i.f()}t(n)}else{var o,c=[],l=Object(m.a)(this.props.organisation_list);try{for(l.s();!(o=l.n()).done;){var d=o.value;c.push({label:d.name,data:d.id})}}catch(u){l.e(u)}finally{l.f()}t(c)}}},{key:"getKnowledgeBaseListFiltered",value:function(e,t){if(e&&e.length>0){var a,s=e.toLowerCase(),n=[],i=Object(m.a)(this.props.knowledge_base_list);try{for(i.s();!(a=i.n()).done;){var r=a.value;r.name.toLowerCase().indexOf(s)>=0&&n.push({label:r.name,data:r.kbId})}}catch(u){i.e(u)}finally{i.f()}t(n)}else{var o,c=[],l=Object(m.a)(this.props.knowledge_base_list);try{for(l.s();!(o=l.n()).done;){var d=o.value;c.push({label:d.name,data:d.kbId})}}catch(u){l.e(u)}finally{l.f()}t(c)}}},{key:"getEdgeDeviceList",value:function(e,t){if(this.props.edge_device_list)if(e&&e.length>0){var a,s=e.toLowerCase(),n=[],i=Object(m.a)(this.props.edge_device_list);try{for(i.s();!(a=i.n()).done;){var r=a.value;r.name.toLowerCase().indexOf(s)>=0&&n.push({label:r.name,data:r.edgeId})}}catch(u){i.e(u)}finally{i.f()}t(n)}else{var o,c=[],l=Object(m.a)(this.props.edge_device_list);try{for(l.s();!(o=l.n()).done;){var d=o.value;c.push({label:d.name,data:d.edgeId})}}catch(u){l.e(u)}finally{l.f()}t(c)}}},{key:"openDialog",value:function(e,t,a){this.setState({dialog_open:!0,message:e,message_title:t,message_callback:a})}},{key:"closeDialog",value:function(){this.setState({dialog_open:!1,message:"",message_title:"",message_callback:null})}},{key:"connectionError",value:function(e){this.props.setOperatorConnected(!1),this.props.setError("Operator Connection",e)}},{key:"render",value:function(){var e=this,t=a.hasRole(this.props.user,["admin"]),s=a.hasRoleInOrganisation(this.props.user,this.props.selected_organisation_id,["operator"]),n=[];if(this.props.operators){var i,r=Object(m.a)(this.props.operators);try{for(r.s();!(i=r.n()).done;){var o=i.value;o&&o.id&&n.push("/chat/"+o.id)}}catch(l){r.e(l)}finally{r.f()}}var c=this.props.theme;return Object(ra.jsxs)(ot.a,{theme:"light"===c?ht:bt,children:[Object(ra.jsx)(ga.a,{}),this.props.busy&&Object(ra.jsx)("div",{style:"light"===c?Bi.busy:Bi.busyDark}),Object(ra.jsx)(la,{title:"",signed_in:!0}),Object(ra.jsx)(ma,{title:this.props.error_title,theme:c,message:this.props.error,callback:function(){return e.props.closeError()}}),Object(ra.jsx)(Ua,{callback:function(t){e.state.message_callback&&e.state.message_callback(t)},open:this.state.message.length>0,theme:this.props.theme,message:this.state.message,title:this.state.message_title}),Object(ra.jsx)(Pi.a,{url:window.ENV.ws_base,topics:n,ref:function(t){e.clientRef=t},onMessage:function(t){e.props.processOperatorMessage(t)},onConnect:function(){return e.props.setOperatorConnected(!0)},onDisconnect:function(){return e.props.setOperatorConnected(!1)},onError:function(t){return e.connectionError(t)}}),Object(ra.jsxs)("div",{style:Bi.page,children:[Object(ra.jsxs)("div",{style:Bi.pageNav,children:[a.hasRole(this.props.user,["admin"])&&Object(ra.jsx)("div",{style:this.getStyle("organisations",!1),className:"no-select",onClick:function(){return e.props.selectTab("organisations")},children:"organisations"}),a.hasRole(this.props.user,["admin","manager"])&&Object(ra.jsx)("div",{style:this.getStyle("knowledge bases",!1),className:"no-select",onClick:function(){return e.props.selectTab("knowledge bases")},children:"knowledge bases"}),a.hasRole(this.props.user,["admin","manager"])&&Object(ra.jsx)("div",{style:this.getStyle("edge devices",!1),className:"no-select",onClick:function(){return e.props.selectTab("edge devices")},children:"Edge devices"}),a.hasRole(this.props.user,["admin","manager"])&&this.props.edge_device_list&&this.props.edge_device_list.length>0&&Object(ra.jsx)("div",{style:this.getStyle("edge commands",!1),className:"no-select",onClick:function(){return e.props.selectTab("edge commands")},children:"Edge commands"}),a.hasRole(this.props.user,["admin","manager"])&&Object(ra.jsx)("div",{style:this.getStyle("users",!1),className:"no-select",onClick:function(){return e.props.selectTab("users")},children:"user manager"}),Object(ra.jsx)("div",{style:this.getStyle("operator",!this.props.operator_connected||!s),onClick:function(){s&&e.props.selectTab("operator")},className:"no-select",children:"operator"}),a.hasRole(this.props.user,["admin","manager"])&&Object(ra.jsx)("div",{style:this.getStyle("inventory",!1),className:"no-select",onClick:function(){return e.props.selectTab("inventory")},children:"inventory"}),a.hasRole(this.props.user,["admin","manager"])&&Object(ra.jsx)("div",{style:this.getStyle("document sources",!1),className:"no-select",onClick:function(){return e.props.selectTab("document sources")},children:"document sources"}),a.hasRole(this.props.user,["admin","manager"])&&Object(ra.jsx)("div",{style:this.getStyle("documents",!1),className:"no-select",onClick:function(){return e.props.selectTab("documents")},children:"documents"}),a.hasRole(this.props.user,["admin","manager"])&&Object(ra.jsx)("div",{style:this.getStyle("active directory",!1),className:"no-select",onClick:function(){return e.props.selectTab("active directory")},children:"active directory"}),a.hasRole(this.props.user,["admin","manager"])&&Object(ra.jsx)("div",{style:this.getStyle("mind",!1),className:"no-select",onClick:function(){return e.props.selectTab("mind")},children:"the mind"}),a.hasRole(this.props.user,["admin","manager"])&&Object(ra.jsx)("div",{style:this.getStyle("mind-test",!1),className:"no-select",onClick:function(){return e.props.selectTab("mind-test")},children:"test the mind"}),a.hasRole(this.props.user,["admin","manager"])&&Object(ra.jsx)("div",{style:this.getStyle("synonyms",!1),className:"no-select",onClick:function(){return e.props.selectTab("synonyms")},children:"synonyms"}),a.hasRole(this.props.user,["admin","manager"])&&Object(ra.jsx)("div",{style:this.getStyle("semantics"),className:"no-select",onClick:function(){return e.props.selectTab("semantics")},children:"semantics"}),a.hasRole(this.props.user,["admin","manager"])&&Object(ra.jsx)("div",{style:this.getStyle("syn-sets"),className:"no-select",onClick:function(){return e.props.selectTab("syn-sets")},children:"syn-sets"}),a.hasRole(this.props.user,["admin","manager"])&&Object(ra.jsx)("div",{style:this.getStyle("reports",!1),className:"no-select",onClick:function(){return e.props.selectTab("reports")},children:"reports"}),a.hasRole(this.props.user,["admin"])&&Object(ra.jsx)("div",{style:this.getStyle("logs",!1),onClick:function(){return e.props.selectTab("logs")},children:"logs"})]}),Object(ra.jsxs)("div",{style:Bi.pageContent,children:["organisations"!==this.props.selected_tab&&"os"!==this.props.selected_tab&&"logs"!==this.props.selected_tab&&"operator"!==this.props.selected_tab&&"license"!==this.props.selected_tab&&t&&Object(ra.jsxs)("div",{style:Bi.organisationSelect,children:[Object(ra.jsx)("div",{style:Bi.lhs,children:"organisation"}),Object(ra.jsx)("div",{style:Bi.rhs,children:Object(ra.jsx)(Ka,{theme:c,label:"organisation",value:this.props.selected_organisation,onFilter:function(t,a){return e.getOrganisationListFiltered(t,a)},minTextSize:1,onSelect:function(t,a){return e.props.selectOrganisation(t,a)}})})]}),"organisations"!==this.props.selected_tab&&"os"!==this.props.selected_tab&&"logs"!==this.props.selected_tab&&"license"!==this.props.selected_tab&&"operator"!==this.props.selected_tab&&!t&&Object(ra.jsxs)("div",{style:Bi.organisationSelect,children:[Object(ra.jsx)("div",{style:Bi.lhs,children:"organisation"}),Object(ra.jsx)("div",{style:Bi.rhs,children:Object(ra.jsx)("div",{style:Bi.organisationLabel,children:this.props.selected_organisation})})]}),"organisations"!==this.props.selected_tab&&"os"!==this.props.selected_tab&&"users"!==this.props.selected_tab&&"operator"!==this.props.selected_tab&&"license"!==this.props.selected_tab&&"knowledge bases"!==this.props.selected_tab&&"logs"!==this.props.selected_tab&&"edge devices"!==this.props.selected_tab&&"edge commands"!==this.props.selected_tab&&Object(ra.jsxs)("div",{style:Bi.knowledgeSelect,children:[Object(ra.jsx)("div",{style:Bi.lhs,children:"knowledge base"}),Object(ra.jsx)("div",{style:Bi.rhs,children:Object(ra.jsx)(Ka,{label:"knowledge base",theme:c,value:this.props.selected_knowledgebase,onFilter:function(t,a){return e.getKnowledgeBaseListFiltered(t,a)},minTextSize:1,onSelect:function(t,a){e.props.selectKnowledgeBase(t,a)}})})]}),"edge commands"===this.props.selected_tab&&Object(ra.jsxs)("div",{style:Bi.knowledgeSelect,children:[Object(ra.jsx)("div",{style:Bi.lhs,children:"edge device"}),Object(ra.jsx)("div",{style:Bi.rhs,children:Object(ra.jsx)(Ka,{label:"edge device",theme:c,value:this.props.selected_edge_device,onFilter:function(t,a){return e.getEdgeDeviceList(t,a)},minTextSize:1,onSelect:function(t,a){e.props.selectEdgeDevice(t,a)}})})]}),"organisations"===this.props.selected_tab&&Object(ra.jsx)(is,{openDialog:function(t,a,s){return e.openDialog(t,a,s)},closeDialog:function(){return e.closeDialog()}}),"knowledge bases"===this.props.selected_tab&&Object(ra.jsx)(Os,{openDialog:function(t,a,s){return e.openDialog(t,a,s)},closeDialog:function(){return e.closeDialog()}}),"edge devices"===this.props.selected_tab&&Object(ra.jsx)(Ss,{openDialog:function(t,a,s){return e.openDialog(t,a,s)},closeDialog:function(){return e.closeDialog()}}),"edge commands"===this.props.selected_tab&&Object(ra.jsx)(Rs,{openDialog:function(t,a,s){return e.openDialog(t,a,s)},closeDialog:function(){return e.closeDialog()}}),"users"===this.props.selected_tab&&Object(ra.jsx)(ds,{openDialog:function(t,a,s){return e.openDialog(t,a,s)},closeDialog:function(){return e.closeDialog()}}),"operator"===this.props.selected_tab&&Object(ra.jsx)(Ci,{openDialog:function(t,a,s){return e.openDialog(t,a,s)},closeDialog:function(){return e.closeDialog()}}),"inventory"===this.props.selected_tab&&Object(ra.jsx)(Ns,{openDialog:function(t,a,s){return e.openDialog(t,a,s)},closeDialog:function(){return e.closeDialog()}}),"document sources"===this.props.selected_tab&&Object(ra.jsx)(vn,{openDialog:function(t,a,s){return e.openDialog(t,a,s)},closeDialog:function(){return e.closeDialog()}}),"documents"===this.props.selected_tab&&Object(ra.jsx)(On,{openDialog:function(t,a,s){return e.openDialog(t,a,s)},closeDialog:function(){return e.closeDialog()}}),"active directory"===this.props.selected_tab&&Object(ra.jsx)(Ei,{openDialog:function(t,a,s){return e.openDialog(t,a,s)},closeDialog:function(){return e.closeDialog()}}),"mind"===this.props.selected_tab&&Object(ra.jsx)(Tn,{openDialog:function(t,a,s){return e.openDialog(t,a,s)},closeDialog:function(){return e.closeDialog()}}),"mind-test"===this.props.selected_tab&&Object(ra.jsx)(An,{openDialog:function(t,a,s){return e.openDialog(t,a,s)},closeDialog:function(){return e.closeDialog()}}),"synonyms"===this.props.selected_tab&&Object(ra.jsx)(Mn,{openDialog:function(t,a,s){return e.openDialog(t,a,s)},closeDialog:function(){return e.closeDialog()}}),"semantics"===this.props.selected_tab&&Object(ra.jsx)(Jn,{openDialog:function(t,a,s){return e.openDialog(t,a,s)},closeDialog:function(){return e.closeDialog()}}),"syn-sets"===this.props.selected_tab&&Object(ra.jsx)(Xn,{openDialog:function(t,a,s){return e.openDialog(t,a,s)},closeDialog:function(){return e.closeDialog()}}),"reports"===this.props.selected_tab&&Object(ra.jsx)(li,{openDialog:function(t,a,s){return e.openDialog(t,a,s)},closeDialog:function(){return e.closeDialog()}}),"logs"===this.props.selected_tab&&Object(ra.jsx)(si,{openDialog:function(t,a,s){return e.openDialog(t,a,s)},closeDialog:function(){return e.closeDialog()}}),"invalid"===this.props.selected_tab&&Object(ra.jsx)("div",{children:"You do not have access to this application"})]})]}),this.props.notification_list.length>0&&this.props.show_notifications&&Object(ra.jsxs)("div",{style:Bi.notificationParent,children:[Object(ra.jsx)("div",{style:Bi.displayAll,onClick:function(){e.props.hideNotifications()},children:Object(ra.jsx)("img",{src:"images/double-down-arrow.svg",style:Bi.hideAllImage,alt:"hide all",title:"hide log"})}),Object(ra.jsx)("div",{style:Bi.notifications,children:this.getNotifications().map((function(e){return Object(ra.jsxs)("div",{style:Bi.info,children:[Object(ra.jsxs)("div",{style:Bi.infoDate,children:[e.year,"/",a.pad(e.month),"/",a.pad(e.day),"\xa0",a.pad(e.hour),":",a.pad(e.minute),":",a.pad(parseInt(e.created/1e3)%60),".",a.pad2(e.created%1e3)]}),Object(ra.jsx)("div",{style:Bi.infoType,children:e.service}),Object(ra.jsx)("div",{style:Bi.infoText,children:e.message})]},e.id)}))})]})]})}}],[{key:"getTab",value:function(e){return a.hasRole(e,["admin"])?"organisations":a.hasRole(e,["manager"])?"users":a.hasRole(e,["reporter"])?"reports":"invalid"}},{key:"hasRole",value:function(e,t){if(e&&e.roles){var a,s=Object(m.a)(e.roles);try{for(s.s();!(a=s.n()).done;){var n=a.value;if(t.indexOf(n.role)>=0)return!0}}catch(i){s.e(i)}finally{s.f()}}return!1}},{key:"hasRoleInOrganisation",value:function(e,t,a){if(e&&e.roles){var s,n=Object(m.a)(e.roles);try{for(n.s();!(s=n.n()).done;){var i=s.value;if(i.organisationId===t&&a.indexOf(i.role)>=0)return!0}}catch(r){n.e(r)}finally{n.f()}}return!1}},{key:"canEdit",value:function(e,t,s){return!!t||!a.hasRole(e,["admin"])&&s}},{key:"canDelete",value:function(e,t,s,n){return e.email!==t.email&&(!!s||!a.hasRole(e,["admin"])&&n)}},{key:"pad",value:function(e){return(""+e).padStart(2,"0")}},{key:"pad2",value:function(e){return(""+e).padStart(3,"0")}}]),a}(s.Component),Ai=Object(o.b)((function(e){return{error:e.appReducer.error,error_title:e.appReducer.error_title,notification_list:e.appReducer.notification_list,show_notifications:e.appReducer.show_notifications,operator_wait_timeout_in_ms:e.appReducer.operator_wait_timeout_in_ms,notification_list_display_size:e.appReducer.notification_list_display_size,busy:e.appReducer.busy,theme:e.appReducer.theme,user:e.appReducer.user,selected_tab:e.appReducer.selected_tab,session:e.appReducer.session,operator_connected:e.appReducer.operator_connected,operators:e.appReducer.operators,organisation_list:e.appReducer.organisation_list,knowledge_base_list:e.appReducer.knowledge_base_list,html5_notifications:e.appReducer.html5_notifications,selected_organisation:e.appReducer.selected_organisation,selected_organisation_id:e.appReducer.selected_organisation_id,selected_knowledgebase:e.appReducer.selected_knowledgebase,edge_device_list:e.appReducer.edge_device_list,selected_edge_device:e.appReducer.selected_edge_device,selected_edge_device_id:e.appReducer.selected_edge_device_id}}),(function(e){return Object(u.b)(ia,e)}))(zi);a(551);var Ui=function(){var e={appReducer:at},t=[p.a,st],a=[],s=Object(u.c)(Object(d.a)(Object(d.a)({},e),{},{routing:b.routerReducer}));return Object(u.e)(s,y(),u.d.apply(void 0,[u.a.apply(void 0,t)].concat(a)))}();Ui.subscribe((function(){_(Ui.getState())})),r.a.render(Object(ra.jsx)(o.a,{store:Ui,children:Object(ra.jsx)("div",{children:Object(ra.jsx)(c.a,{basename:"/",children:Object(ra.jsxs)("div",{children:[Object(ra.jsx)(l.a,{exact:!0,path:"/",component:xa}),Object(ra.jsx)(l.a,{exact:!0,path:"/home",component:Ai}),Object(ra.jsx)(l.a,{exact:!0,path:"/search",component:Aa}),Object(ra.jsx)(l.a,{path:"/reset-password-request",component:_a}),Object(ra.jsx)(l.a,{path:"/reset-password-response",component:Sa}),Object(ra.jsx)(l.a,{exact:!0,path:"/foss-license",component:Ra}),Object(ra.jsx)(l.a,{exact:!0,path:"/license-agreement",component:Na})]})})})}),document.getElementById("content"))}},[[555,1,2]]]);
//# sourceMappingURL=main.f8d64375.chunk.js.map